<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>A Design Scheme for Personal Cloud</title>
    <url>/2021/10/27/a-design-scheme-for-personal-cloud.html</url>
    <content><![CDATA[<blockquote>
<p>21 century is a data world, we generate data, we consume data, and we protect data. Want to do more? Maybe you can follow this article.</p>
</blockquote>
<span id="more"></span>

<h1 id="Why"><a href="#Why" class="headerlink" title="Why"></a>Why</h1><p>Nowdays, our personal data is growing bigger and bigger. Photos, videos, documents, all this kind of files fill in the computer, smart phone or external drive.</p>
<p>I canâ€™t say they are all important for me, but some does mean a lot and I donâ€™t want to lose them.</p>
<p>Meanwhile, our parents also generate many data exeryday, but they donâ€™t even have any backup, if their mobile phone gets broken, they will lose everything.</p>
<p>Whatâ€™s worse, the public cloud service is too expensive for normal people, you knwo we just want to store some photos, not something like the password of nuclear bomb. And the privacy is also a disputed issue.</p>
<p>Then I came up with the idea of building up a personal cloud service, it should be cheap and kind of reliable. Also, it would be better if we can use open source softwares.</p>
<p>I hope this article could help you.</p>
<h1 id="Scheme"><a href="#Scheme" class="headerlink" title="Scheme"></a>Scheme</h1><p>As a cloud, it must can be accessed remotely, thus we need a public IP address. And of course, to keep private, https will be considered, then a domain is needed as well.</p>
<p>To control the budget, itâ€™s not acceptable to purchase a VPS with large storage capacity, a NAS would be a good choice. But the retail NAS is also too expensive, so I will make up one by myself, after all, itâ€™s just a computer basically. Because the NAS is in the private network, some technology will be used to make it accessible.</p>
<p>After days of investigation, I got the following list:</p>
<p><strong>Hardware</strong></p>
<ul>
<li>CPU: Intel J3455</li>
<li>Motherboard: ASRock J3455-ITX (CPU included)</li>
<li>Memory: SK Hynix 8GB DDR3L dual channel</li>
<li>System drive: Intel 520 SSD 120GB</li>
<li>Data drive: WD Purple WD40EJRX 4TB * 2</li>
<li>Case: U-NAS NSC-201</li>
</ul>
<p><strong>Software</strong></p>
<ul>
<li>OS: Ubuntu Server 20.04</li>
<li>Cloud Service: Nextcloud</li>
<li>Reverse proxy: FRP &amp; Nginx</li>
<li>Filesystem: ZFS</li>
</ul>
<p><strong>VPS</strong></p>
<ul>
<li>Aliyun Simple Application Server</li>
</ul>
<p>The whole scheme is like this:</p>
<img src="/2021/10/27/a-design-scheme-for-personal-cloud/personal_cloud.png" class="">

<h1 id="Storage"><a href="#Storage" class="headerlink" title="Storage"></a>Storage</h1><p>Though budget matters, but we donâ€™t want to lose data anyway. And the most dangerous situation is hardware broken, especially hard driver failure. To mitigate this condition, we will use a software RAID1, and itâ€™s achieved by a mirror pool of ZFS.</p>
<p>To make use of ZFS on Ubuntu, we need to install it first:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install zfsutils-linux</span><br></pre></td></tr></table></figure>

<p>Then, suppose the data driver is <code>/dev/sdb</code> and <code>/dev/sdc</code>, to create a mirror pool named <code>storage</code>:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo zpool create storage mirror /dev/sdb /dev/sdc</span><br><span class="line">sudo zfs set mountpoint=none storage</span><br><span class="line">sudo zpool status</span><br></pre></td></tr></table></figure>

<p>Finally we create a ZFS filesystem for Nextcloud and mount it to <code>/var/www/nextcloud</code>:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo zfs create storage/nextcloud</span><br><span class="line">sudo zfs set mountpoint=/var/www/nextcloud storage/nextcloud</span><br></pre></td></tr></table></figure>

<h1 id="Nextcloud"><a href="#Nextcloud" class="headerlink" title="Nextcloud"></a>Nextcloud</h1><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>We will install Nextcloud on Ubuntu Server 20.04.</p>
<ol>
<li><p>Install packages</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install apache2 mariadb-server libapache2-mod-php7.4 php7.4-gd php7.4-mysql php7.4-curl php7.4-mbstring php7.4-intl php7.4-gmp php7.4-bcmath php-imagick php7.4-xml php7.4-zip</span><br></pre></td></tr></table></figure>
</li>
<li><p>Install Nextcloud</p>
<p>Goto <a href="https://nextcloud.com/install/">Nextcloud</a>, select <strong>Download for server</strong> and copy the link, then download and unpack the tarball, copy the <code>nextcloud</code> directory to webroot. We need to change the owner as well to make Apache be able to modify the files in it.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget https://download.nextcloud.com/server/releases/nextcloud-22.2.0.tar.bz2</span><br><span class="line">tar -xf nextcloud-22.2.0.tar.bz2</span><br><span class="line">sudo cp -r nextcloud /var/www/</span><br><span class="line">sudo chown -R www-data:www-data /var/www/nextcloud/</span><br></pre></td></tr></table></figure>
</li>
<li><p>Configure database</p>
<p>We will create a user as well as a database for Nextcloud. Please replace the <strong>username</strong> and <strong>password</strong> to the one you want.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo mysql</span><br><span class="line"></span><br><span class="line">CREATE USER &#x27;username&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;password&#x27;;</span><br><span class="line">CREATE DATABASE IF NOT EXISTS nextcloud CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;</span><br><span class="line">GRANT ALL PRIVILEGES ON nextcloud.* TO &#x27;username&#x27;@&#x27;localhost&#x27;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"></span><br><span class="line">quit;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Configure Apache</p>
<p>For security reasons, <code>https</code> will be used, thus we need to generate a self-signed certificate firstly.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">openssl req -newkey rsa:4096 -x509 -sha256 -days 365 -nodes -out nextcloud.crt -keyout nextcloud.key</span><br><span class="line">sudo mv nextcloud.crt /etc/ssl/certs/</span><br><span class="line">sudo mv nextcloud.key /etc/ssl/private/</span><br></pre></td></tr></table></figure>

<p>Then create a new Apache config file for Nextcloud: <code>/etc/apache2/sites-available/nextcloud.conf</code>, with the following content:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;IfModule mod_ssl.c&gt;</span><br><span class="line">        &lt;VirtualHost _default_:443&gt;</span><br><span class="line">                ServerName nextcloud.colorfulshark.net</span><br><span class="line"></span><br><span class="line">                &lt;IfModule mod_headers.c&gt;</span><br><span class="line">                        Header always set Strict-Transport-Security &quot;max-age=15552000; includeSubDomains&quot;</span><br><span class="line">                &lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">                DocumentRoot /var/www/nextcloud</span><br><span class="line"></span><br><span class="line">                ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log</span><br><span class="line">                CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined</span><br><span class="line"></span><br><span class="line">                SSLEngine on</span><br><span class="line"></span><br><span class="line">                SSLCertificateFile      /etc/ssl/certs/nextcloud.crt</span><br><span class="line">                SSLCertificateKeyFile /etc/ssl/private/nextcloud.key</span><br><span class="line"></span><br><span class="line">                &lt;FilesMatch &quot;\.(cgi|shtml|phtml|php)$&quot;&gt;</span><br><span class="line">                                SSLOptions +StdEnvVars</span><br><span class="line">                &lt;/FilesMatch&gt;</span><br><span class="line">                &lt;Directory /usr/lib/cgi-bin&gt;</span><br><span class="line">                                SSLOptions +StdEnvVars</span><br><span class="line">                &lt;/Directory&gt;</span><br><span class="line">        &lt;/VirtualHost&gt;</span><br><span class="line">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure>

<p>Enable necessary Apache modules</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo a2enmod rewrite headers env dir mime ssl</span><br></pre></td></tr></table></figure>

<p>Enable Nextcloud website</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo a2ensite nextcloud.conf</span><br></pre></td></tr></table></figure>

<p>Reload Apache service</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo systemctl restart apache2</span><br></pre></td></tr></table></figure>
</li>
<li><p>Configure Nextcloud</p>
<p>Now we can access the Nextcloud website in Chrome, because we are using self-signed certificate, the browser may refuse to open the website, we can simply type <strong>thisisunsafe</strong> on the blocked page.ğŸ˜‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">https://10.0.0.10</span><br></pre></td></tr></table></figure>

<p>On this page, we need to input following information:</p>
<ul>
<li>admin username</li>
<li>admin password</li>
<li>data folder</li>
<li>mysql username</li>
<li>mysql password</li>
<li>mysql database name</li>
</ul>
<p>Finally, a welcome page will show up.</p>
</li>
</ol>
<h2 id="Optimization"><a href="#Optimization" class="headerlink" title="Optimization"></a>Optimization</h2><ol>
<li><p>Increate PHP memory limitation</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/php/7.4/apache2/php.ini</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">memory_limit = 512M</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt;</span></span><br><span class="line">sudo systemctl restart apache2</span><br></pre></td></tr></table></figure>
</li>
<li><p>Disable PHP <code>output_buffering</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/php/7.4/apache2/php.ini</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">output_buffering = Off</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt;</span></span><br><span class="line">sudo systemctl restart apache2</span><br></pre></td></tr></table></figure>
</li>
<li><p>Set <code>AllowOverride</code> to <code>All</code> for <code>/var/www/</code> to protect data</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/apache2/apache2.conf</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">&lt;Directory /var/www/&gt;</span><br><span class="line">        Options Indexes FollowSymLinks</span><br><span class="line">        AllowOverride All</span><br><span class="line">        Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt;</span></span><br><span class="line">sudo systemctl restart apache2</span><br></pre></td></tr></table></figure>
</li>
<li><p>Enable HTTP Strict Transport Security</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">VirtualHost</span> *<span class="attr">:443</span>&gt;</span></span><br><span class="line">  ServerName cloud.nextcloud.com</span><br><span class="line">    <span class="tag">&lt;<span class="name">IfModule</span> <span class="attr">mod_headers.c</span>&gt;</span></span><br><span class="line">      Header always set Strict-Transport-Security &quot;max-age=15552000; includeSubDomains&quot;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">IfModule</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">VirtualHost</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Enable SVG support for php-imagick</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install imagemagick</span><br></pre></td></tr></table></figure>
</li>
<li><p>Enable Memory caching</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install php-apcu</span><br><span class="line">sudo vim /var/www/nextcloud/config/config.php</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">&#x27;memcache.local&#x27; =&gt; &#x27;\OC\Memcache\APCu&#x27;,</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt;</span></span><br><span class="line">sudo bash -c &quot;echo &#x27;apc.enable_cli = 1&#x27; &gt; /etc/php/7.4/cli/conf.d/enable-apc-cli.ini&quot;</span><br><span class="line">sudo systemctl restart apache2</span><br></pre></td></tr></table></figure>
</li>
<li><p>Setup phone region</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /var/www/nextcloud/config/config.php</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">&#x27;default_phone_region&#x27; =&gt; &#x27;CN&#x27;,</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Pretty URLs</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /var/www/nextcloud/config/config.php</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">&#x27;overwrite.cli.url&#x27; =&gt; &#x27;https://nextcloud.colorfulshark.net&#x27;,</span><br><span class="line">&#x27;htaccess.RewriteBase&#x27; =&gt; &#x27;/&#x27;,</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt;</span></span><br><span class="line">sudo -u www-data php /var/www/nextcloud/occ maintenance:update:htaccess</span><br></pre></td></tr></table></figure>
</li>
<li><p>Setup Cron background job</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo crontab -u www-data -e</span><br><span class="line"></span><br><span class="line">*/5  *  *  *  * php -f /var/www/nextcloud/cron.php</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="Network"><a href="#Network" class="headerlink" title="Network"></a>Network</h1><p>This would be an interesting part, because we are going to make the Nextcloud be accessible remotely. </p>
<h2 id="Domain"><a href="#Domain" class="headerlink" title="Domain"></a>Domain</h2><p>To make use of https, we need a domain and set a <code>A</code> record to the IP address of VPS. Suppose the domain is <code>nextcloud.colorfulshark.net</code>.</p>
<p>A certificate is also needed  for https usage,  it can be registered from Letsencrypt.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo su &amp;&amp; cd</span><br><span class="line">apt install openssl cron socat curl</span><br><span class="line">curl https://get.acme.sh | sh</span><br><span class="line">source ~/.bashrc</span><br><span class="line">~/.acme.sh/acme.sh --register-account -m colorfulshark@gmail.com</span><br><span class="line"></span><br><span class="line">domain=nextcloud.colorfulshark.net</span><br><span class="line">cert=/usr/local/etc/certs/nextcloud.colorfulshark.net.cert</span><br><span class="line">key=/usr/local/etc/certs/nextcloud.colorfulshark.net.key</span><br><span class="line">~/.acme.sh/acme.sh --issue -d $domain --standalone --keylength ec-256 --force</span><br><span class="line">~/.acme.sh/acme.sh --installcert -d $domain --ecc --fullchain-file $cert --key-file $key</span><br></pre></td></tr></table></figure>

<h2 id="FRP"><a href="#FRP" class="headerlink" title="FRP"></a>FRP</h2><p>Because the NAS is in internal network, to access it remotely, we need to setup reverse proxy for Nextcloud web service by using <code>FRP</code>.</p>
<p><strong>VPS side</strong>: <code>/etc/frp/nextcloud.ini</code></p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">bind_addr</span> = <span class="number">0.0</span>.<span class="number">0.0</span></span><br><span class="line"><span class="attr">proxy_bind_addr</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">bind_port</span> = <span class="number">7000</span></span><br><span class="line"><span class="attr">vhost_https_port</span> = <span class="number">7443</span></span><br><span class="line"><span class="attr">token</span> = password</span><br><span class="line"><span class="attr">tls_enable</span> = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p><strong>NAS side</strong>: <code>/etc/frp/nextcloud.ini</code></p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">server_addr</span> = nextcloud.colorfulshark.net</span><br><span class="line"><span class="attr">server_port</span> = <span class="number">7000</span></span><br><span class="line"><span class="attr">token</span> = password</span><br><span class="line"><span class="attr">tls_only</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">tls_enable</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="section">[nextcloud]</span></span><br><span class="line"><span class="attr">type</span> = https</span><br><span class="line"><span class="attr">local_port</span> = <span class="number">443</span></span><br><span class="line"><span class="attr">custom_domains</span> = nextcloud.colorfulshark.net</span><br></pre></td></tr></table></figure>

<p>Then accessing <code>localhost:7443</code> on VPS is equal to accessing <code>localhost:443</code> on NAS.</p>
<h2 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h2><p>Though FRP supports TLS for https reverse proxy, Nginx would be better. Because there may exist many web services on VPS and they all use https. By using Nginx, we can proxy pass these services by identifying domain and path.</p>
<p><strong>VPS side</strong></p>
<p><code>/etc/nginx/sites-available/nextcloud.colorfulshark.net</code></p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">443</span> ssl;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">ssl_certificate</span>       /usr/local/etc/certs/nextcloud.colorfulshark.net.cert;</span><br><span class="line">  <span class="attribute">ssl_certificate_key</span>   /usr/local/etc/certs/nextcloud.colorfulshark.net.key;</span><br><span class="line">  <span class="attribute">ssl_session_timeout</span> <span class="number">1d</span>;</span><br><span class="line">  <span class="attribute">ssl_session_cache</span> shared:MozSSL:<span class="number">10m</span>;</span><br><span class="line">  <span class="attribute">ssl_session_tickets</span> <span class="literal">off</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">ssl_protocols</span>         TLSv1.<span class="number">3</span>;</span><br><span class="line">  <span class="attribute">ssl_ciphers</span>           ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;</span><br><span class="line">  <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">off</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">server_name</span>           nextcloud.colorfulshark.net;</span><br><span class="line"></span><br><span class="line">  <span class="section">location</span> / &#123;</span><br><span class="line">    <span class="attribute">proxy_ssl_server_name</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">proxy_ssl_name</span> <span class="variable">$host</span>;</span><br><span class="line">    <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> Host <span class="variable">$http_host</span>;</span><br><span class="line">    <span class="attribute">proxy_redirect</span> <span class="literal">off</span>;</span><br><span class="line">    <span class="attribute">proxy_pass</span> https://127.0.0.1:7443;</span><br><span class="line">    <span class="attribute">client_max_body_size</span> <span class="number">1024m</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Enable this site and resart Nginx</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo ln -s /etc/nginx/sites-available/nextcloud.colorfulshark.net /etc/nginx/sites-enabled/</span><br><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure>

<h2 id="Nextcloud-1"><a href="#Nextcloud-1" class="headerlink" title="Nextcloud"></a>Nextcloud</h2><p>Yes, we are back to Nextcloud again, because Nextcloud only accepts the request from trusted domains, thus we need to let it trust <code>nextcloud.colorfulshark.net</code> as well.</p>
<p><strong>Nas side</strong></p>
<p><code>/var/www/nextcloud/config/config.php</code></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;trusted_domains&#x27;</span> =&gt;</span><br><span class="line"><span class="keyword">array</span> (</span><br><span class="line">  <span class="number">0</span> =&gt; <span class="string">&#x27;10.0.0.10&#x27;</span>,</span><br><span class="line">  <span class="number">1</span> =&gt; <span class="string">&#x27;nextcloud.colorfulshark.net&#x27;</span>,</span><br><span class="line">),</span><br></pre></td></tr></table></figure>

<p>Now you can assess the Nextcloud through <code>https://nextcloud.colorfulshark.net</code>.</p>
<h1 id="Maintenance"><a href="#Maintenance" class="headerlink" title="Maintenance"></a>Maintenance</h1><ul>
<li><p>Upgrade</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo -u www-data php /var/www/nextcloud/updater/updater.phar</span><br><span class="line">sudo -u www-data php /var/www/nextcloud/occ upgrade</span><br><span class="line">sudo -u www-data php /var/www/nextcloud/occ maintenance:mode --off</span><br></pre></td></tr></table></figure>
</li>
<li><p>Backup database</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">number=$(($(date +%u) % 2))</span><br><span class="line">db_file=&quot;nextcloud_$&#123;number&#125;.sql&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">enter maintenance mode</span></span><br><span class="line">sudo -u www-data php --define /var/www/nextcloud/occ maintenance:mode --on</span><br><span class="line"></span><br><span class="line">mysqldump --single-transaction --default-character-set=utf8mb4 nextcloud &gt; /var/www/nextcloud/backup/$db_file</span><br><span class="line">sync</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">exit</span> maintenance mode</span></span><br><span class="line">sudo -u www-data php --define /var/www/nextcloud/occ maintenance:mode --off</span><br></pre></td></tr></table></figure>

<p>And set a cron job</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo crontab -e</span><br><span class="line"></span><br><span class="line">0 5 * * * /var/www/nextcloud/backup/backup_db.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>Restore database</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo mysql -e &quot;DROP DATABASE nextcloud&quot;</span><br><span class="line">sudo mysql -e &quot;CREATE DATABASE nextcloud CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci&quot;</span><br><span class="line">sudo mysql nextcloud &lt; nextcloud_0.sql</span><br></pre></td></tr></table></figure>
</li>
<li><p>Restore from system reinstallation</p>
<ol>
<li><p>Install all necessary packages</p>
</li>
<li><p>Restore <strong>nextcloud</strong> database</p>
</li>
<li><p>Create database user and grant permission</p>
</li>
<li><p>Finish all configuration and optimization</p>
</li>
</ol>
</li>
</ul>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://docs.nextcloud.com/server/latest/admin_manual/installation/example_ubuntu.html">https://docs.nextcloud.com/server/latest/admin_manual/installation/example_ubuntu.html</a></p>
<p><a href="https://docs.nextcloud.com/server/latest/admin_manual/installation/source_installation.html">https://docs.nextcloud.com/server/latest/admin_manual/installation/source_installation.html</a></p>
<p><a href="https://docs.nextcloud.com/server/latest/admin_manual/configuration_server/occ_command.html">https://docs.nextcloud.com/server/latest/admin_manual/configuration_server/occ_command.html</a></p>
<p><a href="https://docs.nextcloud.com/server/latest/admin_manual/maintenance/backup.html">https://docs.nextcloud.com/server/latest/admin_manual/maintenance/backup.html</a></p>
<p><a href="https://docs.nextcloud.com/server/latest/admin_manual/maintenance/restore.html">https://docs.nextcloud.com/server/latest/admin_manual/maintenance/restore.html</a></p>
]]></content>
      <categories>
        <category>Geek</category>
      </categories>
      <tags>
        <tag>nextcloud</tag>
        <tag>zfs</tag>
        <tag>nginx</tag>
        <tag>nas</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨Ubuntuï¼ˆDebianï¼‰ä¸‹çƒ§å†™å…¨å¿—A33ç³»ç»Ÿé•œåƒ</title>
    <url>/2018/04/30/a33-flash-firmware-under-ubuntu.html</url>
    <content><![CDATA[<blockquote>
<p>æœ€è¿‘ä»ç®±åº•ç¿»å‡ºæ¥ä¸€ä¸ªå¹³æ¿ï¼Œæ˜¯å½“æ—¶å‚åŠ ä¸€ä¸ªåŸ¹è®­æœºæ„èµ ï¼ˆè´­ï¼‰é€ï¼ˆä¹°ï¼‰çš„ã€‚ä¸è¿‡å·¥ä½œä¹‹åå°±æ²¡ç¢°è¿‡äº†ï¼Œé™„æœ‰å®Œæ•´çš„Androidå’ŒLinuxQtçš„æºä»£ç ï¼Œå…¨å¿—A33å¹³å°ï¼Œè¿˜æ˜¯æŒºæœ‰å¯ç©æ€§ï¼Œæ‰€ä»¥å°±æ­å»ºäº†å¼€å‘ç¯å¢ƒï¼Œå› ä¸ºç»™çš„æ–‡æ¡£é‡Œè¯´æ˜¯åœ¨Windowsä¸‹è¿›è¡Œçƒ§å½•ã€‚ä½†æ˜¯æˆ‘ä½¿ç”¨çš„çº¯Linuxç¯å¢ƒï¼Œè€Œä¸”çƒ§å†™ç¨‹åºæ— éå°±æ˜¯å‘ä¸€ä¸ªUSBè®¾å¤‡å†™æ•°æ®ï¼Œä¸å­˜åœ¨ç³»ç»Ÿé™åˆ¶ï¼Œæ‰€ä»¥Googleåˆ°äº†å…¨å¿—çš„ä¸€ä¸ªLinuxå¹³å°çƒ§å½•å·¥å…·â€”â€”LiveSuitã€‚</p>
</blockquote>
<p>å‚è€ƒï¼š<a href="http://linux-sunxi.org/LiveSuit">LiveSuit wiki</a></p>
<span id="more"></span>

<h1 id="è½¯ä»¶ä¸‹è½½"><a href="#è½¯ä»¶ä¸‹è½½" class="headerlink" title="è½¯ä»¶ä¸‹è½½"></a>è½¯ä»¶ä¸‹è½½</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/colorfulshark/sunxi-livesuite.git</span><br><span class="line">cd sunxi-livesuite</span><br></pre></td></tr></table></figure>

<h1 id="ç¼–è¯‘USBé©±åŠ¨"><a href="#ç¼–è¯‘USBé©±åŠ¨" class="headerlink" title="ç¼–è¯‘USBé©±åŠ¨"></a>ç¼–è¯‘USBé©±åŠ¨</h1><p>å…¨å¿—é’ˆå¯¹è‡ªå·±è®¾å¤‡çš„çƒ§å½•æ‰€å¼€å‘USBè®¾å¤‡é©±åŠ¨â€”â€”awusb</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt install dkms</span><br><span class="line">sudo cp -r awusb /usr/src/awdev-0.5</span><br><span class="line">sudo dkms add -m awdev -v 0.5</span><br><span class="line">sudo dkms build -m awdev -v 0.5</span><br><span class="line">sudo dkms install -m awdev -v 0.5</span><br></pre></td></tr></table></figure>

<h1 id="ä¿®æ”¹udevè§„åˆ™"><a href="#ä¿®æ”¹udevè§„åˆ™" class="headerlink" title="ä¿®æ”¹udevè§„åˆ™"></a>ä¿®æ”¹udevè§„åˆ™</h1><p>è¿™ä¸€æ­¥çš„ç›®çš„æ˜¯è®©ä½ èƒ½ä½¿ç”¨æ™®é€šç”¨æˆ·æƒé™æ‰§è¡Œçƒ§å½•å·¥å…·ï¼Œå› ä¸ºè®¾å¤‡èŠ‚ç‚¹é»˜è®¤æ˜¯åªæœ‰rootç”¨æˆ·å¯è®¿é—®çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/udev/rules.d/10-local.rules</span><br><span class="line"></span><br><span class="line"># æ³¨æ„å°†&lt;your group&gt;æ›¿æ¢ä¸ºç”¨æˆ·æ‰€åœ¨çš„ç»„ï¼Œä¸€èˆ¬è·Ÿä½ çš„ç”¨æˆ·åä¸€æ ·</span><br><span class="line">SUBSYSTEM!=&quot;usb_device&quot;, ACTION!=&quot;add&quot;, GOTO=&quot;objdev_rules_end&quot;</span><br><span class="line">#USBasp</span><br><span class="line">ATTRS&#123;idVendor&#125;==&quot;1f3a&quot;, ATTRS&#123;idProduct&#125;==&quot;efe8&quot;, GROUP=&quot;&lt;your group&gt;&quot;,</span><br><span class="line">MODE=&quot;0666&quot;</span><br><span class="line">LABEL=&quot;objdev_rules_end&quot;</span><br><span class="line"></span><br><span class="line"># é‡å¯udevæœåŠ¡</span><br><span class="line"># sysvinit:</span><br><span class="line">sudo service udev restart</span><br><span class="line"></span><br><span class="line"># systemd</span><br><span class="line">sudo systemctl restart udev.service</span><br></pre></td></tr></table></figure>

<h1 id="çƒ§å½•é•œåƒ"><a href="#çƒ§å½•é•œåƒ" class="headerlink" title="çƒ§å½•é•œåƒ"></a>çƒ§å½•é•œåƒ</h1><p>é¦–å…ˆè¿›å…¥åˆšæ‰å…‹éš†çš„æºç çš„æ ¹ç›®å½•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./LiveSuit.sh</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°çƒ§å½•å·¥å…·å·²ç»å¯åŠ¨</p>
<img src="/2018/04/30/a33-flash-firmware-under-ubuntu/livesuit-start.png" class="" title="livesuit start up">

<p>çƒ§å½•çš„æ–¹å¼è½¯ä»¶é‡Œé¢å·²ç»ä»‹ç»ï¼Œä½†å¦‚æœä½ çš„è®¾å¤‡æœ‰reseté”®çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼ï¼Œå› ä¸ºæˆ‘çš„è®¾å¤‡åœ¨LinuxQtç¯å¢ƒä¸‹ç”¨ç”µæºé”®æ˜¯å…³ä¸äº†æœºçš„ï¼Œæ‰€ä»¥åªèƒ½è¿™æ ·ã€‚</p>
<ol>
<li>æ‰“å¼€çƒ§å½•å·¥å…·</li>
<li>å°†è®¾å¤‡ä¸ç”µè„‘è¿æ¥</li>
<li>æŒ‰ä½éŸ³é‡é”®ï¼Œç„¶åæŒ‰ä¸€ä¸‹å¤ä½é”®ï¼Œå¹¶è¿ç»­çŸ­æŒ‰å‡ æ¬¡ç”µæºé”®</li>
<li>å¼€å§‹çƒ§å½•</li>
</ol>
<img src="/2018/04/30/a33-flash-firmware-under-ubuntu/livesuit-ready.png" class="" title="livesuit ready to flash">

<img src="/2018/04/30/a33-flash-firmware-under-ubuntu/livesuit-flashing.png" class="" title="livesuit is flashing">

<img src="/2018/04/30/a33-flash-firmware-under-ubuntu/livesuit-finish.png" class="" title="livesuit finish flashing">

<img src="/2018/04/30/a33-flash-firmware-under-ubuntu/fspad-board.png" class="" title="fspad board">
]]></content>
      <categories>
        <category>Embedded</category>
      </categories>
      <tags>
        <tag>å…¨å¿—</tag>
        <tag>a33</tag>
        <tag>çƒ§å†™</tag>
        <tag>ubuntu</tag>
        <tag>debian</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸å°ç°ç°çš„æ‹çˆ±å®è·µ</title>
    <url>/2021/02/15/best-practice-of-loving-with-zyh.html</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="978f251e9063ae8d9031fa94bdba63437bfbbfb6509c428a0a659ae6d3b9ee06">01a8a38a1635bd5785056b4766e32e24343196b355268e37381669ec56d40bb5d5ac269d133b50b4c0fdf92efe32fca7807be4f4f2d1ee6f318a9e0f5e9a338cf12da53c95b8b833a335b35c91f42d7f2a1941390e3b1b3c143694e2eece185a115e4f604b2e6366b64e49485746a28b56b651ed1d0954cc6ab2ac80b02323ba9700acb25726625dcd3b3a4d92ff057e84d220c6f4108a90eb737f1bda3d65466e63b5c1679258eb74b8c3f192da92ecec5d5dbc8f00dc3a9f56f11f0a71186c952feae7cc733538d80dd94e9756ae12db53d96df18d74e9eb79fdcbfb9e9183e78e1319e9a6f76fa6918e0dacbae5e57371c470af11a46f41ac2c41744a87ca85af37f6e1528d4d8955e958de757b1a6de8cf608fbb9ead798bd29bc3f14e431cca9c5f5973a6cf1affa3893718e68456189d9461d5a3ed8985535c0be43fe8bf7f23c8de5bccf8a6050981f1a7e6aa0b957cb7dc5eb871c7329a06d80c1d6da84b1ab53cf975b98444e57087c47014c2b2c77535ea970f02084a928ddcf418753457be76ce8c58f1500771207cf6342b28b7d760bdad496daeedaabc1e186f22c8fcb84883ac5533ccb328f3868fdd716fc227a818611b4a52e1368b89e4c7b48a7c56825cec3309dbc08cc3a57c476aeb930348a2fdff40bf28e0fb208b3b14eedd37cbf2f0449ed05263ca57b3c683b5d46ec5be903018e5de2cac2472660f3968402f06cf6bb42f5057a9abcc5db172f84be66c22f725300e93f7bc003124b9bb89beb61652b29d99aa5e6c436d265b2c9766296e2144d66cb582ff16e54166b21d617e141f2523b5ce3cfd642b846dadd09306c0294ac11162e1f388717bc5c45594971b60863d14987aa9069f63cea9e0092b091ec56360de081f49326895585d16ac032c55583dfaa44046c1f65a19eb2128924b9cd9da7ce17d332254c63b8f34b87ce7df9f624cf6b18e622dc362523980531e4f65912acb544d2463bd2e7b9483520d20b915613308187080def09d89df5d3846791248a67aceb6670472245b707038653b11dabff1f19aae2081fb553afe6f9101bc7b699a22d3ec25e3bede12dc32e695aa39fa387f62f1182910ee4881cb1cf465637ff64d45c60d6552abffb80b8f0200a03f1ce9e551c029e53a0c9e622a7ddcfe52363695dad83c724edc28206fe68b97195a5ce032acc0cef5ce46a1bc4e0eb09a7d6bb04fe565b9c21781f8086d8c53b832947555f6804f8d6dfccec040d5063ebb87c52fdb53995de42f631d4ceada5f36c7354e042ffb4ed09b7829092b35b356d90beae3046f828dd5baf4a8fcc136ede806bbd3e9330b76b06f2aca46db7997188424edbbb4901e81347319989547899331e3fb264d2bfddc770c16973c948c45e68ca9389681bc33a2a61cab113d9aa9a5596e647ea7f1458104a6a0f042b90146b80fc6ab6a4cd91f3d058646c5de4b46b352e0b5642978184a453ece4af11756606238323aca106fa093469b2c8a784c6721d1e67ac631ba13f67c44b1a09782488e8b11deb4ddda3ea694446d9e9d57c8f653cf4209bbc96d7bbe4563588db5f338b3acfacca8f532101fe176e788386835f9f8d6b014a71a8ba61aad46ca618c1a9c9845d8bebe6b4993ea9f845395c9de004fff5c9d9feadb187bddd49e5c0b7f7ddfdbb4a0f7e44e02ccf8363c9671f9deffe70fd8feb75a364ab2f6b83484d930ab9110a2511ecf0f03d7b005bd73a9c08d62637fd5f3cb5c6452137b1ae2731f39d076d7339987a9a921e50b6e28d9f5324d53be450f8354489d548f4451cfd3ad6f3eaa2fc5fcc1575772013c7eae7fe12f2a069b0ae0c382b3940f2ea88542d34d49ccfc2d15cbbac8129d9b7be44e810da35d3388b5fa660905da4f5a8066dcff7bf82f0719ec56ed95da29de7bfa24fcad06499e99969c52c5ded50956097909c4946692bbf3baab7a12c2b32a4f373f72f8d83243e5bcb2bf80309c01066c0872fe2d9a99c6062654d1c9db1ee24c6ae08dab0baa440c12084610c565d66bfe3fb792fc6f53ab9c7c353f816d22e3282bc0f2a546026208f84d4a2178ab4035e598d52e46618282798cc9ba182c97703068114b42e8f6cf4725a177cdc7008756b87681ffaf6bdad0dfaed872b7d4dd136b560a9e82802eaaa1285ed7aefda56efe0f3bb86fe2d1d0bcd49e979ca136a29130ef45310145915fec2ee1ae4d3924d431458959af83f5510c86b28194c85c3958f8687ee44c5fc41acc1f5ad09e7d844d800ac01c923dc7f1b9bfbadc017f7d04ff015b6b65f2261463b42b9f803dd83bfc6283dcf469acb6abef759067eebe5514c4387ae77ec598ea49cb6ebea3762bf02ca70c7e7d4c1383ac02b16774db8d981fd594af338ba8128aa3ba741a1437fd1adaea61e9b467a49702013cfc2e2649fa32e470c399065f9ded05ecf16b54268b68d396234abc24bf83bfed2d6c80545e243c1dc7cbce7b1a9d34a59cab2058c5ac0d82e4c814210b2efef36ceda20f7ac322ee32dc21474a0c856338ca5757b3baf0a0629775f8433455c145302ccdac82be18c5ed147cb82c183a9b510e4c536da95695f054652904772f3fd4f8a20abf331a2ac8612bc629e0b7d8bb5930e647eddebdc4d6f1472971add4b979f99d75b886b6d48c9f29422e13c5375ca5a3de91dd8d8621d9dde639045d5ab37e7e61276f8c88c7b25c2385e63af2731c2bf89c4c71bd6eeacb9d99d1ccd164a7ccd0485a3dbe93b1ddd6641b9402fe1d2892ede2b014e2942c0f6b7776e2d0b7717bf3618ab386df2d8dd00575c8582c397eb1a2ed34cf6668c2f4fce8ef539dd3ac12ac12de60f5911b65722232c53c42157c1e83887041c08da16c828a6655c125af51c4b4bdfa707dab2b9ff2c367e4339842caa2f7ffe17758dfd85577b78e5dff3c3789f09b8b187728ca5ea571eb6c42d87f4aae440510bb1d7e09243d7272d5c43def146edff23787463506df8231856c1304ff7e5b27d332d45c58db1a72e38bea9582c96e0dae65fbf2ad68de0b82331ab9205156c341a4a03f39ce57aa395fabe76701346723c6192e1cc1a271449d78fac0db9d0c256e51473b1b81c81eb2e5cba61c60323e810482b7442ae10a541bfc2bb5523f63dd9f4f43e7ffba19e60907b49a93414d153898eccf43d7fd1638439500cec42fe46df0b40d36ee41c9dd9d1bf3b4c8f13e8d5083e64e5a33af183a5a50926056eabc45c2f960e1b298fa93bfc7d7ce290cde140490e37dc1cc9c8cf051fef78bf3a658f1f328ecbcfa40a07075e7e80eeddfd8173b4e00b5151f2530f7a1233cd7491b56e8a4aaa24ea3bf316f719f24340f56a684240ee462fb27cd9579f24f24c932322b3b73d3a02c5f24dd125854f5a6bd5feafaa2411ce1a450d8f090b82fa8d6610cd448e552880fe271f6e8ace3f5cc98727f80403c5b99f4f47f0f156700d9632deec0779d879641c7b592ff1c30f1f24952df23ece5999d408219d04ee74e6c44c24754ca6d58ed38ff75e327a9ed6b029b12d7039bc95a939dd328ed89586287c29d5dc7095b5aa11715bda97614581600c4f1795d6c9dde1d6ed49c21a28eac6cf114a0b1cca094cab159b876bc0e3602f11d7a475270cb019c0961e79fe2650de2da97bbdac85c35ca0c2ed20d15654a66a742dc37415471a4145db66a823212a9cb4de8db276e97a300d254ec392600fa1b519cd2d2ded3860c4bc78f4787b356f3865d58cd6553064d513deb17f83844900e13021441c580427c6429aed34cae4656717246819de660c36d49bd479d4bf6b39251364d370a4e7c483b93aba56c5b84699a68c11bcc19dd3da47a7856b14709877a77e087ddff61664b1739d911b2a6a7d8638ba76639c78c80be000fe6e9a772b3250284fa6b3fded0159d968612810fbf7698fcf5288af7ee940975f89a5b53f1787ec1a1de98980632d50bfff8023b0db519ffe222d6f388467a730349afceac15ca9584e44856f95a306b9786a957c1c369470adf5f37320693fafae106db2f934ff74a4dedd55ae7e2fef07de79e8cf94cadee745e784978df2deb396c7de732540167614ab8458fd9eef065237da5a5f48b3769be2f64a0077d77eea1fbd4cc13478e47a432f22a3742066758e110e1b82a8f6c1ab89d6ca97022d658bd53e7f4acce5726ebe1cfc82262f13f398f04169a4938dabe6bc33b081bf722a26ff851516e866a7d0bbf615486f862158f970476eb8e9cd5828d65a88048abd5ec3ed61931ef1eac1559bed62e99526a1814b4e0dd238b134131d741470bb6c031e587d1293ba9468f5a73c2da8d6b79865b7c62167251dcc40fe7bf9785f6c463f6b00560339b8dda9712938a03ce95c92483a2b2404ac468f75eae63f92a932cd2a91205938dac66ef6161bfc5617bc65c054dff2b1487e3beefd7e5c2612578b6252ebd1e61933094c26ed9664bb3e75c6873d84f8c9941bdc910059cbf38d04d5ea7cbd1b3665d11ce22a93c6c6b1c4a4f2cf54e3178c17b476f69788cdbbe7526cb407f078d9e3eb8d3ef87c7c1241293d0b3e1eb1f48a74a421a2b7cdea8d4dee973f982bdf9727d55ae32b4ab13e73a6270b31aec3087a84c85c37fd886c51bc3e2aef9547b01a0fa2b3685bb645cbc4ba5333e424e9d04ebccd3712eceeddf2055daa16b3501fa15afa273aad4fd242064d8c64612f61a58cb45c524a7d598957b0e4600a0b61efdeb47d7cd22a57fc9dee9068479d4e5f41637cffe4ebd7a4b609fcee1af102fd09f0d106cae37dffb273e5d0dce1f4ee44b99133b86a6d61d84ea2eed4523f664d138f4d538efff6f0d161b8369ebd1530032a90e15e5eebcee877787f8542ffdc9408a12dc2fc77be2fd847567f34f1eb1259e34086b5e3733034cd550f670fc1c4c66d7ec0cae2e8b415121e47943d893ff19bacafa2befe851deff73d53c91e5c62a9722f29ff8926554b25517b0a70eb544602c43e50669ec3d71c9fdd7ab534565ec48ac8b473cd98167b356186e10664a0ab3faf92eca1580d2e71f375573880a2151268ca538179a8098a970770d37b5b914141ba74e11269514ddcc1bd5ffc0cf854bd654531e1339413efbcdaf0d9c94b3c171912c3f3512b0b2d08a3cd8b2c03cd73c1fa93e149a1c87f71e006a34312199986b9f05917be113cbb4fe3c0c33894e83b1202ed134aff92a3e5feb305ced0ba79957c7292b6495d197ec62f46a71c2606e1c2311f1261f4971723e0cefafcecb9e9a2fd079d122c224fe9379e9def91cdf62e51446b0b5d2967c70dd6a5562d19a81f30c5c3286bdecdd4c480e58b3138b2e1347c6978d889541209d5286b71254fd54412d1c0b225fa5a45f1e5658c2d34af28472586fb51d28fe80cbb48ba930318f0185998f637ccf86b4e083c8c99bb732ca8a9ce978dd788502fdb3719b81e921ed60ff1a4175115260037862c8b33f6aa8640dfb1bc6193262a1189243e91f308d9807477fd65b2a498dc49ca0ce7a2262d0d92bc477c4157d93c3c1837203194a9fee7200d834b4f2b18808b53b8eb489af6900614c16c34736b5acd8ca84d902aee121ca79d16740f242c8b264666b7b0323df34a63725d029650a3733bc5b8b846dc3afea9880ac53c83320ad7e0fdb6b5ab6c5dbc1ad5346cd35d13691f7a97777a1cc6ac32b23c466da124cfb37a91990ac0120c673a06d4973754c42f3f3261616e135aa9ad7f5d2fc94a1cd72178d05d7cb5b8eaf4c5e135c733ee00d9e6803dc1b94a4123b8f7656c9391e645209293e479c994cf8aabc7888c92ada0ed82b71af9faf02b035b6e2b5e016ec7a0ce814e6b0485e08622b3fc54e90ef4aa769af9d514f1269376646ab2a183c9d98cde52131e3294f13e6077ad9da07d6661f6418b749ba44f4debc54fce5f38feea3fae6d34c28a4c425dcd21cff0de26b77bada3414f25b2a852da506ef711eb73b4f7333af54f188ea24cbf1054af64f9b8ca136923ba4bd789f8d1cdc111e46121f8a6d43ca9aa7fd62dba742527d4eeee840ebaeeb579a252a1cc8c1a9060e506283f6aa981d86724beba1e7d63c5efe7cfaa8c91633bacad69a56e59f5068eb6c59684071aa65cb14784ab1fe1a98361db94ae63008a7363a7af696aff398ad5841acfccb559c3701a7dc0cb0749ee5c1acee9bb6627b744a81838ed9508abbf1ec7598c695e717a34bd0bd12f23d60c28720c92ded4359fad2edf6988162bfff6517fc43ab6d6a43727726b52b9e8fc866f9601639b6c441091662991ee8efb09371e58d8e3dc20c7802e232aa6ca0bd18fa7e885aa67ceb7435d156f3d75ab8d2be6be17ea35346640f1056d7abec4ae94dc19b8809f7afaaa2b05a8c6037eefc77036630e0394ab0a79ea048a8d2fb53e5fa7d981067c050f7f22842236c4b786562267abebc32176ab470515a7b6b35dd4b5dfd92c168f83d42aceadd760bcc292c7cb11c2c4d926c158a942368a9bcc4e7ae1dd399559bd246a2e3860a3b66c92d52f058f3cd2dd1ff95628788e8cc664acc912979f259d6573532bb6c07f0c9907aee85897cb85934dbac5cfae20a2618c94317c813e2619a275fa55eaf694410b1f63f6c9ece20f3bb0ad7c234f97d59e73a0b37edf0c23d871b351c93381332b4b1d4bfd3987328acec0061c2d7d1520a649583ce3d8257980d9a50c66b5249df79c5198bb623a2f503c1e46dd0b4b4137e1d82e5044324d088a029b18a86c8918717727960fc7aa4acc35fcce1d683dc3898853da082a292a988338d4d3ada82ab5c56f0214c83fa9df9a0e77e0f71e713051d5d2de857efd0df15d80ff9cc35feac3e937feac963b3fa2cc0cca8352852d6ed392534fb534274ff587b5b4b86c8c043bf4de00b17685805f4d51bc10a0f3dadff27dca0f6c072eda65b61b805c581cd474aebb73365a4e3d0aa6742de89059dbd04dcd6b81709cb2f91e39c459eb7140224c2eb971b4e9542d8d9fc04800983d5ffd77d7078d55a70b29e3feba68e87bd73f3da376edc461e590e65804e10cc9cbca968a66fb6083f3db2c54e9b2326237e14893e707ae107163bc3f7860e3c0d48308cd4dd1c1f9304eb3b6f28fc17f74af2b4128d621868bbd9099df31faefff778c22ee1436342fa538f252d491d3cc237e9eeb1584e0666d9f8381cd12465cd0c202e571201f283e5aa6de82300832c23e702c92447fdba1e3adde871c84f58449e1ef45f911ec6f9429b10fcb52110a26f8483a0cd7fdc026fd3cf2f1c1ce245ad6feb2333ff5372c567e336708c03008d50c58dedc15eca2dbd75b623a10fba49753dd7f8a9fb4b279ef0613d01e9e225edf1834903650947283a1e33eede2cdf68bbd7987086c90a9986907c26b62ca1ad72c8199985c1365a7fc175225278b1794004177c24ed07b1b1ee58f673e6fac7179566ded0596688dce15b172148966479a9e008c37ddc3a224c699ff110e631e3e985cde03426adbe894aaecf72c5ee92f8b47b84e20e29e710d0fb9bf1653409dd4d925561383e90ab4997b5416ef149c965b969682589361d4d30ebf228ecec2050685a83ad8c509fe466da0f434b281a8c56b64070ef6a653d95c91cc874305e92fcfb9ffcf5dfd2153676ac14c32d245b2f426ecbe3d24e62058ff3c72c28461452781974db0f0d37b25befe8d5efa47513d8a2f741fe3b647f2208536822f5a252641b19a742e93923e3d5e6cd3e9d6a29532fa90ac9864684243ef5979842985ec5655bdfa5689591cdfcccad327d2df7883900fa80a7748006ca894c00b3b407689547b641f002397c96f2e9db4992403f72d3c39ec0df943ff8bfb57b771b91a537fe406314cdee3f4e43abe58e1c472948ee3b247438b22525e68425beecff7aae9a3f87683609856e3f74f1bfe9aa38af865758ffc56f60d30b6e86d99dcd08faa11d01eccd83d0eea9439681b351efc0277c8fccb4b33cfd4cab81d7d4da307b892a1abfb99ded0768461412ccb31341ac8e9073aa433163cd463d03d6610443bbd05d2818472b9fada76a0409ae8f905042ee411c95f550422a54752f593903fc04262cbf9851963c5d0e506cbc5266a71711ae9c202d92327608fe1a4de73225495cb2e66638db001db55bc03672400e74a6875f4ae19c6c9dba21d5606d086066dcf8043c8f1174d7bfa3acba20c7cd6771a1c5985a19911ee43775f90ea6cacd741e911eb88ea047322770ec0465839dfe84cf8b437936b51c756c88edd681c33bf95c93fdb27039af33ba1e54146b9dcba2bf9525da8744dfcfc4e9931d223fd16478649b5d6aa0acbd32865c45835d39d7f60fb53ed6fd928f9243b34d02f33730bd28b1bd068244f0d4d2fd288f9367bfcb09eed750352555ddd9ab7fb25b09cfc0f73eddca7457d5b937184d6eb5720f5904125b3812cfbe479eb11c8eb3e0ba7f3ca02601df661f055d3bd81ddbb985454be19672f624772a12baadc67b7ac4228bba6e962b069e15b536a8fa5984b2295d8c62d8b59fd230ef55d91fa7c10ad1f82113a81e1201bae36fed2ec37b32896a140dadc3bcc54c5c627ba5e9d0f4a55d5814896576519347e698cdbb41e80b011976116eb22e1062948d12fd1683f24f9e3d2bb60ddb0b28b6af91fea3087493887f9ff95f61dcded0e3487164a14574e6495d9b412c4a13068d1dac2f1da815ce98a9982ef3987c033c8a6eae591d01668bc822f34e26280126414e23fe1203dfeacb93a86fa39bf43da16149ed71008f3653b0d5b6a7c4d9ef596393ea5063ffb58ec561a77570ab94f60b07cd9c93de0cdcad30a12af723c6dcb3379d36ceb95f98cb850a80e383886e72a65ca1f89770599c6e9084d4c07c42069480ecd1252419cea1e8a2dc34eabfccfc8de4d08b940079997cbbf6ec414dba6eb74fe0b21c81b1e7e088fa287f6676c94c090e419d6362a3cbeaf8d5056e2d5ffe81e65332c9f8a5f78e0df21f76278489a840117456a605429a6d3d2755d845bfcad9badddb80578135f3d69e0d29b5e9b6682a4b4ef7a27ba0f94a376de9ecb967294e4047a0ce867a84330521573e82146a9ad0eb8a9b4a00332b4af573bb735de859f30406c52dce110b28f7a8c58ee55e9d30913cbdb91c63ed2f79115e488bb1630204c50f081f2ee86037bf281d9b9991449a29d4faaa9b5ca78378fe9db618878729f5e55fd250a995812c70d025148fdb2d9f53488ab5006a9b2347e1e428e127eeb792363ab2ad803ae150c4de5a73ae52261960f0f29e45b4c6e24993c0da37a78128e5ae9cc98e30e71feeb266d4c47ac779effb0205163e5e261863be493c11be78874e575d80f8ede41dc85f6a3c9b78d0d9d339535c8192f62e32d1dace7c2c308da0a81510b1fb499fbb694557cc1ff939edf037a48b2916c38ec2405b952b0cbb3bb48ffa21ceab1ead7df4460661345f44dfa0acca0e22f499fa40551b628f1104474f85232d250cf68407a60bc6118228c8fa6a2077df7b6f55a00abbfc184f7259b6db844d66565503862274490baae4ec8c4aef07c47b220c3e1d98985594e768de02fd3751f501bc45971ee568ff4005b4b503ae9cc14d2572e482b0240b5563dd3af3efd7c679346161ed92f30b82a3c9a0bd4ca99060e851248d5247cd06b4e810286f379b7056e65d3520b3c174ec9b55439f852e3244aa17c0e7599f937103021e3582c15445d09a577e7b18959e5745c67234a6736b61c27100ff0b98b912f5b5dc6dd5c74329bb95dec03290371fb272bd5a4978d32927a40bb4fe5bef6b2a450de9ba02e14cfbd5cf15763f31cd8e71edc2b69ac98675b8aa69c2495df7ff880195d9dcc6ed81947d8caa7c2573af2dc291b3c7cc59dc58464b1d431d3e7d5bf9cac19dfcfb0496c05cb4d5f80f5d686c909085bc4ff3ed17334f5b77c4b8f9e3b61aa3a276dc33abae6ce2d1232366307039bb32c95e94562797b38dfa7599f20a6943e4064e24068ecb730880bf8d449a6d03cafd64aa7a2c33dfd386aeadc75d4700facfeedb8873fbd6652be28d99672c2e44774a3843854eeff201e5e38d2eb264743385ffbccb49ea3110f41c4e437a7c84b20d086def34c302a559d158101146d312b8ab97af67f927c8b463b1eb3d217bdb80b9a073881e7d1cd9bcee9d7418b2bed1b124a9ffe1fe0aa77fdb90dce644c3a544072d17b7ad65363ee12806dd9b835b2bc21ec5a1f79eb4c1ecd4021b9af3c5ce9e14262b7e8fafef19d5e6be5309bb7abb0b1bc467af879bf66dcc2b5e88cb46e2fc9559a458b927e26212f6b9dfad702099fd8fc2e0e9ad0726954a04f45ee32328ddebaffe2a250f268937396ee55ef913d0ddbac1198b352987d1114dfc5120439a835f0e090e7a043262f390a2e383b792af3baeb864ef909e0e8a94492deab295e2aac695ba303e446f9c0cbae16469a7910709fb0c83e73da1c0bad8f4204a2eca9a44e8c73ffbfb4e100b412eb5c9adb71de9fb7eba56ff3ffb41055c55f4d9cae8cf32d115e5e92ef813cedad9c94d0b20063d39978ae6f3b9ca21f6ce6b7812c9fc2b1dbfc3dee20f7ade487a2de1d9f5b730898a63895026e4a7879382f910c17c1e36d1393afe2fbc305238c632b21e9a2f29dad1fd7f779d380dc6990d215c569d6bb74bbae850e4da3226fc31f8987e9eff5a8ae5bff31d18a64ecb5ede9d40a4532946e3fc2e8a06295b5f90cda9c964f1caef141ac725ec1ca6e56831ad8af02b099b3fb7272b93add802418535a8ae84d945656543dc5efef5c1613f1a8d9c24e87436e2d6fe0f528c6e7a983f120562be2b6f553bca2bd46c4acc417e3a8aca8a212103ce2cb832c6da60e332bddcf57127afe3915b2c2fc7934366dc67557f53b6d6f6cbeb89892594c1b2ea509fbfdc2b24301e43b53bccd26581e298927cd8269f217a278dd29e19a3c3e41a4e4fc36dc25cdc35ff220e91f65a84452ce0b7d98f40c77a6d76cc9c6c9e3635ad7a096e5c47521b1ec1b0d9483c57bf61c18308e802a752e1a968781f9da1540f0183ad519c276400144f6cf69b119ed540b6d276b5901c5f402d7c58414e9049a9fb2b849dac12b508bb6d488070c36d0f7864d5c7aa13b0830a789d484788af9747116df942958b9b8ab672a9e14cd4cbd6a7f60c06169a563a41e3659af0c30ecb70cb0f91218bbd50abbed6bc83efb2e049162190e205a3ea5fd95b666510d3ecdbc33baac118ec2b9191884b93bf810ee65b582981f835f182a4b725b134bffe945c4e4a974710f4b3f8e6bae560789f03aa6098a7f9c3af620b15de713be6efd763a6546cedad1452a4adc3a742cb4003342e9e59854d0cf9a1d3884083f29e0178e7901f999814a996a19cd51f99e55ddc7953d7644c9d6a9cead28d08ce021e1cdfb3daa23068e925309c09757201ea3bad505c4d93a567eacbfd2aac1f511a88b3129084dee6eafc249f48d344da48be1d0e11c1fc9065a36b273a1d7db5fc5c82aaaf44d234cb87040200e41e69b232ab908f1900962ac6ef44b69ef97e9562eeb9bc56ad19d4944cc0d808144baea6c5b86586dbd2e3dc7b254c261f82a3546a7ce63b4913bbee9db604467554ebd3c33ae3229fd26d7d32a6a146cd56abd8a995d6bcc7b71a9689500d5c823fd726e9033fe105fdfc5535ea626b44e8a7c1d675de8e68a1f4f13b860c28ba57f6e5871ea2181da8067d956780c2d7b2774616f1405bbb625ad79651e24983623ed1474c5e9ba45561601f0e33623644aebe2d3fb697dbe9cc368a5925819066c9772d040b8ff36836bfc772ae79104bed56410127966fac247ea7149bfd945437c45e2f37b726f6833a1c95af5344299acda073db2540bac73af34c9e19cf6d4c18f46e3c9204df4aa2e11974db0c9ea6343f692b241992a63b08531d352f1a82cba354d5690352492bd576ad7de41c8e362bea0a185a37bbb49e699276ba9a9efe3e2375e376fba5b5c149b394d8f06da5f63200e3e8ea52b7c0a3b2f07b489a67588eb3726bf81866bf43c9672351113039507f6b536ef4a7b7b235c099b5bb4633c622e184df6d97972df8dbcef7047bdc80b4c8a5dbe2c4bc52bf44f13606a4b02cde05ccf594bad4cd59a99a95f1a210706c29e54928f69a51bcc2e34a8884757c429209c7547260e904b0d792066a7596b85b155825caa960ba0f7af32bc27c3f4c19abf4fdf41f7ed92844926055e3d884813efc1c381535d8366efb95ccb6397e5328957367e9ef10506b5bc4caf9d953c82dc379f0289752475f27e41cf46981c1f22920c65c9ef25ff15a1dabc025c0f41695fa14544bd1ef8e63b5d9907e9b66b88f3de43ea8ba3ceff3cb2fab9d1657905858bf73c0a6242368b8cb413b5a951cc2f0ac494828a650f972972c00fa87d84b116fc094098738fb6eb4e8ab3a55cdcd7c65844a9cd20fc8fed88e3efefa3fb7223f76088eed4cef17ebac4bc883d2998952281d3705e2fb70a79bc8982bafc61e5482d42629ed36cc0f7e114a7056a64b59cd25e083aa20d6d180aa43655bc8b4727b1321950a291a6bee13c3a86c96c08da2587bd52ed5f06ec5ee41510e67a3c480dbf628ad90f290e5552c5ed1f1fde5c721e499192d63ea740c95157f18d7d4ed5e334f9e1bd0a2483ebb0c575bfe6828de8ac1789bed478c70a59279c8d06855e069bf0dfc8903c013d0f0c784362961bc5fa9e995b49c2abe5ec09e4afdd1d33f7809b02897b7057b8c1c39228795cb7d0d84674e0b0187c6d657470db9f2029cef6785948af2e0b94e0dba43a8e074e2bab7eefbb4d0a0ca7e35b7222d83df754f03d0d1bd4c3cdad41b7bd9deb6235230a76b08366c1751e5f5c87db1919ffa2610bbece69794612e913c3e3de5009514017255394c17728a86d2173f6855af8e37abf993e30629fcf764bba14d6e07accc5b8bb7c86458496bcf934e2550f8efde71caeb0f56b9824f5300374cd8583d106131d2abd153c5cf57106d78cbe5b908eadb0513cde8e8b5ea5ff5265224b590296f3f5d7bf01ff5d2f652ef22506652974af69fa7b7cb347cdfd4d4da424cf1c4fefb32bdad30c6b7cd5bef34631e12f37ae92b7fa0d080b5ab95f5746cfa684931ae1dc45cab9594d26c1b29ea7ade5c70e5c6b7595cfa37b473f6ebeba598c14919ea13e8cc280d5d79c1adce302e5c950c473f15</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>Life</category>
      </categories>
      <tags>
        <tag>æ‹çˆ±</tag>
        <tag>å®è·µ</tag>
      </tags>
  </entry>
  <entry>
    <title>Best Practice with FRP</title>
    <url>/2021/10/16/best-practice-with-frp.html</url>
    <content><![CDATA[<blockquote>
<p>FRP is a tool for reverse proxy. By using FRP, we can easily expose service in local network to public internet. Though the official documents provides some configurations for specific condition, it can still be confusing for new users. Thus I would like to record how I use it.</p>
</blockquote>
<span id="more"></span>

<h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><p>FRP doesnâ€™t provide any installation script, maybe because itâ€™s quite easy to run under command. But FRP does provided systemd configs, thus we can manage FRP service though systemd.</p>
<p>Download latest tarball from <a href="https://github.com/fatedier/frp/releases/">FRP Binary</a> and unpack it, then execute following command to install on Linux with systemd:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">on frp client</span></span><br><span class="line">mkdir /etc/frp</span><br><span class="line">cp frpc /usr/bin</span><br><span class="line">cp frpc_full.ini /etc/</span><br><span class="line">cp systemd/frpc@.service /lib/systemd/system/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">on frp server</span></span><br><span class="line">mkdir /etc/frp</span><br><span class="line">cp frps /usr/bin</span><br><span class="line">cp frps_full.ini /etc/</span><br><span class="line">cp systemd/frps@.service /lib/systemd/system/</span><br></pre></td></tr></table></figure>

<h1 id="Configration"><a href="#Configration" class="headerlink" title="Configration"></a>Configration</h1><p>You may notice that we use <strong>frpc@.service</strong> rather than <strong>frpc.service</strong>, this is a kind of systemd grammar. We can append extra string after <strong>@</strong>, and systemd will use the config file with the same name.</p>
<h2 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h2><h3 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h3><ul>
<li><p>Add config file <code>/etc/frp/ssh.ini</code></p>
<p>Local sshd listens at <code>127.0.0.1:22</code> and we would like to access it through <code>&lt;server ip&gt;:7022</code> . Multiple client can make use of the same server with different tag <code>[ssh]</code> and different <code>remote_port</code>.</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">server_addr</span> = &lt;ip or domain&gt;</span><br><span class="line"><span class="attr">server_port</span> = <span class="number">7000</span></span><br><span class="line"><span class="attr">token</span> = &lt;password&gt;</span><br><span class="line"></span><br><span class="line"><span class="section">[ssh]</span></span><br><span class="line"><span class="attr">type</span> = tcp</span><br><span class="line"><span class="attr">local_ip</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">local_port</span> = <span class="number">22</span></span><br><span class="line"><span class="attr">remote_port</span> = <span class="number">7022</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Enable and start service</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable frpc@ssh</span><br><span class="line">systemctl start frpc@ssh</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h3><ul>
<li><p>Add config file <code>/etc/frp/ssh.ini</code></p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">bind_addr</span> = <span class="number">0.0</span>.<span class="number">0.0</span></span><br><span class="line"><span class="attr">bind_port</span> = <span class="number">7000</span></span><br><span class="line"><span class="attr">token</span> = &lt;password&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Enable and start service</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable frps@ssh</span><br><span class="line">systemctl start frps@ssh</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="Http-service-with-Nginx"><a href="#Http-service-with-Nginx" class="headerlink" title="Http service with Nginx"></a>Http service with Nginx</h2><p>Under this condition, we have a <strong>http service</strong> in local network and would like to access it through Nginx.</p>
<h3 id="Client-1"><a href="#Client-1" class="headerlink" title="Client"></a>Client</h3><ul>
<li><p>Add config file <code>/etc/frp/http.ini</code></p>
<p>Suppose we have a local http server listening at <code>http://127.0.0.1:80</code></p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">server_addr</span> = &lt;ip or domain&gt;</span><br><span class="line"><span class="attr">server_port</span> = <span class="number">7000</span></span><br><span class="line"><span class="attr">token</span> = &lt;password&gt;</span><br><span class="line"></span><br><span class="line"><span class="section">[http_service]</span></span><br><span class="line"><span class="attr">type</span> = http</span><br><span class="line"><span class="attr">local_port</span> = <span class="number">80</span></span><br><span class="line"><span class="attr">custom_domains</span> = &lt;bound doamin&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Enable and start service</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable frpc@http</span><br><span class="line">systemctl start frpc@http</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Server-1"><a href="#Server-1" class="headerlink" title="Server"></a>Server</h3><ul>
<li><p>Add config file <code>/etc/frp/http.ini</code></p>
<p>In this config, FRP server will listen at <code>0.0.0.0:7000</code>, and the exposed http service will listen at <code>127.0.0.1:7080</code>. The <strong>limitation</strong> is that <strong>1</strong> server can only serve <strong>1</strong> client if you donâ€™t use the <strong>locations</strong>, while FRP can not rewrite URL path as this work should belong to Nginx.</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">bind_addr</span> = <span class="number">0.0</span>.<span class="number">0.0</span></span><br><span class="line"><span class="attr">bind_port</span> = <span class="number">7000</span></span><br><span class="line"><span class="attr">proxy_bind_addr</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">vhost_http_port</span> = <span class="number">7080</span></span><br><span class="line"><span class="attr">token</span> = &lt;password&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Enable and start service</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable frps@http</span><br><span class="line">systemctl start frps@http</span><br></pre></td></tr></table></figure>
</li>
<li><p>Add Nginx location</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">location</span> / &#123;</span><br><span class="line">  <span class="attribute">proxy_redirect</span> <span class="literal">off</span>;</span><br><span class="line">  <span class="attribute">proxy_pass</span> http://127.0.0.1:7080/;</span><br><span class="line">  <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">  <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">  <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">  <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="Https-service-with-Nginx"><a href="#Https-service-with-Nginx" class="headerlink" title="Https service with Nginx"></a>Https service with Nginx</h2><p>Under this condition, we have a <strong>https service</strong> in local network and would like to access it through Nginx. You may ask: Why use <strong>https</strong> for internal service? Well, sometimes this can happen and we can not change, such as <strong>Proxmox VE</strong>, it only supports https for web service, and itâ€™s hard to switch to http.</p>
<h3 id="Client-2"><a href="#Client-2" class="headerlink" title="Client"></a>Client</h3><ul>
<li><p>Add config file <code>/etc/frp/https.ini</code></p>
<p>Suppose we have a local https service <code>https://127.0.0.1:443</code></p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">server_addr</span> = &lt;ip or domain&gt;</span><br><span class="line"><span class="attr">server_port</span> = <span class="number">7000</span></span><br><span class="line"><span class="attr">token</span> = <span class="string">&#x27;password&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="section">[proxmox]</span></span><br><span class="line"><span class="attr">type</span> = https</span><br><span class="line"><span class="attr">local_port</span> = <span class="number">443</span></span><br><span class="line"><span class="attr">custom_domains</span> = &lt;bound domain&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Enable and start service</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable frpc@https</span><br><span class="line">systemctl start frpc@https</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Server-2"><a href="#Server-2" class="headerlink" title="Server"></a>Server</h3><ul>
<li><p>Add config file <code>/etc/frp/https.ini</code></p>
<p>In this config, FRP server will listen at <code>0.0.0.0:7000</code>, and the exposed https service will listen at <code>127.0.0.1:7443</code>. The <strong>limitation</strong> is that <strong>1</strong> server can only serve <strong>1</strong> client if you donâ€™t use the <strong>locations</strong>, while FRP can not rewrite URL path as this work should belong to Nginx.</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">bind_addr</span> = <span class="number">0.0</span>.<span class="number">0.0</span></span><br><span class="line"><span class="attr">bind_port</span> = <span class="number">7000</span></span><br><span class="line"><span class="attr">proxy_bind_addr</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">vhost_https_port</span> = <span class="number">7443</span></span><br><span class="line"><span class="attr">token</span> = &lt;password&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Enable and start service</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable frps@https</span><br><span class="line">systemctl start frps@https</span><br></pre></td></tr></table></figure>
</li>
<li><p>Add Nginx location</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">location</span> / &#123;</span><br><span class="line">  <span class="attribute">proxy_ssl_server_name</span> <span class="literal">on</span>;</span><br><span class="line">  <span class="attribute">proxy_ssl_name</span> <span class="variable">$host</span>;</span><br><span class="line">  <span class="attribute">proxy_ssl_verify</span> <span class="literal">off</span>;</span><br><span class="line">  <span class="attribute">proxy_pass</span> https://127.0.0.1:7443;</span><br><span class="line">  <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">  <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">  <span class="attribute">proxy_set_header</span> Host <span class="variable">$http_host</span>;</span><br><span class="line">  <span class="attribute">proxy_set_header</span> cookie <span class="variable">$http_cookie</span>;</span><br><span class="line">  <span class="attribute">proxy_set_header</span> Proxy-Connection <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>frp</tag>
        <tag>proxy</tag>
      </tags>
  </entry>
  <entry>
    <title>Best Practice with ZFS</title>
    <url>/2021/10/18/best-practice-with-zfs.html</url>
    <content><![CDATA[<blockquote>
<p>This article will introduce some practicality usage of ZFS file system.</p>
</blockquote>
<span id="more"></span>

<h1 id="Basic-Usage"><a href="#Basic-Usage" class="headerlink" title="Basic Usage"></a>Basic Usage</h1><h2 id="Pool-related"><a href="#Pool-related" class="headerlink" title="Pool related"></a>Pool related</h2><ul>
<li><p>Create a pool</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">create a striped pool</span></span><br><span class="line">sudo zpool create new-pool /dev/sdb /dev/sdc</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">create a mirrored pool</span></span><br><span class="line">sudo zpool create new-pool mirror /dev/sdb /dev/sdc</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">create a pool with specific mount point</span></span><br><span class="line">sudo zpool create -m /mnt/storage new-pool mirror /dev/sdb /dev/sdc</span><br></pre></td></tr></table></figure>
</li>
<li><p>Set the mount point</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo zfs set mountpoint=/mnt/storage new-pool</span><br></pre></td></tr></table></figure>
</li>
<li><p>Check status</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo zpool status</span><br></pre></td></tr></table></figure>
</li>
<li><p>Destroy a pool</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo zpool destroy new-pool</span><br></pre></td></tr></table></figure>
</li>
<li><p>Import a pool</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">scan existing pool</span></span><br><span class="line">sudo zpool import</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">import specific pool</span></span><br><span class="line">sudo zpool import new-pool</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="Filesystem-related"><a href="#Filesystem-related" class="headerlink" title="Filesystem related"></a>Filesystem related</h2><ul>
<li><p>Create a filesysytem in a pool</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo zfs create new-pool/new-fs</span><br></pre></td></tr></table></figure>
</li>
<li><p>Destroy a filesystem in a pool</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo zfs destroy new-pool/new-fs</span><br></pre></td></tr></table></figure>
</li>
<li><p>List all filesystems in a pool</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo zfs list</span><br></pre></td></tr></table></figure>
</li>
<li><p>Set mount point for a filesystem</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo zfs set mountpoint=/mnt/storage new-pool</span><br><span class="line">sudo zfs set mountpoint=/mnt/new new-pool/new-fs</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="Conditions"><a href="#Conditions" class="headerlink" title="Conditions"></a>Conditions</h1><ul>
<li><p>How to replace disk in a mirrored pool</p>
<ol>
<li><p>Shutdown system, replace the disk, then boot up</p>
</li>
<li><p>Check the <strong>ID</strong> of disk with <strong>UNAVAIL</strong> status by executing</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo zpool status</span><br></pre></td></tr></table></figure>
</li>
<li><p>Replace with new disk <code>/dev/sdb</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo zpool replace new-pool 4932927217405226991 /dev/sdb</span><br></pre></td></tr></table></figure>
</li>
<li><p>Check status and wait for resilvering</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo zpool status</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><p><a href="https://ubuntu.com/tutorials/setup-zfs-storage-pool">Setup a ZFS storage pool</a></p>
<p><a href="https://jordanelver.co.uk/blog/2018/11/26/how-to-replace-a-failed-disk-in-a-zfs-mirror/">How to replace a failed disk in a ZFS mirror</a></p>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
  </entry>
  <entry>
    <title>åœ¨QEMUä¸­å¯åŠ¨U-Bootå’Œå†…æ ¸</title>
    <url>/2021/01/30/boot-kernel-in-uboot-from-qemu.html</url>
    <content><![CDATA[<blockquote>
<p>ä½œä¸ºLinuxå†…æ ¸å·¥ç¨‹å¸ˆï¼ŒQEMUæ˜¯æ—¥å¸¸å·¥ä½œä¸­ç»å¸¸æ¥è§¦çš„ä¸€ä¸ªè™šæ‹ŸåŒ–å·¥å…·ï¼Œé€šè¿‡å…¶CPUä»¥åŠå¤–è®¾çš„æ¨¡æ‹Ÿèƒ½åŠ›ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“æ­å»ºå‡ºä¸€å¥—ç”¨äºæµ‹è¯•æˆ–å¼€å‘çš„è™šæ‹Ÿç¯å¢ƒã€‚ä»¥å‰åœ¨ä½¿ç”¨æ—¶é€šå¸¸éƒ½æ˜¯ç›´æ¥å»å¼•å¯¼å†…æ ¸ï¼Œä½†å…¶å®QEMUå¹¶ä¸åªæ˜¯èƒ½å¤Ÿå¼•å¯¼å†…æ ¸ï¼Œä»»ä½•æ‹¥æœ‰ç¡¬ä»¶åˆå§‹åŒ–å’Œç®¡ç†èƒ½åŠ›çš„äºŒè¿›åˆ¶ç¨‹åºå®ƒéƒ½å¯ä»¥å¼•å¯¼è¿è¡Œã€‚ä»Šå¤©æˆ‘ä»¬å°±ä½¿ç”¨qemuå¼•å¯¼ubootï¼Œå¹¶åœ¨ubootä¸­å¯åŠ¨å†…æ ¸ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨U-Boot"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨U-Boot" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨U-Boot"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨U-Boot</h1><p>æ—¢ç„¶QEMUæœ¬èº«å°±å…·å¤‡å¼•å¯¼Linuxå†…æ ¸çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦å…ˆå¼•å¯¼U-Bootå‘¢ï¼Ÿæˆ‘æƒ³ä¸»è¦æœ‰ä¸€ä¸‹å‡ ç‚¹å¥½å¤„ï¼š</p>
<ul>
<li>U-Bootèƒ½å¤Ÿæä¾›æ›´çµæ´»çš„å†…æ ¸å¼•å¯¼æ–¹å¼ï¼Œå®ƒä¸ä»…å¯ä»¥ä»æœ¬åœ°è·å–å†…æ ¸æ–‡ä»¶ï¼Œè¿˜èƒ½é€šè¿‡ç½‘ç»œè·å–</li>
<li>U-Bootå¯ä»¥æä¾›æ›´å®Œæ•´çš„è°ƒè¯•ç¯å¢ƒï¼Œå¦‚æœç›´æ¥ä½¿ç”¨QEMUï¼Œæˆ‘ä»¬å°±å¾ˆéš¾çœ‹åˆ°bootloaderåšäº†å“ªäº›äº‹æƒ…</li>
<li>å¯¹äºåµŒå…¥å¼ç³»ç»Ÿçš„å­¦ä¹ ï¼ŒU-Bootä¹Ÿæ˜¯é‡è¦çš„ä¸€ç¯ï¼Œå› æ­¤äº†è§£å…¶å·¥ä½œåŸç†æœ‰æ—¶ä¹Ÿå¾ˆé‡è¦</li>
<li>å¯¹äºè·¨å¹³å°æ¨¡æ‹Ÿï¼Œå¦‚Armï¼Œå½“æ¶‰åŠåˆ°DTBåŠ è½½å’Œå¼•å¯¼å‹ç¼©å†…æ ¸é•œåƒçš„æ—¶å€™ï¼ŒQEMUæœ‰æ—¶å¹¶ä¸èƒ½æ­£ç¡®å¤„ç†</li>
</ul>
<h1 id="å®‰è£…QEMU"><a href="#å®‰è£…QEMU" class="headerlink" title="å®‰è£…QEMU"></a>å®‰è£…QEMU</h1><p>QEMUåœ¨ä¸»æµçš„å‘è¡Œç‰ˆä¸­éƒ½å¯ä»¥ç›´æ¥ä»æºä¸Šä¸‹è½½å®‰è£…ã€‚</p>
<ul>
<li><strong>Arch:</strong> <code>pacman -S qemu</code></li>
<li><strong>Debian&#x2F;Ubuntu:</strong> <code>apt-get install qemu</code></li>
<li><strong>Fedora:</strong> <code>dnf install @virtualization</code></li>
<li><strong>Gentoo:</strong> <code>emerge --ask app-emulation/qemu</code></li>
<li><strong>RHEL&#x2F;CentOS:</strong> <code>yum install qemu-kvm</code></li>
<li><strong>SUSE:</strong> <code>zypper install qemu</code></li>
</ul>
<p>å½“ç„¶ä¹Ÿå¯ä»¥ä»æºç ç¼–è¯‘å®‰è£…ï¼Œå‚è€ƒQEMUç½‘ç«™çš„<a href="https://www.qemu.org/download/#source">Build instructions</a>ã€‚</p>
<p>QEMUä¸ºæ¯ä¸€ç§Archç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„å¯æ‰§è¡Œç¨‹åºï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨ä»¥ä¸‹ä¸¤ä¸ªç¨‹åºï¼š</p>
<ul>
<li><p><strong>qemu-system-arm</strong>: æ¨¡æ‹Ÿ32ä½Arm CPUï¼Œå¦‚Arm9&#x2F;Arm11ã€Cortex-A7&#x2F;A9&#x2F;A15</p>
</li>
<li><p><strong>qemu-system-aarch64</strong>: æ¨¡æ‹Ÿ64ä½Arm CPUï¼Œå¦‚Cortex-A53&#x2F;A57</p>
</li>
</ul>
<p>å¯ä»¥é€šè¿‡<code>qemu-system-arm -machine help</code>æ¥æŸ¥çœ‹æ”¯æŒå“ªäº›å¼€å‘æ¿çš„æ¨¡æ‹Ÿã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ vexpress-a9 è¿™æ¬¾å¼€å‘æ¿ã€‚vexpress-a9 æ˜¯ Arm å…¬å¸è‡ªå·±è®¾è®¡çš„ä¸€æ¬¾ 4 æ ¸ Cortex-A9 å¼€å‘æ¿ï¼ŒU-Bootã€Linux Kernel å’Œ QEMU å¯¹è¿™æ¬¾å¼€å‘æ¿éƒ½åšäº†å®Œæ•´çš„æ”¯æŒã€‚</p>
<h1 id="å®‰è£…äº¤å‰ç¼–è¯‘å™¨"><a href="#å®‰è£…äº¤å‰ç¼–è¯‘å™¨" class="headerlink" title="å®‰è£…äº¤å‰ç¼–è¯‘å™¨"></a>å®‰è£…äº¤å‰ç¼–è¯‘å™¨</h1><p>è¯·å‚ç…§è¿™ç¯‡æ–‡ç« å®‰è£…æ‰€éœ€çš„äº¤å‰ç¼–è¯‘å·¥å…·é“¾ï¼š</p>
<p><a href="https://blog.colorfulshark.net/2021/01/30/install-cross-toolchain-for-arm.html">ã€Šå®‰è£…Armäº¤å‰ç¼–è¯‘å·¥å…·é“¾ã€‹</a></p>
<h1 id="ç¼–è¯‘U-Boot"><a href="#ç¼–è¯‘U-Boot" class="headerlink" title="ç¼–è¯‘U-Boot"></a>ç¼–è¯‘U-Boot</h1><h2 id="ä¸‹è½½æºç "><a href="#ä¸‹è½½æºç " class="headerlink" title="ä¸‹è½½æºç "></a>ä¸‹è½½æºç </h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://gitlab.denx.de/u-boot/u-boot.git</span><br></pre></td></tr></table></figure>

<h2 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make vexpress_ca9x4_defconfig</span><br><span class="line">make CROSS_COMPILE=arm-linux-gnueabihf- all</span><br></pre></td></tr></table></figure>

<p>æœ€ç»ˆç¼–è¯‘ç”ŸæˆELFæ ¼å¼çš„å¯æ‰§è¡Œæ–‡ä»¶ u-boot å’Œçº¯äºŒè¿›åˆ¶æ–‡ä»¶u-boot.binï¼Œå…¶ä¸­ QEMU å¯ä»¥å¯åŠ¨çš„ä¸ºELFæ ¼å¼çš„å¯æ‰§è¡Œæ–‡ä»¶ u-bootã€‚</p>
<h1 id="ç¼–è¯‘æ–‡ä»¶ç³»ç»Ÿ"><a href="#ç¼–è¯‘æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="ç¼–è¯‘æ–‡ä»¶ç³»ç»Ÿ"></a>ç¼–è¯‘æ–‡ä»¶ç³»ç»Ÿ</h1><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨Buildrootæ¥å¿«é€Ÿæ„å»ºä¸€ä¸ªæˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<h2 id="ä¸‹è½½æºç -1"><a href="#ä¸‹è½½æºç -1" class="headerlink" title="ä¸‹è½½æºç "></a>ä¸‹è½½æºç </h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone git://git.buildroot.net/buildroot</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>é¦–å…ˆè¿›å…¥menuconfigï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make menuconfig</span><br></pre></td></tr></table></figure>

<ol>
<li><p><strong>Target options</strong></p>
<ul>
<li><p>Target Architecture: <code>ARM (little endian)</code></p>
<p>å¤§éƒ¨åˆ† Arm éƒ½æ˜¯å°ç«¯æ¨¡å¼ï¼Œæ‰€ä»¥é€‰ä¸Š<strong>little endian</strong>ã€‚</p>
</li>
<li><p>Target Architecture Variant: <code>cortex-A9</code></p>
<p>è¿™æ¬¾å¼€å‘æ¿çš„ CPU æ˜¯ cortex-A9ã€‚</p>
</li>
<li><p>Enable VFP extension support: <code>enable</code></p>
</li>
<li><p>Target ABI: <code>EABIhf</code></p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨Linaro GCCè¿›è¡Œç¼–è¯‘ï¼ŒLinaroçš„GCCé»˜è®¤éƒ½æ‰“å¼€äº†hardfloatçš„æ”¯æŒï¼Œæ‰€ä»¥é€‰ä¸Š<strong>VFP extensionå’ŒEABIhf</strong>ã€‚</p>
</li>
</ul>
</li>
<li><p><strong>Build options</strong></p>
<ul>
<li><p>Location to save buildroot config: <code>ca9_mini_defconfig</code></p>
<p>è¯¥é€‰é¡¹æ˜¯è®¾ç½®æœ€åç”Ÿæˆçš„é…ç½®æ–‡ä»¶çš„ä¿å­˜è·¯å¾„ï¼Œbuildrootå¯ä»¥é’ˆå¯¹ä¸åŒçš„æ¿å­ç”Ÿæˆç‰¹å®šçš„defconfigæ–‡ä»¶ï¼Œé»˜è®¤ä¿å­˜åœ¨configsç›®å½•ä¸‹ã€‚è‡ªå·±ä¿®æ”¹å„é¡¹é…ç½®åï¼Œæ‰§è¡Œmake savedefconfigå‘½ä»¤ï¼Œå°±ä¼šç”Ÿæˆæ–°çš„defconfigæ–‡ä»¶ã€‚ä¸‹æ¬¡ç¼–è¯‘ä¹‹å‰ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œ<code>make ca9_mini_defconfig</code>å‘½ä»¤æ¥åŠ è½½å·²æœ‰çš„é…ç½®ã€‚</p>
</li>
<li><p>Download dir</p>
<p>è¯¥é€‰é¡¹è®¾ç½® buildroot ä¸‹è½½çš„å„ç§ç¬¬ä¸‰æ–¹åŒ…çš„å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤åœ¨ dl ç›®å½•ä¸‹ã€‚</p>
</li>
</ul>
</li>
<li><p><strong>Toolchain</strong></p>
<ul>
<li><p>Toolchain type: <code>External toolchain</code></p>
</li>
<li><p>Toolchain: <code>Custom toolchain</code></p>
<p>å› ä¸ºè¿™é‡Œä½¿ç”¨ç”µè„‘ä¸Šè‡ªå·±å®‰è£…çš„toolchainï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œé€‰<strong>External toolchain</strong>å’Œ<strong>Custom toolchain</strong>ã€‚</p>
</li>
<li><p>Toolchain path: <code>/usr/local/toolchain/gcc-arm-10.2-2020.11-x86_64-arm-none-linux-gnueabihf</code></p>
<p>ç„¶ååœ¨<strong>Toolchain path</strong>ä¸­å¡«å†™toolchianåœ¨ç”µè„‘ä¸Šå®‰è£…çš„ä½ç½®ã€‚</p>
</li>
<li><p>Toolchain prefix: <code>$(ARCH)-none-linux-gnueabihf</code></p>
<p>å¦å¤–è¦æ³¨æ„<strong>Toolchain prefix</strong>è¿™ä¸ªå‰ç¼€åˆ«å†™é”™ã€‚</p>
</li>
<li><p>External toolchain gcc version: <code>10.x</code></p>
<p>è®¾ç½®toolchainçš„ç‰ˆæœ¬ã€‚</p>
</li>
<li><p>External toolchain kernel headers series: <code>4.20.x</code></p>
<p>è®¾ç½®ç”¨æ¥ç¼–è¯‘è¿™ä¸ªtoolchainçš„å†…æ ¸å¤´æ–‡ä»¶çš„å†…æ ¸çš„ç‰ˆæœ¬ã€‚è¿™ä¸ªç‰ˆæœ¬å¯ä»¥åœ¨toolchainé‡Œé¢çš„version.hè¿™ä¸ªæ–‡ä»¶æŸ¥åˆ°ï¼Œæ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">&#123;toolchain_location&#125;/arm-linux-gnueabihf/libc/usr/include/linux/version.h</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">define LINUX_VERSION_CODE 267277</span></span><br></pre></td></tr></table></figure>

<p>267277å¯¹åº”çš„16è¿›åˆ¶ä¸º0x4140Dï¼Œå¦‚æœç‰ˆæœ¬å·ä¸ºM.m.pï¼Œé‚£ä¹ˆ</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">M = ( LINUX_VERSION_CODE &gt;&gt; <span class="number">16</span> ) &amp; <span class="number">0xFF</span> <span class="comment">/* 0x04 = 4 */</span></span><br><span class="line">m = ( LINUX_VERSION_CODE &gt;&gt; <span class="number">8</span>  ) &amp; <span class="number">0xFF</span> <span class="comment">/* 0x14 = 20 */</span></span><br><span class="line">p = ( LINUX_VERSION_CODE &gt;&gt; <span class="number">0</span>  ) &amp; <span class="number">0xFF</span> <span class="comment">/* 0x0D = 13 */</span></span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥æˆ‘ä»¬è®¾ç½®ä¸º4.20.xã€‚</p>
</li>
<li><p>External toolchain C library: <code>glibc/eglibc</code></p>
</li>
</ul>
</li>
<li><p><strong>System configuration</strong></p>
<ul>
<li><p>Run a getty (login prompt) after boot</p>
<ul>
<li><p>TTY port: <code>ttyAMA0</code></p>
<p>vexpress_a9å†…æ ¸å¯åŠ¨çš„æ§åˆ¶å°çš„åå­—å«åšttyAMA0ã€‚</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Filesystem images</strong></p>
<ul>
<li><p>cpio the root filesystem: <code>enable</code></p>
<ul>
<li>Compression method: <code>lz4</code></li>
</ul>
<p>æˆ‘ä»¬æŠŠç¼–è¯‘çš„rootfsä»¥initramfsçš„å½¢å¼å’ŒLinux Kernelé“¾æ¥åœ¨ä¸€èµ·ï¼Œä¸ºäº†è®©æ ¹æ–‡ä»¶ç³»ç»Ÿé•œåƒå°½é‡å°ï¼Œå¯ä»¥å¯¹æ–‡ä»¶ç³»ç»Ÿé‡‡ç”¨lz4å‹ç¼©ã€‚</p>
</li>
</ul>
</li>
</ol>
<h2 id="ç¼–è¯‘-1"><a href="#ç¼–è¯‘-1" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure>

<h1 id="ç¼–è¯‘å†…æ ¸"><a href="#ç¼–è¯‘å†…æ ¸" class="headerlink" title="ç¼–è¯‘å†…æ ¸"></a>ç¼–è¯‘å†…æ ¸</h1><h2 id="ä¸‹è½½æºç -2"><a href="#ä¸‹è½½æºç -2" class="headerlink" title="ä¸‹è½½æºç "></a>ä¸‹è½½æºç </h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>æŠŠå‰é¢buildrootç¼–è¯‘çš„rootfs.cpio.lz4æ‹·è´åˆ°Linux Kernelæ ¹ç›®å½•ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cp &#123;buildroot_dir&#125;/output/images/rootfs.cpio.lz4 ./</span><br></pre></td></tr></table></figure>

<p>ç„¶ååŠ è½½vexpress_a9è¿™å—å¼€å‘æ¿çš„é»˜è®¤é…ç½®ï¼Œå¹¶è¿›å…¥menuconfigåšè¿›ä¸€æ­¥é…ç½®ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make ARCH=arm vexpress_defconfig</span><br><span class="line">make ARCH=arm menuconfig</span><br></pre></td></tr></table></figure>

<ol>
<li><p><strong>General setup</strong></p>
<ul>
<li>Initial RAM filesystem and RAM disk (initramfs&#x2F;initrd) support: <code>enable</code><ul>
<li>Initramfs source file(s): <code>rootfs.cpio.lz4</code></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Kernel hacking</strong></p>
<ul>
<li><p>printk and dmesg options</p>
<ul>
<li><p>Show timing information on printks: <code>enable</code></p>
<p>è¿™æ ·æ‰“å°çš„å†…æ ¸ log å‰é¢ä¼šé™„å¸¦æœ‰æ—¶é—´æˆ³ä¿¡æ¯ã€‚</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="ç¼–è¯‘-2"><a href="#ç¼–è¯‘-2" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- -j8</span><br></pre></td></tr></table></figure>

<h1 id="å¯åŠ¨QEMU"><a href="#å¯åŠ¨QEMU" class="headerlink" title="å¯åŠ¨QEMU"></a>å¯åŠ¨QEMU</h1><p>QEMUå¯ä»¥æ¨¡æ‹Ÿsdå¡ç­‰å¤–è®¾ã€‚æˆ‘ä»¬å°±æŠŠç¼–è¯‘å¥½çš„å›ºä»¶æ”¾åœ¨ä¸€ä¸ªæ¨¡æ‹Ÿçš„sdå¡ä¸Šï¼Œè®©QEMUä»è¿™å¼ æ¨¡æ‹Ÿçš„sdå¡ä¸Šå¯åŠ¨Linuxç³»ç»Ÿã€‚</p>
<ol>
<li><p><strong>åˆ¶ä½œsdå¡é•œåƒï¼Œå¹¶å°†å®ƒæ ¼å¼åŒ–æˆfatæ ¼å¼</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">dd if=/dev/zero of=sd.img bs=4096 count=4096</span><br><span class="line">mkfs.vfat sd.img</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>æŠŠç¼–è¯‘å¥½çš„kernel zImageå’ŒDTBæ–‡ä»¶æ‹·è´åˆ°sd.imgä¸­</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo mount sd.img /mnt/ -o loop,rw</span><br><span class="line">sudo cp arch/arm/boot/zImage /mnt/</span><br><span class="line">sudo cp arch/arm/boot/dts/vexpress-v2p-ca9.dtb /mnt/</span><br><span class="line">sudo umount /mnt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>åœ¨QEMUä¸­å¯åŠ¨U-Boot</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">qemu-system-arm -M vexpress-a9 -m 512M -kernel $&#123;u-boot_dir&#125;/u-boot -nographic  -sd sd.img</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ä»sdå¡ä¸­åŠ è½½Linux Kernelå’ŒDTB</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">fatload mmc 0:0 0x62008000 zImage</span><br><span class="line">fatload mmc 0:0 0x64008000 vexpress-v2p-ca9.dtb</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œé¢çš„0x62008000å’Œ0x64008000åˆ†åˆ«å¯¹åº”zImageå’Œdtbæ–‡ä»¶åœ¨å†…å­˜ä¸­çš„åŠ è½½åœ°å€ã€‚æˆ‘ä»¬å¯ä»¥åœ¨<code>arch/arm/Makefile</code>é‡Œé¢æœç´¢<code>textofs</code>:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">141 textofs-y       := 0x00008000</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ª<code>textofs</code>å®šä¹‰çš„å°±æ˜¯Linux Kernel zImageæ‰§è¡Œåœ°å€å¯¹åº”çš„å†…å­˜åç§»åœ°å€ï¼Œé»˜è®¤åç§»ä¸º0x8000ã€‚</p>
<p>åœ¨U-Bootå‘½ä»¤è¡Œä¸­è¾“å…¥<code>bdinfo</code>å‘½ä»¤ï¼Œå¯ä»¥æŸ¥åˆ°è¿™å—å¼€å‘æ¿å†…å­˜çš„èµ·å§‹åœ°å€ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">=&gt; bdinfo</span><br><span class="line">boot_params = <span class="number">0x60002000</span></span><br><span class="line">DRAM bank   = <span class="number">0x00000000</span></span><br><span class="line">-&gt; start    = <span class="number">0x60000000</span></span><br><span class="line">-&gt; size     = <span class="number">0x20000000</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°è¿™å—å¼€å‘æ¿çš„å†…å­˜å…¶å®åœ°å€ä¸º0x60000000ï¼Œæ‰€ä»¥å¯¹åº”å†…æ ¸çš„èµ·å§‹åœ°å€ä¸ºï¼š0x62008000ã€‚DTBçš„åŠ è½½åœ°å€æ²¡æœ‰ç‰¹åˆ«çš„è¦æ±‚ï¼Œä¸€èˆ¬æ³¨æ„å’Œ Linux Kernel Image é¿å¼€ï¼Œä¸è¦é‡å å³å¯ã€‚</p>
</li>
<li><p><strong>é€šè¿‡<code>bootz</code>å‘½ä»¤å¯åŠ¨Linux Kernel</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">bootz 0x62008000 - 0x64008000</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>Embedded</category>
      </categories>
      <tags>
        <tag>qemu</tag>
        <tag>uboot</tag>
        <tag>kernel</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸ºDebianç¼–è¯‘å†…æ ¸çš„debå®‰è£…åŒ…</title>
    <url>/2019/01/04/build-kernel-deb-for-debian.html</url>
    <content><![CDATA[<blockquote>
<p>æ‰‹é‡Œé¢æœ‰ä¸€å°åŒ—ç¾çš„VPSï¼Œç½‘ç»œçŠ¶å†µä¸å¤ªç¨³å®šï¼Œæ—©å°±å¬è¯´äº†Googleçš„å…¨æ–°TCPæ‹¥å¡ç®—æ³•BBRï¼Œæ‰€ä»¥æ‰“ç®—å°è¯•ä¸€ä¸‹ã€‚è¯¥æ‹¥å¡ç®—æ³•å®é™…å·²ç»åˆå…¥ä¸»çº¿å†…æ ¸ï¼Œä½†æ˜¯ä¸ºäº†è·å¾—æœ€å¥½çš„æ•ˆæœï¼Œè¿™é‡Œæˆ‘å°†ç¼–è¯‘è°·æ­Œä¸“ä¸ºå¼€å‘BBRè€Œåˆ›å»ºçš„å†…æ ¸â€”â€”net-nextã€‚æ›¿æ¢å†…æ ¸çš„åŒæ—¶éœ€è¦æ›¿æ¢å†…æ ¸æ¨¡å—ï¼Œå› æ­¤å°†å†…æ ¸ç¼–è¯‘ä¸ºdebå®‰è£…åŒ…å°†æ›´åŠ ä¾¿äºç®¡ç†ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="ä¾èµ–ç¯å¢ƒ"><a href="#ä¾èµ–ç¯å¢ƒ" class="headerlink" title="ä¾èµ–ç¯å¢ƒ"></a>ä¾èµ–ç¯å¢ƒ</h1><p>è¿™é‡Œçš„æ‰€æœ‰æ“ä½œåœ¨Debian9ä¸‹è¿›è¡Œã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">following packages are used to build kernel, you may need more</span></span><br><span class="line">sudo apt install build-essential libncurses5-dev git flex bison wget bzip2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">following packages are used to build kernel package</span></span><br><span class="line">sudo apt install kernel-package fakeroot</span><br></pre></td></tr></table></figure>

<h1 id="è·å–å†…æ ¸æºç "><a href="#è·å–å†…æ ¸æºç " class="headerlink" title="è·å–å†…æ ¸æºç "></a>è·å–å†…æ ¸æºç </h1><p>è¿™é‡Œæˆ‘ä»¥Googleç”¨æ¥å¼€å‘BBRçš„å†…æ ¸net-nextä¸ºä¾‹ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone git://git.kernel.org/pub/scm/linux/kernel/git/davem/net-next.git linux-kernel</span><br></pre></td></tr></table></figure>

<h1 id="é…ç½®ä¸ç¼–è¯‘"><a href="#é…ç½®ä¸ç¼–è¯‘" class="headerlink" title="é…ç½®ä¸ç¼–è¯‘"></a>é…ç½®ä¸ç¼–è¯‘</h1><p>é…ç½®å†…æ ¸éœ€è¦configæ–‡ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨å†…æ ¸ä¸­çš„x86é»˜è®¤é…ç½®ï¼Œä¹Ÿå¯ä»¥å°†æœ¬æœºçš„é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°æºç ç›®å½•ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd linux-kernel</span><br><span class="line">make clean &amp;&amp; make mrproper</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">if</span> you want to use default config</span></span><br><span class="line">make x86_64_defconfig</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or use <span class="built_in">local</span> machine config</span></span><br><span class="line">cp /boot/config-`uname -r` ./.config</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">configure anything you want</span></span><br><span class="line">make menuconfig</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå¹¶ä¸ç›´æ¥ä½¿ç”¨makeç¼–è¯‘ï¼Œè€Œæ˜¯ä½¿ç”¨make-kpkgï¼Œæ­é…fakerootæ¥ç¼–è¯‘å†…æ ¸å®‰è£…åŒ…ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make-kpkg clean</span><br><span class="line">fakeroot make-kpkg --initrd --append-to-version=-custom kernel_image kernel_headers</span><br></pre></td></tr></table></figure>

<p>æœ€åï¼Œåœ¨ä¸Šçº§ç›®å½•ä¸­å°±å¯ä»¥æ‰¾åˆ°ç¼–è¯‘å¥½çš„linux-imageå’Œlinux-headersã€‚</p>
<h1 id="å®‰è£…å†…æ ¸"><a href="#å®‰è£…å†…æ ¸" class="headerlink" title="å®‰è£…å†…æ ¸"></a>å®‰è£…å†…æ ¸</h1><p>è¦å®‰è£…æ–°å†…æ ¸ï¼Œéœ€è¦é¦–å…ˆå¸è½½æ—§çš„å†…æ ¸ï¼Œå®‰è£…å¥½ä¹‹åï¼Œè¿˜è¦æ›´æ–°grubï¼Œå¦åˆ™æœºå™¨å°†æ— æ³•å¯åŠ¨ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">WARNING, following <span class="built_in">command</span> will remove your kernel!</span></span><br><span class="line">dpkg -l | grep linux-image | awk &#x27;&#123;print $2&#125;&#x27; | xargs -I &#123;&#125; sudo apt purge &#123;&#125; -y</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">install new kernel</span></span><br><span class="line">sudo dpkg -i linux-image*</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">update grub</span></span><br><span class="line">sudo update-grub</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>debian</tag>
        <tag>kernel</tag>
        <tag>linux</tag>
        <tag>package</tag>
      </tags>
  </entry>
  <entry>
    <title>å°†æ ‘è“æ´¾æ‰“é€ ä¸ºæ— çº¿ä¸­ç»§</title>
    <url>/2018/01/06/build-wireless-bridge-with-raspberry-pi.html</url>
    <content><![CDATA[<blockquote>
<p>è®©æ ‘è“æ´¾è¿›è¡Œwifiä¸­ç»§ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯å®‰è£…OpenWrtæˆ–è€…LEDEï¼Œç„¶åé€šè¿‡Luciç•Œé¢å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œæ“ä½œï¼Œå‰ææ˜¯ä½ çš„æ— çº¿ç½‘å¡èƒ½å¤Ÿåœ¨OpenWrtä¸‹é¡ºåˆ©é©±åŠ¨ã€‚<br>ç”±äºæˆ‘éœ€è¦ä¸­ç»§5Gä¿¡å·ï¼Œæ‰€ä»¥é€‰è´­äº†ä¸€æ¬¾æ”¯æŒåŒé¢‘çš„USBæ— çº¿ç½‘å¡ï¼Œä¸»æ§ä¸ºRTL8812AUï¼ŒRealtekå®é™…ä¸Šé—´æ¥æä¾›äº†Linuxä¸‹ç½‘å¡é©±åŠ¨çš„æºç ï¼Œåœ¨Githubä¸Šå¯ä»¥æœç´¢åˆ°å¾ˆå¤šï¼Œä½†æ˜¯æ— å¥ˆè¿™ä¸ªé©±åŠ¨äº¤å‰ç¼–è¯‘å®Œæˆåinsmodåˆ°OpenWrtå’ŒLEDEå¹¶ä¸èƒ½å¾ˆå¥½çš„é©±åŠ¨ç½‘å¡ï¼Œæ— å¥ˆä¹‹ä¸‹åªå¥½ä½¿ç”¨Raspbianï¼Œé€šè¿‡ç›¸å…³é…ç½®æ¥å®Œæˆéœ€æ±‚ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h1><ul>
<li>å·²ç»å®‰è£…å®ŒRaspbiançš„æ ‘è“æ´¾ï¼Œä¸”èƒ½å¤Ÿé€šè¿‡ä¸²å£ã€SSHæˆ–è€…æ˜¾ç¤ºå™¨ç™»é™†</li>
<li>ç½‘çº¿</li>
<li>ç”µè„‘</li>
</ul>
<p>è¿™é‡Œæˆ‘å‡è®¾ä½ å·²ç»åœ¨æ ‘è“æ´¾ä¸Šå®‰è£…å¥½äº†ç³»ç»Ÿï¼Œå› ä¸ºæ ‘è“æ´¾å®‰è£…ç³»ç»Ÿå¹¶ä¸å¤æ‚ï¼Œæ‰€ä»¥è¿™é‡Œä¸è¿‡å¤šèµ˜è¿°ã€‚</p>
<h1 id="é…ç½®ç½‘æ¡¥"><a href="#é…ç½®ç½‘æ¡¥" class="headerlink" title="é…ç½®ç½‘æ¡¥"></a>é…ç½®ç½‘æ¡¥</h1><p>å¯èƒ½å¾ˆå¤šäººä¼šä¸è§£ï¼šæ·»åŠ ç½‘æ¡¥çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œé€šè¿‡æ ‘è“æ´¾çš„ä»¥å¤ªç½‘å£ä¸æ˜¯å·²ç»å¯ä»¥å¾ˆå¥½çš„é€šä¿¡äº†å—ï¼Ÿ<br>ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆä½ æŠŠç½‘çº¿æ’åˆ°è·¯ç”±å™¨ä¸Šéšä¾¿ä¸€ä¸ªlanå£ï¼Œéƒ½å¯ä»¥pingé€š192.168.1.1ï¼ˆå‡è®¾ä½ çš„ç½‘å…³æ˜¯è¿™ä¸ªï¼‰ï¼Œé‚£å‡ ä¸ªlanå£ä¹Ÿæœ‰IPå—ï¼Ÿè·¯ç”±å™¨çš„lanå£åˆ°åº•æœ‰ä»€ä¹ˆç‰¹æ®Šä¹‹å¤„ï¼Ÿ<br>å­¦è¿‡è®¡ç®—æœºç½‘ç»œçš„ç«¥é‹åº”è¯¥çŸ¥é“ï¼Œç½‘æ¡¥æ˜¯ä¸€ä¸ªå·¥ä½œåœ¨äºŒå±‚çš„è®¾å¤‡ï¼Œç›®çš„æ˜¯åˆ†ç¦»ä¸åŒçš„ç¢°æ’åŸŸï¼Œè®¾å¤‡ä¹‹é—´ç›´æ¥é€šè¿‡macåœ°å€é€šä¿¡ã€‚<br>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰4ä¸ªä»¥å¤ªç½‘å¡ï¼Œä¸€ä¸ªç½‘æ¡¥ï¼Œå¹¶ä¸”å°†è¿™4ä¸ªä»¥å¤ªç½‘å¡è®¾ç½®ä¸ºç½‘æ¡¥çš„4ä¸ªæ¥å£ï¼ŒåŒæ—¶å°†ç½‘å¡è®¾ç½®ä¸ºæ··æ‚æ¨¡å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªè™šæ‹Ÿçš„ç½‘æ¡¥è®¾å¤‡ï¼Œå¦‚æœå†ä¸ºç½‘æ¡¥è®¾ç½®ä¸€ä¸ªIPï¼Œé‚£ä¹ˆè¿™ä¸ªç½‘æ¡¥å°±æ˜¯ä¼ è¯´ä¸­çš„lanäº†ã€‚<br>å®é™…ä¸ŠåŸºäºLinuxç³»ç»Ÿçš„è·¯ç”±å™¨æ­£æ˜¯è¿™ä¹ˆåšçš„ï¼Œåœ¨OpenWrtçš„ç»ˆç«¯ä¸‹ä½¿ç”¨ifconfigå‘½ä»¤å¯ä»¥çœ‹åˆ°ä¸€ä¸ªbr-lançš„æ¥å£ï¼Œé‚£å°±æ˜¯è™šæ‹Ÿç½‘æ¡¥ã€‚</p>
<p>æ˜ç™½äº†åŸç†ï¼Œæ¥ä¸‹æ¥åªè¦çŸ¥é“å¦‚ä½•åˆ›å»ºç½‘æ¡¥å¹¶åˆ†é…æ¥å£ï¼Œé…ç½®IPå°±è¡Œäº†ï¼Œé¦–å…ˆéœ€è¦å®‰è£…ç½‘æ¡¥é…ç½®å·¥å…·ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install bridge-utils</span><br></pre></td></tr></table></figure>

<p>ç„¶åè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå³å¯å®Œæˆé…ç½®ï¼Œæ›´è¯¦ç»†çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒmanæ‰‹å†Œã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">brctl addbr br-lan</span><br><span class="line">brctl addif br-lan eth0</span><br><span class="line">ifconfig br-lan 192.168.1.1 up</span><br><span class="line">ifconfig eth0 0.0.0.0 up</span><br></pre></td></tr></table></figure>

<h1 id="é…ç½®IPè½¬å‘"><a href="#é…ç½®IPè½¬å‘" class="headerlink" title="é…ç½®IPè½¬å‘"></a>é…ç½®IPè½¬å‘</h1><p>ä¸€èˆ¬çš„Linuxå‘è¡Œç‰ˆé»˜è®¤éƒ½ä¸ä¼šå¼€å¯ip_forwardï¼Œå› ä¸ºæ­£å¸¸çš„è®¡ç®—æœºéƒ½æ˜¯ä½œä¸ºç»ˆç«¯ï¼Œæ²¡æœ‰è½¬å‘æ•°æ®æŠ¥çš„éœ€æ±‚ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨æ‰“å¼€ã€‚</p>
<h2 id="ç¬¬ä¸€ç§æ–¹å¼"><a href="#ç¬¬ä¸€ç§æ–¹å¼" class="headerlink" title="ç¬¬ä¸€ç§æ–¹å¼"></a>ç¬¬ä¸€ç§æ–¹å¼</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo 1 &gt; /proc/sys/net/ipv4/ip_forward</span><br></pre></td></tr></table></figure>

<h2 id="ç¬¬äºŒç§æ–¹å¼"><a href="#ç¬¬äºŒç§æ–¹å¼" class="headerlink" title="ç¬¬äºŒç§æ–¹å¼"></a>ç¬¬äºŒç§æ–¹å¼</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/sysctl.conf</span><br><span class="line">+ net.ipv4.ip_forward = 1</span><br></pre></td></tr></table></figure>

<h2 id="ç¬¬ä¸‰ç§æ–¹å¼"><a href="#ç¬¬ä¸‰ç§æ–¹å¼" class="headerlink" title="ç¬¬ä¸‰ç§æ–¹å¼"></a>ç¬¬ä¸‰ç§æ–¹å¼</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sysctl net.ipv4.ip_forward = 1</span><br></pre></td></tr></table></figure>

<h1 id="é…ç½®iptables"><a href="#é…ç½®iptables" class="headerlink" title="é…ç½®iptables"></a>é…ç½®iptables</h1><p>å¦‚æœæˆ‘ä»¬ä¸­ç»§çš„æ˜¯è¿è¥å•†çš„wifiï¼Œé‚£ä¹ˆå¯èƒ½ä¼šè·å¾—ä¸€ä¸ªå…¬ç½‘çš„IPï¼Œè¿™ç§æƒ…å†µä¸‹æƒ³è®©å†…ç½‘çš„æ‰€æœ‰è®¾å¤‡å…±äº«è¿™ä¸€ä¸ªå…¬ç½‘IPï¼Œéœ€è¦åœ¨wlan0ç½‘å£å¯ç”¨natã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">iptables -t nat -A POSTROUTING -o wlan0 -j MASQUERADE</span><br></pre></td></tr></table></figure>

<h1 id="å®‰è£…DHCP-x2F-DNSæœåŠ¡å™¨"><a href="#å®‰è£…DHCP-x2F-DNSæœåŠ¡å™¨" class="headerlink" title="å®‰è£…DHCP&#x2F;DNSæœåŠ¡å™¨"></a>å®‰è£…DHCP&#x2F;DNSæœåŠ¡å™¨</h1><p>ä½œä¸ºä¸€å°å‡†è·¯ç”±å™¨ï¼Œæ’åœ¨ä¸Šé¢çš„è®¾å¤‡æœ€å¥½èƒ½å¤Ÿè‡ªåŠ¨è·å–IPï¼Œè¿™é‡Œæˆ‘é€‰ç”¨çš„æ˜¯dnsmasqï¼Œå› ä¸ºç§‘å­¦ä¸Šç½‘æ¯”è¾ƒæ–¹ä¾¿ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">apt install dnsmasq</span><br><span class="line">vim /etc/dnsmasq.conf</span><br><span class="line">+ dhcp-range=192.168.1.50,192.168.1.150,255.255.255.0,12h</span><br></pre></td></tr></table></figure>

<p>dnsmasqçš„åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œè¿™é‡Œæˆ‘ä»…ä»…ä½¿ç”¨äº†åŸºç¡€çš„DNS&#x2F;DHCPåŠŸèƒ½ï¼Œä½ ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å®šåˆ¶ã€‚</p>
<h1 id="åœ¨æ ‘è“æ´¾ä¸Šè¿æ¥WiFi"><a href="#åœ¨æ ‘è“æ´¾ä¸Šè¿æ¥WiFi" class="headerlink" title="åœ¨æ ‘è“æ´¾ä¸Šè¿æ¥WiFi"></a>åœ¨æ ‘è“æ´¾ä¸Šè¿æ¥WiFi</h1><p>é€šè¿‡å›¾å½¢ç•Œé¢è¿æ¥wifiéš¾åº¦ä¸å¤§ï¼Œè¿™é‡Œä¸»è¦è¯´ä¸€ä¸‹é€šè¿‡å‘½ä»¤è¡Œè¿æ¥wpa&#x2F;wpa2åŠ å¯†çš„wifiã€‚<br>åœ¨Linuxå‘è¡Œç‰ˆä¸­ï¼Œä¸€èˆ¬éƒ½ä¼šé›†æˆä¸€å¥—wireless-toolsï¼Œä½†æ˜¯åœ¨æ ‘è“æ´¾ä¸­ï¼ŒåŒæ—¶è¿˜æä¾›äº†wpa_supplicantï¼Œå®ƒåŸºäºC&#x2F;Sæ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨wpa_cliæ¥å’Œwpa_supplicanté€šä¿¡ï¼Œå®Œæˆç›¸å…³è®¾ç½®ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wpa_cli</span><br></pre></td></tr></table></figure>
<p>ç„¶åä¼šå‡ºç°ä¸‹é¢è¿™æ ·çš„å‘½ä»¤è¡Œç•Œé¢</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wpa_cli v2.4</span><br><span class="line">Copyright (c) 2004-2015, Jouni Malinen &lt;j@w1.fi&gt; and contributors</span><br><span class="line"></span><br><span class="line">This software may be distributed under the terms of the BSD license.</span><br><span class="line">See README for more details.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Selected interface &#x27;wlan0&#x27;</span><br><span class="line"></span><br><span class="line">Interactive mode</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ—¢ç„¶æ˜¯å‘½ä»¤è¡Œï¼Œå°±å¯ä»¥æ•²å‘½ä»¤ï¼Œé¦–å…ˆæ‰«æä¸€ä¸‹wifi</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">scan</span><br></pre></td></tr></table></figure>

<p>ç„¶åè¯»å–ä¸€ä¸‹æ‰«æçš„ç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">scan_result</span><br></pre></td></tr></table></figure>

<p>å½“çœ‹åˆ°ä½ éœ€è¦ä¸­ç»§çš„wifiçš„SSIDåï¼Œè®°ä¸‹æ¥ï¼Œç„¶åæ–°å»ºä¸€ä¸ªç©ºç½‘ç»œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">add_network</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ä¼šæ˜¾ç¤ºæ–°å»ºçš„ç½‘ç»œçš„ç¼–å·ï¼Œå¦‚æœæ²¡çœ‹æ¸…ï¼Œå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹å½“å‰æ‰€æœ‰é…ç½®è¿‡çš„çƒ­ç‚¹ä¿¡æ¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">list_network</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢æˆ‘ä»¬éœ€è¦é…ç½®ç½‘ç»œäº†ï¼Œå‡è®¾æ–°å»ºçš„ç½‘ç»œç¼–å·ä¸º0</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">set_network 0 ssid &quot;OpenWrt&quot;</span><br><span class="line">set_network 0 psk &quot;1234567890&quot;</span><br></pre></td></tr></table></figure>

<p>æœ€åé€‰æ‹©ä¸€ä¸ªç½‘ç»œè¿›è¡Œè¿æ¥</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select_network 0</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ­£å¸¸çš„è¯ï¼Œå°±å¯ä»¥è¿æ¥æˆåŠŸï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰çŠ¶æ€</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">status</span><br></pre></td></tr></table></figure>

<h1 id="åç»­"><a href="#åç»­" class="headerlink" title="åç»­"></a>åç»­</h1><p>æ­¤æ—¶ï¼Œå°†æ— çº¿è·¯ç”±å™¨çš„wanå£ä¸æ ‘è“æ´¾çš„lanå£è¿æ¥ï¼Œå¹¶è®¾ç½®ä¸ºè‡ªåŠ¨è·å–IPï¼Œå°±å¯ä»¥ä¸Šç½‘äº†ã€‚<br>è¿™æ ·å¯ä»¥å°†ä¸­ç»§çš„æ¥æ”¶æ–¹ä¸å‘é€æ–¹é€šè¿‡ç½‘çº¿è¿æ¥ï¼Œå› æ­¤çµæ´»æ€§æ›´é«˜ï¼Œå‰ææ˜¯ä½ èƒ½ç»™æ ‘è“æ´¾æ‰¾åˆ°ä¸€ä¸ªä¸ä¼šè¢«å·çš„åœ°æ–¹(Â¬ï½¤Â¬)</p>
]]></content>
      <categories>
        <category>Embedded</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>raspberrypi</tag>
        <tag>wireless</tag>
        <tag>bridge</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨Debianä¸‹é…ç½®SambaæœåŠ¡å™¨</title>
    <url>/2018/12/29/configure-samba-server-under-debian.html</url>
    <content><![CDATA[<blockquote>
<p>æœ‰æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨Windowsä¸‹è®¿é—®Linuxä¸‹çš„æ–‡ä»¶ï¼Œä½†åˆä¸æƒ³æŠŠæ–‡ä»¶æƒé™æä¹±ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨Sambaå°†Linuxä¸‹çš„æ–‡ä»¶å…±äº«ç»™Windowsã€‚ä¹‹æ‰€ä»¥ä¸ä½¿ç”¨FTPï¼Œæ˜¯å› ä¸ºå®ƒéœ€è¦å°†æ–‡ä»¶ä¸‹è½½åæ‰èƒ½ç¼–è¾‘ï¼›è€ŒåŸºäºSSHçš„SFTPåˆ™ä¸è¢«WindowsåŸç”Ÿæ”¯æŒï¼Œéœ€è¦é¢å¤–çš„å®¢æˆ·ç«¯ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="å®‰è£…Samba"><a href="#å®‰è£…Samba" class="headerlink" title="å®‰è£…Samba"></a>å®‰è£…Samba</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install samba</span><br></pre></td></tr></table></figure>

<h1 id="é…ç½®Samba"><a href="#é…ç½®Samba" class="headerlink" title="é…ç½®Samba"></a>é…ç½®Samba</h1><p>Sambaçš„é…ç½®æ–‡ä»¶æ¯”è¾ƒé•¿ï¼Œå•çº¯çš„å…±äº«ä¸éœ€è¦è¿›è¡Œå¤æ‚è®¾ç½®ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶<code>/etc/samba/smb.conf</code>æœ€ä¸‹æ–¹æ·»åŠ è‡ªå®šä¹‰çš„å…±äº«å³å¯ã€‚</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[my-share]</span></span><br><span class="line">   <span class="attr">comment</span> = my share directory</span><br><span class="line">   <span class="attr">path</span> = &lt;patch to you share directory&gt;</span><br><span class="line">   <span class="attr">browseable</span> = <span class="literal">yes</span></span><br><span class="line">   read <span class="attr">only</span> = <span class="literal">no</span></span><br><span class="line">   guest <span class="attr">ok</span> = <span class="literal">no</span></span><br><span class="line">   create <span class="attr">mask</span> = <span class="number">0644</span></span><br><span class="line">   directory <span class="attr">mask</span> = <span class="number">0775</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæƒ³è¦æ­å»ºä¸€ä¸ªåŒ¿åè®¿é—®çš„å…±äº«ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„é…ç½®</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[anon-share]</span></span><br><span class="line">   <span class="attr">path</span> = &lt;patch to you share directory&gt;</span><br><span class="line">   <span class="attr">writeable</span> = <span class="literal">yes</span></span><br><span class="line">   <span class="attr">browseable</span> = <span class="literal">yes</span></span><br><span class="line">   <span class="attr">public</span> = <span class="literal">yes</span></span><br><span class="line">   create <span class="attr">mask</span> = <span class="number">0644</span></span><br><span class="line">   directory <span class="attr">mask</span> = <span class="number">0755</span></span><br><span class="line">   force <span class="attr">user</span> = &lt;username&gt;</span><br></pre></td></tr></table></figure>

<h1 id="é‡å¯SambaæœåŠ¡"><a href="#é‡å¯SambaæœåŠ¡" class="headerlink" title="é‡å¯SambaæœåŠ¡"></a>é‡å¯SambaæœåŠ¡</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">if</span> you are using systemd</span></span><br><span class="line">sudo systemctl restart smbd.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">if</span> you are using sysvinit</span></span><br><span class="line">sudo service smbd restart</span><br></pre></td></tr></table></figure>

<h1 id="å°†ç”¨æˆ·æ·»åŠ åˆ°Samba"><a href="#å°†ç”¨æˆ·æ·»åŠ åˆ°Samba" class="headerlink" title="å°†ç”¨æˆ·æ·»åŠ åˆ°Samba"></a>å°†ç”¨æˆ·æ·»åŠ åˆ°Samba</h1><p>å¦‚æœä½ å‘ç°è‡ªå·±çš„ç”¨æˆ·å¯†ç æ— æ³•ç”¨æ¥ç™»é™†SambaæœåŠ¡å™¨ï¼Œé‚£ä¹ˆéœ€è¦å°†ç”¨æˆ·æ·»åŠ åˆ°Sambaã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo smbpasswd -a &lt;username&gt;</span><br></pre></td></tr></table></figure>

<h1 id="åœ¨Windowsä¸‹è®¿é—®SambaæœåŠ¡å™¨"><a href="#åœ¨Windowsä¸‹è®¿é—®SambaæœåŠ¡å™¨" class="headerlink" title="åœ¨Windowsä¸‹è®¿é—®SambaæœåŠ¡å™¨"></a>åœ¨Windowsä¸‹è®¿é—®SambaæœåŠ¡å™¨</h1><h2 id="ä¸€èˆ¬æƒ…å†µä¸‹"><a href="#ä¸€èˆ¬æƒ…å†µä¸‹" class="headerlink" title="ä¸€èˆ¬æƒ…å†µä¸‹"></a>ä¸€èˆ¬æƒ…å†µä¸‹</h2><p>æ‰“å¼€â€œç½‘ç»œâ€ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æœç´¢ç½‘ç»œä¸Šçš„SambaæœåŠ¡å™¨ï¼Œå¦‚æœä½ å‘ç°äº†è‡ªå·±çš„æœåŠ¡å™¨ï¼Œç›´æ¥ç‚¹å‡»ç„¶åç™»é™†å³å¯ã€‚</p>
<h2 id="ç‰¹æ®Šæƒ…å†µä¸‹"><a href="#ç‰¹æ®Šæƒ…å†µä¸‹" class="headerlink" title="ç‰¹æ®Šæƒ…å†µä¸‹"></a>ç‰¹æ®Šæƒ…å†µä¸‹</h2><p>æŸäº›æƒ…å†µä¸‹ï¼Œæ¯”å¦‚æœ¬æœºä¸SambaæœåŠ¡å™¨æœ‰å¤šæ¡ç½‘ç»œè¿æ¥ï¼Œä¸”é€Ÿåº¦å„å¼‚ï¼Œæˆ–è€…â€œç½‘ç»œå‘ç°â€æ²¡æœ‰åŠæ—¶æ‰¾åˆ°å¯ç”¨çš„SambaæœåŠ¡å™¨æ—¶ï¼Œå¯ä»¥æ‰‹åŠ¨è®¿é—®SambaæœåŠ¡å™¨ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“å¼€Windowsçš„èµ„æºç®¡ç†å™¨ï¼Œåœ¨åœ°å€æ è¾“å…¥</span></span><br><span class="line">\\xxx.xxx.xxx.xxx</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­â€œxxx.xxx.xxx.xxxâ€ä¸ºSambaæœåŠ¡å™¨çš„IPåœ°å€ï¼Œæ­¤æ—¶å°±å¯ä»¥æŒ‡å®šæŸä¸€ç½‘ç»œç›´æ¥è®¿é—®SambaæœåŠ¡å™¨äº†ã€‚</p>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>samba</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Ftraceè°ƒè¯•Linuxå†…æ ¸</title>
    <url>/2019/12/07/debug-kernel-with-ftrace.html</url>
    <content><![CDATA[<blockquote>
<p>åœ¨è¿›è¡Œå†…æ ¸è°ƒè¯•æ—¶ï¼Œ æœ€é•¿ä½¿ç”¨çš„æ–¹å¼å°±æ˜¯<code>printk()</code>ï¼Œç”±äº<code>printk()</code>è¢«è®¾è®¡æˆå¯ä»¥åœ¨ä»»ä½•ä¸Šä¸‹æ–‡ï¼ˆè¿›ç¨‹ä¸Šä¸‹æ–‡ã€ä¸­æ–­ä¸Šä¸‹æ–‡ï¼‰æ‰§è¡Œï¼Œå› æ­¤å®ƒä¼šåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¸¦æ¥è¾ƒå¤§çš„å¼€é”€ï¼Œå°¤å…¶æ˜¯æ‰€è°ƒè¯•çš„ä»£ç å¯¹æ—¶é—´å¾ˆæ•æ„Ÿæ—¶ï¼Œæ¯”å¦‚æ—¶é—´ä¸­æ–­ã€‚è€Œftraceåˆ™èƒ½å¤Ÿåœ¨è¾“å‡ºlogçš„åŒæ—¶ï¼Œæœ€å¤§ç¨‹åº¦ä¸Šé™ä½è°ƒè¯•å¸¦æ¥çš„å¼€é”€ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="é…ç½®Ftrace"><a href="#é…ç½®Ftrace" class="headerlink" title="é…ç½®Ftrace"></a>é…ç½®Ftrace</h1><p>Ftraceçš„APIæ¥å£ä½äºDebugFSä¸­ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ä¿®æ”¹å¯¹åº”çš„æ–‡ä»¶æ¥æ§åˆ¶Ftraceï¼Œå®ƒä»¬éƒ½ä½äº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/sys/kernel/debug/tracing</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ²¡æœ‰è¯¥ç›®å½•ï¼Œé¦–å…ˆæ£€æŸ¥DebugFSæ˜¯å¦æŒ‚è½½ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ‰‹åŠ¨æŒ‚è½½</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mount -v | grep debugfs</span><br><span class="line">mount -t debugfs debugfs /sys/kernel/debug</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ£€æŸ¥ç›¸å…³çš„å†…æ ¸é€‰é¡¹æ˜¯å¦å¼€å¯</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">CONFIG_FUNCTION_TRACER</span><br><span class="line">CONFIG_FUNCTION_GRAPH_TRACER</span><br><span class="line">CONFIG_STACK_TRACER</span><br><span class="line">CONFIG_DYNAMIC_FTRACE</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹çš„æ“ä½œéƒ½åœ¨è¯¥ç›®å½•ä¸­è¿›è¡Œã€‚</p>
<h1 id="å¯åŠ¨-x2F-åœæ­¢tracing"><a href="#å¯åŠ¨-x2F-åœæ­¢tracing" class="headerlink" title="å¯åŠ¨&#x2F;åœæ­¢tracing"></a>å¯åŠ¨&#x2F;åœæ­¢tracing</h1><p>å¼€å¯Ftraceåè™½ç„¶ä¸ä¼šå½±å“ç³»ç»Ÿçš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¼šå¯¹æ€§èƒ½é€ æˆä¸€å®šçš„å½±å“ï¼Œè€Œä¸”ç”¨äºè®°å½•logçš„bufferç©ºé—´æœ‰é™ï¼Œå¦‚æœä¸åŠæ—¶åœæ­¢ï¼Œå…³é”®çš„æ•°æ®å°±ä¼šè¢«æ–°æ•°æ®è¦†ç›–ã€‚</p>
<h2 id="ç”¨æˆ·ç©ºé—´"><a href="#ç”¨æˆ·ç©ºé—´" class="headerlink" title="ç”¨æˆ·ç©ºé—´"></a>ç”¨æˆ·ç©ºé—´</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">start tracing</span></span><br><span class="line">echo 1 &gt; tracing_on</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">stop tracing</span></span><br><span class="line">echo 0 &gt; tracing_on</span><br></pre></td></tr></table></figure>

<h2 id="å†…æ ¸ç©ºé—´"><a href="#å†…æ ¸ç©ºé—´" class="headerlink" title="å†…æ ¸ç©ºé—´"></a>å†…æ ¸ç©ºé—´</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* start tracing */</span></span><br><span class="line">tracing_on();</span><br><span class="line"><span class="comment">/* stop tracing*/</span></span><br><span class="line">tracing_off();</span><br></pre></td></tr></table></figure>

<h1 id="Tracers"><a href="#Tracers" class="headerlink" title="Tracers"></a>Tracers</h1><p>Ftraceæä¾›äº†å¤šç§tracerï¼Œæ¯ç§traceréƒ½ä¼šä»¥ç‰¹å®šçš„æ ¼å¼è®°å½•PIDã€TIMESTAMPã€FUNCTIONç­‰æ•°æ®ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½é€‰æ‹©ä¸€ç§tracerã€‚</p>
<p>æŸ¥çœ‹å½“å‰å†…æ ¸æ‰€æ”¯æŒçš„tracer</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat available_tracers</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hwlat blk mmiotrace function_graph wakeup_dl wakeup_rt wakeup function nop</span><br></pre></td></tr></table></figure>

<p>è¦å¯ç”¨å¯¹åº”çš„tracerï¼Œç›´æ¥å°†å…¶åç§°echoåˆ°<code>current_tracer </code>ä¸­å³å¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo function &gt; current_tracer</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡<code>trace</code>æ–‡ä»¶å¯ä»¥ç›´æ¥è¯»å–æŠ“å–çš„logæ•°æ®ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat trace</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢ä»‹ç»å‡ ç§å¸¸ç”¨çš„tracer</p>
<h2 id="function-tracer"><a href="#function-tracer" class="headerlink" title="function tracer"></a>function tracer</h2><p>function tracerç”Ÿæˆçš„logæ•°æ®è¾ƒä¸ºå…¨é¢ï¼Œä½†æ˜¯å¯¹äºå‡½æ•°çš„åµŒå¥—å…³ç³»æè¿°ä¸æ˜¯å¾ˆç›´è§‚ã€‚</p>
<p>æŠ“å–çš„logæ ¼å¼å¦‚ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">tracer: <span class="keyword">function</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># entries-in-buffer/entries-written: 410007/21079612   #P:8</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#                              _-----=&gt; irqs-off</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">                            / _----=&gt; need-resched</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">                           | / _---=&gt; hardirq/softirq</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">                           || / _--=&gt; preempt-depth</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">                           ||| /     delay</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">          TASK-PID   CPU<span class="comment">#  ||||    TIMESTAMP  FUNCTION</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">             | |       |   ||||       |         |</span></span><br><span class="line">             awk-8215  [006] d... 17018.301564: __mod_zone_page_state &lt;-release_pages</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€å‡½æ•°æ˜¯å½“å‰æ‰§è¡Œçš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯å…¶è°ƒç”¨è€…ã€‚</p>
<h2 id="function-graph-tracer"><a href="#function-graph-tracer" class="headerlink" title="function_graph tracer"></a>function_graph tracer</h2><p>function_graph tracerå¾ˆé€‚åˆåˆ†æå†…æ ¸ä»£ç çš„æ‰§è¡Œè·¯å¾„ï¼Œä»¥åŠæ€§èƒ½ä¼˜åŒ–ã€‚</p>
<p>æŠ“å–çš„logæ ¼å¼å¦‚ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">tracer: function_graph</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># CPU  DURATION                  FUNCTION CALLS</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">|     |   |                     |   |   |   |</span></span><br><span class="line"> 6)   0.546 us    |                  get_mem_cgroup_from_mm();</span><br><span class="line"> 6)               |                  memcg_kmem_charge_memcg() &#123;</span><br><span class="line"> 6)   0.325 us    |                    try_charge();</span><br><span class="line"> 6)   0.331 us    |                    page_counter_try_charge();</span><br><span class="line"> 6)   1.551 us    |                  &#125;</span><br><span class="line"> 6)   3.050 us    |                &#125; /* memcg_kmem_charge */</span><br><span class="line"> 6)   7.527 us    |              &#125; /* __alloc_pages_nodemask */</span><br><span class="line"> 6) + 10.066 us   |            &#125; /* alloc_pages_current */</span><br><span class="line"> 6)   0.365 us    |            inc_zone_page_state();</span><br><span class="line"> 6) + 11.301 us   |          &#125; /* pte_alloc_one */</span><br><span class="line"> 6)               |          filemap_map_pages() &#123;</span><br><span class="line"> 6)               |            alloc_set_pte() &#123;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡<strong>DURATION</strong>è¿™ä¸€åˆ—å¯ä»¥çœ‹å‡ºæ¯ä¸ªå‡½æ•°çš„æ‰§è¡Œæ—¶é—´ã€‚</p>
<p>å¦‚æœè¶…è¿‡10å¾®ç§’ï¼Œåˆ™åœ¨å‰é¢ä¼šæœ‰â€œ**+**â€</p>
<p>å¦‚æœè¶…è¿‡100å¾®ç§’ï¼Œåˆ™åœ¨å‰é¢ä¼šæœ‰â€œ**!**â€</p>
<h1 id="æ·»åŠ è‡ªå®šä¹‰log"><a href="#æ·»åŠ è‡ªå®šä¹‰log" class="headerlink" title="æ·»åŠ è‡ªå®šä¹‰log"></a>æ·»åŠ è‡ªå®šä¹‰log</h1><p>æœ‰æ—¶ï¼Œå†…æ ¸è‡ªå¸¦çš„trace pointå¯èƒ½æ— æ³•æ»¡è¶³æˆ‘ä»¬éœ€æ±‚ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ é¢å¤–çš„trace logï¼Œå¹¶è®©å…¶ä¸åŸæœ¬çš„logç»“åˆèµ·æ¥ã€‚</p>
<h2 id="å†…æ ¸ç©ºé—´-â€”â€”-trace-printk"><a href="#å†…æ ¸ç©ºé—´-â€”â€”-trace-printk" class="headerlink" title="å†…æ ¸ç©ºé—´ â€”â€” trace_printk()"></a>å†…æ ¸ç©ºé—´ â€”â€” trace_printk()</h2><p>æ–‡ç« ä¸€å¼€å§‹å°±æåˆ°ï¼Œè™½ç„¶<code>printk()</code>ä½¿ç”¨èµ·æ¥ç®€å•ï¼Œä½†æ˜¯å…¶å¼€é”€è¾ƒå¤§ï¼Œæœ‰æ—¶ç”šè‡³ä¼šå½±å“åˆ°æˆ‘ä»¬å¯¹å†…æ ¸è¿›è¡Œè°ƒè¯•ã€‚</p>
<p>æ¯”å¦‚åœ¨è°ƒè¯•scheduleræˆ–è€…networkè¿™ç§éå¸¸å¿™ç¢Œçš„å­ç³»ç»Ÿæ—¶ï¼Œ<code>printk()</code>ä¼šæå¤§åœ°æ‹–æ…¢ç³»ç»Ÿæ€§èƒ½ï¼Œç”šè‡³é€ æˆæ­»é”ï¼›è€Œåœ¨è°ƒè¯•ä¸€äº›ç«æ€é—®é¢˜æ—¶ï¼Œä½¿ç”¨<code>printk()</code>ç”šè‡³ä¼šè®©é—®é¢˜â€œæ¶ˆå¤±â€ï¼Œæˆ–è€…éš¾ä»¥å¤ç°ã€‚</p>
<p>è€ŒFtraceæä¾›çš„<code>trace_printk()</code>åˆ™å¯ä»¥ç”¨äºè¿™äº›è°ƒè¯•åœºæ™¯ï¼Œè·Ÿprintk()ä¸€æ ·ï¼Œå®ƒä¹Ÿå¯ä»¥ç”¨äºä»»ä½•ä¸Šä¸‹æ–‡ä¸­ï¼›ä¸åŒçš„æ˜¯ï¼Œå®ƒä¸ä¼šæŠŠlogè¾“å‡ºåˆ°consoleï¼Œè€Œæ˜¯è¾“å‡ºåˆ°ä¸€ä¸ªç‹¬ç«‹çš„bufferã€‚ä½¿ç”¨<code>trace_printk()</code>è¾“å‡ºçš„logä¼šä¸å…¶å®ƒtracerè¾“å‡ºçš„logç»“åˆã€‚</p>
<p>åœ¨å†…æ ¸æ¨¡å—ä¸­æµ‹è¯•<code>trace_printk()</code>ï¼Œæ¨¡å—ä»£ç å¦‚ä¸‹</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/kernel.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/module.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">MODULE_LICENSE(<span class="string">&quot;GPL&quot;</span>);</span><br><span class="line">MODULE_AUTHOR(<span class="string">&quot;colorfulshark@hotmail.com&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">hello_kernel_init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">        tracing_on();</span><br><span class="line">        trace_printk(<span class="string">&quot;hello kernel\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">hello_kernel_exit</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">        trace_printk(<span class="string">&quot;goodbye kenrel\n&quot;</span>);</span><br><span class="line">        tracing_off();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module_init(hello_kernel_init);</span><br><span class="line">module_exit(hello_kernel_exit);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>å½“ä½¿ç”¨<strong>nop&#x2F;function</strong>ä½œä¸ºtraceræ—¶ï¼Œè¾“å‡ºçš„logå¦‚ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">tracer: nop</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># entries-in-buffer/entries-written: 2/2   #P:8</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#                              _-----=&gt; irqs-off</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">                            / _----=&gt; need-resched</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">                           | / _---=&gt; hardirq/softirq</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">                           || / _--=&gt; preempt-depth</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">                           ||| /     delay</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">          TASK-PID   CPU<span class="comment">#  ||||    TIMESTAMP  FUNCTION</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">             | |       |   ||||       |         |</span></span><br><span class="line">          insmod-1442  [002] .... 23080.367994: 0xffffffffc044a005: hello kernel</span><br><span class="line">           rmmod-4353  [003] .... 23271.094110: 0xffffffffc044a025: goodbye kenrel</span><br></pre></td></tr></table></figure>
</li>
<li><p>å½“ä½¿ç”¨<strong>function_graph</strong>ä½œä¸ºtraceræ—¶ï¼Œè‡ªå®šä¹‰çš„logä¼šä»¥ç±»ä¼¼æ³¨é‡Šçš„å½¢å¼å‡ºç°</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">tracer: function_graph</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># CPU  DURATION                  FUNCTION CALLS</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">|     |   |                     |   |   |   |</span></span><br><span class="line"> 5)               |  /* hello kernel */</span><br><span class="line"> 6)   1.430 us    |  _raw_spin_unlock_irqrestore();</span><br><span class="line"> 5)               |  blocking_notifier_call_chain() &#123;</span><br><span class="line"> 5)               |    down_read() &#123;</span><br><span class="line"> 5)               |      _cond_resched() &#123;</span><br><span class="line"> 5)   0.195 us    |        rcu_all_qs();</span><br><span class="line"> 5)   0.627 us    |      &#125;</span><br><span class="line"> [...]</span><br><span class="line"> 2)               |      0xffffffffc044a030() &#123;</span><br><span class="line"> 5)   0.235 us    |                  rcu_cblist_dequeue();</span><br><span class="line"> 2)               |        /* goodbye kenrel */</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="ç”¨æˆ·ç©ºé—´-â€”â€”-trace-marker"><a href="#ç”¨æˆ·ç©ºé—´-â€”â€”-trace-marker" class="headerlink" title="ç”¨æˆ·ç©ºé—´ â€”â€” trace_marker"></a>ç”¨æˆ·ç©ºé—´ â€”â€” trace_marker</h2><p>åœ¨è°ƒè¯•ç”¨æˆ·ç©ºé—´ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¸Œæœ›èƒ½å¤ŸåŒæ­¥äº†è§£å†…æ ¸é‡Œçš„çŠ¶æ€ï¼Œè™½ç„¶Ftraceè¾“å‡ºçš„logæœ‰æ—¶é—´æˆ³ï¼Œä½†å®ƒè·Ÿå¢™é’Ÿå¹¶æ²¡æœ‰éå¸¸ç²¾ç¡®çš„å¯¹åº”å…³ç³»ï¼Œæ‰€ä»¥æœ€å¥½çš„è§£å†³æ–¹æ³•æ˜¯è®©ç”¨æˆ·ç©ºé—´çš„ç¨‹åºæœ‰èƒ½åŠ›æŠŠlogè¾“å‡ºåˆ°Ftraceçš„bufferä¸­ï¼Œä»è€Œä¸tracerè¾“å‡ºçš„logç»“åˆã€‚ä½¿ç”¨trace_markerè¿™ä¸ªæ–‡ä»¶å³å¯å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo &#x27;hello trace&#x27; &gt; trace_marker</span><br></pre></td></tr></table></figure>

<p>å…¶æ•ˆæœä¸åœ¨å†…æ ¸ç©ºé—´ä½¿ç”¨çš„<code>trace_printk()</code>ç›¸åŒã€‚</p>
<h1 id="ä½¿ç”¨Ftraceè°ƒè¯•oops"><a href="#ä½¿ç”¨Ftraceè°ƒè¯•oops" class="headerlink" title="ä½¿ç”¨Ftraceè°ƒè¯•oops"></a>ä½¿ç”¨Ftraceè°ƒè¯•oops</h1><p>å½“å†…æ ¸å´©æºƒæ—¶ï¼Œæˆ‘ä»¬é€šå¸¸åªèƒ½è·å¾—å´©æºƒå‘ç”Ÿæ—¶çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä½†æ˜¯å¯¹äºå´©æºƒä¹‹å‰å‘ç”Ÿçš„äº‹å´æ‰€çŸ¥ç”šå°‘ï¼Œé€šè¿‡ä½¿ç”¨<strong>ftrace_dump_on_oops</strong>ï¼Œå³å¯åœ¨å†…æ ¸å‘ç”Ÿå´©æºƒæ—¶ï¼Œå°†Ftrace bufferä¸­çš„å†…å®¹æ‰“å°åˆ°consoleä¸Šã€‚è¿™å¯¹äºæ­ç¤ºå´©æºƒå‘ç”Ÿçš„åŸå› å¯èƒ½èµ·åˆ°è‡³å…³é‡è¦çš„ä½œç”¨ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo 1 &gt; ftrace_dump_on_oops</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>sysrq-z</code>å¯ä»¥æ‰‹åŠ¨è§¦å‘è¿™ä¸ªè¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨å†…æ ¸ä»£ç ä¸­ä½¿ç”¨<code>ftrace_dump()</code>æ¥è§¦å‘ã€‚</p>
<h1 id="ä½¿ç”¨Ftraceè·Ÿè¸ªæ ˆçš„ä½¿ç”¨"><a href="#ä½¿ç”¨Ftraceè·Ÿè¸ªæ ˆçš„ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨Ftraceè·Ÿè¸ªæ ˆçš„ä½¿ç”¨"></a>ä½¿ç”¨Ftraceè·Ÿè¸ªæ ˆçš„ä½¿ç”¨</h1><p>å› ä¸ºå†…æ ¸æ ˆç©ºé—´éå¸¸æœ‰é™ï¼Œåˆ†æå†…æ ¸å‡½æ•°å¯¹äºæ ˆç©ºé—´çš„ä½¿ç”¨å¯ä»¥ç”¨äºä¼˜åŒ–å†…æ ¸ä»£ç ã€‚</p>
<p>è¦ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œé¦–å…ˆè¦å¯åŠ¨ç›¸åº”çš„å†…æ ¸é€‰é¡¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CONFIG_STACK_TRACER</span><br></pre></td></tr></table></figure>

<p>è™½ç„¶è¿™ä¸ªtraceræ˜¯åŸºäºfunction tracerå¼€å‘çš„ï¼Œä½†æ˜¯å®ƒä½¿ç”¨ç‹¬ç«‹çš„buffer</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo 1 &gt; /proc/sys/kernel/stack_tracer_enabled</span><br></pre></td></tr></table></figure>

<p>å¦‚æœéœ€è¦ä»ç³»ç»Ÿå¯åŠ¨å°±å¼€å§‹è®°å½•æ ˆçš„ä½¿ç”¨ï¼Œå°†<code>stacktrace</code>åŠ åˆ°å†…æ ¸çš„å¯åŠ¨å‚æ•°ä¸­å³å¯ã€‚</p>
<ul>
<li><p>æŸ¥çœ‹åˆ°ç›®å‰ä¸ºæ­¢è¢«ä½¿ç”¨è¿‡çš„æœ€å¤§çš„æ ˆ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat stack_max_size</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2728</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹æ¯ä¸ªå‡½æ•°ä½¿ç”¨çš„æ ˆå¤§å°</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat stack_trace</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">      Depth    Size   Location    (15 entries)</span><br><span class="line">      -----    ----   --------</span><br><span class="line">0)     2840      64   __msecs_to_jiffies+0x5/0x30</span><br><span class="line">1)     2776      80   update_group_capacity+0x28/0x1f0</span><br><span class="line">2)     2696     384   find_busiest_group+0xff/0x9c0</span><br><span class="line">3)     2312     248   load_balance+0x164/0x9d0</span><br><span class="line">4)     2064     112   pick_next_task_fair+0x443/0x5b0</span><br><span class="line">5)     1952     104   __schedule+0x11e/0x880</span><br><span class="line">6)     1848      16   schedule+0x2c/0x80</span><br><span class="line">7)     1832     144   schedule_hrtimeout_range_clock+0x181/0x190</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>Ftraceéå¸¸å¼ºå¤§ï¼Œä½†æ˜¯é€šè¿‡DebugFSä½¿ç”¨èµ·æ¥ä¹Ÿéå¸¸å¤æ‚ï¼Œä»¥åä¼šä»‹ç»åŸºäºFtrace APIæ¥å£çš„å·¥å…·ï¼Œæ¯”å¦‚trace-cmdï¼Œkernelsharkï¼Œå®ƒä»¬å¯ä»¥å¤§å¤§ç®€åŒ–Ftraceçš„ä½¿ç”¨ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://lwn.net/Articles/365835/">Debugging the kernel using Ftrace - part 1</a></p>
<p><a href="https://lwn.net/Articles/366796/">Debugging the kernel using Ftrace - part 2</a></p>
<p><a href="https://www.kernel.org/doc/Documentation/trace/ftrace.txt">ftrace - Function Tracer</a></p>
]]></content>
      <categories>
        <category>Kernel</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>debug</tag>
        <tag>ftrace</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨Ubuntuï¼ˆDebianï¼‰ä¸‹é…ç½®å…¨å¿—A33å¼€å‘ç¯å¢ƒ</title>
    <url>/2018/05/03/environment-setup-for-a33-development.html</url>
    <content><![CDATA[<blockquote>
<p>ä¹‹å‰å‚åŠ æŸåµŒå…¥å¼åŸ¹è®­æœºæ„ï¼Œé€äº†ä¸€ä¸ªå…¨å¿—A33å¹³å°çš„å¹³æ¿ï¼Œä¸€å¼€å§‹çœ‹åˆ°å…¨å¿—å¹³å°ï¼Œå…¶å®æˆ‘æ˜¯æ‹’ç»çš„ (ï¿¢_ï¿¢)ï¼Œä¸è¿‡é‰´äºç‰©å°½å…¶ç”¨ï¼ˆé’±åŒ…ç©ºç©ºï¼‰çš„åŸåˆ™ï¼Œè¿˜æ˜¯å…ä¸ºå…¶éš¾çš„ç©è€ä¸€ç•ªã€‚</p>
</blockquote>
<span id="more"></span>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># åŸºæœ¬è½¯ä»¶ç¯å¢ƒ</span><br><span class="line">sudo apt install build-essential</span><br><span class="line">sudo apt install git</span><br><span class="line"># 32ä½å…¼å®¹åº“</span><br><span class="line">apt-get install lib32z1 lib32ncurses5</span><br><span class="line">apt-get install lib32stdc++6</span><br><span class="line"># è§£å†³awk: line 2: function strtonum never defined</span><br><span class="line">sudo apt-get install gawk</span><br><span class="line"># ubootç¼–è¯‘å·¥å…·é›†</span><br><span class="line">sudo apt-get install u-boot-tools</span><br></pre></td></tr></table></figure>

<h1 id="è·å–æºç "><a href="#è·å–æºç " class="headerlink" title="è·å–æºç "></a>è·å–æºç </h1><p>æ³¨æ„ï¼Œè¿™ä¸ªä»£ç ç›®å‰åªé€‚åˆæˆ‘è¿™ä¸ªå¹³æ¿ï¼Œä¸è¿‡æ®è¯´è¿™ä¸ªåŸ¹è®­æœºæ„å­¦ç”Ÿä¸å°‘ï¼Œæ‰€ä»¥è¿™ä¸ªå¹³æ¿çš„ä¿æœ‰é‡ä¹Ÿåº”è¯¥æ¯”è¾ƒå¤šï½ï½ï½</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/colorfulshark/fspad-a33.git</span><br></pre></td></tr></table></figure>
<h1 id="é…ç½®ä¸ç¼–è¯‘"><a href="#é…ç½®ä¸ç¼–è¯‘" class="headerlink" title="é…ç½®ä¸ç¼–è¯‘"></a>é…ç½®ä¸ç¼–è¯‘</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># é…ç½®å·¥ç¨‹</span><br><span class="line">./build.sh config</span><br><span class="line"># ç¼–è¯‘å·¥ç¨‹</span><br><span class="line">./build.sh</span><br><span class="line"># æ‰“åŒ…å·¥ç¨‹</span><br><span class="line">./build pack_debug</span><br></pre></td></tr></table></figure>

<h1 id="æ¸…ç†å·¥ç¨‹"><a href="#æ¸…ç†å·¥ç¨‹" class="headerlink" title="æ¸…ç†å·¥ç¨‹"></a>æ¸…ç†å·¥ç¨‹</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./build clean</span><br><span class="line">./build distclean</span><br></pre></td></tr></table></figure>

<h1 id="çƒ§å½•é•œåƒ"><a href="#çƒ§å½•é•œåƒ" class="headerlink" title="çƒ§å½•é•œåƒ"></a>çƒ§å½•é•œåƒ</h1><p>å‚è§<a href="https://www.colorfulshark.net/2018/04/30/a33-flash-firmware-under-ubuntuhttps://www.colorfulshark.net/2018/04/30/a33-flash-firmware-under-ubuntu.html">åœ¨Ubuntuï¼ˆDebianï¼‰ä¸‹çƒ§å†™å…¨å¿—A33ç³»ç»Ÿé•œåƒ</a></p>
]]></content>
      <categories>
        <category>Embedded</category>
      </categories>
      <tags>
        <tag>a33</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Hack China Unicom Optical Modem</title>
    <url>/2022/02/06/hack-chinaunicom-optical-modem.html</url>
    <content><![CDATA[<blockquote>
<p>Normally, in Fiber-to-Home condition, optical modem will take charge of PPPoE dialing, then the router connected to it will regard it as a gateway. Such scheme will lead to 2 limitations: Double NAT and Public IP restriction. To solve them, we need to hack the modem and make it working in bridge mode.</p>
</blockquote>
<span id="more"></span>

<h1 id="Extract-Database"><a href="#Extract-Database" class="headerlink" title="Extract Database"></a>Extract Database</h1><p>Though the web page of modem can be a good hack point, we will use a much more universal and geek way: connecting to modem though TTL.</p>
<img src="/2022/02/06/hack-chinaunicom-optical-modem/ttl.jpeg" class="">

<p>Because modem is basically an embeded board running Linux, the vendor will always preserve the serial port to do some debug conveniently. Theoretically, end users will never have anything to do with serial port, so the protection is pretty weak. For example, the password for <code>root</code> user is just <code>root</code>â€¦</p>
<p>After logining into modem through TTL, what we need is the database located in</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/userconfig/cfg/db_user_cfg.xml</span><br></pre></td></tr></table></figure>

<p>As this file is encrypted, we need to transfer it from modem to laptop and do some decryption.</p>
<p>And the only transfer tool in modem is TFTP client, then a TFTP server will be required.</p>
<ul>
<li><p>Mac: <strong>Transfer</strong></p>
</li>
<li><p>WIndows: <strong>Tftpd64</strong></p>
</li>
<li><p>Linux: <strong>tftpd-hpa</strong></p>
</li>
</ul>
<p>Of course, before we start transfer, we need to connect laptop with the modem through an ethernet cable firstly. And set a static IP for laptop, such as <code>192.168.1.2</code>, according to the subnet of the modem.</p>
<p>Finally, we can start uploading the database to TFTP server by</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tftp -p -l /userconfig/cfg/db_user_cfg.xml 192.168.1.2</span><br></pre></td></tr></table></figure>

<h1 id="Decrypt-Database"><a href="#Decrypt-Database" class="headerlink" title="Decrypt Database"></a>Decrypt Database</h1><p>To decrypt the database, we will use a tool called <a href="http://aluigi.altervista.org/mytoolz/offzip.zip">offzip</a>. It needs to be compiled mannually on MacOS or Linux.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd offzip</span><br><span class="line">make</span><br></pre></td></tr></table></figure>

<p>Then decrypt with</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./offzip -a ./db_user_cfg.xml ./ 0</span><br></pre></td></tr></table></figure>

<p>There will be many files being decompressed out, what we need are the files with <code>xml</code> extention.</p>
<p>Then search <code>admin</code> in those <code>xml</code> files and find out the admin password.</p>
<h1 id="Admin-Account"><a href="#Admin-Account" class="headerlink" title="Admin Account"></a>Admin Account</h1><p>For me, to open the web page for admin login, I need to append <code>/cu.html</code> after the IP of modem, such as</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">http://192.168.1.1/cu.html</span><br></pre></td></tr></table></figure>

<p>Now, do everything you want.</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://moy.cat/2021/09/%E8%AE%B0%E4%B8%AD%E5%85%B4-f477v2-%E6%96%B0%E7%89%88%E5%9B%BA%E4%BB%B6%E6%94%B9%E6%A1%A5%E6%8E%A5/">è®°ä¸­å…´ F477V2 æ–°ç‰ˆå›ºä»¶æ”¹æ¡¥æ¥ &#x2F; æœ«å½±éšæƒ³</a></p>
<p><a href="https://www.codenong.com/cs107096858/">[æ•™ç¨‹] ä¸­å…´å…‰çŒ«f477V2æ”¹å›ºè¯æ¡¥æ¥ï¼Œæ”¯æŒç”µè„‘ã€æ‰‹æœºSIP APPæ‹¨æ‰“</a></p>
<p><a href="http://aluigi.altervista.org/mytoolz.htm">Luigi Auriemma</a></p>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
  </entry>
  <entry>
    <title>Cacheå·¥ä½œæµç¨‹</title>
    <url>/2020/01/04/hardware-cache-access-example.html</url>
    <content><![CDATA[<p>Cacheå‡ºç°çš„ç›®çš„æ˜¯ä¸ºäº†å¼¥è¡¥CPUä¸å†…å­˜ä¹‹é—´é€Ÿåº¦ä¸åŒ¹é…çš„çŠ¶å†µï¼Œå¦‚æœè¦è®¿é—®çš„å†…å­˜åœ°å€çš„å†…å®¹å·²ç»å­˜åœ¨äºCacheä¸­ï¼Œé‚£ä¹ˆCPUå°±æ— éœ€è®¿é—®é€Ÿåº¦è¾ƒæ…¢çš„å†…å­˜ã€‚æœ¬æ–‡é€šè¿‡ä¸€ä¸ªå†…å­˜è®¿é—®çš„ä¾‹å­ï¼Œç®€å•ä»‹ç»ä¸¤ç§Cacheæ¨¡å‹ï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<span id="more"></span>

<h1 id="Cache-Line"><a href="#Cache-Line" class="headerlink" title="Cache Line"></a>Cache Line</h1><p>Cacheçš„ç†è®ºåŸºç¡€æ˜¯ç¨‹åºçš„å±€éƒ¨æ€§åŸç†ï¼Œå½“è®¿é—®äº†æŸä¸ªä¸åœ¨Cacheä¸­çš„å†…å­˜åœ°å€åï¼Œé€šè¿‡å°†ç›¸å…³å†…å­˜åœ°å€çš„æ•°æ®è¿ç§»åˆ°Cacheä¸­ï¼Œé™ä½å†æ¬¡éœ€è¦è®¿é—®å†…å­˜çš„æ¦‚ç‡ã€‚</p>
<p>ä»å†…å­˜å‘Cacheè¿ç§»æ•°æ®æ˜¯ä»¥Line Sizeä¸ºåŸºç¡€å•ä½ï¼Œå‡å¦‚Line Sizeæ˜¯32Byteï¼Œé‚£ä¹ˆæ¯æ¬¡è¿ç§»éƒ½æ˜¯32Byteã€‚</p>
<p>å½“ç»™å®šä¸€ä¸ªå†…å­˜åœ°å€æ—¶ï¼Œæˆ‘ä»¬æ€æ ·è®©å…¶ä¸Cache Lineä¸­çš„æŸä¸ªå…·ä½“Byteå¯¹åº”å‘¢ï¼Ÿå‚ç…§å†…å­˜åˆ†é¡µæœºåˆ¶ï¼Œä¸å¦¨ä¹Ÿå°†å†…å­˜åœ°å€æ‹†åˆ†ä¸ºå‡ ç»„ï¼Œè¿™å°±å¼•ç”³å‡ºäº†Setï¼ŒTagå’ŒOffsetä¸‰ä¸ªæ¦‚å¿µã€‚</p>
<p>æ•´ä¸ªCacheç©ºé—´è¢«åˆ†ä¸ºè‹¥å¹²ä¸ªSetï¼Œæ¯ä¸ªSetåŒ…å«è‹¥å¹²ä¸ªCache Lineï¼Œæ¯ä¸ªCache Lineç”¨Tagæ ‡è¯†ï¼Œå½“æ‰¾åˆ°å¯¹åº”çš„Cache Lineåï¼Œä½¿ç”¨Offsetæ¥ç¡®å®šåœ¨Cache Lineä¸­çš„åç§»ã€‚</p>
<p>æ ¹æ®æ¯ä¸ªSetä¸­Cache Lineçš„æ•°é‡ï¼ŒCacheå¯ä»¥åˆ†ä¸º<strong>ç›´æ¥æ˜ å°„</strong>ã€<strong>ç»„ç›¸è”</strong>å’Œ<strong>å…¨ç›¸è”</strong>ä¸‰ç§ã€‚</p>
<h1 id="Direct-Mapped"><a href="#Direct-Mapped" class="headerlink" title="Direct Mapped"></a>Direct Mapped</h1><p>åœ¨ç›´æ¥æ˜ å°„æ¨¡å¼ä¸­ï¼Œæ¯ä¸ªSetåªæœ‰1ä¸ªCache Lineï¼Œå‡è®¾æˆ‘ä»¬çš„Cacheæœ‰128Byteï¼Œæ¯ä¸ªCache Lineæœ‰32Byteï¼Œå†…å­˜åœ°å€æ˜¯12bitï¼ˆé€šå¸¸æ¥è¯´æ˜¯32bitæˆ–è€…64bitï¼Œä¸ºç®€å•èµ·è§ä½¿ç”¨12bitï¼‰ï¼Œé‚£ä¹ˆ</p>
<p>Offset &#x3D; log(32) &#x3D; 5bitï¼Œå³ä½¿ç”¨5bitä½œä¸ºåœ¨Cache Lineä¸­çš„ç´¢å¼•</p>
<p>Set &#x3D; log(128&#x2F;32&#x2F;1) &#x3D; log(4) &#x3D; 2bitï¼Œå…¶ä¸­1è¡¨ç¤ºæ¯ä¸ªSetæœ‰1ä¸ªCache Line</p>
<p>Tag &#x3D; 12 - 5 -2 &#x3D; 5bitï¼Œå‰©ä¸‹çš„bitç”¨äºæ ‡è¯†Cache Line</p>
<p>å³å†…å­˜åœ°å€è¢«åˆ†å‰²ä¸º</p>
<table>
<thead>
<tr>
<th align="center">Addr</th>
<th align="center">Tag</th>
<th align="center">Set</th>
<th align="center">Offset</th>
</tr>
</thead>
<tbody><tr>
<td align="center">12bit</td>
<td align="center">5bit</td>
<td align="center">2bit</td>
<td align="center">5bit</td>
</tr>
<tr>
<td align="center">0x070</td>
<td align="center">00000</td>
<td align="center">11</td>
<td align="center">10000</td>
</tr>
</tbody></table>
<p>å¯¹åº”çš„Cacheç©ºé—´å¸ƒå±€å¦‚ä¸‹è¡¨æ‰€ç¤º</p>
<table>
<thead>
<tr>
<th align="center">Set</th>
<th align="center">Valid</th>
<th align="center">Tag (Line)</th>
</tr>
</thead>
<tbody><tr>
<td align="center">00</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">01</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody></table>
<p>å½“æˆ‘ä»¬åœ¨è®¿é—®å†…å­˜æ—¶ï¼Œé¦–å…ˆæŠŠå†…å­˜åœ°å€åˆ’åˆ†ä¸ºTagã€Setå’ŒOffsetï¼Œç„¶åæ ¹æ®Seté€‰æ‹©å¯¹åº”çš„ç»„ï¼Œå¦‚æœValidå­—æ®µä¸º1ï¼Œå¹¶ä¸”Tagå­—æ®µåŒ¹é…ï¼Œé‚£ä¹ˆCacheå‘½ä¸­ï¼Œå¦åˆ™Cacheæœªå‘½ä¸­ï¼Œéœ€è¦æŠŠå†…å­˜ä¸­1 Lineçš„æ•°æ®å­˜å‚¨åˆ°å¯¹åº”çš„Cache Lineã€‚</p>
<p>å‡å¦‚æˆ‘ä»¬æœ‰ä¸€ç»„å¾…è®¿é—®çš„å†…å­˜åœ°å€ï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡è®¿é—®ä»¥åŠç¬¬äºŒæ¬¡è®¿é—®çš„å‘½ä¸­æƒ…å†µå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚</p>
<table>
<thead>
<tr>
<th align="center">Addr</th>
<th align="center">Tag</th>
<th align="center">Set</th>
<th align="center">Offset</th>
<th align="center">1st</th>
<th align="center">2nd</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0x070</td>
<td align="center">00000</td>
<td align="center">11</td>
<td align="center">10000</td>
<td align="center">M</td>
<td align="center">H</td>
</tr>
<tr>
<td align="center">0x080</td>
<td align="center">00001</td>
<td align="center">00</td>
<td align="center">00000</td>
<td align="center">M</td>
<td align="center">M</td>
</tr>
<tr>
<td align="center">0x068</td>
<td align="center">00000</td>
<td align="center">11</td>
<td align="center">01000</td>
<td align="center">H</td>
<td align="center">H</td>
</tr>
<tr>
<td align="center">0x190</td>
<td align="center">00011</td>
<td align="center">00</td>
<td align="center">10000</td>
<td align="center">M</td>
<td align="center">M</td>
</tr>
<tr>
<td align="center">0x084</td>
<td align="center">00001</td>
<td align="center">00</td>
<td align="center">00100</td>
<td align="center">M</td>
<td align="center">M</td>
</tr>
<tr>
<td align="center">0x178</td>
<td align="center">00010</td>
<td align="center">11</td>
<td align="center">11000</td>
<td align="center">M</td>
<td align="center">M</td>
</tr>
<tr>
<td align="center">0x08c</td>
<td align="center">00001</td>
<td align="center">00</td>
<td align="center">01100</td>
<td align="center">H</td>
<td align="center">H</td>
</tr>
<tr>
<td align="center">0xf00</td>
<td align="center">11110</td>
<td align="center">00</td>
<td align="center">00000</td>
<td align="center">M</td>
<td align="center">M</td>
</tr>
<tr>
<td align="center">0x064</td>
<td align="center">00000</td>
<td align="center">11</td>
<td align="center">00100</td>
<td align="center">M</td>
<td align="center">M</td>
</tr>
</tbody></table>
<p>ç¬¬ä¸€æ¬¡è®¿é—®Cacheçš„å‘½ä¸­ç‡æ˜¯ï¼š2&#x2F;9 &#x3D; 22%</p>
<p>ç¬¬äºŒæ¬¡è®¿é—®Cacheçš„å‘½ä¸­ç‡æ˜¯ï¼š2&#x2F;9 &#x3D; 33%</p>
<h1 id="2-way-Set-Associative"><a href="#2-way-Set-Associative" class="headerlink" title="2-way Set Associative"></a>2-way Set Associative</h1><p>åœ¨2è·¯ç»„ç›¸è”æ¨¡å¼ä¸­ï¼Œæ¯ä¸ªSetæœ‰2ä¸ªCache Lineï¼Œå‡è®¾æˆ‘ä»¬çš„Cacheæœ‰128Byteï¼Œæ¯ä¸ªCache Lineæœ‰32Byteï¼Œå†…å­˜åœ°å€æ˜¯12bitï¼ˆé€šå¸¸æ¥è¯´æ˜¯32bitæˆ–è€…64bitï¼Œä¸ºç®€å•èµ·è§ä½¿ç”¨12bitï¼‰ï¼Œé‚£ä¹ˆ</p>
<p>Offset &#x3D; log(32) &#x3D; 5bitï¼Œå³ä½¿ç”¨5bitä½œä¸ºåœ¨Cache Lineä¸­çš„ç´¢å¼•</p>
<p>Set &#x3D; log(128&#x2F;32&#x2F;2) &#x3D; log(2) &#x3D; 1bitï¼Œå…¶ä¸­2è¡¨ç¤ºæ¯ä¸ªSetæœ‰2ä¸ªCache Line</p>
<p>Tag &#x3D; 12 - 5 -1 &#x3D; 6bitï¼Œå‰©ä¸‹çš„bitç”¨äºæ ‡è¯†Cache Line</p>
<p>å³å†…å­˜åœ°å€è¢«åˆ†å‰²ä¸º</p>
<table>
<thead>
<tr>
<th align="center">Addr</th>
<th align="center">Tag</th>
<th align="center">Set</th>
<th align="center">Offset</th>
</tr>
</thead>
<tbody><tr>
<td align="center">12bit</td>
<td align="center">6bit</td>
<td align="center">1bit</td>
<td align="center">6bit</td>
</tr>
<tr>
<td align="center">0x070</td>
<td align="center">000001</td>
<td align="center">1</td>
<td align="center">10000</td>
</tr>
</tbody></table>
<p>å¯¹åº”çš„Cacheç©ºé—´å¸ƒå±€å¦‚ä¸‹è¡¨æ‰€ç¤º</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
<th align="center">Way 1</th>
<th align="center"></th>
<th align="center">Way 0</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Set</td>
<td align="center">LRU</td>
<td align="center">Valid</td>
<td align="center">Tag (Line)</td>
<td align="center">Valid</td>
<td align="center">Tag (Line)</td>
</tr>
<tr>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody></table>
<p>æ³¨æ„ï¼Œç”±äºæ­¤æ—¶æ¯ä¸ªSetä¸­æœ‰2ä¸ªCache Lineï¼Œé‚£ä¹ˆå½“Cacheæœªå‘½ä¸­æ—¶ï¼Œåº”è¯¥æ›¿æ¢å“ªä¸€ä¸ªCache Lineå‘¢ï¼Ÿè¿™æ—¶å€™å°±æœ‰å¤šç§ç­–ç•¥å¯ä»¥é€‰æ‹©ï¼Œæ¯”è¾ƒå¸¸è§çš„æ˜¯LRUï¼Œå³æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ã€‚æ¯”å¦‚æˆ‘ä»¬åˆšæ›´æ–°è¿‡Line0ï¼Œé‚£ä¹ˆLRUå°±è¢«è®¾ç½®ä¸º1ï¼Œè¡¨ç¤ºLine1å°†åœ¨ä¸‹ä¸€æ¬¡æœªå‘½ä¸­å‘ç”Ÿæ—¶è¢«æ›¿æ¢ã€‚æœ¬æ„æ˜¯å°†æœ€ä¸æ´»è·ƒçš„Lineæ›¿æ¢å‡ºå»ã€‚</p>
<p>é‚£ä¹ˆï¼Œä½¿ç”¨åŒæ ·ä¸€ç»„æ•°æ®ï¼ŒCacheå‘½ä¸­æƒ…å†µå¦‚ä¸‹è¡¨</p>
<table>
<thead>
<tr>
<th align="center">Addr</th>
<th align="center">Tag</th>
<th align="center">Set</th>
<th align="center">Offset</th>
<th align="center">1st</th>
<th align="center">2nd</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0x070</td>
<td align="center">000001</td>
<td align="center">1</td>
<td align="center">10000</td>
<td align="center">M</td>
<td align="center">H</td>
</tr>
<tr>
<td align="center">0x080</td>
<td align="center">000010</td>
<td align="center">0</td>
<td align="center">00000</td>
<td align="center">M</td>
<td align="center">H</td>
</tr>
<tr>
<td align="center">0x068</td>
<td align="center">000001</td>
<td align="center">1</td>
<td align="center">01000</td>
<td align="center">H</td>
<td align="center">H</td>
</tr>
<tr>
<td align="center">0x190</td>
<td align="center">000110</td>
<td align="center">0</td>
<td align="center">10000</td>
<td align="center">M</td>
<td align="center">M</td>
</tr>
<tr>
<td align="center">0x084</td>
<td align="center">000010</td>
<td align="center">0</td>
<td align="center">00100</td>
<td align="center">H</td>
<td align="center">H</td>
</tr>
<tr>
<td align="center">0x178</td>
<td align="center">000101</td>
<td align="center">1</td>
<td align="center">11000</td>
<td align="center">M</td>
<td align="center">H</td>
</tr>
<tr>
<td align="center">0x08c</td>
<td align="center">000010</td>
<td align="center">0</td>
<td align="center">01100</td>
<td align="center">H</td>
<td align="center">H</td>
</tr>
<tr>
<td align="center">0xf00</td>
<td align="center">111100</td>
<td align="center">0</td>
<td align="center">00000</td>
<td align="center">M</td>
<td align="center">M</td>
</tr>
<tr>
<td align="center">0x064</td>
<td align="center">000001</td>
<td align="center">1</td>
<td align="center">00100</td>
<td align="center">H</td>
<td align="center">H</td>
</tr>
</tbody></table>
<p>ç¬¬ä¸€æ¬¡è®¿é—®Cacheçš„å‘½ä¸­ç‡æ˜¯ï¼š4&#x2F;9 &#x3D; 44%</p>
<p>ç¬¬äºŒæ¬¡è®¿é—®Cacheçš„å‘½ä¸­ç‡æ˜¯ï¼š7&#x2F;9 &#x3D; 77%</p>
<p>å¯ä»¥çœ‹å‡ºï¼Œåœ¨æ²¡æœ‰å¢å¤§Cacheç©ºé—´çš„æƒ…å†µä¸‹ï¼Œä»…ä»…æ”¹å˜äº†Cacheçš„æ¨¡å¼ï¼Œå°±å¤§å¹…æé«˜äº†å‘½ä¸­ç‡ã€‚</p>
<h1 id="Fully-Associative"><a href="#Fully-Associative" class="headerlink" title="Fully Associative"></a>Fully Associative</h1><p>åœ¨å…¨ç›¸è”æ¨¡å¼ä¸‹ï¼Œåªæœ‰1ä¸ªSetï¼Œå‡è®¾æˆ‘ä»¬çš„Cacheæœ‰128Byteï¼Œæ¯ä¸ªCache Lineæœ‰32Byteï¼Œé‚£ä¹ˆè¿™ä¸ªSetä¸­å°†åŒ…å«4ä¸ªCache Lineã€‚</p>
<p>Way &#x3D; 128&#x2F;32 &#x3D; 4</p>
<p>å¯¹äºå°ç©ºé—´çš„Cacheæ¥è¯´ï¼Œä¼¼ä¹ä¸æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å½“Cacheæœ‰å‡ ç™¾KBç”šè‡³å‡ MBï¼Œé‚£ä¹ˆå°±ä¼šå­˜åœ¨å¤§é‡çš„Cache Lineï¼Œè¿™ä¼šé€ æˆä¸¤ä¸ªé—®é¢˜</p>
<ol>
<li>ç”±äºæ˜¯é€šè¿‡æ¯”è¾ƒTagæ¥ç¡®å®šå¯¹åº”çš„Cache Lineï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç´¢å¼•ï¼Œæ¯”è¾ƒè¿™ä¹ˆå¤šTagå¾ˆä½æ•ˆ</li>
<li>LRUç®—æ³•éœ€è¦æ‰¾åˆ°æœ€é•¿æ—¶é—´æœªè¢«ä½¿ç”¨çš„Cache Lineï¼Œè€Œè¿™ä¸€èˆ¬æ˜¯ç¡¬ä»¶å®Œæˆçš„ï¼Œå¦‚æœCache Lineå¾ˆå¤šï¼Œç¡¬ä»¶è®¾è®¡ä¼šå˜å¾—å¾ˆå¤æ‚</li>
</ol>
<p>å› æ­¤ï¼Œå‡ ä¹æ²¡æœ‰å®é™…çš„ç¡¬ä»¶ä½¿ç”¨è¿™ç§Cacheæ¨¡å¼ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æœ¬æ–‡ç®€å•çš„ä»‹ç»äº†ä¸€ä¸‹Cacheæ¨¡å‹ï¼Œä»¥åŠå…¶å·¥ä½œæ–¹å¼ï¼Œè™½ç„¶Cacheå¯¹äºç¨‹åºå‘˜æ¥è¯´æ˜¯é€æ˜ï¼Œä½†äº†è§£å…¶å·¥ä½œæ–¹å¼å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„ä¼˜åŒ–ä»£ç æ€§èƒ½ã€‚å¦‚æœæƒ³äº†è§£æ–‡ä¸­ä¾‹å­çš„å…·ä½“æ‰§è¡Œæµç¨‹ï¼Œå¯ä»¥è§‚çœ‹<a href="#%E5%8F%82%E8%80%83">å‚è€ƒ</a>ä¸­çš„ä¸¤ä¸ªè§†é¢‘ã€‚</p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://www.youtube.com/watch?v=RqKeEIbcnS8">Cache Access Example (Part 1)</a></p>
<p><a href="https://www.youtube.com/watch?v=quZe1ehz-EQ">Cache Access Example (Part 2)</a></p>
]]></content>
      <categories>
        <category>Kernel</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>cache</tag>
      </tags>
  </entry>
  <entry>
    <title>DLPçš„å·¥ä½œåŸç†</title>
    <url>/2021/01/24/how-does-dlp-work.html</url>
    <content><![CDATA[<blockquote>
<p>æŠ•å½±ä»ªåœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­éå¸¸å¸¸è§ï¼Œæ— è®ºæ˜¯ç”¨æ¥åœ¨ä¼šè®®ä¸­æ’­æ”¾PPTï¼Œè§‚çœ‹ç”µå½±æˆ–æ˜¯æ‰“æ¸¸æˆï¼Œéƒ½èƒ½è·å¾—ä¸é”™çš„å¤§å±ä½“éªŒï¼Œä¸»æµçš„æŠ•å½±ä»ªä½¿ç”¨DLPä½œä¸ºå…¶æ ¸å¿ƒæ˜¾ç¤ºéƒ¨ä»¶ï¼Œç›¸è¾ƒäºLCDï¼Œå®ƒçš„å·¥ä½œæ–¹å¼æœ‰äº›ç‰¹åˆ«ï¼Œä»Šå¤©å°±æ¥çœ‹çœ‹DLPæ˜¯æ€æ ·å·¥ä½œçš„ã€‚</p>
</blockquote>
<span id="more"></span>

<p>é¦–å…ˆæ¥çœ‹çœ‹ä»Šå¤©çš„ä¸»è§’ï¼Œä¸€å°è€ï¼ˆæŠ¥ï¼‰å¼ï¼ˆåºŸï¼‰çš„DellæŠ•å½±ä»ªã€‚</p>
<img src="/2021/01/24/how-does-dlp-work/dell-projector.png" class="" title="dell-projector.png">

<p>æ‰€æœ‰æŠ•å½±ä»ªçš„å·¥ä½œåŸç†éƒ½æ˜¯ç›¸åŒçš„ï¼šå…‰çº¿ä»å…‰æºå‘å‡ºï¼Œç„¶åé€šè¿‡ä¸€ä¸ª<strong>å…‰çº¿è¿‡æ»¤éƒ¨ä»¶</strong>ï¼Œè¿™ä¸ªéƒ¨ä»¶ä¼šæ ¹æ®å½“å‰æ˜¾ç¤ºçš„ç”»é¢ï¼Œè®©æ­£ç¡®çš„å…‰çº¿é€šè¿‡é€é•œï¼Œæœ€ååœ¨æŠ•å½±å¹•å¸ƒä¸Šæˆåƒã€‚</p>
<p>èƒ¶ç‰‡æŠ•å½±ä»ªçš„å·¥ä½œæ–¹å¼éå¸¸ç®€å•ï¼šå…‰æºå‘å‡ºçš„å…‰çº¿é€šè¿‡èƒ¶ç‰‡ï¼Œç„¶åé€šè¿‡é€é•œåœ¨å¹•å¸ƒä¸Šæˆåƒã€‚</p>
<img src="/2021/01/24/how-does-dlp-work/film-projector.gif" class="" title="film-projector.gif">

<p>è€ŒLCDæŠ•å½±ä»ªå°±æ˜¯æŠŠèƒ¶ç‰‡æ¢æˆäº†LCDï¼Œé€šè¿‡æ¶²æ™¶åˆ†å­çš„åè½¬è§’åº¦æ¥æ§åˆ¶é€šå…‰é‡ã€‚</p>
<img src="/2021/01/24/how-does-dlp-work/lcd-projector.gif" class="" title="lcd-projector.gif">

<p>LCDæŠ•å½±ä»ªæœ‰ä¸ªé—®é¢˜ï¼Œä¸ºäº†æ˜¾ç¤ºå½©è‰²çš„ç”»é¢ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä½¿ç”¨3å—LCDæ¥åˆ†åˆ«æ§åˆ¶çº¢ã€ç»¿ã€è“ä¸‰ç§é¢œè‰²çš„å…‰çº¿ã€‚è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†è®¾è®¡éš¾åº¦ï¼Œå› ä¸ºæœ€åæˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸‰æ¡å…‰è·¯ç²¾ç¡®åœ°æ‹¼æ¥åœ¨ä¸€èµ·ã€‚</p>
<p>è€ŒDLPæŠ•å½±ä»ªåˆ™åªéœ€è¦ä¸€æ¡å…‰è·¯å³å¯æ˜¾ç¤ºå½©è‰²çš„ç”»é¢ï¼Œä»è€Œé™ä½äº†æˆæœ¬ï¼Œå¹¶ä¸”åœ¨æŸäº›ç‰¹æ€§ä¸Šä¹Ÿæ›´æœ‰ä¼˜åŠ¿ã€‚</p>
<p>é‚£ä¹ˆDLPæ˜¯æ€ä¹ˆåšåˆ°åªéœ€è¦ä¸€æ¡å…‰è·¯çš„å‘¢ï¼Œè®©æˆ‘ä»¬æŠŠå®ƒæ‹†å¼€æ¥çœ‹çœ‹ã€‚</p>
<img src="/2021/01/24/how-does-dlp-work/dlp-open-1.png" class="" title="dlp-open-1.png">

<img src="/2021/01/24/how-does-dlp-work/dlp-open-2.png" class="" title="dlp-open-2.png">

<img src="/2021/01/24/how-does-dlp-work/dlp-open-3.png" class="" title="dlp-open-3.png">

<p>åœ¨DLPèŠ¯ç‰‡çš„è¡¨é¢ï¼Œæœ‰æ— æ•°ä¸ªå¯ä»¥åè½¬çš„â€œå°é•œå­â€ï¼Œæ¯ä¸€ä¸ªâ€œå°é•œå­â€å¯¹åº”ä¸€ä¸ªåƒç´ ã€‚ä¸ºäº†ä¾¿äºå¤§å®¶ç†è§£ï¼Œè¿™é‡Œé€šè¿‡ä¸€ä¸ªæ¨¡å‹æ¥æ¼”ç¤ºã€‚</p>
<img src="/2021/01/24/how-does-dlp-work/dlp-demo-1.png" class="" title="dlp-demo-1.png">

<p>è¿™ä¸ªæ¨¡å‹é‡Œé¢æœ‰36ä¸ªå¯ä»¥ç‹¬ç«‹åè½¬çš„å°é•œå­ï¼Œæ¯ä¸ªå°é•œå­åé¢æœ‰ä¸€ä¸ªå°é“ç¯ï¼Œè¿™æ ·ï¼Œå½“ç£é“åœ¨å®ƒä»¬åé¢ç§»åŠ¨æ—¶ï¼Œé•œå­å°±ä¼šéšä¹‹å‘ç”Ÿåè½¬</p>
<img src="/2021/01/24/how-does-dlp-work/dlp-demo-2.png" class="" title="dlp-demo-2.png">

<img src="/2021/01/24/how-does-dlp-work/dlp-demo-3.gif" class="" title="dlp-demo-3.gif">

<p>ä¸‹é¢æ‰“å¼€å…‰æºï¼Œè°ƒæ•´å¥½é€é•œï¼Œç„¶ååœ¨DLPæ¨¡å‹åé¢ç§»åŠ¨ç£é“ï¼Œæ­¤æ—¶å¯ä»¥åœ¨å¢™ä¸Šçœ‹åˆ°å¯¹åº”çš„â€œåƒç´ â€å‘ç”Ÿäº†æ˜æš—å˜åŒ–ã€‚</p>
<p>å½“å°é•œå­æœå‘é€é•œæ—¶ï¼Œå…¶åå°„çš„å…‰çº¿å¯ä»¥æ­£å¸¸é€šè¿‡é€é•œï¼Œæ­¤æ—¶å¯¹åº”çš„åƒç´ å‘å…‰ï¼›è€Œå½“å®ƒè½¬å‘ä¸€è¾¹æ—¶ï¼Œå…‰çº¿å°±ä¸ä¼šé€šè¿‡é€é•œï¼Œæ­¤æ—¶å¯¹åº”çš„åƒç´ ä¸å‘å…‰ã€‚</p>
<img src="/2021/01/24/how-does-dlp-work/dlp-demo-4.gif" class="" title="dlp-demo-4.gif">

<p>è¿™æ—¶å€™ä½ å¯èƒ½ä¼šæƒ³ï¼Œç°åœ¨åªçœ‹åˆ°äº†ä¸€ç§é¢œè‰²çš„å…‰ï¼Œé‚£å®ƒè¦å¦‚ä½•æ˜¾ç¤ºå½©è‰²ç”»é¢å‘¢ï¼Ÿç­”æ¡ˆå°±åœ¨å…‰æºä¸Šã€‚</p>
<p>ä½¿ç”¨DLPæˆåƒçš„æŠ•å½±ä»ªä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šéƒ¨ä»¶ï¼Œå«åš<strong>è‰²è½®</strong>ï¼Œå®ƒè¢«æ”¾ç½®åœ¨å…‰æºçš„å‰æ–¹ã€‚</p>
<img src="/2021/01/24/how-does-dlp-work/color-wheel-1.png" class="" title="color-wheel-1.png">

<p>æŠ•å½±ä»ªçš„å¤„ç†å™¨éœ€è¦å°†ä¸€å¹…ç”»é¢åˆ†æˆçº¢ç»¿è“ä¸‰ä¸ªè‰²å½©é€šé“ã€‚å½“ç»¿è‰²åŒºåŸŸæ—‹è½¬åˆ°å…‰æºå‰æ–¹æ—¶ï¼Œæ­¤æ—¶æŠ•å°„åˆ°DLPä¸Šçš„å…‰çº¿å°±æ˜¯ç»¿è‰²ï¼Œè€ŒDLPåˆ™æ˜¾ç¤ºç»¿è‰²é€šé“çš„ç”»é¢ï¼Œçº¢è‰²å’Œè“è‰²é€šé“ä¹Ÿæ˜¯ç›¸åŒçš„é“ç†ã€‚å½“åˆ‡æ¢é€Ÿåº¦éå¸¸å¿«æ—¶ï¼Œæˆ‘ä»¬çš„å¤§è„‘å°±ä¼šè‡ªåŠ¨å°†ä¸åŒè‰²å½©é€šé“çš„ç”»é¢åˆå¹¶ï¼Œä»è€Œæ‹¼å‡‘å‡ºæ­£å¸¸çš„é¢œè‰²ã€‚</p>
<img src="/2021/01/24/how-does-dlp-work/dlp-demo-5.gif" class="" title="dlp-demo-5.gif">

<p>LCDå¯ä»¥é€šè¿‡æ§åˆ¶æ¶²æ™¶åˆ†å­çš„åè½¬è§’åº¦æ¥å®ç°ç°åº¦æ§åˆ¶ã€‚ç„¶è€ŒDLPä¸Šçš„å°é•œå­å´åªæœ‰ä¸¤ä¸ªåè½¬è§’åº¦ï¼Œå¯¹åº”äº†åƒç´ çš„â€œå¼€â€å’Œâ€œå…³â€ï¼Œé‚£ä¹ˆå®ƒæ˜¯æ€æ ·æ§åˆ¶åƒç´ çš„æ˜æš—å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆè¿˜æ˜¯é€šè¿‡å°é•œå­çš„å¿«é€Ÿç¿»è½¬ã€‚è¿™æœ‰ç‚¹ç±»ä¼¼äºç°åœ¨OLEDçš„PWMè°ƒå…‰ï¼Œå½“åƒç´ åœ¨â€œå¼€â€å’Œâ€œå…³â€ä¹‹é—´å¿«é€Ÿåˆ‡æ¢æ—¶ï¼Œé€šè¿‡æ§åˆ¶åƒç´ æ‰“å¼€æ—¶é—´æ‰€å æ€»æ—¶é—´çš„æ¯”ä¾‹ï¼Œä¹Ÿå°±æ˜¯â€œå ç©ºæ¯”â€ï¼Œå¹¶åˆ©ç”¨äººçœ¼çš„æš‚ç•™æ•ˆåº”ï¼Œæ¥è¾¾åˆ°æ§åˆ¶åƒç´ æ˜æš—çš„æ•ˆæœã€‚å®é™…ä¸Šï¼ŒDLPä¸Šçš„å°é•œå­å¯ä»¥åœ¨5åˆ°10æ¯«ç§’å†…å®Œæˆä¸€ä¸ªç¿»è½¬ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥è¿‘è·ç¦»çœ‹çœ‹DLPèŠ¯ç‰‡çš„çœŸå®æ¨¡æ ·ï¼Œè¿™å¼ å›¾æ˜¯å…‰å­¦æ˜¾å¾®é•œä¸‹çš„ç”»é¢ã€‚</p>
<img src="/2021/01/24/how-does-dlp-work/dlp-zoom-in-1.png" class="" title="dlp-zoom-in-1.png">

<p>æˆ‘ä»¬æ¸…æ¥šåœ°çœ‹åˆ°è¿™äº›ç´§å¯†æ’åˆ—çš„å°é•œå­ï¼Œæ¯ä¸ªå°é•œå­å¤§çº¦10å¾®ç±³é•¿ã€‚</p>
<p>ä¸ºäº†æ›´åŠ æ¸…æ¥šåœ°çœ‹åˆ°å…¶ç»“æ„ï¼Œéœ€è¦ä½¿ç”¨æ‰«æç”µå­æ˜¾å¾®é•œã€‚</p>
<img src="/2021/01/24/how-does-dlp-work/dlp-zoom-in-2.png" class="" title="dlp-zoom-in-2.png">

<p>åœ¨ç”µå­æ˜¾å¾®é•œä¸‹ï¼ŒDLPèŠ¯ç‰‡çš„ç»†èŠ‚æ˜¾éœ²æ— ç–‘ã€‚</p>
<img src="/2021/01/24/how-does-dlp-work/dlp-zoom-in-3.png" class="" title="dlp-zoom-in-3.png">

<p>å¯ä»¥çœ‹åˆ°ç”»é¢ä¸­æœ‰è®¸å¤šå°é•œå­å·²ç»æŸåäº†ï¼Œè¿™æ˜¯ç”±äºåœ¨æ‹†å¸è¿‡ç¨‹ä¸­æ’¬æ£æ¥è§¦åˆ°äº†DLPèŠ¯ç‰‡è¡¨é¢ï¼Œè™½ç„¶åŠ›åº¦éå¸¸å°ï¼Œä½†è¿˜æ˜¯å¯¼è‡´å…¶ç»“æ„è¢«ç ´åã€‚ä¸è¿‡ï¼Œè¿™å¯¹æˆ‘ä»¬æ¥è¯´æ˜¯ä»¶å¥½äº‹ï¼Œå› ä¸ºè¿™æ ·å°±èƒ½æ›´æ¸…æ¥šåœ°çœ‹åˆ°å°é•œå­ä¸‹é¢çš„ç»“æ„äº†ã€‚</p>
<img src="/2021/01/24/how-does-dlp-work/dlp-zoom-in-4.png" class="" title="dlp-zoom-in-4.png">

<p>å¯ä»¥çœ‹åˆ°ï¼Œå°é•œå­å®é™…ä¸Šæ˜¯ä»¥å¯¹è§’çº¿ä¸ºè½´è¿›è¡Œæ—‹è½¬çš„ã€‚ä¸æ¨¡å‹ä¸åŒï¼ŒDLPæ˜¯é€šè¿‡ç”µå‹æ¥æ§åˆ¶å°é•œå­æ—‹è½¬ï¼Œå½“æ–½åŠ ç”µå‹æ—¶ï¼Œå°é•œå­ä¼šåè½¬åˆ°ä¸€ä¾§ï¼Œç”µå‹æ¶ˆå¤±åï¼Œå®ƒä¼šè‡ªåŠ¨å›ä½ã€‚</p>
<p>LCDæŠ•å½±ä»ªçš„å¦ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼Œå…‰æºå‘å‡ºçš„å…‰çº¿é€šè¿‡LCDé¢æ¿åä¼šæŸå¤±è¿‘ä¸€åŠï¼Œå› ä¸ºLCDä¸­éœ€è¦ç”µææ¥æ§åˆ¶æ¶²æ™¶åˆ†å­ï¼Œè€Œç”µææœ¬èº«å¹¶ä¸æ˜¯å®Œå…¨é€æ˜çš„ã€‚</p>
<p>DLPåˆ™ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå…‰çº¿å¹¶ä¸æ˜¯ç©¿è¿‡DLPï¼Œè€Œæ˜¯ç›´æ¥è¢«åå°„çš„ï¼Œä»è€Œå…‰æºçš„åˆ©ç”¨ç‡å¤§å¤§æå‡ã€‚è¿™æ ·å°±å¯ä»¥ä½¿ç”¨åŠŸç‡æ›´å°çš„å…‰æºï¼Œä»¥åŠæ›´å°çš„ç”µæºï¼Œä»è€Œé™ä½æ•´æœºçš„æˆæœ¬å’Œä½“ç§¯ã€‚</p>
<p><a href="https://www.youtube.com/watch?v=9nb8mM3uEIc&t=1s&ab_channel=AppliedScience">https://www.youtube.com/watch?v=9nb8mM3uEIc&amp;t=1s&amp;ab_channel=AppliedScience</a></p>
]]></content>
      <categories>
        <category>Geek</category>
      </categories>
      <tags>
        <tag>DLP</tag>
        <tag>åŸç†</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨ç»ˆç«¯ä¸‹è°ƒæ•´ext4æ–‡ä»¶ç³»ç»Ÿçš„å¤§å°</title>
    <url>/2019/12/29/how-to-resize-ext4-filesystem.html</url>
    <content><![CDATA[<blockquote>
<p>åœ¨å¸¦æœ‰GUIçš„Linuxç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡GPartedæ–¹ä¾¿åœ°ç®¡ç†ç£ç›˜åˆ†åŒºï¼Œä½†æ˜¯åœ¨å¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ²¡æœ‰æ¡ä»¶ä½¿ç”¨GUIå·¥å…·ï¼Œæ‰€ä»¥æœ¬æ–‡ç®€å•ä»‹ç»ä¸€ä¸‹å¦‚ä½•åœ¨å‘½ä»¤è¡Œç•Œé¢è°ƒæ•´ext4åˆ†åŒºçš„å¤§å°ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="ç³»ç»Ÿç¯å¢ƒ"><a href="#ç³»ç»Ÿç¯å¢ƒ" class="headerlink" title="ç³»ç»Ÿç¯å¢ƒ"></a>ç³»ç»Ÿç¯å¢ƒ</h1><ul>
<li>å¾…åˆ†é…åˆ†åŒºï¼š<code>/dev/sdb1</code></li>
<li>åˆ†åŒºå·¥å…·ï¼š<code>fdisk</code></li>
<li>æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥å·¥å…·ï¼š<code>e2fsck</code></li>
<li>æ–‡ä»¶ç³»ç»Ÿè°ƒæ•´å·¥å…·ï¼š<code>resize2fs</code></li>
</ul>
<h1 id="æ‰©å¤§æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ‰©å¤§æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ‰©å¤§æ–‡ä»¶ç³»ç»Ÿ"></a>æ‰©å¤§æ–‡ä»¶ç³»ç»Ÿ</h1><p>é¦–å…ˆéœ€è¦æ˜ç¡®ï¼Œå†³å®šæ–‡ä»¶ç³»ç»Ÿä¸Šé™çš„æ˜¯å…¶æ‰€åœ¨çš„åˆ†åŒºå¤§å°ï¼Œå› æ­¤ï¼Œå¦‚æœå¾…è°ƒæ•´çš„æ–‡ä»¶ç³»ç»Ÿå·²ç»å æ»¡äº†æ•´ä¸ªåˆ†åŒºï¼Œé‚£ä¹ˆåœ¨è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿä¹‹å‰ï¼Œéœ€è¦å…ˆè°ƒæ•´åˆ†åŒºå¤§å°ï¼Œ<strong>æœ¬æ–‡å‡è®¾å¾…è°ƒæ•´åˆ†åŒºçš„åé¢ä»ç„¶æœ‰å¯ç”¨çš„ç©ºé—´</strong>ã€‚</p>
<h2 id="é‡å»ºåˆ†åŒº"><a href="#é‡å»ºåˆ†åŒº" class="headerlink" title="é‡å»ºåˆ†åŒº"></a>é‡å»ºåˆ†åŒº</h2><p>åŸå§‹çŠ¶æ€ä¸‹ï¼Œåˆ†åŒº<code>dev/sdb1</code>æœ‰<code>512M</code>ï¼Œæˆ‘ä»¬è¦æŠŠå®ƒè°ƒæ•´ä¸º<code>768M</code>ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sdb      8:16   0     1G  0 disk</span><br><span class="line">â””â”€sdb1   8:17   0   512M  0 part /mnt</span><br></pre></td></tr></table></figure>

<ol>
<li><p>è§£æŒ‚åˆ†åŒº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo umount /mnt</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ é™¤æ—§åˆ†åŒº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo fdisk /dev/sdb</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Welcome to fdisk (util-linux 2.31.1).</span><br><span class="line">Changes will remain in memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write command.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (m for help): p</span><br><span class="line">Disk /dev/sdb: 1 GiB, 1073741824 bytes, 2097152 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disklabel type: dos</span><br><span class="line">Disk identifier: 0x485cc8a2</span><br><span class="line"></span><br><span class="line">Device     Boot Start     End Sectors  Size Id Type</span><br><span class="line">/dev/sdb1        2048 1050623 1048576  512M 83 Linux</span><br><span class="line"></span><br><span class="line">Command (m for help): d</span><br><span class="line">Selected partition 1</span><br><span class="line">Partition 1 has been deleted.</span><br><span class="line"></span><br><span class="line">Command (m for help): w</span><br><span class="line">The partition table has been altered.</span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">Syncing disks.</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ›å»ºæ–°åˆ†åŒº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo fdisk /dev/sdb</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Welcome to fdisk (util-linux 2.31.1).</span><br><span class="line">Changes will remain in memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write command.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (m for help): n</span><br><span class="line">Partition type</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended (container for logical partitions)</span><br><span class="line">Select (default p): p</span><br><span class="line">Partition number (1-4, default 1):</span><br><span class="line">First sector (2048-2097151, default 2048):</span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G,T,P&#125; (2048-2097151, default 2097151): +768M</span><br><span class="line"></span><br><span class="line">Created a new partition 1 of type &#x27;Linux&#x27; and of size 768 MiB.</span><br><span class="line">Partition #1 contains a ext4 signature.</span><br><span class="line"></span><br><span class="line">Do you want to remove the signature? [Y]es/[N]o: n</span><br><span class="line"></span><br><span class="line">Command (m for help): w</span><br><span class="line"></span><br><span class="line">The partition table has been altered.</span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">Syncing disks.</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼šæ–°åˆ†åŒºçš„èµ·å§‹æ‰‡åŒºå¿…é¡»è·Ÿè€åˆ†åŒºçš„èµ·å§‹æ‰‡åŒºä¸€è‡´ã€‚</strong></p>
</li>
</ol>
<h2 id="æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿ"></a>æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿ</h2>   <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo e2fsck -f /dev/sdb1</span><br></pre></td></tr></table></figure>

   <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">e2fsck 1.44.1 (24-Mar-2018)</span><br><span class="line">Pass 1: Checking inodes, blocks, and sizes</span><br><span class="line">Pass 2: Checking directory structure</span><br><span class="line">Pass 3: Checking directory connectivity</span><br><span class="line">Pass 4: Checking reference counts</span><br><span class="line">Pass 5: Checking group summary information</span><br><span class="line">/dev/sdb1: 12/32768 files (0.0% non-contiguous), 6354/131072 blocks</span><br></pre></td></tr></table></figure>

<h2 id="è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿ"><a href="#è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿ"></a>è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿ</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo resize2fs /dev/sdb1</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">resize2fs 1.44.1 (24-Mar-2018)</span><br><span class="line">Resizing the filesystem on /dev/sdb1 to 196608 (4k) blocks.</span><br><span class="line">The filesystem on /dev/sdb1 is now 196608 (4k) blocks long.</span><br></pre></td></tr></table></figure>

<h1 id="ç¼©å°æ–‡ä»¶ç³»ç»Ÿ"><a href="#ç¼©å°æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="ç¼©å°æ–‡ä»¶ç³»ç»Ÿ"></a>ç¼©å°æ–‡ä»¶ç³»ç»Ÿ</h1><p>ç¼©å°æ–‡ä»¶ç³»ç»Ÿç†è®ºä¸Šä¸éœ€è¦è°ƒæ•´åˆ†åŒºï¼Œä½†æ˜¯è¿™æ ·ä¼šé€ æˆç©ºé—´çš„æµªè´¹ï¼Œå…¶æ“ä½œé¡ºåºä¸æ‰©å¤§æ–‡ä»¶ç³»ç»Ÿç›¸åã€‚æˆ‘ä»¬ç°åœ¨æŠŠåˆšæ‰çš„<code>768M</code>çš„æ–‡ä»¶ç³»ç»Ÿå†è°ƒæ•´ä¸º<code>512M</code>ã€‚</p>
<h2 id="æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿ-1"><a href="#æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿ-1" class="headerlink" title="æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿ"></a>æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿ</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo e2fsck -f /dev/sdb1</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">e2fsck 1.44.1 (24-Mar-2018)</span><br><span class="line">Pass 1: Checking inodes, blocks, and sizes</span><br><span class="line">Pass 2: Checking directory structure</span><br><span class="line">Pass 3: Checking directory connectivity</span><br><span class="line">Pass 4: Checking reference counts</span><br><span class="line">Pass 5: Checking group summary information</span><br><span class="line">/dev/sdb1: 12/49152 files (0.0% non-contiguous), 7447/196608 blocks</span><br></pre></td></tr></table></figure>

<h2 id="è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿ-1"><a href="#è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿ-1" class="headerlink" title="è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿ"></a>è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿ</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo resize2fs /dev/sdb1 512M</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">resize2fs 1.44.1 (24-Mar-2018)</span><br><span class="line">Resizing the filesystem on /dev/sdb1 to 131072 (4k) blocks.</span><br><span class="line">The filesystem on /dev/sdb1 is now 131072 (4k) blocks long.</span><br></pre></td></tr></table></figure>

<h2 id="é‡å»ºåˆ†åŒº-1"><a href="#é‡å»ºåˆ†åŒº-1" class="headerlink" title="é‡å»ºåˆ†åŒº"></a>é‡å»ºåˆ†åŒº</h2><ol>
<li><p>åˆ é™¤æ—§åˆ†åŒº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo fdisk /dev/sdb</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Command (m for help): p</span><br><span class="line">Disk /dev/sdb: 1 GiB, 1073741824 bytes, 2097152 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disklabel type: dos</span><br><span class="line">Disk identifier: 0x485cc8a2</span><br><span class="line"></span><br><span class="line">Device     Boot Start     End Sectors  Size Id Type</span><br><span class="line">/dev/sdb1        2048 1574911 1572864  768M 83 Linux</span><br><span class="line"></span><br><span class="line">Command (m for help): d</span><br><span class="line">Selected partition 1</span><br><span class="line">Partition 1 has been deleted.</span><br><span class="line"></span><br><span class="line">Command (m for help): w</span><br><span class="line">The partition table has been altered.</span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">Syncing disks.</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ›å»ºæ–°åˆ†åŒº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo fdisk /dev/sdb</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Command (m for help): p</span><br><span class="line">Disk /dev/sdb: 1 GiB, 1073741824 bytes, 2097152 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disklabel type: dos</span><br><span class="line">Disk identifier: 0x485cc8a2</span><br><span class="line"></span><br><span class="line">Command (m for help): n</span><br><span class="line">Partition type</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended (container for logical partitions)</span><br><span class="line">Select (default p): p</span><br><span class="line">Partition number (1-4, default 1):</span><br><span class="line">First sector (2048-2097151, default 2048):</span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G,T,P&#125; (2048-2097151, default 2097151): +512M</span><br><span class="line"></span><br><span class="line">Created a new partition 1 of type &#x27;Linux&#x27; and of size 512 MiB.</span><br><span class="line">Partition #1 contains a ext4 signature.</span><br><span class="line"></span><br><span class="line">Do you want to remove the signature? [Y]es/[N]o: n</span><br><span class="line"></span><br><span class="line">Command (m for help): w</span><br><span class="line"></span><br><span class="line">The partition table has been altered.</span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">Syncing disks.</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æœ¬æ–‡æ‰€æè¿°çš„åœºæ™¯ä»…ä»…é€‚ç”¨äºåˆ†åŒºåé¢ä»ç„¶æœ‰å¯åˆ†é…çš„ç©ºé—´ï¼Œå¦‚æœåé¢ç´§è·Ÿç€å…¶å®ƒåˆ†åŒºæˆ–è€…è¯¥åˆ†åŒºæ˜¯æœ€åä¸€ä¸ªåˆ†åŒºï¼Œä¼šæ¶‰åŠåˆ°åˆ†åŒºçš„ç§»åŠ¨ï¼Œä»¥åæœ‰æœºä¼šä¼šè®²åˆ°ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://geekpeek.net/resize-filesystem-fdisk-resize2fs/">Resize Partition and Filesystem with fdisk &amp; resize2fs</a></p>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>filesystem</tag>
      </tags>
  </entry>
  <entry>
    <title>äººæ€§çš„å¼±ç‚¹</title>
    <url>/2021/01/23/how-to-win-friends-and-influence-people.html</url>
    <content><![CDATA[<blockquote>
<p>å¦‚æœä½ è¦ä»è¿™æœ¬ä¹¦é‡Œè·å¾—æœ€å¤§çš„ç›Šå¤„ï¼Œæœ‰ä¸€ä¸ªå¿…é¡»å…·å¤‡çš„æ¡ä»¶ã€‚ä¸ç„¶ï¼Œä½ å†æ€ä¹ˆç ”ç©¶ï¼Œä¹Ÿä¸ä¼šæœ‰å¤šå°‘ç”¨å¤„ã€‚å¦‚æœæœ‰è¿™ç§å¤©èµ‹çš„æ‰æ™ºï¼Œä½ å³ä½¿æ²¡æœ‰çœ‹è¿™ç¯‡å»ºè®®çš„æ–‡ç« ï¼Œä¹Ÿèƒ½è·å¾—å¥‡è¿¹ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="è·å¾—å¥‡è¿¹"><a href="#è·å¾—å¥‡è¿¹" class="headerlink" title="è·å¾—å¥‡è¿¹"></a>è·å¾—å¥‡è¿¹</h1><p>è¿™ç§å¥‡å¦™çš„æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿé‚£æ˜¯ä¸€ç§æ·±å…¥çš„ã€æƒ³è¦å­¦ä¹ çš„æ¬²æœ›ï¼Œä¸€ä¸ªå¢åŠ ä½ åº”ä»˜ä»–äººèƒ½åŠ›çš„å¼ºçƒˆå†³å¿ƒã€‚</p>
<p>ä½ å¦‚ä½•å‡ºå‘è¿™æ ·ä¸€ä¸ªå†²åŠ¨å‘¢ï¼Ÿç»å¸¸æé†’ä½ è‡ªå·±ï¼Œè®©è‡ªå·±çŸ¥é“è¿™äº›åŸåˆ™å¯¹è‡ªå·±æ˜¯ä½•ç­‰çš„é‡è¦ã€‚æ›¿ä½ è‡ªå·±åšè¿™æ ·çš„æƒ³è±¡â€”â€”<strong>å¦‚æœå°†è¿™äº›åŸåˆ™è¿ç”¨è‡ªå¦‚ï¼Œå°†ä½¿ä½ æ¥è§¦åˆ°å¤šå§¿å¤šå½©çš„ç¯å¢ƒï¼›åœ¨ç»æµé…¬åŠ³ä¸Šï¼Œå°†æœ‰æ›´å¤šçš„å¸®åŠ©ã€‚</strong>ä½ è¦ä¸€æ¬¡åˆä¸€æ¬¡åœ°å¯¹è‡ªå·±è¯´ï¼šâ€œ<strong>æˆ‘æ‰€ä»¥å—äººæ¬¢è¿ï¼Œæˆ‘æ‰€è·å¾—çš„å¿«ä¹ï¼Œå’Œæˆ‘é…¬åŠ³æ”¶å…¥çš„å¢åŠ ï¼Œé‚£æ˜¯ç”±äºæˆ‘çŸ¥é“äº†ä¸äººç›¸å¤„çš„æŠ€å·§ã€‚</strong>â€</p>
<p>è®°ä½ï¼Œåªæœ‰æ’ä¹…çš„ï¼Œæ·±åˆ‡çš„æ¸©ä¹ ï¼Œæ‰èƒ½ä½¿è¿™äº›åŸåˆ™çš„è¿ç”¨æˆä¸ºä¹ æƒ¯ã€‚</p>
<h1 id="æ–°å¥‡çš„å°è¯•"><a href="#æ–°å¥‡çš„å°è¯•" class="headerlink" title="æ–°å¥‡çš„å°è¯•"></a>æ–°å¥‡çš„å°è¯•</h1><p>å½“ä½ çš„å¦»å­ã€å­å¥³æˆ–æ˜¯åŒäº‹ï¼Œæ‰¾å‡ºä½ è¿åæŸä¸€é¡¹åŸåˆ™æ—¶ï¼Œä½ ä¸å¦¨ä»˜å‡º10å…ƒæˆ–æ˜¯20å…ƒç»™ä»–ä»¬ï¼Œä½œä¸ºå¯¹è‡ªå·±çš„å¤„ç½šã€‚</p>
<p>è®°å½•å®æ–½è¿™äº›åŸåˆ™çš„æ•ˆæœï¼ŒæŠŠæ—¥æœŸã€æ•ˆæœå’Œå¯¹æ–¹çš„å§“åè®°å½•ä¸‹æ¥ã€‚</p>
<p>æ¯æ˜ŸæœŸåšä¸€æ¬¡æ£€è®¨ï¼Œè´¨é—®ä½ åˆçŠ¯äº†ä»€ä¹ˆé”™è¯¯ï¼Œæœ‰å“ªäº›åœ°æ–¹éœ€è¦æ”¹è¿›ï¼Œå°†æ¥è¯¥æ€ä¹ˆåšã€‚</p>
<h1 id="ä¸ºäººå¤„ä¸–çš„åŸºæœ¬æŠ€å·§"><a href="#ä¸ºäººå¤„ä¸–çš„åŸºæœ¬æŠ€å·§" class="headerlink" title="ä¸ºäººå¤„ä¸–çš„åŸºæœ¬æŠ€å·§"></a>ä¸ºäººå¤„ä¸–çš„åŸºæœ¬æŠ€å·§</h1><h2 id="ä¸è¦æ‰¹è¯„ã€è´£æ€ªæˆ–æŠ±æ€¨"><a href="#ä¸è¦æ‰¹è¯„ã€è´£æ€ªæˆ–æŠ±æ€¨" class="headerlink" title="ä¸è¦æ‰¹è¯„ã€è´£æ€ªæˆ–æŠ±æ€¨"></a>ä¸è¦æ‰¹è¯„ã€è´£æ€ªæˆ–æŠ±æ€¨</h2><h2 id="å‘è‡ªå†…å¿ƒåœ°èµèµåˆ«äºº"><a href="#å‘è‡ªå†…å¿ƒåœ°èµèµåˆ«äºº" class="headerlink" title="å‘è‡ªå†…å¿ƒåœ°èµèµåˆ«äºº"></a>å‘è‡ªå†…å¿ƒåœ°èµèµåˆ«äºº</h2><p>æ€è€ƒå¯¹æ–¹çš„ä¼˜ç‚¹ã€‚</p>
<h2 id="çŸ¥æ‚‰å¯¹æ–¹çš„æƒ³æ³•"><a href="#çŸ¥æ‚‰å¯¹æ–¹çš„æƒ³æ³•" class="headerlink" title="çŸ¥æ‚‰å¯¹æ–¹çš„æƒ³æ³•"></a>çŸ¥æ‚‰å¯¹æ–¹çš„æƒ³æ³•</h2><p>æ€è€ƒå¯¹æ–¹éœ€è¦ä»€ä¹ˆã€‚</p>
<h2 id="å­¦ä¼šå…³å¿ƒå’Œå¸®åŠ©ä»–äºº"><a href="#å­¦ä¼šå…³å¿ƒå’Œå¸®åŠ©ä»–äºº" class="headerlink" title="å­¦ä¼šå…³å¿ƒå’Œå¸®åŠ©ä»–äºº"></a>å­¦ä¼šå…³å¿ƒå’Œå¸®åŠ©ä»–äºº</h2><p>èƒ½å¤Ÿè·å¾—æ›´å¤šæœ‹å‹å’Œå¿«ä¹ã€‚</p>
<h1 id="å¹³å®‰å¿«ä¹çš„14é¡¹æ³•åˆ™"><a href="#å¹³å®‰å¿«ä¹çš„14é¡¹æ³•åˆ™" class="headerlink" title="å¹³å®‰å¿«ä¹çš„14é¡¹æ³•åˆ™"></a>å¹³å®‰å¿«ä¹çš„14é¡¹æ³•åˆ™</h1><h2 id="é€‰æ‹©æ­£ç¡®çš„æ€æƒ³"><a href="#é€‰æ‹©æ­£ç¡®çš„æ€æƒ³" class="headerlink" title="é€‰æ‹©æ­£ç¡®çš„æ€æƒ³"></a>é€‰æ‹©æ­£ç¡®çš„æ€æƒ³</h2><p>æ„å¿— <strong>â€”æ§åˆ¶â€”&gt;</strong> è¡ŒåŠ¨ <strong>â€”å½±å“â€”&gt;</strong> æ„Ÿè§‰</p>
<h2 id="åšå®ˆè‡ªæˆ‘ï¼Œæ‹’ç»æ¨¡ä»¿"><a href="#åšå®ˆè‡ªæˆ‘ï¼Œæ‹’ç»æ¨¡ä»¿" class="headerlink" title="åšå®ˆè‡ªæˆ‘ï¼Œæ‹’ç»æ¨¡ä»¿"></a>åšå®ˆè‡ªæˆ‘ï¼Œæ‹’ç»æ¨¡ä»¿</h2><p>ä¿æŒæœ¬è‰²ï¼Œåšç‹¬ä¸€æ— äºŒçš„è‡ªå·±ã€‚</p>
<h2 id="ä»æ‚²ä¼¤ä¸­èµ°å‡ºæ¥"><a href="#ä»æ‚²ä¼¤ä¸­èµ°å‡ºæ¥" class="headerlink" title="ä»æ‚²ä¼¤ä¸­èµ°å‡ºæ¥"></a>ä»æ‚²ä¼¤ä¸­èµ°å‡ºæ¥</h2><p>å°†å†…å¿ƒä¸­çš„ææƒ§è½¬åŒ–ä¸ºå¥‹æ–—çš„å†³å¿ƒã€‚</p>
<h2 id="å­¦ä¼šæ”¾æ¾ï¼Œè§£é™¤ç–²åŠ³"><a href="#å­¦ä¼šæ”¾æ¾ï¼Œè§£é™¤ç–²åŠ³" class="headerlink" title="å­¦ä¼šæ”¾æ¾ï¼Œè§£é™¤ç–²åŠ³"></a>å­¦ä¼šæ”¾æ¾ï¼Œè§£é™¤ç–²åŠ³</h2><p>æ¥å—æœ€åçš„æƒ…å†µï¼Œæ€è€ƒå¦‚ä½•æ”¹å–„å®ƒã€‚</p>
<h2 id="å…‹æœå¿§è™‘çš„å¿ƒç†"><a href="#å…‹æœå¿§è™‘çš„å¿ƒç†" class="headerlink" title="å…‹æœå¿§è™‘çš„å¿ƒç†"></a>å…‹æœå¿§è™‘çš„å¿ƒç†</h2><p>å¥å…¨çš„ä¿¡ä»°ã€ç¡çœ ã€éŸ³ä¹å’Œæ¬¢ç¬‘ã€‚</p>
<h2 id="æ´»åœ¨çœŸå®çš„ä»Šå¤©"><a href="#æ´»åœ¨çœŸå®çš„ä»Šå¤©" class="headerlink" title="æ´»åœ¨çœŸå®çš„ä»Šå¤©"></a>æ´»åœ¨çœŸå®çš„ä»Šå¤©</h2><p>ä¸è¦å¿§è™‘è¿‡å»å’Œæœªæ¥ï¼Œå…¨åŠ›åšå¥½ä»Šå¤©çš„æ¯ä»¶äº‹ã€‚</p>
<h2 id="å‹¿å­˜æŠ¥å¤ä¹‹å¿ƒ"><a href="#å‹¿å­˜æŠ¥å¤ä¹‹å¿ƒ" class="headerlink" title="å‹¿å­˜æŠ¥å¤ä¹‹å¿ƒ"></a>å‹¿å­˜æŠ¥å¤ä¹‹å¿ƒ</h2><p>é›†ä¸­ç²¾åŠ›å»åšä¸€äº›è¶…å‡ºèƒ½åŠ›ä¹‹å¤–çš„äº‹ã€‚</p>
<h2 id="æ–½æ©ä¸å›¾æŠ¥"><a href="#æ–½æ©ä¸å›¾æŠ¥" class="headerlink" title="æ–½æ©ä¸å›¾æŠ¥"></a>æ–½æ©ä¸å›¾æŠ¥</h2><p>å”¯ä¸€èƒ½å¾—åˆ°çˆ±çš„æ–¹æ³•ï¼Œå°±æ˜¯ä¸æ±‚å›æŠ¥åœ°ä»˜å‡ºã€‚</p>
<h2 id="æ—¶åˆ»æ€€æœ‰æ„Ÿæ©çš„å¿ƒ"><a href="#æ—¶åˆ»æ€€æœ‰æ„Ÿæ©çš„å¿ƒ" class="headerlink" title="æ—¶åˆ»æ€€æœ‰æ„Ÿæ©çš„å¿ƒ"></a>æ—¶åˆ»æ€€æœ‰æ„Ÿæ©çš„å¿ƒ</h2><p>çæƒœç›®å‰æ‰€æ‹¥æœ‰çš„ä¸€åˆ‡ã€‚</p>
<h2 id="å°†é…¸æŸ æª¬å˜æˆç”œæŸ æª¬æ±"><a href="#å°†é…¸æŸ æª¬å˜æˆç”œæŸ æª¬æ±" class="headerlink" title="å°†é…¸æŸ æª¬å˜æˆç”œæŸ æª¬æ±"></a>å°†é…¸æŸ æª¬å˜æˆç”œæŸ æª¬æ±</h2><p>ä»æŸå¤±ä¸­è·åˆ©ã€‚</p>
<h2 id="æ¯å¤©éƒ½è¦å¸¦ç»™åˆ«äººå¿«ä¹"><a href="#æ¯å¤©éƒ½è¦å¸¦ç»™åˆ«äººå¿«ä¹" class="headerlink" title="æ¯å¤©éƒ½è¦å¸¦ç»™åˆ«äººå¿«ä¹"></a>æ¯å¤©éƒ½è¦å¸¦ç»™åˆ«äººå¿«ä¹</h2><p>çœŸè¯šåœ°å¯¹åˆ«äººæ„Ÿå…´è¶£ï¼Œå¿˜è®°è‡ªå·±çš„éœ€æ±‚ã€‚</p>
<h2 id="æ²¡æœ‰äººæ„¿æ„è¸¢ä¸€æ¡æ­»ç‹—"><a href="#æ²¡æœ‰äººæ„¿æ„è¸¢ä¸€æ¡æ­»ç‹—" class="headerlink" title="æ²¡æœ‰äººæ„¿æ„è¸¢ä¸€æ¡æ­»ç‹—"></a>æ²¡æœ‰äººæ„¿æ„è¸¢ä¸€æ¡æ­»ç‹—</h2><p>å—åˆ°æ‰¹è¯„æ˜¯å› ä¸ºè‡ªå·±è¶³å¤Ÿä¼˜ç§€ã€‚</p>
<h2 id="ä¸è¦è¢«æ‰¹è¯„ä¼¤å®³"><a href="#ä¸è¦è¢«æ‰¹è¯„ä¼¤å®³" class="headerlink" title="ä¸è¦è¢«æ‰¹è¯„ä¼¤å®³"></a>ä¸è¦è¢«æ‰¹è¯„ä¼¤å®³</h2><p>åšæŒåšè‡ªå·±è®¤ä¸ºå¯¹çš„äº‹ã€‚</p>
<h2 id="å­¦ä¼šè‡ªæˆ‘æ‰¹è¯„"><a href="#å­¦ä¼šè‡ªæˆ‘æ‰¹è¯„" class="headerlink" title="å­¦ä¼šè‡ªæˆ‘æ‰¹è¯„"></a>å­¦ä¼šè‡ªæˆ‘æ‰¹è¯„</h2><p>è®°ä¸‹åˆ«äººçš„æ‰¹è¯„å’Œè‡ªå·±æ‰€çŠ¯çš„é”™è¯¯ã€‚</p>
<h1 id="è·å–ä¿¡æœçš„12ç§æ–¹æ³•"><a href="#è·å–ä¿¡æœçš„12ç§æ–¹æ³•" class="headerlink" title="è·å–ä¿¡æœçš„12ç§æ–¹æ³•"></a>è·å–ä¿¡æœçš„12ç§æ–¹æ³•</h1><h2 id="äº‰è®ºä¸­æ²¡æœ‰èµ¢å®¶"><a href="#äº‰è®ºä¸­æ²¡æœ‰èµ¢å®¶" class="headerlink" title="äº‰è®ºä¸­æ²¡æœ‰èµ¢å®¶"></a>äº‰è®ºä¸­æ²¡æœ‰èµ¢å®¶</h2><p>æ°¸è¿œé¿å…æ­£é¢çš„å†²çªã€‚</p>
<h2 id="å¦‚ä½•é¿å…åˆ¶é€ æ•Œäºº"><a href="#å¦‚ä½•é¿å…åˆ¶é€ æ•Œäºº" class="headerlink" title="å¦‚ä½•é¿å…åˆ¶é€ æ•Œäºº"></a>å¦‚ä½•é¿å…åˆ¶é€ æ•Œäºº</h2><p>æ°¸è¿œåˆ«æŒ‡è´£å¯¹æ–¹æ˜¯é”™çš„ã€‚</p>
<h2 id="å¦‚æœä¸å¯¹å°±åŠæ—¶è®¤é”™"><a href="#å¦‚æœä¸å¯¹å°±åŠæ—¶è®¤é”™" class="headerlink" title="å¦‚æœä¸å¯¹å°±åŠæ—¶è®¤é”™"></a>å¦‚æœä¸å¯¹å°±åŠæ—¶è®¤é”™</h2><p>æ„šè ¢çš„äººæ‰ä¼šè¾©æŠ¤è‡ªå·±çš„è¿‡é”™ã€‚</p>
<h2 id="ä½¿ä½ èµ°ä¸Šç†æ™ºçš„å¤§è·¯"><a href="#ä½¿ä½ èµ°ä¸Šç†æ™ºçš„å¤§è·¯" class="headerlink" title="ä½¿ä½ èµ°ä¸Šç†æ™ºçš„å¤§è·¯"></a>ä½¿ä½ èµ°ä¸Šç†æ™ºçš„å¤§è·¯</h2><p>ä»¥å‹å–„çš„æ–¹æ³•å¼€å§‹ã€‚</p>
<h2 id="è‹æ ¼æ‹‰åº•çš„ç§˜å¯†"><a href="#è‹æ ¼æ‹‰åº•çš„ç§˜å¯†" class="headerlink" title="è‹æ ¼æ‹‰åº•çš„ç§˜å¯†"></a>è‹æ ¼æ‹‰åº•çš„ç§˜å¯†</h2><p>ä½¿å¯¹æ–¹å¾ˆå¿«åœ°å›ç­”ï¼šâ€œæ˜¯ï¼æ˜¯ï¼â€</p>
<h2 id="å¤„ç†ä¸€ä¸ªæŠ±æ€¨è€…çš„å®‰å…¨æ‰‹æ³•"><a href="#å¤„ç†ä¸€ä¸ªæŠ±æ€¨è€…çš„å®‰å…¨æ‰‹æ³•" class="headerlink" title="å¤„ç†ä¸€ä¸ªæŠ±æ€¨è€…çš„å®‰å…¨æ‰‹æ³•"></a>å¤„ç†ä¸€ä¸ªæŠ±æ€¨è€…çš„å®‰å…¨æ‰‹æ³•</h2><p>å°½é‡è®©å¯¹æ–¹æœ‰å¤šè¯´è¯çš„æœºä¼šã€‚</p>
<h2 id="è®©åˆ«äººæ„¿æ„è·Ÿä½ åˆä½œ"><a href="#è®©åˆ«äººæ„¿æ„è·Ÿä½ åˆä½œ" class="headerlink" title="è®©åˆ«äººæ„¿æ„è·Ÿä½ åˆä½œ"></a>è®©åˆ«äººæ„¿æ„è·Ÿä½ åˆä½œ</h2><p>ä½¿å¯¹æ–¹ä»¥ä¸ºè¿™æ˜¯ä»–çš„æ„å¿µã€‚</p>
<h2 id="ä¸€ä¸ªåˆ›é€ å¥‡è¿¹çš„å…¬å¼"><a href="#ä¸€ä¸ªåˆ›é€ å¥‡è¿¹çš„å…¬å¼" class="headerlink" title="ä¸€ä¸ªåˆ›é€ å¥‡è¿¹çš„å…¬å¼"></a>ä¸€ä¸ªåˆ›é€ å¥‡è¿¹çš„å…¬å¼</h2><p>è¦çœŸè¯šåœ°ä»¥ä»–äººåœ°è§‚ç‚¹å»çœ‹äº‹æƒ…ã€‚</p>
<h2 id="åŒæƒ…å¯¹æ–¹çš„æ„å¿µå’Œæ¬²æœ›"><a href="#åŒæƒ…å¯¹æ–¹çš„æ„å¿µå’Œæ¬²æœ›" class="headerlink" title="åŒæƒ…å¯¹æ–¹çš„æ„å¿µå’Œæ¬²æœ›"></a>åŒæƒ…å¯¹æ–¹çš„æ„å¿µå’Œæ¬²æœ›</h2><p>äººç±»æ™®éè¿½æ±‚åŒæƒ…ã€‚</p>
<h2 id="å¸å¼•æ‰€æœ‰äººçš„é­…åŠ›"><a href="#å¸å¼•æ‰€æœ‰äººçš„é­…åŠ›" class="headerlink" title="å¸å¼•æ‰€æœ‰äººçš„é­…åŠ›"></a>å¸å¼•æ‰€æœ‰äººçš„é­…åŠ›</h2><p>æ¿€å‘äººä»¬æ›´é«˜å°šçš„åŠ¨æœºã€‚</p>
<h2 id="å®è¡Œã€æ¨è¿›ï¼Œåˆ«åœé¡¿ä¸‹æ¥"><a href="#å®è¡Œã€æ¨è¿›ï¼Œåˆ«åœé¡¿ä¸‹æ¥" class="headerlink" title="å®è¡Œã€æ¨è¿›ï¼Œåˆ«åœé¡¿ä¸‹æ¥"></a>å®è¡Œã€æ¨è¿›ï¼Œåˆ«åœé¡¿ä¸‹æ¥</h2><p>ä½¿ä½ çš„æ„å¿µæˆå‰§åŒ–ã€‚</p>
<h2 id="å½“ä½ æ— è®¡å¯æ–½æ—¶ï¼Œå°±è¯•è¯•è¿™ä¸ªå§"><a href="#å½“ä½ æ— è®¡å¯æ–½æ—¶ï¼Œå°±è¯•è¯•è¿™ä¸ªå§" class="headerlink" title="å½“ä½ æ— è®¡å¯æ–½æ—¶ï¼Œå°±è¯•è¯•è¿™ä¸ªå§"></a>å½“ä½ æ— è®¡å¯æ–½æ—¶ï¼Œå°±è¯•è¯•è¿™ä¸ªå§</h2><p>æå‡ºä¸€ä¸ªæŒ‘æˆ˜ã€‚</p>
<h1 id="è¯´æœåˆ«äººçš„9ç§æ–¹æ³•"><a href="#è¯´æœåˆ«äººçš„9ç§æ–¹æ³•" class="headerlink" title="è¯´æœåˆ«äººçš„9ç§æ–¹æ³•"></a>è¯´æœåˆ«äººçš„9ç§æ–¹æ³•</h1><h2 id="é€‰å¥½å¼€å§‹æ‰¹è¯„çš„æ–¹æ³•"><a href="#é€‰å¥½å¼€å§‹æ‰¹è¯„çš„æ–¹æ³•" class="headerlink" title="é€‰å¥½å¼€å§‹æ‰¹è¯„çš„æ–¹æ³•"></a>é€‰å¥½å¼€å§‹æ‰¹è¯„çš„æ–¹æ³•</h2><p>ç§°èµå’ŒçœŸè¯šçš„æ¬£èµã€‚</p>
<h2 id="å¦‚ä½•æ‰¹è¯„æ‰ä¸è‡´å¼•èµ·åæ„Ÿ"><a href="#å¦‚ä½•æ‰¹è¯„æ‰ä¸è‡´å¼•èµ·åæ„Ÿ" class="headerlink" title="å¦‚ä½•æ‰¹è¯„æ‰ä¸è‡´å¼•èµ·åæ„Ÿ"></a>å¦‚ä½•æ‰¹è¯„æ‰ä¸è‡´å¼•èµ·åæ„Ÿ</h2><p>é—´æ¥åœ°æŒ‡å‡ºäººä»¬çš„è¿‡é”™ã€‚</p>
<h2 id="å…ˆè¯´å‡ºä½ è‡ªå·±çš„é”™è¯¯"><a href="#å…ˆè¯´å‡ºä½ è‡ªå·±çš„é”™è¯¯" class="headerlink" title="å…ˆè¯´å‡ºä½ è‡ªå·±çš„é”™è¯¯"></a>å…ˆè¯´å‡ºä½ è‡ªå·±çš„é”™è¯¯</h2><p>è°¦é€Šå’Œç§°èµã€‚</p>
<h2 id="æ²¡æœ‰äººå–œæ¬¢æ¥å—å‘½ä»¤"><a href="#æ²¡æœ‰äººå–œæ¬¢æ¥å—å‘½ä»¤" class="headerlink" title="æ²¡æœ‰äººå–œæ¬¢æ¥å—å‘½ä»¤"></a>æ²¡æœ‰äººå–œæ¬¢æ¥å—å‘½ä»¤</h2><p>å»ºè®®ï¼Œè€Œä¸æ˜¯å‘½ä»¤ã€‚</p>
<h2 id="è®©å¯¹æ–¹ä¿ä½ä»–çš„é¢å­"><a href="#è®©å¯¹æ–¹ä¿ä½ä»–çš„é¢å­" class="headerlink" title="è®©å¯¹æ–¹ä¿ä½ä»–çš„é¢å­"></a>è®©å¯¹æ–¹ä¿ä½ä»–çš„é¢å­</h2><p>ä½“æ¤ã€è°…è§£å¯¹æ–¹ã€‚</p>
<h2 id="å¦‚ä½•é¼“åŠ±äººä»¬æˆåŠŸ"><a href="#å¦‚ä½•é¼“åŠ±äººä»¬æˆåŠŸ" class="headerlink" title="å¦‚ä½•é¼“åŠ±äººä»¬æˆåŠŸ"></a>å¦‚ä½•é¼“åŠ±äººä»¬æˆåŠŸ</h2><p>ç§°èµæœ€ç»†å¾®çš„è¿›æ­¥ã€‚</p>
<h2 id="ç»™ç‹—å–ä¸ªå¥½åå­—"><a href="#ç»™ç‹—å–ä¸ªå¥½åå­—" class="headerlink" title="ç»™ç‹—å–ä¸ªå¥½åå­—"></a>ç»™ç‹—å–ä¸ªå¥½åå­—</h2><p>ç»™äººä¸€ä¸ªç¾åè®©ä»–å»ä¿å…¨ã€‚</p>
<h2 id="ä½¿é”™è¯¯çœ‹èµ·æ¥å®¹æ˜“æ”¹æ­£"><a href="#ä½¿é”™è¯¯çœ‹èµ·æ¥å®¹æ˜“æ”¹æ­£" class="headerlink" title="ä½¿é”™è¯¯çœ‹èµ·æ¥å®¹æ˜“æ”¹æ­£"></a>ä½¿é”™è¯¯çœ‹èµ·æ¥å®¹æ˜“æ”¹æ­£</h2><p>é¼“åŠ±å¯¹æ–¹æŠŠäº‹æƒ…çœ‹æˆå¾ˆå®¹æ˜“ã€‚</p>
<h2 id="ä½¿äººä»¬ä¹æ„åšä½ æ‰€å»ºè®®çš„äº‹"><a href="#ä½¿äººä»¬ä¹æ„åšä½ æ‰€å»ºè®®çš„äº‹" class="headerlink" title="ä½¿äººä»¬ä¹æ„åšä½ æ‰€å»ºè®®çš„äº‹"></a>ä½¿äººä»¬ä¹æ„åšä½ æ‰€å»ºè®®çš„äº‹</h2><p>ä¸è®©äººæœ‰ä¸æ„‰å¿«çš„æ„Ÿè§‰ã€‚</p>
<h1 id="è®©ä½ å¤„å¤„å—æ¬¢è¿çš„6é¡¹æ³•åˆ™"><a href="#è®©ä½ å¤„å¤„å—æ¬¢è¿çš„6é¡¹æ³•åˆ™" class="headerlink" title="è®©ä½ å¤„å¤„å—æ¬¢è¿çš„6é¡¹æ³•åˆ™"></a>è®©ä½ å¤„å¤„å—æ¬¢è¿çš„6é¡¹æ³•åˆ™</h1><h2 id="è®©ä½ åˆ°å¤„å—æ¬¢è¿çš„å®ç”¨æ–¹æ³•"><a href="#è®©ä½ åˆ°å¤„å—æ¬¢è¿çš„å®ç”¨æ–¹æ³•" class="headerlink" title="è®©ä½ åˆ°å¤„å—æ¬¢è¿çš„å®ç”¨æ–¹æ³•"></a>è®©ä½ åˆ°å¤„å—æ¬¢è¿çš„å®ç”¨æ–¹æ³•</h2><p>çœŸè¯šåœ°å¯¹åˆ«äººäº§ç”Ÿå…´è¶£ã€‚</p>
<h2 id="å¦‚ä½•ç»™äººå¥½å°è±¡"><a href="#å¦‚ä½•ç»™äººå¥½å°è±¡" class="headerlink" title="å¦‚ä½•ç»™äººå¥½å°è±¡"></a>å¦‚ä½•ç»™äººå¥½å°è±¡</h2><p>å¾®ç¬‘ã€‚</p>
<h2 id="è¿™æ ·åšï¼Œä½ å°±èƒ½é¿å…å‘ç”Ÿéº»çƒ¦"><a href="#è¿™æ ·åšï¼Œä½ å°±èƒ½é¿å…å‘ç”Ÿéº»çƒ¦" class="headerlink" title="è¿™æ ·åšï¼Œä½ å°±èƒ½é¿å…å‘ç”Ÿéº»çƒ¦"></a>è¿™æ ·åšï¼Œä½ å°±èƒ½é¿å…å‘ç”Ÿéº»çƒ¦</h2><p>è®°ä½åˆ«äººçš„åå­—ã€‚</p>
<h2 id="å¦‚ä½•å…»æˆä¼˜é›…è€Œè·å¾—å¥½æ„Ÿçš„è°ˆå"><a href="#å¦‚ä½•å…»æˆä¼˜é›…è€Œè·å¾—å¥½æ„Ÿçš„è°ˆå" class="headerlink" title="å¦‚ä½•å…»æˆä¼˜é›…è€Œè·å¾—å¥½æ„Ÿçš„è°ˆå"></a>å¦‚ä½•å…»æˆä¼˜é›…è€Œè·å¾—å¥½æ„Ÿçš„è°ˆå</h2><p>å–„äºå€¾å¬ã€‚</p>
<h2 id="å¦‚ä½•ä½¿äººå¯¹ä½ æ„Ÿå…´è¶£"><a href="#å¦‚ä½•ä½¿äººå¯¹ä½ æ„Ÿå…´è¶£" class="headerlink" title="å¦‚ä½•ä½¿äººå¯¹ä½ æ„Ÿå…´è¶£"></a>å¦‚ä½•ä½¿äººå¯¹ä½ æ„Ÿå…´è¶£</h2><p>å°±åˆ«äººçš„å…´è¶£è®¨è®ºã€‚</p>
<h2 id="å¦‚ä½•ä½¿äººå¾ˆå¿«åœ°å–œæ¬¢ä½ "><a href="#å¦‚ä½•ä½¿äººå¾ˆå¿«åœ°å–œæ¬¢ä½ " class="headerlink" title="å¦‚ä½•ä½¿äººå¾ˆå¿«åœ°å–œæ¬¢ä½ "></a>å¦‚ä½•ä½¿äººå¾ˆå¿«åœ°å–œæ¬¢ä½ </h2><p>ä½¿åˆ«äººæ„Ÿè§‰åˆ°ä»–çš„é‡è¦ã€‚</p>
<h1 id="åˆ›é€ å¥‡è¿¹çš„ä¿¡"><a href="#åˆ›é€ å¥‡è¿¹çš„ä¿¡" class="headerlink" title="åˆ›é€ å¥‡è¿¹çš„ä¿¡"></a>åˆ›é€ å¥‡è¿¹çš„ä¿¡</h1><h2 id="å¥‡è¿¹æ˜¯å¯ä»¥åˆ›é€ çš„"><a href="#å¥‡è¿¹æ˜¯å¯ä»¥åˆ›é€ çš„" class="headerlink" title="å¥‡è¿¹æ˜¯å¯ä»¥åˆ›é€ çš„"></a>å¥‡è¿¹æ˜¯å¯ä»¥åˆ›é€ çš„</h2><h2 id="è¯·ä½ å¸®æˆ‘è§£å†³ä¸€é¡¹å›°éš¾"><a href="#è¯·ä½ å¸®æˆ‘è§£å†³ä¸€é¡¹å›°éš¾" class="headerlink" title="è¯·ä½ å¸®æˆ‘è§£å†³ä¸€é¡¹å›°éš¾"></a>è¯·ä½ å¸®æˆ‘è§£å†³ä¸€é¡¹å›°éš¾</h2><h2 id="è¿ç”¨â€œè¯·ä½ å¸®æˆ‘ä¸€ä¸ªå¿™â€çš„å¿ƒç†å­¦"><a href="#è¿ç”¨â€œè¯·ä½ å¸®æˆ‘ä¸€ä¸ªå¿™â€çš„å¿ƒç†å­¦" class="headerlink" title="è¿ç”¨â€œè¯·ä½ å¸®æˆ‘ä¸€ä¸ªå¿™â€çš„å¿ƒç†å­¦"></a>è¿ç”¨â€œè¯·ä½ å¸®æˆ‘ä¸€ä¸ªå¿™â€çš„å¿ƒç†å­¦</h2><h1 id="9ç§æ–¹æ³•æ‰“é€ å¹¸ç¦å¿«ä¹çš„å®¶åº­"><a href="#9ç§æ–¹æ³•æ‰“é€ å¹¸ç¦å¿«ä¹çš„å®¶åº­" class="headerlink" title="9ç§æ–¹æ³•æ‰“é€ å¹¸ç¦å¿«ä¹çš„å®¶åº­"></a>9ç§æ–¹æ³•æ‰“é€ å¹¸ç¦å¿«ä¹çš„å®¶åº­</h1><h2 id="ä½ æ˜¯å¦åœ¨è‡ªæ˜å©šå§»çš„åŸå¢“"><a href="#ä½ æ˜¯å¦åœ¨è‡ªæ˜å©šå§»çš„åŸå¢“" class="headerlink" title="ä½ æ˜¯å¦åœ¨è‡ªæ˜å©šå§»çš„åŸå¢“"></a>ä½ æ˜¯å¦åœ¨è‡ªæ˜å©šå§»çš„åŸå¢“</h2><p>åˆ‡è«å–‹å–‹ä¸ä¼‘ã€‚</p>
<h2 id="çˆ±ä»–å°±ç»™ä»–å¤šä¸€äº›è‡ªç”±"><a href="#çˆ±ä»–å°±ç»™ä»–å¤šä¸€äº›è‡ªç”±" class="headerlink" title="çˆ±ä»–å°±ç»™ä»–å¤šä¸€äº›è‡ªç”±"></a>çˆ±ä»–å°±ç»™ä»–å¤šä¸€äº›è‡ªç”±</h2><p>åˆ«å°è¯•æ”¹å˜ä½ çš„ä¼´ä¾£ã€‚</p>
<h2 id="è¿™æ ·åšä½ å°±å¿«è¦ç¦»å©šäº†"><a href="#è¿™æ ·åšä½ å°±å¿«è¦ç¦»å©šäº†" class="headerlink" title="è¿™æ ·åšä½ å°±å¿«è¦ç¦»å©šäº†"></a>è¿™æ ·åšä½ å°±å¿«è¦ç¦»å©šäº†</h2><p>ä¸è¦æ‰¹è¯„ã€‚</p>
<h2 id="ä½¿äººå¿«ä¹çš„æ–¹æ³•"><a href="#ä½¿äººå¿«ä¹çš„æ–¹æ³•" class="headerlink" title="ä½¿äººå¿«ä¹çš„æ–¹æ³•"></a>ä½¿äººå¿«ä¹çš„æ–¹æ³•</h2><p>ç»™äºˆçœŸè¯šçš„æ¬£èµã€‚</p>
<h2 id="å¯¹å¥³äººç‰¹åˆ«æœ‰æ„ä¹‰çš„äº‹"><a href="#å¯¹å¥³äººç‰¹åˆ«æœ‰æ„ä¹‰çš„äº‹" class="headerlink" title="å¯¹å¥³äººç‰¹åˆ«æœ‰æ„ä¹‰çš„äº‹"></a>å¯¹å¥³äººç‰¹åˆ«æœ‰æ„ä¹‰çš„äº‹</h2><p>éšæ—¶æ³¨æ„çç¢ç»†å¾®çš„å°åœ°æ–¹ã€‚</p>
<h2 id="å¦‚æœä½ è¦å¿«ä¹ï¼Œå°±è¯·ç‰¢è®°è¿™äº›"><a href="#å¦‚æœä½ è¦å¿«ä¹ï¼Œå°±è¯·ç‰¢è®°è¿™äº›" class="headerlink" title="å¦‚æœä½ è¦å¿«ä¹ï¼Œå°±è¯·ç‰¢è®°è¿™äº›"></a>å¦‚æœä½ è¦å¿«ä¹ï¼Œå°±è¯·ç‰¢è®°è¿™äº›</h2><p>è¦æœ‰ç¤¼è²Œã€‚</p>
<h2 id="å¦‚ä½•ä¸å¥³æ€§ç›¸å¤„"><a href="#å¦‚ä½•ä¸å¥³æ€§ç›¸å¤„" class="headerlink" title="å¦‚ä½•ä¸å¥³æ€§ç›¸å¤„"></a>å¦‚ä½•ä¸å¥³æ€§ç›¸å¤„</h2><h2 id="å¦‚ä½•ä¸ç”·æ€§ç›¸å¤„"><a href="#å¦‚ä½•ä¸ç”·æ€§ç›¸å¤„" class="headerlink" title="å¦‚ä½•ä¸ç”·æ€§ç›¸å¤„"></a>å¦‚ä½•ä¸ç”·æ€§ç›¸å¤„</h2><h2 id="ä¸è¦åšä¸€ä¸ªâ€œå©šå§»çš„æ–‡ç›²â€"><a href="#ä¸è¦åšä¸€ä¸ªâ€œå©šå§»çš„æ–‡ç›²â€" class="headerlink" title="ä¸è¦åšä¸€ä¸ªâ€œå©šå§»çš„æ–‡ç›²â€"></a>ä¸è¦åšä¸€ä¸ªâ€œå©šå§»çš„æ–‡ç›²â€</h2><h1 id="å¦‚ä½•æŠŠè‡ªå·±ä¿®ç‚¼æˆæˆç†Ÿæœ‰é­…åŠ›çš„äºº"><a href="#å¦‚ä½•æŠŠè‡ªå·±ä¿®ç‚¼æˆæˆç†Ÿæœ‰é­…åŠ›çš„äºº" class="headerlink" title="å¦‚ä½•æŠŠè‡ªå·±ä¿®ç‚¼æˆæˆç†Ÿæœ‰é­…åŠ›çš„äºº"></a>å¦‚ä½•æŠŠè‡ªå·±ä¿®ç‚¼æˆæˆç†Ÿæœ‰é­…åŠ›çš„äºº</h1><h2 id="æˆç†Ÿï¼Œä»å‹‡äºæ‹…å½“å¼€å§‹"><a href="#æˆç†Ÿï¼Œä»å‹‡äºæ‹…å½“å¼€å§‹" class="headerlink" title="æˆç†Ÿï¼Œä»å‹‡äºæ‹…å½“å¼€å§‹"></a>æˆç†Ÿï¼Œä»å‹‡äºæ‹…å½“å¼€å§‹</h2><p>ä¸ºè‡ªå·±çš„è¡Œä¸ºè´Ÿè´£ã€‚</p>
<h2 id="å›°éš¾ä¸ç­‰äºä¸å¹¸"><a href="#å›°éš¾ä¸ç­‰äºä¸å¹¸" class="headerlink" title="å›°éš¾ä¸ç­‰äºä¸å¹¸"></a>å›°éš¾ä¸ç­‰äºä¸å¹¸</h2><p>å‹‡æ•¢åœ°é¢å¯¹ã€æ¥å—ã€å…‹æœã€è§£å†³ã€‚</p>
<h2 id="æ‘†è„±ç”Ÿæ´»ä¸­çš„ä¸å¹¸"><a href="#æ‘†è„±ç”Ÿæ´»ä¸­çš„ä¸å¹¸" class="headerlink" title="æ‘†è„±ç”Ÿæ´»ä¸­çš„ä¸å¹¸"></a>æ‘†è„±ç”Ÿæ´»ä¸­çš„ä¸å¹¸</h2><p>è®©æ—¶é—´å»æ²»ç–—ä¼¤ç—›ã€‚</p>
<h2 id="æ‹¥æœ‰è‡ªå·±çš„ä¿¡ä»°"><a href="#æ‹¥æœ‰è‡ªå·±çš„ä¿¡ä»°" class="headerlink" title="æ‹¥æœ‰è‡ªå·±çš„ä¿¡ä»°"></a>æ‹¥æœ‰è‡ªå·±çš„ä¿¡ä»°</h2><p>å¹¶ä»˜è¯¸è¡ŒåŠ¨ã€‚</p>
<h2 id="ä½ å°±æ˜¯å”¯ä¸€"><a href="#ä½ å°±æ˜¯å”¯ä¸€" class="headerlink" title="ä½ å°±æ˜¯å”¯ä¸€"></a>ä½ å°±æ˜¯å”¯ä¸€</h2><p>æŒç»­ä¸æ–­åœ°è‡ªæˆ‘å‘ç°ï¼Œè‡ªæˆ‘æ¢å¯»ã€‚</p>
<h2 id="äº†è§£å¹¶å–œæ¬¢è‡ªå·±"><a href="#äº†è§£å¹¶å–œæ¬¢è‡ªå·±" class="headerlink" title="äº†è§£å¹¶å–œæ¬¢è‡ªå·±"></a>äº†è§£å¹¶å–œæ¬¢è‡ªå·±</h2><p>æœŸå¾…è‡ªå·±å®Œç¾æ˜¯æ„šè ¢è‡³æã€‚</p>
<h2 id="åšæŒè‡ªæˆ‘æœ¬è‰²"><a href="#åšæŒè‡ªæˆ‘æœ¬è‰²" class="headerlink" title="åšæŒè‡ªæˆ‘æœ¬è‰²"></a>åšæŒè‡ªæˆ‘æœ¬è‰²</h2><p>å±•ç°è‡ªå·±çš„ç‹¬ç‰¹æ€§ï¼Œæœ‰è‡ªå·±çš„è§‚ç‚¹å’Œä¸»å¼ ã€‚</p>
<h2 id="ä¸è¦åšä»¤äººè®¨åŒçš„äºº"><a href="#ä¸è¦åšä»¤äººè®¨åŒçš„äºº" class="headerlink" title="ä¸è¦åšä»¤äººè®¨åŒçš„äºº"></a>ä¸è¦åšä»¤äººè®¨åŒçš„äºº</h2><p>é¿å…è¨€è¯­ä¹å‘³ã€‚</p>
<h2 id="å…ˆä½¿è‡ªå·±è®©äººå–œæ¬¢"><a href="#å…ˆä½¿è‡ªå·±è®©äººå–œæ¬¢" class="headerlink" title="å…ˆä½¿è‡ªå·±è®©äººå–œæ¬¢"></a>å…ˆä½¿è‡ªå·±è®©äººå–œæ¬¢</h2><p>ä¸“å¿ƒä¸€æ„å»å–œæ¬¢åˆ«äººã€‚</p>
<h1 id="8æ­¥èµ°å‡ºå­¤ç‹¬å¿§è™‘çš„äººç”Ÿ"><a href="#8æ­¥èµ°å‡ºå­¤ç‹¬å¿§è™‘çš„äººç”Ÿ" class="headerlink" title="8æ­¥èµ°å‡ºå­¤ç‹¬å¿§è™‘çš„äººç”Ÿ"></a>8æ­¥èµ°å‡ºå­¤ç‹¬å¿§è™‘çš„äººç”Ÿ</h1><h2 id="è§£å¼€å¿§è™‘ä¹‹è°œ"><a href="#è§£å¼€å¿§è™‘ä¹‹è°œ" class="headerlink" title="è§£å¼€å¿§è™‘ä¹‹è°œ"></a>è§£å¼€å¿§è™‘ä¹‹è°œ</h2><p>é—®è‡ªå·±4ä¸ªé—®é¢˜ã€‚</p>
<h2 id="å‡å°‘ç”Ÿæ„ä¸Š50-çš„å¿§è™‘"><a href="#å‡å°‘ç”Ÿæ„ä¸Š50-çš„å¿§è™‘" class="headerlink" title="å‡å°‘ç”Ÿæ„ä¸Š50%çš„å¿§è™‘"></a>å‡å°‘ç”Ÿæ„ä¸Š50%çš„å¿§è™‘</h2><p>æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿæ€ä¹ˆåŠï¼Ÿ</p>
<h2 id="æ¶ˆé™¤æ€æƒ³ä¸Šçš„å¿§è™‘"><a href="#æ¶ˆé™¤æ€æƒ³ä¸Šçš„å¿§è™‘" class="headerlink" title="æ¶ˆé™¤æ€æƒ³ä¸Šçš„å¿§è™‘"></a>æ¶ˆé™¤æ€æƒ³ä¸Šçš„å¿§è™‘</h2><p>è®©è‡ªå·±ä¸åœåœ°å¿™ç€ã€‚</p>
<h2 id="ä¸è¦ä¸ºå°äº‹çƒ¦æ¼"><a href="#ä¸è¦ä¸ºå°äº‹çƒ¦æ¼" class="headerlink" title="ä¸è¦ä¸ºå°äº‹çƒ¦æ¼"></a>ä¸è¦ä¸ºå°äº‹çƒ¦æ¼</h2><p>ç”Ÿå‘½å¦‚æ­¤çŸ­æš‚ã€‚</p>
<h2 id="ä¸è¦æäººå¿§å¤©"><a href="#ä¸è¦æäººå¿§å¤©" class="headerlink" title="ä¸è¦æäººå¿§å¤©"></a>ä¸è¦æäººå¿§å¤©</h2><p>çœ‹çœ‹äº‹æƒ…å‘ç”Ÿåœ°å¹³å‡æ¦‚ç‡ã€‚</p>
<h2 id="å‹‡äºæ¥å—ä¸å¯é¿å…åœ°äº‹å®"><a href="#å‹‡äºæ¥å—ä¸å¯é¿å…åœ°äº‹å®" class="headerlink" title="å‹‡äºæ¥å—ä¸å¯é¿å…åœ°äº‹å®"></a>å‹‡äºæ¥å—ä¸å¯é¿å…åœ°äº‹å®</h2><p>æ¥å—è¿˜æ˜¯æ¯ç­ã€‚</p>
<h2 id="ç»™å¿§è™‘è®¾ç½®åº•çº¿"><a href="#ç»™å¿§è™‘è®¾ç½®åº•çº¿" class="headerlink" title="ç»™å¿§è™‘è®¾ç½®åº•çº¿"></a>ç»™å¿§è™‘è®¾ç½®åº•çº¿</h2><p>å…·å¤‡æ­£ç¡®åœ°ä»·å€¼è§‚å¿µã€‚</p>
<h2 id="ä¸è¦è¯•ç€å»é”¯æœ¨å±‘"><a href="#ä¸è¦è¯•ç€å»é”¯æœ¨å±‘" class="headerlink" title="ä¸è¦è¯•ç€å»é”¯æœ¨å±‘"></a>ä¸è¦è¯•ç€å»é”¯æœ¨å±‘</h2><p>ä¸è¦ä¸ºå·²ç»å‘ç”Ÿåœ°äº‹æƒ…å¿§è™‘ã€‚</p>
<h1 id="æŠ›å´ååˆ©å¸¦æ¥çš„çƒ¦æ¼"><a href="#æŠ›å´ååˆ©å¸¦æ¥çš„çƒ¦æ¼" class="headerlink" title="æŠ›å´ååˆ©å¸¦æ¥çš„çƒ¦æ¼"></a>æŠ›å´ååˆ©å¸¦æ¥çš„çƒ¦æ¼</h1><h2 id="ä¸€ç”Ÿæœ€é‡è¦çš„å†³å®š"><a href="#ä¸€ç”Ÿæœ€é‡è¦çš„å†³å®š" class="headerlink" title="ä¸€ç”Ÿæœ€é‡è¦çš„å†³å®š"></a>ä¸€ç”Ÿæœ€é‡è¦çš„å†³å®š</h2><p>é€‰æ‹©æ­£ç¡®çš„å·¥ä½œã€‚</p>
<h2 id="æŠ›å´å·¥ä½œå’Œé‡‘é’±çš„çƒ¦æ¼"><a href="#æŠ›å´å·¥ä½œå’Œé‡‘é’±çš„çƒ¦æ¼" class="headerlink" title="æŠ›å´å·¥ä½œå’Œé‡‘é’±çš„çƒ¦æ¼"></a>æŠ›å´å·¥ä½œå’Œé‡‘é’±çš„çƒ¦æ¼</h2><p>æé«˜è‡ªå·±çš„è´¢å•†ã€‚</p>
<h2 id="å¤«å¦»é—´çš„èŒä¸šå†²çª"><a href="#å¤«å¦»é—´çš„èŒä¸šå†²çª" class="headerlink" title="å¤«å¦»é—´çš„èŒä¸šå†²çª"></a>å¤«å¦»é—´çš„èŒä¸šå†²çª</h2><p>é¼“åŠ±å¯¹æ–¹å»åšå–œæ¬¢çš„äº‹ã€‚</p>
<h2 id="åˆç†å¼€æ”¯ï¼Œå¹³è¡¡æ”¶å…¥"><a href="#åˆç†å¼€æ”¯ï¼Œå¹³è¡¡æ”¶å…¥" class="headerlink" title="åˆç†å¼€æ”¯ï¼Œå¹³è¡¡æ”¶å…¥"></a>åˆç†å¼€æ”¯ï¼Œå¹³è¡¡æ”¶å…¥</h2><p>åˆ¶å®šåˆç†çš„é¢„ç®—ã€‚</p>
<h1 id="é«˜è®°å¿†åŠ›çš„3ä¸ªè‡ªç„¶æŠ€å·§"><a href="#é«˜è®°å¿†åŠ›çš„3ä¸ªè‡ªç„¶æŠ€å·§" class="headerlink" title="é«˜è®°å¿†åŠ›çš„3ä¸ªè‡ªç„¶æŠ€å·§"></a>é«˜è®°å¿†åŠ›çš„3ä¸ªè‡ªç„¶æŠ€å·§</h1><h2 id="å°è±¡"><a href="#å°è±¡" class="headerlink" title="å°è±¡"></a>å°è±¡</h2><h2 id="é‡å¤"><a href="#é‡å¤" class="headerlink" title="é‡å¤"></a>é‡å¤</h2><h2 id="è”æƒ³"><a href="#è”æƒ³" class="headerlink" title="è”æƒ³"></a>è”æƒ³</h2>]]></content>
      <categories>
        <category>Life</category>
      </categories>
      <tags>
        <tag>äººæ€§</tag>
        <tag>æƒ…å•†</tag>
      </tags>
  </entry>
  <entry>
    <title>å®‰è£…Armäº¤å‰ç¼–è¯‘å·¥å…·é“¾</title>
    <url>/2021/01/30/install-cross-toolchain-for-arm.html</url>
    <content><![CDATA[<blockquote>
<p>é€šå¸¸æˆ‘ä»¬ä½¿ç”¨çš„Armäº¤å‰ç¼–è¯‘å™¨éƒ½æ˜¯ä»å„ç§å¼€å‘æ¿çš„SDKä¸­å¾—åˆ°çš„ï¼Œé‚£äº›toolchainçš„ç‰ˆæœ¬æœ‰å¯èƒ½æ¯”è¾ƒæ—§æˆ–è€…æ— æ³•æ»¡è¶³æˆ‘ä»¬çš„ç¼–è¯‘éœ€æ±‚ï¼Œæ‰€ä»¥ä»Šå¤©æ¥è®²ä¸€ä¸‹å¦‚ä½•è·å–å¹¶å®‰è£…ä¸€ä¸ªé¢„ç¼–è¯‘çš„Armäº¤å‰å·¥å…·é“¾ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="å·¥å…·é“¾çš„ç§ç±»"><a href="#å·¥å…·é“¾çš„ç§ç±»" class="headerlink" title="å·¥å…·é“¾çš„ç§ç±»"></a>å·¥å…·é“¾çš„ç§ç±»</h1><p>GCC çš„å‘½åè§„åˆ™ä¸ºï¼š<strong>arch [-vendor] [-os] [-(gnu)eabi]-gcc</strong></p>
<p>æ¯”å¦‚ <code>arm-linux-gnueabi-gcc</code> ï¼Œ <code>arm-none-eabi-gcc</code>ï¼Œ <code>aarch64-linux-gnu-gcc</code></p>
<ul>
<li>å¸¦[]çš„æ˜¯å¯é€‰éƒ¨åˆ†ã€‚</li>
<li>archï¼šèŠ¯ç‰‡æ¶æ„ï¼Œæ¯”å¦‚32ä½çš„Armæ¶æ„å¯¹åº”çš„archä¸ºarmï¼Œ64 ä½çš„Armæ¶æ„å¯¹åº”çš„archä¸ºaarch64ã€‚</li>
<li>vendorï¼šå·¥å…·é“¾æä¾›å•†ï¼Œå¤§éƒ¨åˆ†å·¥å…·é“¾åå­—é‡Œé¢éƒ½æ²¡æœ‰åŒ…å«è¿™éƒ¨åˆ†ã€‚</li>
<li>osï¼šç¼–è¯‘å‡ºæ¥çš„å¯æ‰§è¡Œæ–‡ä»¶(ç›®æ ‡æ–‡ä»¶)é’ˆå¯¹çš„æ“ä½œç³»ç»Ÿï¼Œæ¯”å¦‚Linuxã€‚</li>
</ul>
<p>arm-none-eabi-gccä¸€èˆ¬é€‚ç”¨ç”¨äºArm Cortex-M&#x2F;Cortex-Rå¹³å°ï¼Œå®ƒä½¿ç”¨çš„æ˜¯newlibåº“ã€‚</p>
<p>arm-linux-gnueabi-gccå’Œaarch64-linux-gnu-gccé€‚ç”¨äºArm Cortex-Aç³»åˆ—èŠ¯ç‰‡ï¼Œå‰è€…é’ˆå¯¹32ä½èŠ¯ç‰‡ï¼Œåè€…é’ˆå¯¹64ä½èŠ¯ç‰‡ï¼Œå®ƒä½¿ç”¨çš„æ˜¯glibcåº“ã€‚å¯ä»¥ç”¨æ¥ç¼–è¯‘u-bootã€linux kernelä»¥åŠåº”ç”¨ç¨‹åºã€‚</p>
<h1 id="å·¥å…·é“¾çš„ä¸‹è½½"><a href="#å·¥å…·é“¾çš„ä¸‹è½½" class="headerlink" title="å·¥å…·é“¾çš„ä¸‹è½½"></a>å·¥å…·é“¾çš„ä¸‹è½½</h1><p>ç°åœ¨Armå¹³å°ä¸Šç”¨çš„æœ€å¹¿æ³›çš„å·¥å…·é“¾æ˜¯Linaroå‘å¸ƒçš„ï¼Œå¤§å®¶å¯ä»¥åˆ°<a href="http://releases.linaro.org/components/toolchain/binaries/">Linaroå®˜ç½‘</a>ä¸‹è½½ã€‚</p>
<p>å¦‚æœè¦ä¸‹è½½çš„å·¥å…·é“¾ç‰ˆæœ¬æ¯”è¾ƒæ–°ï¼Œè¿˜å¯ä»¥ä»<a href="https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain">Armå®˜ç½‘</a>ä¸‹è½½ã€‚</p>
<p>å¦å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å›½å†…çš„<a href="https://mirrors.tuna.tsinghua.edu.cn/armbian-releases/_toolchain/">æ¸…åæº</a>ä»¥åŠ å¿«ä¸‹è½½é€Ÿåº¦ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget https://developer.arm.com/-/media/Files/downloads/gnu-a/10.2-2020.11/binrel/gcc-arm-10.2-2020.11-x86_64-arm-none-linux-gnueabihf.tar.xz</span><br></pre></td></tr></table></figure>

<h1 id="å·¥å…·é“¾çš„å®‰è£…"><a href="#å·¥å…·é“¾çš„å®‰è£…" class="headerlink" title="å·¥å…·é“¾çš„å®‰è£…"></a>å·¥å…·é“¾çš„å®‰è£…</h1><p>é¦–å…ˆéœ€è¦è§£å‹åˆ°ä¸€ä¸ªæŒ‡å®šçš„ç›®å½•ï¼Œè¿™é‡Œæˆ‘ä»¬è§£å‹åˆ°<code>/usr/local/toolchain</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo mkdir -p /usr/local/toolchain</span><br><span class="line">tar -xf gcc-arm-10.2-2020.11-x86_64-arm-none-linux-gnueabihf.tar.xz -C /usr/local/toolchain/</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬éœ€è¦æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œåªæœ‰æŠŠå¯æ‰§è¡Œæ–‡ä»¶å¯¹åº”çš„è·¯å¾„åŠ å…¥åˆ° <code>PATH</code> ç¯å¢ƒå˜é‡é‡Œï¼Œç³»ç»Ÿæ‰å¯ä»¥è®¤åˆ°è¿™äº›å‘½ä»¤ï¼Œå¯ä»¥æ·»åŠ åˆ° <code>~/.bashrc</code> æ–‡ä»¶çš„æœ€åã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">PATH=$PATH:/usr/local/toolchain/gcc-arm-10.2-2020.11-x86_64-arm-none-linux-gnueabihf/bin</span><br></pre></td></tr></table></figure>

<h1 id="æŸ¥çœ‹ç‰ˆæœ¬"><a href="#æŸ¥çœ‹ç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹ç‰ˆæœ¬"></a>æŸ¥çœ‹ç‰ˆæœ¬</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">arm-none-linux-gnueabihf-gcc -v</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Embedded</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>arm</tag>
        <tag>toolchain</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨Ubuntuä¸Šå®‰è£…MySQL</title>
    <url>/2019/12/28/install-mysql-on-ubuntu.html</url>
    <content><![CDATA[<blockquote>
<p>éšç€MySQLçš„å‡çº§ï¼Œå…¶å®‰è£…é…ç½®æ–¹å¼ä¹Ÿå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œä»¥è‡³äºæ–°æ‰‹ç¬¬ä¸€æ¬¡å®‰è£…å¯èƒ½æ— æ³•é¡ºåˆ©åœ°ç™»å½•æ•°æ®åº“ï¼Œå› æ­¤æœ¬æ–‡å¯¹å¦‚ä½•åœ¨Ubuntuä¸Šå®‰è£…é…ç½®MySQLè¿›è¡Œç®€å•é˜è¿°ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="ç³»ç»Ÿç¯å¢ƒ"><a href="#ç³»ç»Ÿç¯å¢ƒ" class="headerlink" title="ç³»ç»Ÿç¯å¢ƒ"></a>ç³»ç»Ÿç¯å¢ƒ</h1><ul>
<li>Ubuntu 18.04</li>
<li>MySQL 5.7</li>
</ul>
<h1 id="å®‰è£…MySQL"><a href="#å®‰è£…MySQL" class="headerlink" title="å®‰è£…MySQL"></a>å®‰è£…MySQL</h1><p>ç›´æ¥ä»Ubuntuçš„è½¯ä»¶æºå®‰è£…å³å¯ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install mysql-server</span><br></pre></td></tr></table></figure>

<h1 id="é…ç½®MySQL"><a href="#é…ç½®MySQL" class="headerlink" title="é…ç½®MySQL"></a>é…ç½®MySQL</h1><h2 id="å®‰å…¨æ£€æŸ¥"><a href="#å®‰å…¨æ£€æŸ¥" class="headerlink" title="å®‰å…¨æ£€æŸ¥"></a>å®‰å…¨æ£€æŸ¥</h2><p>é¦–æ¬¡é…ç½®MySQLï¼Œæˆ‘ä»¬æœ€å¥½è¿›è¡Œä¸€æ¬¡å®‰å…¨æ£€æŸ¥ï¼Œå®ƒä¼šä¿®æ”¹ä¸€äº›é»˜è®¤çš„ä¸å®‰å…¨é…ç½®ï¼Œæ¯”å¦‚ç¦æ­¢rootç”¨æˆ·è¿œç¨‹ç™»é™†ï¼Œä»¥åŠåˆ é™¤ä¸€äº›ç”¨äºæµ‹è¯•çš„è´¦æˆ·å’Œæ•°æ®åº“ç­‰ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo mysql_secure_installation</span><br></pre></td></tr></table></figure>

<p>å®ƒå°†ä¼šåšä»¥ä¸‹å‡ ä»¶äº‹ï¼š</p>
<ol>
<li>å®‰è£…å¯†ç æ£€æŸ¥æ’ä»¶ï¼Œå®ƒä¼šå¯¹å¯†ç å¼ºåº¦è¿›è¡Œæ£€æµ‹ï¼Œå¹¶æ‹’ç»ä½å¼ºåº¦çš„å¯†ç </li>
<li>è®¾ç½®rootå¯†ç </li>
<li>åˆ é™¤åŒ¿åç”¨æˆ·</li>
<li>ç¦æ­¢rootç”¨æˆ·è¿œç¨‹ç™»é™†</li>
<li>åˆ é™¤æµ‹è¯•æ•°æ®åº“</li>
<li>é‡æ–°åŠ è½½æƒé™é…ç½®</li>
</ol>
<h2 id="ä½¿ç”¨å¯†ç ç™»å½•rootç”¨æˆ·"><a href="#ä½¿ç”¨å¯†ç ç™»å½•rootç”¨æˆ·" class="headerlink" title="ä½¿ç”¨å¯†ç ç™»å½•rootç”¨æˆ·"></a>ä½¿ç”¨å¯†ç ç™»å½•rootç”¨æˆ·</h2><p>åœ¨MySQL 5.7ä¸­ï¼Œrootç”¨æˆ·é»˜è®¤ä½¿ç”¨<code>auth_socket</code>è¿›è¡Œèº«ä»½éªŒè¯ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å¯†ç ã€‚è¿™æ ·è™½ç„¶å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜å®‰å…¨æ€§ï¼Œä½†ä¹Ÿå¢åŠ äº†å¤æ‚æ€§ï¼Œå°¤å…¶æ˜¯å½“æˆ‘ä»¬æƒ³è¦é€šè¿‡ä¸€äº›å·¥å…·ç®¡ç†æ•°æ®åº“æ—¶ã€‚è¦æƒ³ä½¿ç”¨å¯†ç ç™»å½•rootç”¨æˆ·ï¼Œéœ€è¦å°†è®¤è¯æ–¹å¼æ¢æˆ<code>mysql_native_password</code>ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo mysql</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆæŸ¥çœ‹ä¸€ä¸‹æ¯ä¸ªè´¦æˆ·åœ¨ä½¿ç”¨å“ªç§è®¤è¯æ–¹å¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; SELECT user,authentication_string,plugin,host FROM mysql.user;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">+------------------+-------------------------------------------+-----------------------+-----------+</span><br><span class="line">| user             | authentication_string                     | plugin                | host      |</span><br><span class="line">+------------------+-------------------------------------------+-----------------------+-----------+</span><br><span class="line">| root             |                                           | auth_socket           | localhost |</span><br><span class="line">| mysql.session    | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost |</span><br><span class="line">| mysql.sys        | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost |</span><br><span class="line">| debian-sys-maint | *06B203089FC724D1B1C4B9197F88991FB2D287B3 | mysql_native_password | localhost |</span><br><span class="line">+------------------+-------------------------------------------+-----------------------+-----------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>ä»æŸ¥è¯¢ç»“æœå¯ä»¥çœ‹å‡ºï¼Œé»˜è®¤ä¸ºrootç”¨æˆ·åˆ†é…çš„è®¤è¯æ–¹å¼å°±æ˜¯<code>auth_socket</code>ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;password&#x27;;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼Œè¿™æ¡å‘½ä»¤ä¼šä¿®æ”¹ä¸¤ä¸ªåœ°æ–¹ï¼š</p>
<ol>
<li>rootç”¨æˆ·çš„è®¤è¯æ–¹å¼ä¿®æ”¹ä¸º<code>mysql_native_password</code></li>
<li>rootç”¨æˆ·çš„å¯†ç è¢«è®¾ç½®ä¸º<code>password</code></li>
</ol>
<p>ç„¶ååˆ·æ–°MySQLçš„æƒé™é…ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>

<p>æœ€åç¡®è®¤ä¸€ä¸‹rootç”¨æˆ·çš„è®¤è¯æ–¹å¼æ˜¯å¦è¢«ä¿®æ”¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; SELECT user,authentication_string,plugin,host FROM mysql.user;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">+------------------+-------------------------------------------+-----------------------+-----------+</span><br><span class="line">| user             | authentication_string                     | plugin                | host      |</span><br><span class="line">+------------------+-------------------------------------------+-----------------------+-----------+</span><br><span class="line">| root             | *84AAC12F54AB666ECFC2A83C676908C8BBC381B1 | mysql_native_password | localhost |</span><br><span class="line">| mysql.session    | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost |</span><br><span class="line">| mysql.sys        | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost |</span><br><span class="line">| debian-sys-maint | *06B203089FC724D1B1C4B9197F88991FB2D287B3 | mysql_native_password | localhost |</span><br><span class="line">+------------------+-------------------------------------------+-----------------------+-----------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å¯†ç ç™»å½•rootç”¨æˆ·äº†</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>

<h2 id="åˆ›å»ºæ–°ç”¨æˆ·"><a href="#åˆ›å»ºæ–°ç”¨æˆ·" class="headerlink" title="åˆ›å»ºæ–°ç”¨æˆ·"></a>åˆ›å»ºæ–°ç”¨æˆ·</h2><p>åˆ›å»ºç”¨æˆ·å¹¶è®¾ç½®å¯†ç </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; CREATE USER &#x27;sammy&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;password&#x27;;</span><br></pre></td></tr></table></figure>

<p>è¯¥å‘½ä»¤åˆ›å»ºäº†ç”¨æˆ·<code>sammy</code>å¹¶å°†å…¶å¯†ç è®¾ç½®ä¸º<code>password</code>ã€‚</p>
<p>å¯¹æ–°ç”¨æˆ·æˆæƒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &#x27;sammy&#x27;@&#x27;localhost&#x27; WITH GRANT OPTION;</span><br></pre></td></tr></table></figure>

<p>è¯¥å‘½ä»¤æˆæƒ<code>sammy</code>æ‹¥æœ‰æ‰€æœ‰æ•°æ®åº“çš„æ‰€æœ‰è¡¨çš„æ‰€æœ‰æƒé™ï¼Œä½†ä»…é™æœ¬åœ°ç™»å½•ï¼Œå¦‚æœå¸Œæœ›èƒ½å¤Ÿè¿œç¨‹ç™»é™†è¯¥ç”¨æˆ·ï¼Œå°†<code>localhost</code>æ”¹ä¸ºå…·ä½“çš„<code>IP</code>ï¼Œæˆ–è€…<code>%</code>è¡¨ç¤ºä»»æ„IPã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &#x27;sammy&#x27;@&#x27;%&#x27; WITH GRANT OPTION;</span><br></pre></td></tr></table></figure>

<h1 id="æµ‹è¯•MySQLæ•°æ®åº“"><a href="#æµ‹è¯•MySQLæ•°æ®åº“" class="headerlink" title="æµ‹è¯•MySQLæ•°æ®åº“"></a>æµ‹è¯•MySQLæ•°æ®åº“</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysqladmin -p -u root version</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysqladmin  Ver 8.42 Distrib 5.7.28, for Linux on x86_64</span><br><span class="line">Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Server version          5.7.28-0ubuntu0.18.04.4</span><br><span class="line">Protocol version        10</span><br><span class="line">Connection              Localhost via UNIX socket</span><br><span class="line">UNIX socket             /var/run/mysqld/mysqld.sock</span><br><span class="line">Uptime:                 4 hours 20 min 8 sec</span><br><span class="line"></span><br><span class="line">Threads: 3  Questions: 29  Slow queries: 0  Opens: 127  Flush tables: 1  Open tables: 120  Queries per second avg: 0.001</span><br></pre></td></tr></table></figure>

<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-ubuntu-18-04">How To Install MySQL on Ubuntu 18.04</a></p>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>linux</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨Windowsä¸Šå®‰è£…OpenJDK</title>
    <url>/2020/12/30/install-openjdk-for-windows.html</url>
    <content><![CDATA[<blockquote>
<p>Linuxç”¨å¤šäº†ï¼Œå³ä½¿åˆ‡æ¢åˆ°Windowsï¼Œä¹Ÿå¼€å§‹æœ‰æ„æ— æ„åœ°ä½¿ç”¨å¼€æºè½¯ä»¶ï¼Œæœ€è¿‘Manageræƒ³è¦åœ¨Windowsä¸‹ä½¿ç”¨TraceCompassï¼Œéœ€è¦å®‰è£…Javaç¯å¢ƒï¼Œäºæ˜¯å°±ç ”ç©¶äº†ä¸€ä¸‹åœ¨Windowsä¸‹å®‰è£…OpenJDKçš„æ–¹æ³•ï¼Œå…¶å®è·Ÿå®‰è£…JavaSEæ˜¯ä¸€æ ·çš„ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="ä¸‹è½½OpenJDK"><a href="#ä¸‹è½½OpenJDK" class="headerlink" title="ä¸‹è½½OpenJDK"></a>ä¸‹è½½OpenJDK</h1><p><a href="https://openjdk.java.net/">OpenJDKå®˜ç½‘</a></p>
<p><a href="https://jdk.java.net/15/">OpenJDKä¸‹è½½</a></p>
<p>è¿™é‡Œæˆ‘ä¸‹è½½çš„æ˜¯Windowså¹³å°çš„äºŒè¿›åˆ¶zipåŒ…ã€‚</p>
<h1 id="è§£å‹OpenJDK"><a href="#è§£å‹OpenJDK" class="headerlink" title="è§£å‹OpenJDK"></a>è§£å‹OpenJDK</h1><p>å°†ä¸‹è½½çš„å‹ç¼©åŒ…è§£å‹åˆ°ä»»æ„ä½ç½®ï¼Œå¦‚æœä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œå¯ä»¥è§£å‹åˆ°<code>C:\Program Files\Java\jdk-15.0.1</code>ã€‚</p>
<h1 id="è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="è®¾ç½®ç¯å¢ƒå˜é‡"></a>è®¾ç½®ç¯å¢ƒå˜é‡</h1><p>ä¸åŒWindowsç‰ˆæœ¬è®¾ç½®ç¯å¢ƒå˜é‡çš„ä½ç½®éƒ½ä¸€æ ·ï¼Œä½†æ˜¯æ‰¾åˆ°å®ƒçš„æ–¹å¼å´ä¸å¤ªä¸€æ ·ï¼Œå¯¹äºWindows10ï¼Œæ˜¯é€šè¿‡<code>è®¾ç½® -&gt; å…³äº -&gt; é«˜çº§ç³»ç»Ÿè®¾ç½® -&gt; ç¯å¢ƒå˜é‡</code>ã€‚</p>
<p>éœ€è¦è®¾ç½®çš„ç¯å¢ƒå˜é‡æœ‰5ä¸ªï¼š</p>
<ul>
<li><code>JAVA_HOME</code> : <code>C:\Program Files\Java\jdk-15.0.1</code></li>
<li><code>JDK_HOME</code> : <code>%JAVA_HOME%</code></li>
<li><code>JRE_HOME</code> : <code>%JAVA_HOME%\jre</code></li>
<li><code>CLASSPATH</code> : <code>.;%JAVA_HOME%\lib;%JAVA_HOME%\jre\lib</code></li>
<li><code>PATH</code> : <code>%JAVA_HOME%\bin</code></li>
</ul>
<p>æ³¨æ„è®¾ç½®PATHçš„æ—¶å€™è¦ä½¿ç”¨è¿½åŠ çš„æ–¹å¼ã€‚</p>
<h1 id="æµ‹è¯•Javaç¯å¢ƒ"><a href="#æµ‹è¯•Javaç¯å¢ƒ" class="headerlink" title="æµ‹è¯•Javaç¯å¢ƒ"></a>æµ‹è¯•Javaç¯å¢ƒ</h1><p>åœ¨PowerShell&#x2F;CMDä¸­ä½¿ç”¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>windows</tag>
        <tag>openjdk</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨Proxmox VEä¸­å®‰è£…Openwrtä½œä¸ºè½¯è·¯ç”±</title>
    <url>/2019/11/03/install-openwrt-in-proxmox-ve.html</url>
    <content><![CDATA[<blockquote>
<p>æœ€è¿‘ä¸€ç›´ç§è‰è½¯è·¯ç”±ï¼Œä»j1900çœ‹åˆ°i5 7200uï¼Œæ— å¥ˆå›Šä¸­ç¾æ¶©ï¼Œæœ€ä¾¿å®œçš„ä¹Ÿå¾—500ä»¥ä¸Šï¼Œäºæ˜¯æ‰“ç®—æŠŠå¤§å­¦æ—¶ç”¨çš„æ—§ç¬”è®°æœ¬åˆ©ç”¨èµ·æ¥ï¼Œi7 4702mqçš„å¤„ç†å™¨å³ä½¿æ”¾åˆ°ä»Šå¤©ä¹Ÿä¸ç®—è¿‡æ—¶ï¼ˆæ„Ÿè°¢ç‰™è†å‚ï¼‰ã€‚ä½†å¦‚æœåªæ˜¯å®‰è£…ä¸€ä¸ªOpenwrtçš„è¯ï¼Œæœ‰ç‚¹å¤ªæµªè´¹ç¡¬ä»¶æ€§èƒ½ï¼Œäºæ˜¯æ‰“ç®—åœ¨Proxmox VEä¸­å®‰è£…Opnewrtè™šæ‹Ÿæœºã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="å®‰è£…Proxmox-VE"><a href="#å®‰è£…Proxmox-VE" class="headerlink" title="å®‰è£…Proxmox VE"></a>å®‰è£…Proxmox VE</h1><ol>
<li><p>è¿›å…¥<a href="https://www.proxmox.com/en/downloads">PVEä¸‹è½½é¡µé¢</a>ï¼Œä¸‹è½½æœ€æ–°çš„isoé•œåƒ</p>
<img src="/2019/11/03/install-openwrt-in-proxmox-ve/download-pve-iso.jpg" class="" title="download-pve-iso.jpg">
</li>
<li><p>ä½¿ç”¨ultraISOå°†ISOå†™å…¥Uç›˜ï¼Œæ³¨æ„å†™å…¥æ–¹å¼éœ€è¦é€‰æ‹©<strong>RAW</strong>ï¼ŒLinuxç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨ddå‘½ä»¤</p>
<img src="/2019/11/03/install-openwrt-in-proxmox-ve/make-install-disk.jpg" class="" title="make-install-disk.jpg">
</li>
<li><p>å°†Uç›˜æ’å…¥ç”µè„‘ï¼Œå¹¶ä»Uç›˜å¼•å¯¼ç³»ç»Ÿ</p>
<img src="/2019/11/03/install-openwrt-in-proxmox-ve/pve-install-1.jpg" class="" title="pve-install-1.jpg">
</li>
<li><p>é€‰æ‹©å®‰è£…åˆ°å“ªä¸ªç¡¬ç›˜ï¼Œæ³¨æ„ç¡¬ç›˜æ•°æ®ä¼šè¢«å…¨éƒ¨æ¸…é™¤</p>
<img src="/2019/11/03/install-openwrt-in-proxmox-ve/pve-install-2.jpg" class="" title="pve-install-2.jpg">
</li>
<li><p>è®¾ç½®PVEçš„åå°ç®¡ç†IPåœ°å€ï¼Œè¿™æ˜¯ä¸€ä¸ªé™æ€åœ°å€ï¼Œæœ€å¥½é€‰æ‹©ä¸€ä¸ªä¸å®¹æ˜“å†²çªçš„ï¼Œæ¯”å¦‚æˆ‘è®¾ç½®çš„<strong>192.168.1.100</strong></p>
<img src="/2019/11/03/install-openwrt-in-proxmox-ve/pve-install-3.jpg" class="" title="pve-install-3.jpg">
</li>
<li><p>å®‰è£…å®Œæˆåï¼Œä½¿ç”¨å¦ä¸€å°è®¾å¤‡æ¥å…¥ç›¸åŒçš„ç½‘ç»œï¼Œæ‰“å¼€<a href="https://192.168.1.100:8006/">https://192.168.1.100:8006</a>ï¼Œè¿›å…¥PVEçš„åå°ç®¡ç†ç•Œé¢</p>
</li>
</ol>
<h1 id="å®‰è£…Openwrt"><a href="#å®‰è£…Openwrt" class="headerlink" title="å®‰è£…Openwrt"></a>å®‰è£…Openwrt</h1><p>é¦–æ¬¡æ‰“å¼€æ—¶ï¼Œå°†åœ¨å·¦ä¾§çœ‹åˆ°ä¸€ä¸ªpveèŠ‚ç‚¹ä»¥åŠlocalå’Œlocal-lvmè¿™ä¸¤ä¸ªå­˜å‚¨è®¾å¤‡ï¼Œå…¶ä¸­</p>
<ul>
<li>localï¼šå­˜å‚¨è™šæ‹Ÿæœºä¹‹å¤–çš„æ•°æ®ï¼Œä»¥æ–‡ä»¶å½¢å¼å­˜åœ¨äºpveçš„æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸­ï¼Œå¦‚isoé•œåƒ</li>
<li>local-lvmï¼šå­˜å‚¨è™šæ‹Ÿæœºç£ç›˜æ–‡ä»¶ï¼Œå½“ä¸ºè™šæ‹Ÿæœºåˆ†é…ç£ç›˜åï¼Œç›¸åº”çš„ç£ç›˜æ–‡ä»¶å­˜å‚¨äºæ­¤</li>
</ul>
<img src="/2019/11/03/install-openwrt-in-proxmox-ve/default-server-view.jpg" class="" title="default-server-view.jpg">

<h2 id="è®¾ç½®æ¡¥æ¥"><a href="#è®¾ç½®æ¡¥æ¥" class="headerlink" title="è®¾ç½®æ¡¥æ¥"></a>è®¾ç½®æ¡¥æ¥</h2><p>åœ¨å®‰è£…ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦è®¾ç½®ç½‘å¡æ¡¥æ¥ï¼Œå› ä¸ºè™šæ‹Ÿæœºå°†ä¼šä½¿ç”¨ç‰©ç†ç½‘å£å¯¹åº”çš„ç½‘æ¡¥ä½œä¸ºè™šæ‹Ÿç½‘å£ï¼Œä»è€Œå®ç°ç½‘å¡çš„è™šæ‹ŸåŒ–ã€‚</p>
<ol>
<li><p>é€‰æ‹©<strong>pve</strong>èŠ‚ç‚¹ï¼Œå†é€‰æ‹©<strong>System-&gt;Network</strong>ï¼Œæ£€æŸ¥æ˜¯å¦æ¯ä¸ªç½‘å¡éƒ½æœ‰å¯¹åº”çš„ç½‘æ¡¥</p>
<img src="/2019/11/03/install-openwrt-in-proxmox-ve/set-bridge-1.jpg" class="" title="set-bridge-1.jpg">
</li>
<li><p>å¦‚æœæœ‰æœªè®¾ç½®æ¡¥æ¥çš„ç½‘å¡ï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»ºæ¡¥æ¥ï¼Œé€‰æ‹©<strong>Create-&gt;Linux Bridge</strong>ï¼Œåœ¨<strong>Bridge ports</strong>ä¸­å¡«å…¥å¯¹åº”çš„ç‰©ç†ç½‘å¡çš„åå­—ï¼Œå¦‚enp3s0</p>
<img src="/2019/11/03/install-openwrt-in-proxmox-ve/set-bridge-2.jpg" class="" title="set-bridge-2.jpg"></li>
</ol>
<h2 id="åˆ›å»ºè™šæ‹Ÿæœº"><a href="#åˆ›å»ºè™šæ‹Ÿæœº" class="headerlink" title="åˆ›å»ºè™šæ‹Ÿæœº"></a>åˆ›å»ºè™šæ‹Ÿæœº</h2><p>ç”±äºOpenwrtå›ºä»¶é€šå¸¸ä»¥imageé•œåƒçš„å½¢å¼å­˜åœ¨ï¼Œå› æ­¤å¹¶ä¸èƒ½ç›´æ¥å¯åŠ¨ï¼Œæˆ‘ä»¬é¦–å…ˆè¦è¿›å…¥åˆ°ä¸€ä¸ªLiveCDå½“ä¸­ï¼Œç„¶åæŠŠOpenwrtçš„é•œåƒå†™å…¥åˆ°è™šæ‹Ÿç£ç›˜ï¼ŒLiveCDå¯ä»¥é€‰æ‹©WinPEæˆ–è€…Linuxï¼Œè¿™é‡Œæˆ‘é€‰æ‹©Ubuntu Desktopã€‚</p>
<ol>
<li><p>ä¸Šä¼ LiveCDï¼Œé€‰æ‹©<strong>local-&gt;Content</strong>ï¼Œç‚¹å‡»<strong>Upload</strong>ï¼Œé€‰æ‹©é•œåƒæ–‡ä»¶ï¼Œå¹¶ä¸Šä¼ </p>
<img src="/2019/11/03/install-openwrt-in-proxmox-ve/upload-livecd.jpg" class="" title="upload-livecd">
</li>
<li><p>ç‚¹å‡»<strong>Create VM</strong>ï¼Œåœ¨ç¬¬äºŒæ­¥é€‰æ‹©LiveCDçš„é•œåƒï¼Œå…¶å®ƒæ­¥éª¤æŒ‰æç¤ºè¿›è¡Œ</p>
<img src="/2019/11/03/install-openwrt-in-proxmox-ve/upload-livecd.jpg" class="" title="upload-livecd.jpg">
</li>
<li><p>åˆ›å»ºå®Œæˆåï¼Œåœ¨å·¦ä¾§çš„<strong>pve</strong>èŠ‚ç‚¹ä¸‹å³å¯çœ‹åˆ°å¯¹åº”çš„è™šæ‹Ÿæœºï¼Œç‚¹å‡»<strong>Start</strong>å¯åŠ¨è™šæ‹Ÿæœºï¼Œé€‰æ‹©å·¦ä¾§çš„Consoleï¼Œå³å¯è¿›å…¥LiveCD</p>
</li>
<li><p>è¿›å…¥LiveCDåä¸‹è½½æ‰€éœ€çš„Openwrtå›ºä»¶ï¼Œä½¿ç”¨ddå‘½ä»¤å†™å…¥è™šæ‹Ÿç£ç›˜å³å¯ï¼Œä¾‹å¦‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">dd if=openwrt.img of=/dev/vda bs=4MB &amp;&amp; sync</span><br></pre></td></tr></table></figure>
</li>
<li><p>é‡å¯è™šæ‹Ÿæœºï¼Œå³å¯è¿›å…¥Openwrt</p>
</li>
</ol>
<h1 id="é…ç½®Openwrt"><a href="#é…ç½®Openwrt" class="headerlink" title="é…ç½®Openwrt"></a>é…ç½®Openwrt</h1><p>æˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸€ä¸‹ç½‘ç»œæ‹“æ‰‘ç»“æ„ï¼Œæ–¹ä¾¿ä¸‹ä¸€æ­¥çš„è®¾ç½®</p>
<img src="/2019/11/03/install-openwrt-in-proxmox-ve/network-topology.jpg" class="" title="network-topology.jpg">

<p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨è½¯è·¯ç”±ï¼Œè¦æ±‚è‡³å°‘æœ‰ä¸¤å¼ ç‰©ç†ç½‘å¡ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨ä¸€ä¸ªUSBç½‘å¡ä½œä¸ºç¬¬äºŒå¼ ç½‘å¡ã€‚</p>
<ol>
<li><p>åœ¨Consoleä¸­ä¿®æ”¹<code>/etc/config/network</code>ï¼Œå°†<strong>192.168.1.1</strong>ä¿®æ”¹ä¸º<strong>192.168.50.1</strong>ï¼Œé¿å…ä¸å…‰çŒ«çš„IPå†²çª</p>
</li>
<li><p>ä¸ºOpenwrtçš„è™šæ‹Ÿæœºé…ç½®ä¸¤ä¸ªç½‘å¡ï¼Œå› ä¸ºOpenwrté»˜è®¤ä¼šå°†ç¬¬ä¸€å¼ ç½‘å¡ä½œä¸ºlanå£ï¼Œç¬¬äºŒå¼ ç½‘å¡ä½œä¸ºwanå£ï¼Œæ‰€ä»¥æ ¹æ®å›¾ç¤ºï¼Œéœ€è¦å°†ç¬¬ä¸€å¼ ç½‘å¡è¿æ¥åˆ°<strong>bridge1</strong>ï¼Œç¬¬äºŒå¼ ç½‘å¡è¿æ¥åˆ°<strong>bridge0</strong>ï¼Œè¿™æ ·Openwrtçš„wanå£å°±å¯ä»¥ä»å…‰çŒ«è·å–IPï¼Œè€Œæ‰€æœ‰è¿æ¥åˆ°<strong>bridge1</strong>ï¼Œå³Openwrtçš„lanå£çš„è®¾å¤‡ï¼Œéƒ½ä¼šä»Openwrtè·å–IP</p>
<img src="/2019/11/03/install-openwrt-in-proxmox-ve/openwrt-bridge.jpg" class="" title="openwrt-bridge.jpg">
</li>
<li><p>å°†å®‰è£…PVEçš„ç”µè„‘çš„eth1ï¼Œå³Openwrtçš„lanå£è¿æ¥è·¯ç”±å™¨çš„wanå£ï¼Œå¦ä¸€å°ç”µè„‘è¿æ¥è·¯ç”±å™¨ï¼Œæ­¤æ—¶å³å¯é€šè¿‡<strong>192.168.50.1</strong>è¿™ä¸ªIPåœ°å€è¿›å…¥Openwrtçš„åå°</p>
</li>
</ol>
<h1 id="åç»­æ“ä½œ"><a href="#åç»­æ“ä½œ" class="headerlink" title="åç»­æ“ä½œ"></a>åç»­æ“ä½œ</h1><p>PVEä¸ä»…å¯ä»¥è¿è¡ŒOpenwrtï¼Œæ¯”å¦‚æˆ‘è¿˜å®‰è£…äº†ä¸€ä¸ªubuntu serverä½œä¸ºå¼€å‘æœåŠ¡å™¨ï¼Œé€šè¿‡æ¡¥æ¥bridge1ä»è€Œä¸Openwrtçš„lanå£è¿æ¥ï¼Œç”šè‡³è¿˜å¯ä»¥å†å®‰è£…ä¸€ä¸ªwindowsä½œä¸ºä¸‹è½½æœºã€‚</p>
<p>å¼€å‘çš„æ—¶å€™éœ€è¦å¾ˆå¤šç¡¬ç›˜ç©ºé—´ï¼Œå¯ä»¥å°†ç‰©ç†ç¡¬ç›˜ç›´æ¥æ˜ å°„è¿›è™šæ‹Ÿæœºï¼Œé€šè¿‡ä¸‹é¢è¿™ä¸ªå‘½ä»¤å®ç°</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">qm set VM-ID --virtio0 /dev/disk/by-id/DISK-ID</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­VM-IDæ˜¯è™šæ‹Ÿæœºçš„ç¼–å·ï¼Œæ¯”å¦‚100ï¼›**â€“virtio**æ˜¯æ˜ å°„ç±»å‹ï¼Œ0æ˜¯ä¸€ä¸ªç¼–å·ï¼›æœ€åä¸€ä¸ªå‚æ•°æ˜¯å¾…æ˜ å°„çš„ç£ç›˜çš„IDã€‚</p>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>proxmoxve</tag>
        <tag>openwrt</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£è¯»åŸºé‡‘â€”â€”æˆ‘çš„æŠ•èµ„è§‚ä¸å®è·µ</title>
    <url>/2021/02/02/interpretation-of-fund-and-my-practice.html</url>
    <content><![CDATA[<blockquote>
<p>å¤åˆ©â€”â€”è¢«çˆ±å› æ–¯å¦ç§°ä¸ºâ€œäººç±»æœ€æœ‰åŠ›çš„å‘ç°â€ï¼Œä¹Ÿè¢«ä¸€äº›äººç§°ä¸ºâ€œä¸–ç•Œç¬¬å…«å¤§å¥‡è¿¹â€ã€‚å¤åˆ©ï¼Œå…¶å®å°±æ˜¯å¤§å®¶ä¿—ç§°çš„â€œåˆ©æ»šåˆ©â€ã€‚ä¸€å¬åˆ°åˆ©æ»šåˆ©ï¼Œæˆ‘ä»¬æƒ³åˆ°çš„éƒ½æ˜¯é«˜åˆ©è´·ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ä¸€æ—¦é™·å…¥é«˜åˆ©è´·ã€åˆ©æ»šåˆ©çš„åœˆå¥—ï¼Œå‡ ä¹æ°¸è¿œä¸èƒ½ç¿»èº«ã€‚æ˜¯å•Šï¼Œå½“æˆ‘ä»¬å€Ÿè´·çš„æ—¶å€™ï¼Œåˆ©æ»šåˆ©ä¼šè¦æˆ‘ä»¬çš„å‘½ã€‚å¯æˆ‘ä»¬å¦‚æœæŠŠè‡ªå·±çš„é’±åˆ©æ»šåˆ©ï¼Œè®©åˆ©æ»šåˆ©ä¸ºæˆ‘æ‰€ç”¨ï¼Œé‚£å¾—åˆ°çš„ç»“æœå°±æ˜¯â€”â€”ä½ ä¼šæˆä¸ºä¸€ä¸ªç™¾ä¸‡å¯Œç¿ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="æŠ•èµ„çš„å‡†å¤‡"><a href="#æŠ•èµ„çš„å‡†å¤‡" class="headerlink" title="æŠ•èµ„çš„å‡†å¤‡"></a>æŠ•èµ„çš„å‡†å¤‡</h1><p>æˆ‘ä»¬å¿…é¡»ææ¸…æ¥šçš„ä¸€ç‚¹æ˜¯ï¼š<strong>æˆ‘ä»¬è¦æŠ•èµ„è€Œä¸æ˜¯æŠ•æœºã€‚</strong></p>
<p>åŸºé‡‘å°±æ˜¯æŠŠå¤§å®¶çš„é’±æ”¶é›†åˆ°ä¸€èµ·ï¼Œç”±ä¸“é—¨çš„äººï¼ˆåŸºé‡‘ç»ç†ï¼‰å¸®æˆ‘ä»¬å»æŠ•èµ„è¯åˆ¸å¸‚åœºã€‚ä»–æå–ä»–çš„ä½£é‡‘ï¼Œæˆ‘ä»¬æ‹¿æˆ‘ä»¬çš„æ”¶ç›Šã€‚</p>
<p>å¼€æ”¾å¼åŸºé‡‘çš„è¿è¡Œæ¨¡å¼æ˜¯é‡‡ç”¨ä¸€ç§ä¸¥æ ¼çš„åˆ¶è¡¡å…³ç³»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸºé‡‘èµ„äº§çš„ç®¡ç†äºä¿ç®¡æ˜¯åˆ†å¼€çš„ï¼ŒåŸºé‡‘å…¬å¸ç®¡ç†æˆ‘ä»¬çš„é’±çš„æŠ•èµ„è¿ä½œï¼Œè€Œé’±ä¸€èˆ¬æ˜¯æ‰˜ç®¡åœ¨é“¶è¡Œçš„ã€‚</p>
<p>ä½£é‡‘ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p>
<ol>
<li>ä¸€æ¬¡æ€§æ”¶è´¹<ul>
<li>è®¤è´­ &#x2F; ç”³è´­è´¹ç”¨ï¼šæ–°å‘åŸºé‡‘å«è®¤è´­ï¼Œæˆç«‹åå«ç”³è´­<ul>
<li>å‰ç«¯æ”¶è´¹ï¼šè´­ä¹°æ—¶ç¼´çº³</li>
<li>åç«¯æ”¶è´¹ï¼šèµå›æ—¶ç¼´çº³</li>
</ul>
</li>
<li>èµå›è´¹ç”¨</li>
</ul>
</li>
<li>éä¸€æ¬¡æ€§æ”¶è´¹<ul>
<li>ç®¡ç†è´¹</li>
<li>æ‰˜ç®¡è´¹</li>
</ul>
</li>
</ol>
<p>å¼€æ”¾å¼åŸºé‡‘çš„æ€»ä»½é¢æ˜¯ä¸å›ºå®šçš„ï¼Œæ¯ä»½çš„é”€å”®ä»·æ ¼å°±æ˜¯å…¶å‡€å€¼ã€‚ä¸»è¦æœ‰ä»¥ä¸‹4ç§ç±»å‹ï¼š</p>
<ol>
<li>è‚¡ç¥¨åŸºé‡‘ï¼šè‚¡ç¥¨å¸‚åœº</li>
<li>å€ºåˆ¸åŸºé‡‘ï¼šå€ºåˆ¸å¸‚åœº</li>
<li>è´§å¸åŸºé‡‘ï¼šçŸ­æœŸè´§å¸å¸‚åœº</li>
<li>é…ç½®å‹åŸºé‡‘</li>
</ol>
<p>åƒä¸‡åˆ«ç«‹åˆ»å°±å¼€å§‹æŠ•èµ„ã€‚å…ˆå­¦ä¹ ï¼Œå…ˆåšåŠŸè¯¾ï¼Œæ€åº¦å†³å®šä¸€åˆ‡ã€‚é’±æ˜¯æˆ‘ä»¬è‡ªå·±çš„ï¼ŒæŠ•èµ„æ˜¯æˆ‘ä»¬è‡ªå·±çš„äº‹æƒ…ï¼Œæˆ‘ä»¬è‡ªå·±çš„äº‹æƒ…è¿˜å¾—æˆ‘ä»¬è‡ªå·±åšä¸»ã€‚æŠ•èµ„ä¸æ˜¯æ¯”æ™ºå•†ï¼Œè€Œæ˜¯æ¯”è°æ›´ç†æ€§ï¼Œè€Œç†æ€§çš„å‰æå°±æ˜¯ç†è§£ï¼Œè¦ç†è§£å°±å¾—èŠ±æ—¶é—´ã€‚</p>
]]></content>
      <categories>
        <category>Wealth</category>
      </categories>
      <tags>
        <tag>åŸºé‡‘</tag>
        <tag>æŠ•èµ„</tag>
      </tags>
  </entry>
  <entry>
    <title>Interview Questions for Linux Engineer</title>
    <url>/2022/01/22/interview-questions-for-linux-engineer.html</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="6953e6ea7c7585dfe66b81ce3a41d32b9bb9d834dc3b9e64dec96ae1ddd7d548">436d19a0d0602a055c299e3594dce1803eec5752eb3b235495abef4d4c8e8c48ab4e20eab6c605243bf5321d3d5ccfce22d11d2e7728a23ad65c2a6d79f5a401ba87732d218e19fcaaad3c68aa26fe1ebbfd62d0e5a159abf7dce060a46769871ee9e5d29f437e80919de0a7e9e91ba342a5f80a0fe52f09a4b2ed1bf23e825e084084b708509968d2c0acb64201bde590a007c44ef1a23915961c31947c2764a4d4c26aeeadf58b81fbc9c4666eb4983e1497dcb2188d8da10925f986668a8dd8f92434d448a138cfe5a8cdbdc4b01d72e731bafcfcedb070cbee6db15a3e292bbd43298896f3026a9fa3a38b1bfa2dbd716642d81cefb27b343960a17cdaf91df735507d428b0f67b4d75218de73b39311061a52cba6421a857b72dc6b8985fff82fd8690378789bf6b7777b07c99c0c5fd641991d7622bcdcda83687786448798e647f3289374a730d99c1b337ef99ba92d72210751cf37162a30e138b2ff0f8bfa28f74b7a4c230f174c890daf47ef49622c1de4d10a327e06582d29c1965260b4b0205326442ee55a133aaee6bfda58b2d9e99b9e219e2c1efa37eda781e180f99a8eb1f07348559d0896c2ea4e11a5e55454a983df854acb9e76096dbf6afbc20bcd92d6b0a087918d9940ec121edb23ec25e07e2d76de4828c2f82893fc3b1858011fe4690c7b15f138ed75f05fbd77d1d98dc223cf24d04c2f234329adbc5a3a29cad49742a097ad3cb28cbe70682d6f71e3a7f8e80693dc09320d3621a9ab52c8344adb60f63d2f2a603e8b2bf2ea2d115a10df6310a7ecc2d2f9cdf62d4f609f702d195f05f7277863e3b264bc4f7280225ed2f06a6f3ff6cb8c09776e0daad3e22bba8a734f4c51bad708bd7ca79185d760c3e8282f6c6771167dcc53b1a718f189a850c9b9f838fae7d3a2acb81221856035b9d147715288e44cc175e85fe2458c04b674d062b444e47f9a83277a41aeabec2427836598e59610b73834eb44e35b77a5e78fc7e7e4f823132b28f7549d9d48fc0e01505b019764d69538d712c8ec7e4ab3d07610acaca491f7da177e642dcedcb5bfd0ea578cd96831e93ea6c000c6266337d09cfe38b8e1c6833f76ef888ded85c2e941305bfb37275fd744de5fbc70fc8bfca0b4a759525938e8197a8e773c4a588ca7d7df88fef0cfdad4d9bd8338b0847cdd380923f01b34245fa1a148cb714a921c535dcb8887e4d451e559611f0b28fe236950dd84d75a73bfe9fe53fd3264b0bdc5638c6c4307cc01d4cdadb9874537a513bace4ad72ade4bae3b45fd6f245846309c8699e1c5a04253250bed84e9d853ec1b8cb94149121f6bc858e097d46b75a292be34a6f1bc16b3abd094a223224281c3a4451ab91baa9b6e8c398b707682d0bc509ab0cab9713efd3c8cb16f9e2476e0558964e23457e9b1e432532d2c59dbb7099d51900b4d660bbb82d76484d0493b7d3f365d5888d7a3d47ee8deb5bcfdc424b23a63a32ec03c82e418c31d4d7a2630ab1169ad7753715dde533afab33f568a72529a51e9f9af2b7081d706eb1c852981337dfb8ad81c0a9e8aec4227c8f07b4c9e863ea820566ac2a41ad85932bc78978c16ebdccf75a888bec4e786876142aed17bf8228a14734cb9a7c2f3d29e686956415f8e6f86a18e7c5f9d487fdda51587a5bd37e9d29455469f38a46e744d43315b8bb002c242139a8feb754bd51138254f575d66c86c06ae7e265ac697a592f2c26985df3f90a3a7999491304d1d9d061f466e13c8bdb1bb4b42b3a7da94ef337f3b35a134ace70cce17a79d7ef9cc42a84ceacc2cfc439f60303d3e88fce6e70980a37c08eba11620136f010ff936c45b69b33bfb76f2e02ccecf7443e9fe17057e9bda4821b3cacfa69c2f1b75790afb65772aeb79414e5787b2e748c5bf5024f795d8405801461d6ab9a56602f4069bc87d9df11875d4a15dc44cd7249aca93217efdd1bd1591621a687cd2e61b5b76cb26e29a143b15d1ecb72fa337dcb42717e2fae95b168d15f66be2f4bc988059d6c2ad2c408357b26dbb708f1f9eb8899d0d71c6ca6d64aa24e6a23c8efbba04c1a663aa5eb191cb84495d583f714b9de6c9a546c4a3327f55aefe382961eb06c063c0049d578180b4710ff308af52ec14c6621dfa4fd64d4b5b9ea2131c279191272d4566236a0a86b7649a5ffbeb99d41422efa6c9cff11a2d15198d0cd34808636758f14f770ce257aa0612bcff262d04fde1304a791d2066ef5b40c18098633902b6d0462f878114b2f25df94a87e7def88211a09661a6a5792979ff671ff283e9d00fa98c69e1d207cfadaf76091e80fed8a15dccb01de99041a0ac97d649c738bd48352afae6385f3518d0b69f18a945efe1b51ce2280d342ad58b5af2cd3c5e8475ff0215095e273bdd2f3171ecc6ba48f1be47cf06a1307f3b1dcfd1e02d9d41ca54ff17784e167a435e348b545b5183917315c78f6ee57c1520a335840897db2e32cd60a6f1793b2b94fd384f47cd2f63013766193ed046b61fe6433f1d2308bd7b3eef27bf9a543bd8dbb1cdb0cadd72cc59c619360e633a86c68c811aabcfdb7b6a969218bc6667a06863784413c8edaf3eda9492609532d1a20fd8f2d5c5e353728bfc94d9de3de918ad7ad22823cb38bd9a608e242b2577cb1430d7b4628ef2d8de4973c15b04b2e9538b17ae4a814933e52dd6e4b4f6fa8281886dea77b4919e5016185fe5fd4150e81a4c99a30ce3e7ea5cbbabbe775ffc85074367b7795781e498eb5396b2e627618f3e4b2b54e722e6aa123cead77a456beda0e51ef69dcbb990071aaa0148e72b31b7c6c418d9282a1e8e57d3b49ed3577d09a6e6707b0dd719d7e79955961f64b1a9972c9efa0bc757415ecee79a2a8e55cba974bcce3348834b9425fb0413b03c66897a94fc6d475700a8eeea380d3f2dd4ce49e5451e00a6241113483961c767fdd56ae7b63a8dc602277dd9e32f083deb0e6cf6e7370aee640c73985de9f5b3609e62fd520d1c41f7790041dce843b73d4589d9e65ed9ac633c3c1a10f117c82d498c1faad00f062771ae26e5abfce63acaea69aed0ce63f3f1e53ee04893ab0c6fc9611c33a8dec63c3775d5e891dbaac876aeb0a4f3723683010500ac9220512b391f475c09a73fa3ee20629e1ebc56ce5cf188d2828a4b7710421c3cb5ac1b4964157ac0b4bb2be3091a42531f48b28a3b30a286c5b04f3f914b11fad0f042a7780bb6c1a609a2b40229739a6d334b1d55bfe9dd728c564766aa0bb16708a88d7675af8af7632d918b83b9bd26e4fd3a3efe717ca3fabc98fdd6c514c2f15995c2f3521038f6d7a73d3b7572bb96e48d270ed21a93f315e0bbdd29bd529417dd4cd26f35bbc198c257992aabd7b627c9dcf57f10f84a31f1adf08c7c28be3f684a44281c8db618637804818e79fb6463ec2dcb0f932a9926324f1a7c6cc44e90f57dc802e17fdecbb463477d97b146b60ef31008747769e9c53eb118fdf0fe005cf98e2efc64e10700534d3442fe944481d73a373ef369393ea96bc03ba78336151844066406c5be4806a790fd2eb3dab94a5b5fbbfb78fea5e16ae4ecf1dc1d96b5e43881ad97f1f97806f85103d0660429d8d779f6d7105984db27b96ad23fed57c390afcd02ca2d5c7094c4400f8ab34463f99af224bd07fbe163d1424479cba52f360700f04446cc36103046643e2fbc286ca3775b901db24c3ba5eac40f54464634cb5e40a3798ff42c24ebea15f08bbe8d877093dab8b2a0097896877c772fdeefc14b5c5c216d0303f960ef908de10bd38d20cb7d07c02c800696b421793214cbcc5e080fd0f9d1c9c9fed97a32f54f3b2f2e2a671fff2ee9d7a94239184c2a4283e3f76cf40ebad0852825e2b458adc42c533be59eabfeab4578ae599f9a0de1d908e3216c433bf3fe4ddaf833c9e52b726c85b393f6e35babdaed2da42d0d2efea5f8ba8c8d6e03d2c6f2eb2081d26b4d5d60e29faed2ee64540205bd94d75b39c15e77b05b8da3877caf3337a6719d09d88a2c1ebd182ad84e6ba9a6ec76207256570769802af3e993d651d394c3dd4723dbf1681765a47154d3257148724b4178c000c67db51f55383036a072903f6a88b646be4049e0caee6fd889fd56edcf5fb89728d49a04e0eea121ef8ad2007268ae0ae1e18b2cd179fe51a36ab7e4ceccb7683d0b83f77be9de793c9010c68a3c660040cb035ce6ad89ce7309792e5d0cc6f066686095a6472cd4f37f529b3620b6c879aa4329dd726f704ea106b699ac447eb28886709dc2347c5184dcf6b339914cba9050c18be084f060633fd48c45a34f91a44b0083dd9f3e07aaa944a0e3962b55b5207e00c0064521dae2fba93787ff95d18d9b2afc99a99333b17984ba8010ddc5e0fe8f8219b649a5f5c7275068cfce321b25ec327cff265ff05adaf5a8e5efa785f9f3117c716c54b6f210ac6d5908bca70ec97ab3f41bb4116c7a5978aab7b320ed073e47c9ef4ac4b286d33d68dfcc0cf2c38896434dffa39270612abee8a911a822285ffb801c529173e5d3b2f5f298a76d57f7ae00c75ea4763c66e53a8dce6b68f95fe1028e2ae0b104a3906f051a3df15815a6412adc8d38ccb731098affd2e84af126d711d384400aca109eecb1ff4947074078d23218057c56d54e9bf74cdcfd689c1342a0b9a80fc0811cb3b282014a7e28237c049e46a9f2828e8b7d87c5d2cc1835b488611fa2f0ec6e1bf1e5489ae08e52c46334f28e7247defaa2f1d75ac5c3a723399ed40450e938526fe467ea728d68f4fac3cc4da4e9c318c6ac6d3fb504d2aa3d0f420ad59e0ebe5eb76f416ad576c486381cc1692c033b445848c6afcd034dcd4efe173e5a1f4b37bc81990f35800a3faf7a77e25ae4f1d2519e9d800fac016e551681c88bcdfb2b947fbb849bb3c1da7186969e7db9539ce5ab0c4da85243adfb0e2481d3b401d2cf7915c14f6a1b149708fa3976c05ee3848035d7c1a46abcacbd5d055df1882758881223d91460ae991a6f29af3c1407163f95a41e47c25fb499a980ac41bb85a70fb9f09c5659ff695ed1ff90c198e44dc5c722c79f279f32dca60d3767cc57c969414c3442288d320886ebf1c36a1c573565a49594da6f4ff6eeff3ad529e76bcf5184d4c71dcc52833e79bc80456bc44cec8dcadd4f424c3c05e6bfd156f21d578ae80430af342bf2875d89ca603da41812737c0605518a144bad0eecaf5e14c8c1e15b7a8044366f60289fc66887a57bc95139bca54ec9b773e0ca779662e2ecbcace463be1fbb2b116d1e59bfdf71c2c1cac98d9edbc64d71f8946d7a5b3ff15bfe038da1e637ffb29c6fbd8f9492003f422f067938d759cb91851c5d42998a6fe2d836b7b4a92a8165bcc9f2ded43328834e2e19637a3badc20caed10b5d4bc8c7b6bd346e2e13fa5f2de9d6afcd1f76b113046fb236ced8184b26c7da2a5defe510c49a6004c7f80f2e93f66d0333f5331464e993f8fde3c7873a6854eb9a77f73f81da7c7aff2d38a39ba12a199e4ca807dfab82a535f8638afa62428e48de24dd73f223cb245644ccd73bd6744e338ad525ed898070d1c07337bb1504dc48a93ef4f3ca0c1e1cf8486e585d3c15816d09f35d6f5ff0740bcd04f76cb094b6fce2cf964b1a076c3b75b50b4f301fee44ec5cc9d912221081c3b1e269c2f43947945f30f5197c48d790c113ea284f1460521f5c947fccd88d32f1a00037bb84f392330aa52d8ae655f2912fb47a782f45045c60009c0b009d7027694b9557bcf1e34331fc69a43f69d6f07da853e37ccaaff3c1fcbcd7784161e619717dff2df0af7dd25e574219a595be4983bab1d3bd96385d2f885dfde79790ab2f219b5147f797a34e31f7e16df7e280ce08ee2af6935a73865fb771c63a286fd896da4418b4249da7b7d6947eb1a578196c7929929b9c230c43db960fe8f2418fd01ccf67b6abefb2c9b0fc8602b77eff54661b8c921d3c7adbd9360d25bbee88ff1726ecc3fbec6de1b88a152f7030ec61d9166156e18bb1a76b1fd55050c768d989039c9b73f26474e90e838e5982486d749f5bbb0ca8b5bf54ff6d564e629a22191f6b3aefe516e49ab7aa46745a02d3d0bcef02e0c5da603e17e3681776ef156e6af0881a1d616faa4dbe571fb7678ff87b51ef05f49811ad51c1e0b08f593ac843a43ff56b35f7859125f1fc731ef68d07b2123350e24404b6b1eb118c69b79e8ba7e768e019465e9fed4f274dc265fec194153f1747a351e4d9e48a81a8865a997ad117683d71666901a13cd07169e99f4f2e1e06937149ec6fd872da21bb292825290809d16c68de7e1521d339dc4306adc9509ac831ff4e3a3e224e9439d43ff64f1ab0861c39fa4f36980593cb43226bfd72ecef173ac152cf96c3eff8a474a9715e5c44fdc05455e943165412a9344238fa1e7e73d49449e5c1bf27a561f4792e6a6dad08e14a88c00ea9ea1bc890a72b98d5424a86332e943b718b607d0db400981e9aadcc473eeb2660f3870d26bdf63ee0fbd5c06b30ee15cfbbd62f46282f84df95a6531449997437a28196f0d11a1622e1837621c0932067ef79422daa3b49a27816227d6cc3b777e2542ff47280b288a23ed4925f4ee4b2f4b0191782cace9c90cdc9b3d42c7c994768d852f054cabee313bf809afac37734e12a5160ef981a18d8273133a2daab7d8dc3079184e01911999fe601f4bded2a8934c1ec93e36992dbccb54eb1fe4b1b795c4a4858aabd19c98b2bf87d3e07098fafa74dde6ede45cbd0c3a07584d0da1fbc8e3974aea9f4c50d912e7c250df10c70bef0f579c6fdf2ba19418f87edfa3c2b29d858e92828404d92d3a0ed57ae1c035b0ddd31de5b9ef0229ea4f4e584f781e9344370242de393b9fe0b1aa906750fde786f901b1a35d5765a3247c3f621eef8fb0af092f0f825b7928ad75086e9b19c12d1e75e0d23ef394c0aaf2f41e9543c32ea6ad6c86477eb3b89b0121b6636bf472f6bea7f48b520075cde545c099416a542df39092d3f71ec4ffbdceafc5172f3394d33809c2abaf7cd4b3c3d2eab1c14a8ce8d05c8491a197282f629a4c9d4015fd252ca9724f565e1081e9ba4910a8a24313069e7b1e9a973ecb4590dc6ff01cc4fb63de10c9173c7bcfc260fd5de7c61cdb66c4b29ec63748e4df102833b885eeb29518b12dd3d184a56bd7a72ec78b29a94c8a8f28f3ce60aa4f8dcacaf14375e742cf1bfde287b013d54eab1e55c484f633a865ac5b750804a1c2694ea629316bbb6004c376d26c5b4e5e39bd7b390105c42c4d7e6d9e14f4c8db475c0d9edd2f8f60d57c64a9fdd7cfee1b41e94f49c9b0ce05dfdb4f121116ca5c16415e4079277521a114719f8017e87cae49103fe3eb014e4b084f6ea7e6ee35db5dbc9b3e57d2a8e4d5f99feb0ceabde5c34ab37367ef269c77cd5d40594e528f4a968811681de3578945d0f679f3025e94cbc99cf296df0278fe5c1419205029deba28a9d4996ef0917f1b7f9b75b9c96c05269d0a6252d6cd5d575a0b05c0fd398992ee9e6c064f19f30cadf123f007e123a29aa3559ccc7a1de1685ac134b244c172b890de8bdd472e19cc4d7e205caf723d6a9c5c34a46e283914790b3eb5ef582d629f3ebcef08147d04955cca003e1ef87c2c21d37398174a0ef20ff2bcb6e3f2ae3570534d4caec82c3</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>Interview</category>
      </categories>
  </entry>
  <entry>
    <title>The Bitcoin</title>
    <url>/2021/05/26/introduce-of-the-bitcoin.html</url>
    <content><![CDATA[<blockquote>
<p>Pathways: Dynamic Leadership</p>
<p>Level 1-3: Researching and Presenting</p>
</blockquote>
<span id="more"></span>

<p>5æœˆ19æ—¥ï¼ŒåŠ å¯†è´§å¸å¸‚åœºå‡ºç°äº†ä¸€æ³¢å¤§éœ‡è¡ï¼Œç›¸è¾ƒäºä¸€ä¸ªæœˆå‰ï¼Œæ¯”ç‰¹å¸çš„è·Œå¹…é«˜è¾¾53%ï¼Œä»¥è‡³äºäº¤æ˜“æ‰€éƒ½å‡ºç°äº†å®•æœºï¼Œè®¸å¤šè´­ä¹°äº†æ æ†çš„ç‚’å¸è€…è¢«å¹³ä»“ï¼ŒæŸå¤±æƒ¨é‡ã€‚è¿™æ¬¡éœ‡è¡ä¹Ÿä½¿å¾—æ¯”ç‰¹å¸å†æ¬¡è¿›å…¥å…¬ä¼—è§†é‡å½“ä¸­ã€‚</p>
<p>è°ˆèµ·æ¯”ç‰¹å¸ï¼Œå¤§å®¶æœ€å…ˆæƒ³åˆ°çš„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>è¯¸å¦‚åŒºå—é“¾ã€ç”µå­è´§å¸ã€ä¸€å¤œæš´å¯Œç­‰è¯æ±‡ä¼¼ä¹ä¸æ¯”ç‰¹å¸æœ‰åƒä¸ä¸‡ç¼•çš„è”ç³»ï¼Œæ‰€ä»¥ï¼Œç¬¬ä¸€éƒ¨åˆ†æˆ‘æƒ³è·Ÿå¤§å®¶èŠèŠï¼Œæ¯”ç‰¹å¸åˆ°åº•æ˜¯ä»€ä¹ˆã€‚</p>
<p>è¯´èµ·æ¯”ç‰¹å¸ï¼Œæœ‰ä¸¤ä¸ªè®¡ç®—æœºæŠ€æœ¯æ˜¯ç»•ä¸å¼€çš„è¯é¢˜â€”â€”å“ˆå¸Œæ ¡éªŒå’Œéå¯¹ç§°åŠ å¯†ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹æ¯”è¾ƒç®€å•çš„â€”â€”å“ˆå¸Œæ ¡éªŒã€‚</p>
<p>è®¡ç®—æœºä¸­æ‰€å­˜å‚¨çš„ç§ç§æ•°æ®ã€å¦‚æ–‡æ¡£ã€éŸ³ä¹ã€è§†é¢‘ç­‰ï¼Œéƒ½å¯ä»¥è¢«çœ‹ä½œæ˜¯ä¸€é•¿ä¸²æ•°å­—ï¼Œå“ˆå¸Œæ ¡éªŒç®—æ³•é€šè¿‡å¯¹è¿™ä¸€é•¿ä¸²æ•°å­—è¿›è¡Œè¿ç®—ï¼Œå¾—åˆ°ä¸€ä¸²æ–°çš„æ•°å­—ï¼Œå³ä½¿æºæ•°æ®å‘ç”Ÿå¾®å°çš„å˜åŒ–ï¼Œç»è¿‡è®¡ç®—å¾—åˆ°çš„æ ¡éªŒå€¼ä¹Ÿä¼šä¸ä¹‹å‰å®Œå…¨ä¸åŒï¼Œå› æ­¤è¿™ä¸ªæ•°å­—å°±å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªç‰¹å¾å€¼ï¼Œç”¨äºæ ‡è¯†ä¸€ä¸ªç‰¹å®šçš„æ•°æ®ã€‚</p>
<p>ä½†æ˜¯è¿™ç§è®¡ç®—æ˜¯ä¸å¯é€†çš„ï¼Œé€šè¿‡ä¸€ä¸ªå“ˆå¸Œå€¼ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•æ¢å¤åŸæœ¬çš„æ•°æ®ã€‚</p>
<p><strong>Toastmaster: f27478c4d67652228fbbc189954d1068301622461bf817a5e4582614a13aae46</strong></p>
<p><strong>toastmaster: f98a53e31e80c45ddcb93bb5a9da73cf6db0c4425c41517a516c2795a113685b</strong></p>
<p>å†æ¥çœ‹ç¬¬äºŒä¸ªæŠ€æœ¯â€”â€”éå¯¹ç§°åŠ å¯†ã€‚</p>
<p>è¿™é‡ŒåŒ…å«ä¸¤ä¸ªæ¦‚å¿µï¼Œå…¬é’¥å’Œç§é’¥ï¼Œå¯ä»¥ç®€å•çš„æŠŠå®ƒä»¬ç†è§£æˆä¸¤ä¸ªé’¥åŒ™ï¼Œå¹¶ä¸”å…·æœ‰è¿™æ ·çš„ç‰¹ç‚¹ï¼š</p>
<ol>
<li>ä½¿ç”¨ç§é’¥åŠ å¯†çš„æ•°æ®ï¼Œåªèƒ½ä½¿ç”¨å…¬é’¥è§£å¯†</li>
<li>ä½¿ç”¨å…¬é’¥åŠ å¯†çš„æ•°æ®ï¼Œåªèƒ½ä½¿ç”¨ç§é’¥è§£å¯†</li>
</ol>
<p>è¿™é‡Œï¼Œæ¯”ç‰¹å¸ä¸»è¦ä½¿ç”¨äº†ç¬¬ä¸€ç§æƒ…å†µï¼Œå³ç§é’¥åŠ å¯†ã€å…¬é’¥è§£å¯†ï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ªå¾ˆå½¢è±¡çš„åå­—â€”â€”æ•°å­—ç­¾åã€‚</p>
<p>ç­¾åçš„ç›®çš„å°±æ˜¯ä¸ºäº†è¯æ˜è¿™ä¸ªä¸œè¥¿æ˜¯æˆ‘çš„ï¼Œè€Œä¸æ˜¯åˆ«äººä¼ªé€ çš„ã€‚</p>
<p>æ‰€ä»¥å¦‚æœæˆ‘æƒ³å¯¹ä¸€ä¸ªè§†é¢‘è¿›è¡Œæ•°å­—ç­¾åï¼Œå¹¶å‘é€ç»™Lowenskyï¼Œé¦–å…ˆï¼Œæˆ‘æŠŠæˆ‘çš„å…¬é’¥ç»™Lowenskyï¼Œç„¶åè®¡ç®—æ–‡æ¡£çš„å“ˆå¸Œå€¼ï¼Œæ¥ç€ç”¨æˆ‘çš„ç§é’¥åŠ å¯†è¿™ä¸ªå“ˆå¸Œå€¼ï¼Œå°±å¾—åˆ°äº†æ•°å­—ç­¾åï¼Œæœ€åå°†è§†é¢‘ä»¥åŠæ•°å­—ç­¾åå‘é€ç»™Lowenskyï¼ŒLowenskyåªéœ€è¦ç”¨å…¬é’¥è§£å¯†æ•°å­—ç­¾åï¼Œå¾—åˆ°å“ˆå¸Œå€¼ï¼Œå†ä¸ä»–è‡ªå·±è®¡ç®—å¾—åˆ°çš„å“ˆå¸Œå€¼è¿›è¡Œæ¯”è¾ƒï¼Œå°±èƒ½çŸ¥é“è§†é¢‘æœ‰æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚</p>
<p>äº†è§£äº†è¿™ä¸¤ä¸ªæŠ€æœ¯ï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥èŠèŠæ¯”ç‰¹å¸çš„æœ¬è´¨â€”â€”æ¯”ç‰¹å¸ç³»ç»Ÿå°±æ˜¯ä¸€ä¸ªè´¦æœ¬ã€‚</p>
<p>è¿™é‡Œï¼Œæˆ‘å†ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>æˆ‘è·ŸBobã€Aliceæ˜¯å¥½æœ‹å‹ï¼Œæˆ‘ä»¬ç»å¸¸ä¸€å—å‡ºå»ç©ï¼Œé‚£ä¹ˆå°±éœ€è¦å¯¹è´¹ç”¨è¿›è¡ŒAAï¼Œä½†æ˜¯æ¯æ¬¡ç®—è´¦å¾ˆéº»çƒ¦ï¼Œä¸ç®—å¸å®åŠ›åˆä¸å…è®¸ï¼Œäºæ˜¯æˆ‘ä»¬å°±æŠŠè´¦éƒ½è®°å½•åœ¨ä¸€ä¸ªè´¦æœ¬ä¸Šï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. Ryan ä»˜äº† 50å…ƒ ç»™ Bob</span><br><span class="line">2. Alice æ”¶äº† Bob 100å…ƒ</span><br><span class="line">3. Bob ä»˜äº† 30å…ƒ ç»™ Ryan</span><br></pre></td></tr></table></figure>

<p>ç„¶ååˆ°äº†æœˆæœ«ï¼Œå¯¹è´¦æœ¬è¿›è¡Œæ±‡æ€»ï¼Œå¦‚æœè°æœ‰ç›ˆä½™ï¼Œå°±å°†ç›ˆä½™å–èµ°ï¼Œå¦‚æœè°æ¬ äº†é’±ï¼Œå°±éœ€è¦è¡¥å›æ¥ï¼Œæ¯æœˆä¸€æ¬¡ï¼Œæ–¹ä¾¿äº†å¾ˆå¤šã€‚</p>
<p>ä½†å¦‚æœæœ‰äººå·å·åŠ äº†ä¸€æ¡ä¸å­˜åœ¨çš„äº¤æ˜“è®°å½•æ€ä¹ˆåŠï¼Ÿ</p>
<p>è¿™æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨æ•°å­—ç­¾åæŠ€æœ¯ï¼Œæˆ‘ä»¬æŠŠæ¯ä¸€æ¡äº¤æ˜“è®°å½•é™„ä¸Šä¸€ä¸ªæ•°å­—ç­¾åï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. Ryan ä»˜äº† 50å…ƒ ç»™ Bob 0011101...</span><br><span class="line">2. Alice æ”¶äº† Bob 100å…ƒ 1010111...</span><br><span class="line">3. Bob ä»˜äº† 30å…ƒ ç»™ Ryan 1011011...</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ï¼Œåˆ«äººå°±ä¸èƒ½å·å·çš„åœ¨è´¦æœ¬ä¸Šå¢åŠ æˆ–è€…ä¿®æ”¹ä¸å­˜åœ¨çš„äº¤æ˜“è®°å½•ï¼Œå› ä¸ºæ¯ä¸ªäººåªæœ‰è‡ªå·±çš„ç§é’¥ï¼Œè€Œæ²¡æœ‰åˆ«äººçš„ç§é’¥ï¼Œ å› æ­¤ï¼Œæ¯ä¸€æ¡è®°å½•åªèƒ½ç”±å½“äº‹äººæ·»åŠ ã€‚</p>
<p>è¿™æ ·ï¼Œå¤§å®¶å°±å…±åŒå»ºç«‹äº†ä¸€ä¸ªäº’ç›¸ä¿¡ä»»çš„è´¦æœ¬ï¼Œä½†æ˜¯è¿˜å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæœ‰äººæ¬ äº†å¾ˆå¤šé’±ï¼Œè·‘è·¯äº†æ€ä¹ˆåŠï¼Ÿä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åœ¨ä¸€å¼€å§‹ï¼Œå¤§å®¶å…ˆåœ¨è´¦æœ¬ä¸­å……å€¼ï¼Œç„¶åå†ä½¿ç”¨è´¦æœ¬ï¼Œå½“æŸä¸ªäººä½™é¢ä¸è¶³çš„æ—¶å€™ï¼Œå°±å†³ç»æ·»åŠ äº¤æ˜“è®°å½•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. Ryan å……å€¼äº† 100å…ƒ 0010101...</span><br><span class="line">2. Alice å……å€¼äº† 100å…ƒ 0111011...</span><br><span class="line">3. Bobå……å€¼äº† 100å…ƒ 1101101...</span><br><span class="line"></span><br><span class="line">4. Ryan ä»˜äº† 50å…ƒ ç»™ Bob 0011101...</span><br><span class="line">5. Alice æ”¶äº† Bob 100å…ƒ 1010111...</span><br><span class="line">6. Bob ä»˜äº† 30å…ƒ ç»™ Ryan 1011011... -&gt; ä½™é¢ä¸è¶³ï¼Œæ‹’ç»äº¤æ˜“</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶ï¼Œæˆ‘ä»¬å°±ä¼šå‘ç°ï¼Œå¦‚æœæ‰€æœ‰äººéƒ½ä½¿ç”¨è¿™ä¸ªè´¦æœ¬ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®Œå…¨ä¸ç°é‡‘è„±é’©äº†ï¼Œæ¯ä¸ªäººçš„è´¢å¯Œç”±å…¶æ‰€æœ‰çš„äº¤æ˜“è®°å½•çš„æ±‡æ€»æ¥å®šä¹‰ã€‚</p>
<p>å› ä¸ºè¿™ä¸ªè´¦æœ¬äººäººéƒ½å¯ä»¥ä¿®æ”¹ï¼Œäººäººéƒ½éœ€è¦ä¿®æ”¹ï¼Œé‚£ä¹ˆæ”¾åœ¨å“ªé‡Œæ‰èƒ½è®©å¤§å®¶éƒ½èƒ½è®¿é—®å‘¢ï¼Ÿæ¯”ç‰¹å¸ä¸ºäº†åŒºä¸­å¿ƒåŒ–ï¼Œé€‰æ‹©äº†ä¸€ç§ç‹¬ç‰¹çš„æ–¹å¼â€”â€”å·¥ä½œé‡è¯æ˜ã€‚</p>
<p>è¿˜è®°å¾—æˆ‘ä»¬åˆšæ‰è¯´çš„å“ˆå¸Œå€¼å—ï¼Œå› ä¸ºå®ƒæœ¬èº«æ˜¯ä¸å¯é€†çš„ï¼Œæ‰€ä»¥å¦‚æœæˆ‘é—®ï¼š</p>
<p>ï¼ˆè´¦æœ¬æ•°æ® + æœªçŸ¥æ•°ï¼‰&#x3D;&#x3D;å“ˆå¸Œ&#x3D;&#x3D;ã€‹ å“ˆå¸Œå€¼ï¼ˆ256ä½çš„å‰60ä½éƒ½æ˜¯0ï¼‰</p>
<p>è¿™ä¸ªæœªçŸ¥æ•°æ˜¯å¤šå°‘ï¼Ÿè¦å¾—åˆ°è¿™ä¸ªæœªçŸ¥æ•°ï¼Œå”¯ä¸€çš„æ–¹æ³•å°±æ˜¯ä¸€ä¸ªä¸€ä¸ªè¯•ã€‚è¿™ä¸ªå°è¯•å¹¶å¾—åˆ°ç­”æ¡ˆçš„è¿‡ç¨‹å°±æ˜¯å·¥ä½œé‡è¯æ˜ã€‚</p>
<p>åœ¨æ¯”ç‰¹å¸çš„ç½‘ç»œä¸­ï¼Œå­˜åœ¨è®¸å¤šè®¡ç®—èŠ‚ç‚¹ï¼Œå®ƒä»¬æ— æ—¶æ— åˆ»ä¸åœ¨ç›‘å¬ï¼Œç›‘å¬çš„å¯¹è±¡å°±æ˜¯ä¸€ç¬”ç¬”çš„äº¤æ˜“è®°å½•ã€‚æ¯ä¸ªèŠ‚ç‚¹ä¼šæŠŠè¿™äº›äº¤æ˜“è®°å½•æ”¾åœ¨ä¸€ä¸ªæ± å­ä¸­ï¼Œç„¶åæ‹¿å‡ºä¸€ç»„äº¤æ˜“è®°å½•ï¼Œå¼€å§‹è®¡ç®—é‚£ä¸ªæœªçŸ¥æ•°ï¼Œå½“è®¡ç®—å‡ºæœªçŸ¥æ•°åï¼Œè¿™ä¸ªï¼ˆè´¦æœ¬+æœªçŸ¥æ•°ï¼‰å°±æ˜¯ä¸€ä¸ªåŒºå—ï¼Œç„¶åè¯¥èŠ‚ç‚¹ä¼šå‘å…¶å®ƒèŠ‚ç‚¹å¹¿æ’­è¿™ä¸ªåŒºå—ï¼Œå‘Šè¯‰å¤§å®¶ï¼Œæˆ‘ç®—å‡ºç­”æ¡ˆäº†ï¼Œè¿™æ ·ï¼Œè¿™ç»„äº¤æ˜“è®°å½•å°±è¢«æ°¸è¿œå†™åœ¨æ¯”ç‰¹å¸ç½‘ç»œå½“ä¸­ï¼Œä¸€ä¸ªä¸€ä¸ªåŒºå—ç›¸äº’é“¾æ¥ï¼Œå°±å½¢æˆäº†åŒºå—é“¾ã€‚</p>
<p>æ¯ç”Ÿæˆä¸€ä¸ªæ–°çš„åŒºå—ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€å®šæ•°é‡çš„æ¯”ç‰¹å¸ï¼Œè¿™äº›æ¯”ç‰¹å¸å°±ä¼šå¥–åŠ±ç»™è¿™ä¸ªè®¡ç®—èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„æ¯”ç‰¹å¸çŸ¿å·¥ï¼Œè¿™äº›æ–°äº§ç”Ÿçš„æ¯”ç‰¹å¸ï¼Œæœ¬è´¨ä¸Šä¹Ÿå°±æ˜¯äº¤æ˜“è®°å½•ã€‚</p>
<p>éšç€åŒºå—æ•°é‡çš„å¢å¤šï¼Œæ¯ä¸ªåŒºå—æ‰€é™„åŠ çš„æ¯”ç‰¹å¸ä¹Ÿä¼šé€’å‡ï¼Œæœ€ç»ˆå‡å°‘åˆ°0ï¼Œå› æ­¤æ¯”ç‰¹å¸çš„æ€»é‡æ˜¯æœ‰é™çš„ï¼Œå¤§çº¦æ˜¯2100ä¸‡æšã€‚è€Œæ¯”ç‰¹å¸è´¦æˆ·ï¼Œä¹Ÿæ˜¯å®Œå…¨åŒ¿åçš„ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†ä¸€ä¸ªç”¨æˆ·ã€‚</p>
<p>å•çº¯ä»æŠ€æœ¯ä¸Šæ¥çœ‹ï¼Œæ¯”ç‰¹å¸ä¼¼ä¹å¾ˆç¾å¥½ï¼Œå»ä¸­å¿ƒåŒ–ï¼Œæ€»é‡æœ‰é™ï¼Œä¸ä¼šè¶…å‘ï¼Œäº¤æ˜“å®Œå…¨åŒ¿åã€‚</p>
<p>ç›®å‰ï¼Œä¸­å›½å¯¹äºæ¯”ç‰¹å¸çš„æ€åº¦æ˜¯ä¸¥å‰ç¦æ­¢ï¼Œä¸»è¦å¯èƒ½åŸºäºä»¥ä¸‹ä¸¤ç‚¹ï¼š</p>
<ol>
<li>æ¯”ç‰¹å¸åŸºäºäº’è”ç½‘ï¼Œå®ƒå¯ä»¥ç»•å¼€å¤–æ±‡ç®¡åˆ¶ï¼Œå¯¹äºæ´—é’±ç­‰éæ³•äº¤æ˜“æä¾›äº†æå¤§çš„ä¾¿åˆ©</li>
<li>äººæ°‘å¸çš„æœ¬è´¨æ˜¯ä¸­å¿ƒåŒ–ï¼Œæ¯”ç‰¹å¸çš„å»ä¸­å¿ƒåŒ–ä¸ä¸­å›½çš„å‘å±•æˆ˜ç•¥èƒŒé“è€Œé©°</li>
</ol>
<p>ç”šè‡³æœ€è¿‘æœ‰æ–°é—»æŒ‡å‡ºï¼Œæ¯”ç‰¹å¸çŸ¿å·¥å°†ä¼šè¢«åˆ—å…¥å¤±ä¿¡åå•ï¼Œå¯è§ä¸­å›½å¯¹äºæ¯”ç‰¹å¸çš„å¼ºç¡¬æ€åº¦ã€‚</p>
<p>åœ¨å¯é¢„è§çš„æœªæ¥ï¼Œæ¯”ç‰¹å¸éƒ½å°†é•¿æœŸå­˜åœ¨ï¼ŒæŒæœ‰å°‘é‡æ¯”ç‰¹å¸ä¹Ÿä¸ä¼šæœ‰å¤ªå¤§é£é™©ï¼Œä½†æ˜¯å¯¹äºæ æ†ã€åˆçº¦ã€æœŸè´§ç­‰ç‚’å¸è¡Œä¸ºï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤Ÿè°¨æ…å¯¹å¾…ã€‚</p>
]]></content>
      <categories>
        <category>Geek</category>
      </categories>
      <tags>
        <tag>toastmaster</tag>
        <tag>speech</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»€ä¹ˆæ˜¯æ¶²æ€é•œå¤´ï¼ˆLiquid Lensï¼‰</title>
    <url>/2021/01/31/introduction-of-liquid-lens.html</url>
    <content><![CDATA[<blockquote>
<p>éšç€æ‰‹æœºæ‹ç…§çš„å¤§è§„æ¨¡æ™®åŠï¼Œè¶Šæ¥è¶Šå¤šçš„äººæ‹¿èµ·æ‰‹æœºè®°å½•ç”Ÿæ´»ï¼Œæ‘„åƒå¤´çš„å„ç§å‚æ•°ä¹Ÿé€æ¸è¢«å¤§ä¼—æ‰€ç†ŸçŸ¥ã€‚ç›¸è¾ƒäºå¤§å®¶æ¯”è¾ƒå…³æ³¨çš„CMOSå°ºå¯¸å’Œåƒç´ ï¼Œé•œå¤´è¿™ä¸ªè¯é¢˜çš„çƒ­åº¦æ¯”è¾ƒå†·æ¸…ã€‚ç›®å‰ä¸»æµçš„é•œå¤´éƒ½æ˜¯ä½¿ç”¨ç»ç’ƒä½œä¸ºé•œç‰‡ï¼Œé€šè¿‡è°ƒèŠ‚é•œç‰‡ä¹‹å‰çš„é—´è·æ¥å®ç°å¯¹ç„¦ã€‚ä½†æ˜¯ï¼Œè¿˜æœ‰ä¸€ç§ä½¿ç”¨æ¶²ä½“æ¥å®ç°å¯¹ç„¦çš„é•œå¤´ï¼Œä»Šå¤©å°±ä»‹ç»ä¸€ä¸‹è¿™ç§æœ‰è¶£çš„<strong>æ¶²æ€é•œå¤´</strong>ã€‚</p>
</blockquote>
<span id="more"></span>

<p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹æ¶²æ€é•œå¤´çš„å®é™…æ•ˆæœï¼š</p>
<img src="/2021/01/31/introduction-of-liquid-lens/demonstrate_liquid_lens.gif" class="" title="demonstrate_liquid_lens.gif">

<p>å¯ä»¥çœ‹åˆ°ï¼Œé•œå¤´å¯ä»¥åœ¨ä¸€ä¸ªç›¸å½“å¤§çš„èŒƒå›´å†…è¿ç»­è°ƒèŠ‚ç„¦è·ï¼Œå¹¶ä¸”æ•´ä¸ªè¿‡ç¨‹éå¸¸é¡ºæ»‘ã€‚</p>
<p>æ¶²æ€é•œå¤´ä¸ä½¿ç”¨ä¼ ç»Ÿçš„ç»ç’ƒä½œä¸ºå…‰å­¦é€é•œï¼Œè€Œæ˜¯ä½¿ç”¨é€æ˜çš„æ²¹æ»´ï¼Œæ²¡é”™ï¼Œå°±æ˜¯<strong>ä¸€æ»´æ²¹</strong>å’Œ<strong>ä¸€æ»´æ°´</strong>ã€‚</p>
<p>ä¼ ç»Ÿçš„é•œå¤´æ˜¯ä½¿ç”¨ä¸€ç»„é•œç‰‡ï¼Œé€šè¿‡è°ƒèŠ‚é•œç‰‡çš„é—´è·æ¥è°ƒèŠ‚æ•´ä¸ªå…‰å­¦ç³»ç»Ÿçš„ç„¦ç‚¹ï¼Œå› ä¸ºæ¯ä¸ªé•œç‰‡çš„æ›²ç‡åŠå¾„æ˜¯æ²¡æœ‰åŠæ³•å˜åŒ–çš„ï¼Œæ‰€ä»¥å•ä¸€çš„é•œç‰‡å°±ä¸èƒ½å®ç°å¯¹ç„¦ã€‚</p>
<p>æ¶²æ€é•œå¤´åˆ™æ°æ°ç›¸åï¼Œå®ƒé€šè¿‡æ”¹å˜â€œé•œç‰‡â€çš„æ›²ç‡åŠå¾„æ¥å®ç°å¯¹ç„¦ï¼Œè¿™éå¸¸ç±»ä¼¼äºäººçœ¼çš„æ™¶çŠ¶ä½“ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<img src="/2021/01/31/introduction-of-liquid-lens/liquid_lenses_in_imaging.png" class="" title="liquid_lenses_in_imaging.png">

<p>ä¸äººçœ¼é€šè¿‡ç«çŠ¶è‚Œæ§åˆ¶æ™¶çŠ¶ä½“çš„å½¢çŠ¶ä¸åŒï¼Œæ¶²æ€é•œå¤´åˆ©ç”¨äº†ä¸€ç§å«åš<strong>ç”µæ¶¦æ¹¿ï¼ˆElectrowettingï¼‰</strong>çš„ç°è±¡ï¼Œç®€å•çš„è¯´å°±æ˜¯é€šè¿‡æ”¹å˜ç”µå‹æ¥æ”¹å˜æŠ—æ°´è¡¨é¢çš„äº²æ°´æ€§ï¼Œç”±äºåŸå…ˆæŠ—æ°´çš„è¡¨é¢ç°åœ¨å˜å¾—æ›´å¸æ°´ï¼Œæ²¹è†œä¸å¾—ä¸æ”¹å˜å…¶å½¢å¼ã€‚</p>
<p>æ‰€ä»¥æ¶²æ€é•œå¤´å°±æ˜¯åœ¨ä¸¤å—ç»ç’ƒæ¿ä¹‹é—´ï¼Œå¤¹ç€ä¸€æ»´æ°´å’Œä¸€æ»´æ²¹ï¼Œåœ¨æ²¡æœ‰ç”µåœºçš„æ—¶å€™ï¼Œæ°´æ»´å’Œæ²¹æ»´éƒ½å¤„äºæ¾å¼›çŠ¶æ€ï¼Œæ­¤æ—¶å……å½“â€œé•œç‰‡â€çš„æ²¹æ»´æ˜¯ä¸€ä¸ªå‡¹é€é•œã€‚</p>
<p>è€Œå½“æˆ‘ä»¬æ–½åŠ äº†ä¸€å®šçš„ç”µå‹ä¹‹åï¼Œå³ä¾§ç”µæçš„é‡‘å±è¡¨é¢å˜å¾—æ›´åŠ <strong>äº²æ°´</strong>ï¼Œäºæ˜¯å°±æŠŠæ›´å¤šçš„æ°´å¸å¼•åˆ°é•œå¤´çš„è¾¹ç¼˜ï¼Œä¹Ÿå°±æ˜¯é•œå¤´ä¸­é—´çš„æ°´ä¼šå˜å°‘ï¼Œæ­¤æ—¶æ²¹æ»´è‡ªç„¶è€Œç„¶åœ°å°±ä¼šå˜æˆä¸€ä¸ª<strong>è¾¹ç¼˜è–„</strong>ï¼Œ<strong>ä¸­é—´åš</strong>åœ°å‡¸é€é•œï¼Œå…¶æ›²ç‡åŠå¾„ä»¥åŠç„¦ç‚¹åœ°ä½ç½®éƒ½ä¼šéšä¹‹å‘ç”Ÿå˜åŒ–ã€‚</p>
<p>ç›®å‰ä¸–ç•Œä¸Šæœ€å¤§çš„åˆ¶é€ æ¶²æ€é•œå¤´çš„å…¬å¸æ˜¯<a href="http://varioptic.com/en/products.html">Varioptic</a>ï¼Œé•œå¤´çš„å¤–å½¢ç±»ä¼¼äºä¸€ä¸ªå°é‡‘å±æŒ‰é’®ï¼Œç”µæçš„è§¦ç‚¹åˆ™æ˜¯åœ¨é•œå¤´çš„å‰åä¸¤ä¾§ï¼Œæ‰€ä»¥é€šè¿‡æŠŠå®ƒå¤¹åœ¨ä¸¤å—è¦†ç›–é“œç®”çš„ç”µè·¯æ¿ä¹‹é—´å°±å¯ä»¥å¯¹å®ƒè¿›è¡Œä¾›ç”µã€‚</p>
<img src="/2021/01/31/introduction-of-liquid-lens/liquid-lens-appearance.png" class="" title="liquid-lens-appearance.png">

<p>è¦é©±åŠ¨è¿™ä¸ªé•œå¤´éœ€è¦æ¯”è¾ƒé«˜çš„ç”µå‹ï¼Œå¹¶ä¸”éœ€è¦ä¸“ç”¨çš„èŠ¯ç‰‡æ¥é©±åŠ¨ï¼šHV892ï¼Œè¿™æ¬¾èŠ¯ç‰‡æ¥è‡ªäºSupertexã€‚æˆ‘ä»¬éœ€è¦é€šè¿‡IICæ¥æ§åˆ¶å®ƒã€‚æ‰€ä»¥ä½¿ç”¨Arduinoä½œä¸ºé©±åŠ¨æ¿ã€‚</p>
<img src="/2021/01/31/introduction-of-liquid-lens/liquid-lens-driver.png" class="" title="liquid-lens-driver.png">

<p>æ¶²æ€é•œå¤´ç›¸è¾ƒäºä¼ ç»Ÿçš„æœºæ¢°å¯¹ç„¦é•œå¤´çš„ä¼˜åŠ¿å°±æ˜¯ä½“ç§¯å°ï¼Œå¯¹ç„¦é€Ÿåº¦å¿«ï¼Œå¯¹ç„¦èŒƒå›´å¤§ã€‚æ¯”å¦‚åœ¨ç”Ÿäº§çº¿ä¸Šè¯†åˆ«æ¡å½¢ç çš„æ—¶å€™ï¼Œä¸åŒé«˜åº¦çš„è´§å“é€šè¿‡æ—¶éœ€è¦è¿ç»­åœ°å¿«é€Ÿç²¾ç¡®å¯¹ç„¦ã€‚</p>
<img src="/2021/01/31/introduction-of-liquid-lens/liquid-lens-animation.gif" class="" title="liquid-lens-animation.gif">

]]></content>
      <categories>
        <category>Geek</category>
      </categories>
      <tags>
        <tag>liquid</tag>
        <tag>lens</tag>
      </tags>
  </entry>
  <entry>
    <title>iTop-4412 learning â€”â€” beginning</title>
    <url>/2022/01/03/itop-4412-learning-beginning.html</url>
    <content><![CDATA[<blockquote>
<p>Recently I bought a new deveopment board: iTop-4412, which is based on samsung exynos 4412. Hoping this new board will increase my understanding of Linux and hardware.</p>
</blockquote>
<span id="more"></span>

<h1 id="Learning-Framework"><a href="#Learning-Framework" class="headerlink" title="Learning Framework"></a>Learning Framework</h1><ul>
<li><p><strong>Single chip microprocessor</strong> + <strong>C language</strong></p>
</li>
<li><p>Linux basic framework (Bootloader, Kernel, Filesystem)</p>
</li>
<li><p>Linux userspace programming</p>
</li>
<li><p>Linux character device programming</p>
</li>
</ul>
<h1 id="DIP-Switch"><a href="#DIP-Switch" class="headerlink" title="DIP Switch"></a>DIP Switch</h1><ul>
<li><p>0: near to number</p>
</li>
<li><p>1: near to letter</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>DIP switch</th>
<th align="center">1</th>
<th align="center">2</th>
</tr>
</thead>
<tbody><tr>
<td>EMMC</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr>
<td>TF</td>
<td align="center">1</td>
<td align="center">0</td>
</tr>
</tbody></table>
<h1 id="Board-Type"><a href="#Board-Type" class="headerlink" title="Board Type"></a>Board Type</h1><p>SCP: 6 chips</p>
<p>COP: 2 chips</p>
<h1 id="Flash-Image"><a href="#Flash-Image" class="headerlink" title="Flash Image"></a>Flash Image</h1><h2 id="Fastboot"><a href="#Fastboot" class="headerlink" title="Fastboot"></a>Fastboot</h2><p>In Uboot:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fdisk -c 0</span><br><span class="line">fatformat mmc 0:1</span><br><span class="line">ext3format mmc 0:2</span><br><span class="line">ext3format mmc 0:3</span><br><span class="line">ext3format mmc 0:4</span><br><span class="line">fastboot</span><br></pre></td></tr></table></figure>

<p>In fastboot shell:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fastboot flash bootloader u-boot-iTOP-4412.bin</span><br><span class="line">fastboot flash kernel zImage</span><br><span class="line">fastboot flash ramdisk ramdisk-uboot.img</span><br><span class="line">fastboot flash system system.img</span><br><span class="line">fastboot -w</span><br><span class="line">fastboot reboot</span><br></pre></td></tr></table></figure>

<h2 id="TF-card"><a href="#TF-card" class="headerlink" title="TF card"></a>TF card</h2><p>Will update if needed.</p>
]]></content>
      <categories>
        <category>Embedded</category>
      </categories>
  </entry>
  <entry>
    <title>Leadership between Democracy and Authority</title>
    <url>/2021/06/24/leadership-between-democratic-and-authoritative.html</url>
    <content><![CDATA[<blockquote>
<p>Pathways: Dynamic Leadership</p>
<p>Level 2-1: Understanding Your Leadership Style</p>
</blockquote>
<span id="more"></span>

<h1 id="Content"><a href="#Content" class="headerlink" title="Content"></a>Content</h1><p>As a newbie without going through too much in the society, it seems I never have taken time to think about what if I am a leader, because in my work life, the only thing I can control is my computer, and she will never resist my order. What kind of leadership style will I have, and can I get along well with my subordinate? It turns out that if I want to figure out my leadership character, I need a real case.</p>
<p>After searching in my mind, I realized I did have an experience of leadership, but itâ€™s not quite a delighted one. What happened? Please let me share the story.</p>
<p>When I was in college, to encourage students to do some technology innovation, the school established a foundation to support new ideas and creations. At that time, I was quite interested in coding, thus I decided to recruit two of my classmates and as a group we will make an Android app to apply for the fund. And of course, I would be the leader of the team. Thatâ€™s the first time I realized that there could be so much problems coming from my leadership styles.</p>
<p>At the design stage of the project, to act as a friendly and democratic leader, I just let everyone to share their thoughts, this is all right, but the crazy part is that I decided to achieve them all. Though I knew some ideas were difficult, I just didnâ€™t want to reject any idea from anyone, I didnâ€™t want to be the bad guy. Thatâ€™s the moment when the nightmare started.</p>
<p>After finished design, we needed to write the paper of project plan. At the meeting, I asked the team: do you want to write the document? No one responded. Then I continued, or I can do this if you donâ€™tâ€¦  There is no doubt this job belonged to me. Actually I didnâ€™t want it at all, what I wanted was just being nice and letting everyone can do anything. This idea sounded good but felt bad.</p>
<p>But just as the saying said: The only lesson mankind has learned from history is that it never learns anything. When we finished distributing the jobs and entered the coding stage, I said: please feel free and you can do this job at your spare time. Then we came to home on the summer holiday. To decrease the pressure I brought to my team, I didnâ€™t ask about this among the whole holiday. After we went back to school, guess what, nothing had been done by them. I feel angry, but I need to be nice, so I behaved something like nice-angry. I said: Itâ€™s impossible to have zero free time to work at home, now that you didnâ€™t finish yours, I will try to do these jobs by myself.</p>
<p>The project was complex and I have to work overtime. The coding had been not that attractive and made me exhausted. I felt tired, angry and regret, I just wanted to be a good leader but now all the things messed up.</p>
<p>Eventually, I nearly finished the whole project on my own, unfortunately all of us needed to report to the teacher about the role and duty in the project, then I had to make up some workload for them, how ironic it is!</p>
<p>I donâ€™t think this is a smooth and successful project, there existed a candy bomb: I tried to be democratic, but failed to provide enough communications and connections in the team. It became so inefficient because too much freedom made the team lost the direction.</p>
<p>Suppose I have another chance to lead a team, I will limit the democratic in a reasonable range and be more authoritative in some critical stage to make sure everything can be finished on time.</p>
<p>Thatâ€™s the leadership experience of mine and the style I have, now I believe the good ending of a project needs the balance between democracy and authority.</p>
<h1 id="Evaluation"><a href="#Evaluation" class="headerlink" title="Evaluation"></a>Evaluation</h1><p>Good point</p>
<ul>
<li>Start the speech by asking some questions</li>
<li>The speech title is interesting</li>
<li>the description of the story is vivid</li>
</ul>
<p>Bad point</p>
<ul>
<li>Could use more gestures , such as showing number</li>
<li>Could use more body language to make the conversation in the speech vivider</li>
<li>Put more emotion in the speech, do not act as reciting an article</li>
</ul>
<h1 id="Photos"><a href="#Photos" class="headerlink" title="Photos"></a>Photos</h1><img src="/2021/06/24/leadership-between-democratic-and-authoritative/photo1.jpg" class="">

<img src="/2021/06/24/leadership-between-democratic-and-authoritative/photo2.png" class="">

]]></content>
      <categories>
        <category>Life</category>
      </categories>
      <tags>
        <tag>toastmaster</tag>
        <tag>speech</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨Ubuntuå®‰è£…OSXçš„ä¸»é¢˜</title>
    <url>/2019/05/19/make-ubuntu-look-like-osx.html</url>
    <content><![CDATA[<blockquote>
<p>éšç€Ubuntuå†æ¬¡å›å½’Gnomeçš„æ€€æŠ±ï¼Œå…¶UIçš„å¯å®šåˆ¶æ€§å†ä¸Šäº†ä¸€ä¸ªå°é˜¶ï¼Œè¿™æ¬¡æ¥çœ‹çœ‹åŸºäºGnome3æ‰“é€ ä¸€ä¸ªé«˜ä»¿OSXçš„ç•Œé¢ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h1><ol>
<li><p>å®‰è£…gnome-tweak-tool</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install gnome-tweak-tool</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£…Arc menuæ’ä»¶</p>
<p>åœ¨åº”ç”¨å•†åº—ä¸­æœç´¢â€œArc menuâ€å¹¶å®‰è£…ï¼Œå¦‚å›¾æ‰€ç¤º</p>
<img src="/2019/05/19/make-ubuntu-look-like-osx/arc-menu.png" class="" title="Arc menu">
</li>
<li><p>å®‰è£…user themesæ’ä»¶</p>
<p>åœ¨åº”ç”¨å•†åº—ä¸­æœç´¢â€œuser themesâ€å¹¶å®‰è£…ï¼Œå¦‚å›¾æ‰€ç¤º</p>
<img src="/2019/05/19/make-ubuntu-look-like-osx/user-themes.png" class="" title="user themes">
</li>
<li><p>å®‰è£…blyræ’ä»¶</p>
<p>åœ¨åº”ç”¨å•†åº—ä¸­æœç´¢â€œblyrâ€å¹¶å®‰è£…ï¼Œå¦‚å›¾æ‰€ç¤º</p>
<img src="/2019/05/19/make-ubuntu-look-like-osx/blyr.png" class="" title="blyr"></li>
</ol>
<h1 id="å®‰è£…ä¸»é¢˜"><a href="#å®‰è£…ä¸»é¢˜" class="headerlink" title="å®‰è£…ä¸»é¢˜"></a>å®‰è£…ä¸»é¢˜</h1><ol>
<li><p>å®‰è£…OSXä¸»é¢˜</p>
<p><a href="https://www.gnome-look.org/p/1241688/"><strong>McOS-themes</strong></a>ï¼Œéœ€è¦ä¸‹è½½å›¾ä¸­çš„ä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«å¯¹åº”äº®è‰²è°ƒå’Œæš—è‰²è°ƒï¼Œç„¶åå°†å®ƒä»¬è§£å‹åˆ°<code>~/.themes</code>ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -xf McOS-MJV-Gn3.32-v2.1.tar.xz -C ~/.themes</span><br><span class="line">tar -xf Mc-OS-MJV-Dark-Gn3.32-V.2.1.tar.xz -C ~/.themes</span><br></pre></td></tr></table></figure>

<img src="/2019/05/19/make-ubuntu-look-like-osx/theme.png" class="" title="theme">
</li>
<li><p>å®‰è£…OSXå›¾æ ‡</p>
<p><a href="https://www.gnome-look.org/p/1102582/"><strong>Cupertino iCons Collection</strong></a>ï¼Œéœ€è¦ä¸‹è½½å›¾ä¸­çš„æ–‡ä»¶ï¼Œç„¶åè§£å‹åˆ°<code>~/.iconsã€‚</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -xf Cupertino-Mojave.tar.xz	-C ~/.icons</span><br></pre></td></tr></table></figure>

<img src="/2019/05/19/make-ubuntu-look-like-osx/icon.png" class="" title="icon">
</li>
<li><p>å®‰è£…OSX shell</p>
<p><a href="https://www.gnome-look.org/p/1213208/"><strong>macOS MOJAVE</strong></a>ï¼Œéœ€è¦ä¸‹è½½å›¾ä¸­çš„æ–‡ä»¶ï¼Œè§£å‹åæŒ‰ç…§Gnomeçš„ç‰ˆæœ¬ï¼Œå°†ç›¸åº”çš„ç›®å½•å¤åˆ¶åˆ°<code>~/.themes</code>ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gnome-shell --version # ç¡®å®šgnomeç‰ˆæœ¬</span><br><span class="line">tar -xf OSX.for.Dash.to.DOCK.tar.xz</span><br><span class="line">cp -r 3.26\ -\ 3.28/Mojave ~/.themes/</span><br></pre></td></tr></table></figure>

<img src="/2019/05/19/make-ubuntu-look-like-osx/shell.png" class="" title="shell"></li>
</ol>
<h1 id="é…ç½®ä¸»é¢˜"><a href="#é…ç½®ä¸»é¢˜" class="headerlink" title="é…ç½®ä¸»é¢˜"></a>é…ç½®ä¸»é¢˜</h1><p>æ‰“å¼€Tweaksï¼Œåœ¨Apperance -&gt; Themesä¸‹ï¼Œåˆ†åˆ«é€‰æ‹©å®‰è£…å¥½çš„é¡¹ç›®ã€‚</p>
<img src="/2019/05/19/make-ubuntu-look-like-osx/tweaks.png" class="" title="tweaks">

<img src="/2019/05/19/make-ubuntu-look-like-osx/demo.png" class="" title="demo">

<h1 id="ä¸€äº›åŒºåˆ«"><a href="#ä¸€äº›åŒºåˆ«" class="headerlink" title="ä¸€äº›åŒºåˆ«"></a>ä¸€äº›åŒºåˆ«</h1><p>ç”±äºOSXåŸç”Ÿçš„Dockä¼šæŒ¤å å±å¹•ä¸Šä¸‹çš„ç©ºé—´ï¼Œè¿™å¯¹äºè¯»å†™ä»£ç å¾ˆä¸åˆ©ï¼Œæ‰€ä»¥æˆ‘å¹¶æ²¡æœ‰è¿½æ±‚å®Œå…¨ä¸€æ ·çš„æ•ˆæœï¼Œç›¸å¯¹æ¥è¯´ï¼Œç«–æ’çš„Dockæ æ›´åŠ é«˜æ•ˆã€‚</p>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>gnome3</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownè¯­æ³•å¤§å…¨</title>
    <url>/2018/10/15/markdown-syntax.html</url>
    <content><![CDATA[<p>&lt;&lt; <a href="http://wowubuntu.com/">è®¿é—® Wow!Ubuntu</a></p>
<p><strong>NOTE:</strong> This is Simplelified  Chinese Edition Document of Markdown Syntax. If you are seeking for English Edition Document. Please refer to <a href="http://daringfireball.net/projects/markdown/syntax">Markdown: Syntax</a>.</p>
<p><strong>å£°æ˜ï¼š</strong> è¿™ä»½æ–‡æ¡£æ´¾ç”Ÿ(fork)äº<a href="http://markdown.tw/">ç¹ä½“ä¸­æ–‡ç‰ˆ</a>ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œäº†ç¹ä½“è½¬ç®€ä½“å·¥ä½œï¼Œå¹¶è¿›è¡Œäº†é€‚å½“çš„æ¶¦è‰²ã€‚æ­¤æ–‡æ¡£ç”¨ Markdown è¯­æ³•ç¼–å†™ï¼Œä½ å¯ä»¥åˆ°è¿™é‡Œ<a href="http://gitcafe.com/riku/Markdown-Syntax-CN/blob/master/syntax.md">æŸ¥çœ‹å®ƒçš„æºæ–‡ä»¶</a>ã€‚ã€Œç¹ä½“ä¸­æ–‡ç‰ˆçš„åŸå§‹æ–‡ä»¶å¯ä»¥<a href="https://github.com/othree/markdown-syntax-zhtw/blob/master/syntax.md">æŸ¥çœ‹è¿™é‡Œ</a> ã€‚ã€â€“By @<a href="http://twitter.com/riku">riku</a></p>
<span id="more"></span>

<p><strong>æ³¨ï¼š</strong> æœ¬é¡¹ç›®æ‰˜ç®¡äº <a href="https://github.com/riku/Markdown-Syntax-CN">GitHub</a>ä¸Šï¼Œè¯·é€šè¿‡â€æ´¾ç”Ÿâ€å’Œâ€åˆå¹¶è¯·æ±‚â€æ¥å¸®å¿™æ”¹è¿›æœ¬é¡¹ç›®ã€‚</p>
<h1 id="Markdown-è¯­æ³•è¯´æ˜-ç®€ä½“ä¸­æ–‡ç‰ˆ-x2F-ç‚¹å‡»æŸ¥çœ‹å¿«é€Ÿå…¥é—¨"><a href="#Markdown-è¯­æ³•è¯´æ˜-ç®€ä½“ä¸­æ–‡ç‰ˆ-x2F-ç‚¹å‡»æŸ¥çœ‹å¿«é€Ÿå…¥é—¨" class="headerlink" title="Markdown è¯­æ³•è¯´æ˜ (ç®€ä½“ä¸­æ–‡ç‰ˆ) &#x2F; (ç‚¹å‡»æŸ¥çœ‹å¿«é€Ÿå…¥é—¨)"></a>Markdown è¯­æ³•è¯´æ˜ (ç®€ä½“ä¸­æ–‡ç‰ˆ) &#x2F; (<a href="./basic.html">ç‚¹å‡»æŸ¥çœ‹å¿«é€Ÿå…¥é—¨</a>)</h1><ul>
<li><a href="#overview">æ¦‚è¿°</a><ul>
<li><a href="#philosophy">å®—æ—¨</a></li>
<li><a href="#html">å…¼å®¹ HTML</a></li>
<li><a href="#autoescape">ç‰¹æ®Šå­—ç¬¦è‡ªåŠ¨è½¬æ¢</a></li>
</ul>
</li>
<li><a href="#block">åŒºå—å…ƒç´ </a><ul>
<li><a href="#p">æ®µè½å’Œæ¢è¡Œ</a></li>
<li><a href="#header">æ ‡é¢˜</a></li>
<li><a href="#blockquote">åŒºå—å¼•ç”¨</a></li>
<li><a href="#list">åˆ—è¡¨</a></li>
<li><a href="#precode">ä»£ç åŒºå—</a></li>
<li><a href="#hr">åˆ†éš”çº¿</a></li>
</ul>
</li>
<li><a href="#span">åŒºæ®µå…ƒç´ </a><ul>
<li><a href="#link">é“¾æ¥</a></li>
<li><a href="#em">å¼ºè°ƒ</a></li>
<li><a href="#code">ä»£ç </a></li>
<li><a href="#img">å›¾ç‰‡</a></li>
</ul>
</li>
<li><a href="#misc">å…¶å®ƒ</a><ul>
<li><a href="#backslash">åæ–œæ </a></li>
<li><a href="#autolink">è‡ªåŠ¨é“¾æ¥</a></li>
</ul>
</li>
<li><a href="#acknowledgement">æ„Ÿè°¢</a></li>
<li>   <a href="#editor">Markdown å…è´¹ç¼–è¾‘å™¨</a></li>
</ul>
<hr>
<h2 id="overview">æ¦‚è¿°</h2>
<h3 id="philosophy">å®—æ—¨</h3>
Markdown çš„ç›®æ ‡æ˜¯å®ç°ã€Œæ˜“è¯»æ˜“å†™ã€ã€‚

<p>å¯è¯»æ€§ï¼Œæ— è®ºå¦‚ä½•ï¼Œéƒ½æ˜¯æœ€é‡è¦çš„ã€‚ä¸€ä»½ä½¿ç”¨ Markdown æ ¼å¼æ’°å†™çš„æ–‡ä»¶åº”è¯¥å¯ä»¥ç›´æ¥ä»¥çº¯æ–‡æœ¬å‘å¸ƒï¼Œå¹¶ä¸”çœ‹èµ·æ¥ä¸ä¼šåƒæ˜¯ç”±è®¸å¤šæ ‡ç­¾æˆ–æ˜¯æ ¼å¼æŒ‡ä»¤æ‰€æ„æˆã€‚Markdown è¯­æ³•å—åˆ°ä¸€äº›æ—¢æœ‰ text-to-HTML æ ¼å¼çš„å½±å“ï¼ŒåŒ…æ‹¬ [Setext] <a href="http://docutils.sourceforge.net/mirror/setext.html">1</a>ã€[atx] <a href="http://www.aaronsw.com/2002/atx/">2</a>ã€[Textile] <a href="http://textism.com/tools/textile/">3</a>ã€[reStructuredText] <a href="http://docutils.sourceforge.net/rst.html">4</a>ã€[Grutatext] <a href="http://www.triptico.com/software/grutatxt.html">5</a> å’Œ [EtText] <a href="http://ettext.taint.org/doc/">6</a>ï¼Œè€Œæœ€å¤§çµæ„Ÿæ¥æºå…¶å®æ˜¯çº¯æ–‡æœ¬ç”µå­é‚®ä»¶çš„æ ¼å¼ã€‚</p>
<p>æ€»ä¹‹ï¼Œ Markdown çš„è¯­æ³•å…¨ç”±ä¸€äº›ç¬¦å·æ‰€ç»„æˆï¼Œè¿™äº›ç¬¦å·ç»è¿‡ç²¾æŒ‘ç»†é€‰ï¼Œå…¶ä½œç”¨ä¸€ç›®äº†ç„¶ã€‚æ¯”å¦‚ï¼šåœ¨æ–‡å­—ä¸¤æ—åŠ ä¸Šæ˜Ÿå·ï¼Œçœ‹èµ·æ¥å°±åƒ*å¼ºè°ƒ*ã€‚Markdown çš„åˆ—è¡¨çœ‹èµ·æ¥ï¼Œå—¯ï¼Œå°±æ˜¯åˆ—è¡¨ã€‚Markdown çš„åŒºå—å¼•ç”¨çœ‹èµ·æ¥å°±çœŸçš„åƒæ˜¯å¼•ç”¨ä¸€æ®µæ–‡å­—ï¼Œå°±åƒä½ æ›¾åœ¨ç”µå­é‚®ä»¶ä¸­è§è¿‡çš„é‚£æ ·ã€‚</p>
<h3 id="html">å…¼å®¹ HTML</h3>
Markdown è¯­æ³•çš„ç›®æ ‡æ˜¯ï¼šæˆä¸ºä¸€ç§é€‚ç”¨äºç½‘ç»œçš„*ä¹¦å†™*è¯­è¨€ã€‚

<p>Markdown ä¸æ˜¯æƒ³è¦å–ä»£ HTMLï¼Œç”šè‡³ä¹Ÿæ²¡æœ‰è¦å’Œå®ƒç›¸è¿‘ï¼Œå®ƒçš„è¯­æ³•ç§ç±»å¾ˆå°‘ï¼Œåªå¯¹åº” HTML æ ‡è®°çš„ä¸€å°éƒ¨åˆ†ã€‚Markdown çš„æ„æƒ³<em>ä¸æ˜¯</em>è¦ä½¿å¾— HTML æ–‡æ¡£æ›´å®¹æ˜“ä¹¦å†™ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œ HTML å·²ç»å¾ˆå®¹æ˜“å†™äº†ã€‚Markdown çš„ç†å¿µæ˜¯ï¼Œèƒ½è®©æ–‡æ¡£æ›´å®¹æ˜“è¯»ã€å†™å’Œéšæ„æ”¹ã€‚HTML æ˜¯ä¸€ç§<em>å‘å¸ƒ</em>çš„æ ¼å¼ï¼ŒMarkdown æ˜¯ä¸€ç§<em>ä¹¦å†™</em>çš„æ ¼å¼ã€‚å°±è¿™æ ·ï¼ŒMarkdown çš„æ ¼å¼è¯­æ³•åªæ¶µç›–çº¯æ–‡æœ¬å¯ä»¥æ¶µç›–çš„èŒƒå›´ã€‚</p>
<p>ä¸åœ¨ Markdown æ¶µç›–èŒƒå›´ä¹‹å†…çš„æ ‡ç­¾ï¼Œéƒ½å¯ä»¥ç›´æ¥åœ¨æ–‡æ¡£é‡Œé¢ç”¨ HTML æ’°å†™ã€‚ä¸éœ€è¦é¢å¤–æ ‡æ³¨è¿™æ˜¯ HTML æˆ–æ˜¯ Markdownï¼›åªè¦ç›´æ¥åŠ æ ‡ç­¾å°±å¯ä»¥äº†ã€‚</p>
<p>è¦åˆ¶çº¦çš„åªæœ‰ä¸€äº› HTML åŒºå—å…ƒç´ â€•â€•æ¯”å¦‚ <code>&lt;div&gt;</code>ã€<code>&lt;table&gt;</code>ã€<code>&lt;pre&gt;</code>ã€<code>&lt;p&gt;</code> ç­‰æ ‡ç­¾ï¼Œå¿…é¡»åœ¨å‰ååŠ ä¸Šç©ºè¡Œä¸å…¶å®ƒå†…å®¹åŒºéš”å¼€ï¼Œè¿˜è¦æ±‚å®ƒä»¬çš„å¼€å§‹æ ‡ç­¾ä¸ç»“å°¾æ ‡ç­¾ä¸èƒ½ç”¨åˆ¶è¡¨ç¬¦æˆ–ç©ºæ ¼æ¥ç¼©è¿›ã€‚Markdown çš„ç”Ÿæˆå™¨æœ‰è¶³å¤Ÿæ™ºèƒ½ï¼Œä¸ä¼šåœ¨ HTML åŒºå—æ ‡ç­¾å¤–åŠ ä¸Šä¸å¿…è¦çš„ <code>&lt;p&gt;</code> æ ‡ç­¾ã€‚</p>
<p>ä¾‹å­å¦‚ä¸‹ï¼Œåœ¨ Markdown æ–‡ä»¶é‡ŒåŠ ä¸Šä¸€æ®µ HTML è¡¨æ ¼ï¼š</p>
<pre><code>è¿™æ˜¯ä¸€ä¸ªæ™®é€šæ®µè½ã€‚

&lt;table&gt;
    &lt;tr&gt;
        &lt;td&gt;Foo&lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;

è¿™æ˜¯å¦ä¸€ä¸ªæ™®é€šæ®µè½ã€‚
</code></pre>
<p>è¯·æ³¨æ„ï¼Œåœ¨ HTML åŒºå—æ ‡ç­¾é—´çš„ Markdown æ ¼å¼è¯­æ³•å°†ä¸ä¼šè¢«å¤„ç†ã€‚æ¯”å¦‚ï¼Œä½ åœ¨ HTML åŒºå—å†…ä½¿ç”¨ Markdown æ ·å¼çš„<code>*å¼ºè°ƒ*</code>ä¼šæ²¡æœ‰æ•ˆæœã€‚</p>
<p>HTML çš„åŒºæ®µï¼ˆè¡Œå†…ï¼‰æ ‡ç­¾å¦‚ <code>&lt;span&gt;</code>ã€<code>&lt;cite&gt;</code>ã€<code>&lt;del&gt;</code> å¯ä»¥åœ¨ Markdown çš„æ®µè½ã€åˆ—è¡¨æˆ–æ˜¯æ ‡é¢˜é‡Œéšæ„ä½¿ç”¨ã€‚ä¾ç…§ä¸ªäººä¹ æƒ¯ï¼Œç”šè‡³å¯ä»¥ä¸ç”¨ Markdown æ ¼å¼ï¼Œè€Œç›´æ¥é‡‡ç”¨ HTML æ ‡ç­¾æ¥æ ¼å¼åŒ–ã€‚ä¸¾ä¾‹è¯´æ˜ï¼šå¦‚æœæ¯”è¾ƒå–œæ¬¢ HTML çš„ <code>&lt;a&gt;</code> æˆ– <code>&lt;img&gt;</code> æ ‡ç­¾ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›æ ‡ç­¾ï¼Œè€Œä¸ç”¨ Markdown æä¾›çš„é“¾æ¥æˆ–æ˜¯å›¾åƒæ ‡ç­¾è¯­æ³•ã€‚</p>
<p>å’Œå¤„åœ¨ HTML åŒºå—æ ‡ç­¾é—´ä¸åŒï¼ŒMarkdown è¯­æ³•åœ¨ HTML åŒºæ®µæ ‡ç­¾é—´æ˜¯æœ‰æ•ˆçš„ã€‚</p>
<h3 id="autoescape">ç‰¹æ®Šå­—ç¬¦è‡ªåŠ¨è½¬æ¢</h3>
åœ¨ HTML æ–‡ä»¶ä¸­ï¼Œæœ‰ä¸¤ä¸ªå­—ç¬¦éœ€è¦ç‰¹æ®Šå¤„ç†ï¼š `<` å’Œ `&` ã€‚ `<` ç¬¦å·ç”¨äºèµ·å§‹æ ‡ç­¾ï¼Œ`&` ç¬¦å·åˆ™ç”¨äºæ ‡è®° HTML å®ä½“ï¼Œå¦‚æœä½ åªæ˜¯æƒ³è¦æ˜¾ç¤ºè¿™äº›å­—ç¬¦çš„åŸå‹ï¼Œä½ å¿…é¡»è¦ä½¿ç”¨å®ä½“çš„å½¢å¼ï¼Œåƒæ˜¯ `&lt;` å’Œ `&amp;`ã€‚

<p><code>&amp;</code> å­—ç¬¦å°¤å…¶è®©ç½‘ç»œæ–‡æ¡£ç¼–å†™è€…å—æŠ˜ç£¨ï¼Œå¦‚æœä½ è¦æ‰“ã€Œ<code>AT&amp;T</code>ã€ ï¼Œä½ å¿…é¡»è¦å†™æˆã€Œ<code>AT&amp;amp;T</code>ã€ã€‚è€Œç½‘å€ä¸­çš„ <code>&amp;</code> å­—ç¬¦ä¹Ÿè¦è½¬æ¢ã€‚æ¯”å¦‚ä½ è¦é“¾æ¥åˆ°ï¼š</p>
<pre><code>http://images.google.com/images?num=30&amp;q=larry+bird
</code></pre>
<p>ä½ å¿…é¡»è¦æŠŠç½‘å€è½¬æ¢å†™ä¸ºï¼š</p>
<pre><code>http://images.google.com/images?num=30&amp;amp;q=larry+bird
</code></pre>
<p>æ‰èƒ½æ”¾åˆ°é“¾æ¥æ ‡ç­¾çš„ <code>href</code> å±æ€§é‡Œã€‚ä¸ç”¨è¯´ä¹ŸçŸ¥é“è¿™å¾ˆå®¹æ˜“å¿½ç•¥ï¼Œè¿™ä¹Ÿå¯èƒ½æ˜¯ HTML æ ‡å‡†æ£€éªŒæ‰€æ£€æŸ¥åˆ°çš„é”™è¯¯ä¸­ï¼Œæ•°é‡æœ€å¤šçš„ã€‚</p>
<p>Markdown è®©ä½ å¯ä»¥è‡ªç„¶åœ°ä¹¦å†™å­—ç¬¦ï¼Œéœ€è¦è½¬æ¢çš„ç”±å®ƒæ¥å¤„ç†å¥½äº†ã€‚å¦‚æœä½ ä½¿ç”¨çš„ <code>&amp;</code> å­—ç¬¦æ˜¯ HTML å­—ç¬¦å®ä½“çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä¼šä¿ç•™åŸçŠ¶ï¼Œå¦åˆ™å®ƒä¼šè¢«è½¬æ¢æˆ <code>&amp;amp</code>;ã€‚</p>
<p>æ‰€ä»¥ä½ å¦‚æœè¦åœ¨æ–‡æ¡£ä¸­æ’å…¥ä¸€ä¸ªç‰ˆæƒç¬¦å· <code>Â©</code>ï¼Œä½ å¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code>&amp;copy;
</code></pre>
<p>Markdown ä¼šä¿ç•™å®ƒä¸åŠ¨ã€‚è€Œè‹¥ä½ å†™ï¼š</p>
<pre><code>AT&amp;T
</code></pre>
<p>Markdown å°±ä¼šå°†å®ƒè½¬ä¸ºï¼š</p>
<pre><code>AT&amp;amp;T
</code></pre>
<p>ç±»ä¼¼çš„çŠ¶å†µä¹Ÿä¼šå‘ç”Ÿåœ¨ <code>&lt;</code> ç¬¦å·ä¸Šï¼Œå› ä¸º Markdown å…è®¸ <a href="#html">å…¼å®¹ HTML</a> ï¼Œå¦‚æœä½ æ˜¯æŠŠ <code>&lt;</code> ç¬¦å·ä½œä¸º HTML æ ‡ç­¾çš„å®šç•Œç¬¦ä½¿ç”¨ï¼Œé‚£ Markdown ä¹Ÿä¸ä¼šå¯¹å®ƒåšä»»ä½•è½¬æ¢ï¼Œä½†æ˜¯å¦‚æœä½ å†™ï¼š</p>
<pre><code>4 &lt; 5
</code></pre>
<p>Markdown å°†ä¼šæŠŠå®ƒè½¬æ¢ä¸ºï¼š</p>
<pre><code>4 &amp;lt; 5
</code></pre>
<p>ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œcode èŒƒå›´å†…ï¼Œä¸è®ºæ˜¯è¡Œå†…è¿˜æ˜¯åŒºå—ï¼Œ <code>&lt;</code> å’Œ <code>&amp;</code> ä¸¤ä¸ªç¬¦å·éƒ½<em>ä¸€å®š</em>ä¼šè¢«è½¬æ¢æˆ HTML å®ä½“ï¼Œè¿™é¡¹ç‰¹æ€§è®©ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨ Markdown å†™ HTML code ï¼ˆå’Œ HTML ç›¸å¯¹è€Œè¨€ï¼Œ HTML è¯­æ³•ä¸­ï¼Œä½ è¦æŠŠæ‰€æœ‰çš„ <code>&lt;</code> å’Œ <code>&amp;</code> éƒ½è½¬æ¢ä¸º HTML å®ä½“ï¼Œæ‰èƒ½åœ¨ HTML æ–‡ä»¶é‡Œé¢å†™å‡º HTML codeã€‚ï¼‰</p>
<hr>
<h2 id="block">åŒºå—å…ƒç´ </h2>

<h3 id="p">æ®µè½å’Œæ¢è¡Œ</h3>
ä¸€ä¸ª Markdown æ®µè½æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¿ç»­çš„æ–‡æœ¬è¡Œç»„æˆï¼Œå®ƒçš„å‰åè¦æœ‰ä¸€ä¸ªä»¥ä¸Šçš„ç©ºè¡Œï¼ˆç©ºè¡Œçš„å®šä¹‰æ˜¯æ˜¾ç¤ºä¸Šçœ‹èµ·æ¥åƒæ˜¯ç©ºçš„ï¼Œä¾¿ä¼šè¢«è§†ä¸ºç©ºè¡Œã€‚æ¯”æ–¹è¯´ï¼Œè‹¥æŸä¸€è¡ŒåªåŒ…å«ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ï¼Œåˆ™è¯¥è¡Œä¹Ÿä¼šè¢«è§†ä¸ºç©ºè¡Œï¼‰ã€‚æ™®é€šæ®µè½ä¸è¯¥ç”¨ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦æ¥ç¼©è¿›ã€‚

<p>ã€Œç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¿ç»­çš„æ–‡æœ¬è¡Œç»„æˆã€è¿™å¥è¯å…¶å®æš—ç¤ºäº† Markdown å…è®¸æ®µè½å†…çš„å¼ºè¿«æ¢è¡Œï¼ˆæ’å…¥æ¢è¡Œç¬¦ï¼‰ï¼Œè¿™ä¸ªç‰¹æ€§å’Œå…¶ä»–å¤§éƒ¨åˆ†çš„ text-to-HTML æ ¼å¼ä¸ä¸€æ ·ï¼ˆåŒ…æ‹¬ Movable Type çš„ã€ŒConvert Line Breaksã€é€‰é¡¹ï¼‰ï¼Œå…¶å®ƒçš„æ ¼å¼ä¼šæŠŠæ¯ä¸ªæ¢è¡Œç¬¦éƒ½è½¬æˆ <code>&lt;br /&gt;</code> æ ‡ç­¾ã€‚</p>
<p>å¦‚æœä½ <em>ç¡®å®</em>æƒ³è¦ä¾èµ– Markdown æ¥æ’å…¥ <code>&lt;br /&gt;</code> æ ‡ç­¾çš„è¯ï¼Œåœ¨æ’å…¥å¤„å…ˆæŒ‰å…¥ä¸¤ä¸ªä»¥ä¸Šçš„ç©ºæ ¼ç„¶åå›è½¦ã€‚</p>
<p>çš„ç¡®ï¼Œéœ€è¦å¤šè´¹ç‚¹äº‹ï¼ˆå¤šåŠ ç©ºæ ¼ï¼‰æ¥äº§ç”Ÿ <code>&lt;br /&gt;</code> ï¼Œä½†æ˜¯ç®€å•åœ°ã€Œæ¯ä¸ªæ¢è¡Œéƒ½è½¬æ¢ä¸º <code>&lt;br /&gt;</code>ã€çš„æ–¹æ³•åœ¨ Markdown ä¸­å¹¶ä¸é€‚åˆï¼Œ Markdown ä¸­ email å¼çš„ <a href="#blockquote">åŒºå—å¼•ç”¨</a> å’Œå¤šæ®µè½çš„ <a href="#list">åˆ—è¡¨</a> åœ¨ä½¿ç”¨æ¢è¡Œæ¥æ’ç‰ˆçš„æ—¶å€™ï¼Œä¸ä½†æ›´å¥½ç”¨ï¼Œè¿˜æ›´æ–¹ä¾¿é˜…è¯»ã€‚</p>
<h3 id="header">æ ‡é¢˜</h3>
Markdown æ”¯æŒä¸¤ç§æ ‡é¢˜çš„è¯­æ³•ï¼Œç±» [Setext] [1] å’Œç±» [atx] [2] å½¢å¼ã€‚

<p>ç±» Setext å½¢å¼æ˜¯ç”¨åº•çº¿çš„å½¢å¼ï¼Œåˆ©ç”¨ <code>=</code> ï¼ˆæœ€é«˜é˜¶æ ‡é¢˜ï¼‰å’Œ <code>-</code> ï¼ˆç¬¬äºŒé˜¶æ ‡é¢˜ï¼‰ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>This is an H1
=============

This is an H2
-------------
</code></pre>
<p>ä»»ä½•æ•°é‡çš„ <code>=</code> å’Œ <code>-</code> éƒ½å¯ä»¥æœ‰æ•ˆæœã€‚</p>
<p>ç±» Atx å½¢å¼åˆ™æ˜¯åœ¨è¡Œé¦–æ’å…¥ 1 åˆ° 6 ä¸ª <code>#</code> ï¼Œå¯¹åº”åˆ°æ ‡é¢˜ 1 åˆ° 6 é˜¶ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code># è¿™æ˜¯ H1

## è¿™æ˜¯ H2

###### è¿™æ˜¯ H6
</code></pre>
<p>ä½ å¯ä»¥é€‰æ‹©æ€§åœ°ã€Œé—­åˆã€ç±» atx æ ·å¼çš„æ ‡é¢˜ï¼Œè¿™çº¯ç²¹åªæ˜¯ç¾è§‚ç”¨çš„ï¼Œè‹¥æ˜¯è§‰å¾—è¿™æ ·çœ‹èµ·æ¥æ¯”è¾ƒèˆ’é€‚ï¼Œä½ å°±å¯ä»¥åœ¨è¡Œå°¾åŠ ä¸Š <code>#</code>ï¼Œè€Œè¡Œå°¾çš„ <code>#</code> æ•°é‡ä¹Ÿä¸ç”¨å’Œå¼€å¤´ä¸€æ ·ï¼ˆè¡Œé¦–çš„äº•å­—ç¬¦æ•°é‡å†³å®šæ ‡é¢˜çš„é˜¶æ•°ï¼‰ï¼š</p>
<pre><code># è¿™æ˜¯ H1 #

## è¿™æ˜¯ H2 ##

### è¿™æ˜¯ H3 ######
</code></pre>
<h3 id="blockquote">åŒºå—å¼•ç”¨ Blockquotes</h3>
Markdown æ ‡è®°åŒºå—å¼•ç”¨æ˜¯ä½¿ç”¨ç±»ä¼¼ email ä¸­ç”¨ `>` çš„å¼•ç”¨æ–¹å¼ã€‚å¦‚æœä½ è¿˜ç†Ÿæ‚‰åœ¨ email ä¿¡ä»¶ä¸­çš„å¼•è¨€éƒ¨åˆ†ï¼Œä½ å°±çŸ¥é“æ€ä¹ˆåœ¨ Markdown æ–‡ä»¶ä¸­å»ºç«‹ä¸€ä¸ªåŒºå—å¼•ç”¨ï¼Œé‚£ä¼šçœ‹èµ·æ¥åƒæ˜¯ä½ è‡ªå·±å…ˆæ–­å¥½è¡Œï¼Œç„¶ååœ¨æ¯è¡Œçš„æœ€å‰é¢åŠ ä¸Š `>` ï¼š

<pre><code>&gt; This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,
&gt; consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.
&gt; Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.
&gt; 
&gt; Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse
&gt; id sem consectetuer libero luctus adipiscing.
</code></pre>
<p>Markdown ä¹Ÿå…è®¸ä½ å·æ‡’åªåœ¨æ•´ä¸ªæ®µè½çš„ç¬¬ä¸€è¡Œæœ€å‰é¢åŠ ä¸Š <code>&gt;</code> ï¼š</p>
<pre><code>&gt; This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,
consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.
Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.

&gt; Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse
id sem consectetuer libero luctus adipiscing.
</code></pre>
<p>åŒºå—å¼•ç”¨å¯ä»¥åµŒå¥—ï¼ˆä¾‹å¦‚ï¼šå¼•ç”¨å†…çš„å¼•ç”¨ï¼‰ï¼Œåªè¦æ ¹æ®å±‚æ¬¡åŠ ä¸Šä¸åŒæ•°é‡çš„ <code>&gt;</code> ï¼š</p>
<pre><code>&gt; This is the first level of quoting.
&gt;
&gt; &gt; This is nested blockquote.
&gt;
&gt; Back to the first level.
</code></pre>
<p>å¼•ç”¨çš„åŒºå—å†…ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„ Markdown è¯­æ³•ï¼ŒåŒ…æ‹¬æ ‡é¢˜ã€åˆ—è¡¨ã€ä»£ç åŒºå—ç­‰ï¼š</p>
<pre><code>&gt; ## è¿™æ˜¯ä¸€ä¸ªæ ‡é¢˜ã€‚
&gt; 
&gt; 1.   è¿™æ˜¯ç¬¬ä¸€è¡Œåˆ—è¡¨é¡¹ã€‚
&gt; 2.   è¿™æ˜¯ç¬¬äºŒè¡Œåˆ—è¡¨é¡¹ã€‚
&gt; 
&gt; ç»™å‡ºä¸€äº›ä¾‹å­ä»£ç ï¼š
&gt; 
&gt;     return shell_exec(&quot;echo $input | $markdown_script&quot;);
</code></pre>
<p>ä»»ä½•åƒæ ·çš„æ–‡æœ¬ç¼–è¾‘å™¨éƒ½èƒ½è½»æ¾åœ°å»ºç«‹ email å‹çš„å¼•ç”¨ã€‚ä¾‹å¦‚åœ¨ BBEdit ä¸­ï¼Œä½ å¯ä»¥é€‰å–æ–‡å­—åç„¶åä»é€‰å•ä¸­é€‰æ‹©<em>å¢åŠ å¼•ç”¨é˜¶å±‚</em>ã€‚</p>
<h3 id="list">åˆ—è¡¨</h3>
Markdown æ”¯æŒæœ‰åºåˆ—è¡¨å’Œæ— åºåˆ—è¡¨ã€‚

<p>æ— åºåˆ—è¡¨ä½¿ç”¨æ˜Ÿå·ã€åŠ å·æˆ–æ˜¯å‡å·ä½œä¸ºåˆ—è¡¨æ ‡è®°ï¼š</p>
<pre><code>*   Red
*   Green
*   Blue
</code></pre>
<p>ç­‰åŒäºï¼š</p>
<pre><code>+   Red
+   Green
+   Blue
</code></pre>
<p>ä¹Ÿç­‰åŒäºï¼š</p>
<pre><code>-   Red
-   Green
-   Blue
</code></pre>
<p>æœ‰åºåˆ—è¡¨åˆ™ä½¿ç”¨æ•°å­—æ¥ç€ä¸€ä¸ªè‹±æ–‡å¥ç‚¹ï¼š</p>
<pre><code>1.  Bird
2.  McHale
3.  Parish
</code></pre>
<p>å¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œä½ åœ¨åˆ—è¡¨æ ‡è®°ä¸Šä½¿ç”¨çš„æ•°å­—å¹¶ä¸ä¼šå½±å“è¾“å‡ºçš„ HTML ç»“æœï¼Œä¸Šé¢çš„åˆ—è¡¨æ‰€äº§ç”Ÿçš„ HTML æ ‡è®°ä¸ºï¼š</p>
<pre><code>&lt;ol&gt;
&lt;li&gt;Bird&lt;/li&gt;
&lt;li&gt;McHale&lt;/li&gt;
&lt;li&gt;Parish&lt;/li&gt;
&lt;/ol&gt;
</code></pre>
<p>å¦‚æœä½ çš„åˆ—è¡¨æ ‡è®°å†™æˆï¼š</p>
<pre><code>1.  Bird
1.  McHale
1.  Parish
</code></pre>
<p>æˆ–ç”šè‡³æ˜¯ï¼š</p>
<pre><code>3. Bird
1. McHale
8. Parish
</code></pre>
<p>ä½ éƒ½ä¼šå¾—åˆ°å®Œå…¨ç›¸åŒçš„ HTML è¾“å‡ºã€‚é‡ç‚¹åœ¨äºï¼Œä½ å¯ä»¥è®© Markdown æ–‡ä»¶çš„åˆ—è¡¨æ•°å­—å’Œè¾“å‡ºçš„ç»“æœç›¸åŒï¼Œæˆ–æ˜¯ä½ æ‡’ä¸€ç‚¹ï¼Œä½ å¯ä»¥å®Œå…¨ä¸ç”¨åœ¨æ„æ•°å­—çš„æ­£ç¡®æ€§ã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨æ‡’æƒ°çš„å†™æ³•ï¼Œå»ºè®®ç¬¬ä¸€ä¸ªé¡¹ç›®æœ€å¥½è¿˜æ˜¯ä» 1. å¼€å§‹ï¼Œå› ä¸º Markdown æœªæ¥å¯èƒ½ä¼šæ”¯æŒæœ‰åºåˆ—è¡¨çš„ start å±æ€§ã€‚</p>
<p>åˆ—è¡¨é¡¹ç›®æ ‡è®°é€šå¸¸æ˜¯æ”¾åœ¨æœ€å·¦è¾¹ï¼Œä½†æ˜¯å…¶å®ä¹Ÿå¯ä»¥ç¼©è¿›ï¼Œæœ€å¤š 3 ä¸ªç©ºæ ¼ï¼Œé¡¹ç›®æ ‡è®°åé¢åˆ™ä¸€å®šè¦æ¥ç€è‡³å°‘ä¸€ä¸ªç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦ã€‚</p>
<p>è¦è®©åˆ—è¡¨çœ‹èµ·æ¥æ›´æ¼‚äº®ï¼Œä½ å¯ä»¥æŠŠå†…å®¹ç”¨å›ºå®šçš„ç¼©è¿›æ•´ç†å¥½ï¼š</p>
<pre><code>*   Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
    Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi,
    viverra nec, fringilla in, laoreet vitae, risus.
*   Donec sit amet nisl. Aliquam semper ipsum sit amet velit.
    Suspendisse id sem consectetuer libero luctus adipiscing.
</code></pre>
<p>ä½†æ˜¯å¦‚æœä½ æ‡’ï¼Œé‚£ä¹Ÿè¡Œï¼š</p>
<pre><code>*   Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi,
viverra nec, fringilla in, laoreet vitae, risus.
*   Donec sit amet nisl. Aliquam semper ipsum sit amet velit.
Suspendisse id sem consectetuer libero luctus adipiscing.
</code></pre>
<p>å¦‚æœåˆ—è¡¨é¡¹ç›®é—´ç”¨ç©ºè¡Œåˆ†å¼€ï¼Œåœ¨è¾“å‡º HTML æ—¶ Markdown å°±ä¼šå°†é¡¹ç›®å†…å®¹ç”¨ <code>&lt;p&gt;</code><br>æ ‡ç­¾åŒ…èµ·æ¥ï¼Œä¸¾ä¾‹æ¥è¯´ï¼š</p>
<pre><code>*   Bird
*   Magic
</code></pre>
<p>ä¼šè¢«è½¬æ¢ä¸ºï¼š</p>
<pre><code>&lt;ul&gt;
&lt;li&gt;Bird&lt;/li&gt;
&lt;li&gt;Magic&lt;/li&gt;
&lt;/ul&gt;
</code></pre>
<p>ä½†æ˜¯è¿™ä¸ªï¼š</p>
<pre><code>*   Bird

*   Magic
</code></pre>
<p>ä¼šè¢«è½¬æ¢ä¸ºï¼š</p>
<pre><code>&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Bird&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Magic&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</code></pre>
<p>åˆ—è¡¨é¡¹ç›®å¯ä»¥åŒ…å«å¤šä¸ªæ®µè½ï¼Œæ¯ä¸ªé¡¹ç›®ä¸‹çš„æ®µè½éƒ½å¿…é¡»ç¼©è¿› 4 ä¸ªç©ºæ ¼æˆ–æ˜¯ 1 ä¸ªåˆ¶è¡¨ç¬¦ï¼š</p>
<pre><code>1.  This is a list item with two paragraphs. Lorem ipsum dolor
    sit amet, consectetuer adipiscing elit. Aliquam hendrerit
    mi posuere lectus.

    Vestibulum enim wisi, viverra nec, fringilla in, laoreet
    vitae, risus. Donec sit amet nisl. Aliquam semper ipsum
    sit amet velit.

2.  Suspendisse id sem consectetuer libero luctus adipiscing.
</code></pre>
<p>å¦‚æœä½ æ¯è¡Œéƒ½æœ‰ç¼©è¿›ï¼Œçœ‹èµ·æ¥ä¼šçœ‹å¥½å¾ˆå¤šï¼Œå½“ç„¶ï¼Œå†æ¬¡åœ°ï¼Œå¦‚æœä½ å¾ˆæ‡’æƒ°ï¼ŒMarkdown ä¹Ÿå…è®¸ï¼š</p>
<pre><code>*   This is a list item with two paragraphs.

    This is the second paragraph in the list item. You&#39;re
only required to indent the first line. Lorem ipsum dolor
sit amet, consectetuer adipiscing elit.

*   Another item in the same list.
</code></pre>
<p>å¦‚æœè¦åœ¨åˆ—è¡¨é¡¹ç›®å†…æ”¾è¿›å¼•ç”¨ï¼Œé‚£ <code>&gt;</code> å°±éœ€è¦ç¼©è¿›ï¼š</p>
<pre><code>*   A list item with a blockquote:

    &gt; This is a blockquote
    &gt; inside a list item.
</code></pre>
<p>å¦‚æœè¦æ”¾ä»£ç åŒºå—çš„è¯ï¼Œè¯¥åŒºå—å°±éœ€è¦ç¼©è¿›<em>ä¸¤æ¬¡</em>ï¼Œä¹Ÿå°±æ˜¯ 8 ä¸ªç©ºæ ¼æˆ–æ˜¯ 2 ä¸ªåˆ¶è¡¨ç¬¦ï¼š</p>
<pre><code>*   ä¸€åˆ—è¡¨é¡¹åŒ…å«ä¸€ä¸ªåˆ—è¡¨åŒºå—ï¼š

        &lt;ä»£ç å†™åœ¨è¿™&gt;
</code></pre>
<p>å½“ç„¶ï¼Œé¡¹ç›®åˆ—è¡¨å¾ˆå¯èƒ½ä¼šä¸å°å¿ƒäº§ç”Ÿï¼Œåƒæ˜¯ä¸‹é¢è¿™æ ·çš„å†™æ³•ï¼š</p>
<pre><code>1986. What a great season.
</code></pre>
<p>æ¢å¥è¯è¯´ï¼Œä¹Ÿå°±æ˜¯åœ¨è¡Œé¦–å‡ºç°<em>æ•°å­—-å¥ç‚¹-ç©ºç™½</em>ï¼Œè¦é¿å…è¿™æ ·çš„çŠ¶å†µï¼Œä½ å¯ä»¥åœ¨å¥ç‚¹å‰é¢åŠ ä¸Šåæ–œæ ã€‚</p>
<pre><code>1986\. What a great season.
</code></pre>
<h3 id="precode">ä»£ç åŒºå—</h3>
å’Œç¨‹åºç›¸å…³çš„å†™ä½œæˆ–æ˜¯æ ‡ç­¾è¯­è¨€åŸå§‹ç é€šå¸¸ä¼šæœ‰å·²ç»æ’ç‰ˆå¥½çš„ä»£ç åŒºå—ï¼Œé€šå¸¸è¿™äº›åŒºå—æˆ‘ä»¬å¹¶ä¸å¸Œæœ›å®ƒä»¥ä¸€èˆ¬æ®µè½æ–‡ä»¶çš„æ–¹å¼å»æ’ç‰ˆï¼Œè€Œæ˜¯ç…§åŸæ¥çš„æ ·å­æ˜¾ç¤ºï¼ŒMarkdown ä¼šç”¨ `<pre>` å’Œ `<code>` æ ‡ç­¾æ¥æŠŠä»£ç åŒºå—åŒ…èµ·æ¥ã€‚

<p>è¦åœ¨ Markdown ä¸­å»ºç«‹ä»£ç åŒºå—å¾ˆç®€å•ï¼Œåªè¦ç®€å•åœ°ç¼©è¿› 4 ä¸ªç©ºæ ¼æˆ–æ˜¯ 1 ä¸ªåˆ¶è¡¨ç¬¦å°±å¯ä»¥ï¼Œä¾‹å¦‚ï¼Œä¸‹é¢çš„è¾“å…¥ï¼š</p>
<pre><code>è¿™æ˜¯ä¸€ä¸ªæ™®é€šæ®µè½ï¼š

    è¿™æ˜¯ä¸€ä¸ªä»£ç åŒºå—ã€‚
</code></pre>
<p>Markdown ä¼šè½¬æ¢æˆï¼š</p>
<pre><code>&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæ™®é€šæ®µè½ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;è¿™æ˜¯ä¸€ä¸ªä»£ç åŒºå—ã€‚
&lt;/code&gt;&lt;/pre&gt;
</code></pre>
<p>è¿™ä¸ªæ¯è¡Œä¸€é˜¶çš„ç¼©è¿›ï¼ˆ4 ä¸ªç©ºæ ¼æˆ–æ˜¯ 1 ä¸ªåˆ¶è¡¨ç¬¦ï¼‰ï¼Œéƒ½ä¼šè¢«ç§»é™¤ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>Here is an example of AppleScript:

    tell application &quot;Foo&quot;
        beep
    end tell
</code></pre>
<p>ä¼šè¢«è½¬æ¢ä¸ºï¼š</p>
<pre><code>&lt;p&gt;Here is an example of AppleScript:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;tell application &quot;Foo&quot;
    beep
end tell
&lt;/code&gt;&lt;/pre&gt;
</code></pre>
<p>ä¸€ä¸ªä»£ç åŒºå—ä¼šä¸€ç›´æŒç»­åˆ°æ²¡æœ‰ç¼©è¿›çš„é‚£ä¸€è¡Œï¼ˆæˆ–æ˜¯æ–‡ä»¶ç»“å°¾ï¼‰ã€‚</p>
<p>åœ¨ä»£ç åŒºå—é‡Œé¢ï¼Œ <code>&amp;</code> ã€ <code>&lt;</code> å’Œ <code>&gt;</code> ä¼šè‡ªåŠ¨è½¬æˆ HTML å®ä½“ï¼Œè¿™æ ·çš„æ–¹å¼è®©ä½ éå¸¸å®¹æ˜“ä½¿ç”¨ Markdown æ’å…¥èŒƒä¾‹ç”¨çš„ HTML åŸå§‹ç ï¼Œåªéœ€è¦å¤åˆ¶è´´ä¸Šï¼Œå†åŠ ä¸Šç¼©è¿›å°±å¯ä»¥äº†ï¼Œå‰©ä¸‹çš„ Markdown éƒ½ä¼šå¸®ä½ å¤„ç†ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>    &lt;div class=&quot;footer&quot;&gt;
        &amp;copy; 2004 Foo Corporation
    &lt;/div&gt;
</code></pre>
<p>ä¼šè¢«è½¬æ¢ä¸ºï¼š</p>
<pre><code>&lt;pre&gt;&lt;code&gt;&amp;lt;div class=&quot;footer&quot;&amp;gt;
    &amp;amp;copy; 2004 Foo Corporation
&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
</code></pre>
<p>ä»£ç åŒºå—ä¸­ï¼Œä¸€èˆ¬çš„ Markdown è¯­æ³•ä¸ä¼šè¢«è½¬æ¢ï¼Œåƒæ˜¯æ˜Ÿå·ä¾¿åªæ˜¯æ˜Ÿå·ï¼Œè¿™è¡¨ç¤ºä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ä»¥ Markdown è¯­æ³•æ’°å†™ Markdown è¯­æ³•ç›¸å…³çš„æ–‡ä»¶ã€‚</p>
<h3 id="hr">åˆ†éš”çº¿</h3>
ä½ å¯ä»¥åœ¨ä¸€è¡Œä¸­ç”¨ä¸‰ä¸ªä»¥ä¸Šçš„æ˜Ÿå·ã€å‡å·ã€åº•çº¿æ¥å»ºç«‹ä¸€ä¸ªåˆ†éš”çº¿ï¼Œè¡Œå†…ä¸èƒ½æœ‰å…¶ä»–ä¸œè¥¿ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨æ˜Ÿå·æˆ–æ˜¯å‡å·ä¸­é—´æ’å…¥ç©ºæ ¼ã€‚ä¸‹é¢æ¯ç§å†™æ³•éƒ½å¯ä»¥å»ºç«‹åˆ†éš”çº¿ï¼š

<pre><code>* * *

***

*****

- - -

---------------------------------------
</code></pre>
<hr>
<h2 id="span">åŒºæ®µå…ƒç´ </h2>
<h3 id="link">é“¾æ¥</h3>
Markdown æ”¯æŒä¸¤ç§å½¢å¼çš„é“¾æ¥è¯­æ³•ï¼š *è¡Œå†…å¼*å’Œ*å‚è€ƒå¼*ä¸¤ç§å½¢å¼ã€‚

<p>ä¸ç®¡æ˜¯å“ªä¸€ç§ï¼Œé“¾æ¥æ–‡å­—éƒ½æ˜¯ç”¨ [æ–¹æ‹¬å·] æ¥æ ‡è®°ã€‚</p>
<p>è¦å»ºç«‹ä¸€ä¸ª<em>è¡Œå†…å¼</em>çš„é“¾æ¥ï¼Œåªè¦åœ¨æ–¹å—æ‹¬å·åé¢ç´§æ¥ç€åœ†æ‹¬å·å¹¶æ’å…¥ç½‘å€é“¾æ¥å³å¯ï¼Œå¦‚æœä½ è¿˜æƒ³è¦åŠ ä¸Šé“¾æ¥çš„ title æ–‡å­—ï¼Œåªè¦åœ¨ç½‘å€åé¢ï¼Œç”¨åŒå¼•å·æŠŠ title æ–‡å­—åŒ…èµ·æ¥å³å¯ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>This is [an example](http://example.com/ &quot;Title&quot;) inline link.

[This link](http://example.net/) has no title attribute.
</code></pre>
<p>ä¼šäº§ç”Ÿï¼š</p>
<pre><code>&lt;p&gt;This is &lt;a href=&quot;http://example.com/&quot; title=&quot;Title&quot;&gt;
an example&lt;/a&gt; inline link.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://example.net/&quot;&gt;This link&lt;/a&gt; has no
title attribute.&lt;/p&gt;
</code></pre>
<p>å¦‚æœä½ æ˜¯è¦é“¾æ¥åˆ°åŒæ ·ä¸»æœºçš„èµ„æºï¼Œä½ å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼š</p>
<pre><code>See my [About](/about/) page for details.   
</code></pre>
<p><em>å‚è€ƒå¼</em>çš„é“¾æ¥æ˜¯åœ¨é“¾æ¥æ–‡å­—çš„æ‹¬å·åé¢å†æ¥ä¸Šå¦ä¸€ä¸ªæ–¹æ‹¬å·ï¼Œè€Œåœ¨ç¬¬äºŒä¸ªæ–¹æ‹¬å·é‡Œé¢è¦å¡«å…¥ç”¨ä»¥è¾¨è¯†é“¾æ¥çš„æ ‡è®°ï¼š</p>
<pre><code>This is [an example][id] reference-style link.
</code></pre>
<p>ä½ ä¹Ÿå¯ä»¥é€‰æ‹©æ€§åœ°åœ¨ä¸¤ä¸ªæ–¹æ‹¬å·ä¸­é—´åŠ ä¸Šä¸€ä¸ªç©ºæ ¼ï¼š</p>
<pre><code>This is [an example] [id] reference-style link.
</code></pre>
<p>æ¥ç€ï¼Œåœ¨æ–‡ä»¶çš„ä»»æ„å¤„ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªæ ‡è®°çš„é“¾æ¥å†…å®¹å®šä¹‰å‡ºæ¥ï¼š</p>
<pre><code>[id]: http://example.com/  &quot;Optional Title Here&quot;
</code></pre>
<p>é“¾æ¥å†…å®¹å®šä¹‰çš„å½¢å¼ä¸ºï¼š</p>
<ul>
<li>æ–¹æ‹¬å·ï¼ˆå‰é¢å¯ä»¥é€‰æ‹©æ€§åœ°åŠ ä¸Šè‡³å¤šä¸‰ä¸ªç©ºæ ¼æ¥ç¼©è¿›ï¼‰ï¼Œé‡Œé¢è¾“å…¥é“¾æ¥æ–‡å­—</li>
<li>æ¥ç€ä¸€ä¸ªå†’å·</li>
<li>æ¥ç€ä¸€ä¸ªä»¥ä¸Šçš„ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦</li>
<li>æ¥ç€é“¾æ¥çš„ç½‘å€</li>
<li>é€‰æ‹©æ€§åœ°æ¥ç€ title å†…å®¹ï¼Œå¯ä»¥ç”¨å•å¼•å·ã€åŒå¼•å·æˆ–æ˜¯æ‹¬å¼§åŒ…ç€</li>
</ul>
<p>ä¸‹é¢è¿™ä¸‰ç§é“¾æ¥çš„å®šä¹‰éƒ½æ˜¯ç›¸åŒï¼š</p>
<pre><code>[foo]: http://example.com/  &quot;Optional Title Here&quot;
[foo]: http://example.com/  &#39;Optional Title Here&#39;
[foo]: http://example.com/  (Optional Title Here)
</code></pre>
<p><strong>è¯·æ³¨æ„ï¼š</strong>æœ‰ä¸€ä¸ªå·²çŸ¥çš„é—®é¢˜æ˜¯ Markdown.pl 1.0.1 ä¼šå¿½ç•¥å•å¼•å·åŒ…èµ·æ¥çš„é“¾æ¥ titleã€‚</p>
<p>é“¾æ¥ç½‘å€ä¹Ÿå¯ä»¥ç”¨å°–æ‹¬å·åŒ…èµ·æ¥ï¼š</p>
<pre><code>[id]: &lt;http://example.com/&gt;  &quot;Optional Title Here&quot;
</code></pre>
<p>ä½ ä¹Ÿå¯ä»¥æŠŠ title å±æ€§æ”¾åˆ°ä¸‹ä¸€è¡Œï¼Œä¹Ÿå¯ä»¥åŠ ä¸€äº›ç¼©è¿›ï¼Œè‹¥ç½‘å€å¤ªé•¿çš„è¯ï¼Œè¿™æ ·ä¼šæ¯”è¾ƒå¥½çœ‹ï¼š</p>
<pre><code>[id]: http://example.com/longish/path/to/resource/here
    &quot;Optional Title Here&quot;
</code></pre>
<p>ç½‘å€å®šä¹‰åªæœ‰åœ¨äº§ç”Ÿé“¾æ¥çš„æ—¶å€™ç”¨åˆ°ï¼Œå¹¶ä¸ä¼šç›´æ¥å‡ºç°åœ¨æ–‡ä»¶ä¹‹ä¸­ã€‚</p>
<p>é“¾æ¥è¾¨åˆ«æ ‡ç­¾å¯ä»¥æœ‰å­—æ¯ã€æ•°å­—ã€ç©ºç™½å’Œæ ‡ç‚¹ç¬¦å·ï¼Œä½†æ˜¯å¹¶<em>ä¸</em>åŒºåˆ†å¤§å°å†™ï¼Œå› æ­¤ä¸‹é¢ä¸¤ä¸ªé“¾æ¥æ˜¯ä¸€æ ·çš„ï¼š</p>
<pre><code>[link text][a]
[link text][A]
</code></pre>
<p><em>éšå¼é“¾æ¥æ ‡è®°</em>åŠŸèƒ½è®©ä½ å¯ä»¥çœç•¥æŒ‡å®šé“¾æ¥æ ‡è®°ï¼Œè¿™ç§æƒ…å½¢ä¸‹ï¼Œé“¾æ¥æ ‡è®°ä¼šè§†ä¸ºç­‰åŒäºé“¾æ¥æ–‡å­—ï¼Œè¦ç”¨éšå¼é“¾æ¥æ ‡è®°åªè¦åœ¨é“¾æ¥æ–‡å­—åé¢åŠ ä¸Šä¸€ä¸ªç©ºçš„æ–¹æ‹¬å·ï¼Œå¦‚æœä½ è¦è®© â€œGoogleâ€ é“¾æ¥åˆ° google.comï¼Œä½ å¯ä»¥ç®€åŒ–æˆï¼š</p>
<pre><code>[Google][]
</code></pre>
<p>ç„¶åå®šä¹‰é“¾æ¥å†…å®¹ï¼š</p>
<pre><code>[Google]: http://google.com/
</code></pre>
<p>ç”±äºé“¾æ¥æ–‡å­—å¯èƒ½åŒ…å«ç©ºç™½ï¼Œæ‰€ä»¥è¿™ç§ç®€åŒ–å‹çš„æ ‡è®°å†…ä¹Ÿè®¸åŒ…å«å¤šä¸ªå•è¯ï¼š</p>
<pre><code>Visit [Daring Fireball][] for more information.
</code></pre>
<p>ç„¶åæ¥ç€å®šä¹‰é“¾æ¥ï¼š</p>
<pre><code>[Daring Fireball]: http://daringfireball.net/
</code></pre>
<p>é“¾æ¥çš„å®šä¹‰å¯ä»¥æ”¾åœ¨æ–‡ä»¶ä¸­çš„ä»»ä½•ä¸€ä¸ªåœ°æ–¹ï¼Œæˆ‘æ¯”è¾ƒåå¥½ç›´æ¥æ”¾åœ¨é“¾æ¥å‡ºç°æ®µè½çš„åé¢ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠå®ƒæ”¾åœ¨æ–‡ä»¶æœ€åé¢ï¼Œå°±åƒæ˜¯æ³¨è§£ä¸€æ ·ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå‚è€ƒå¼é“¾æ¥çš„èŒƒä¾‹ï¼š</p>
<pre><code>I get 10 times more traffic from [Google] [1] than from
[Yahoo] [2] or [MSN] [3].

  [1]: http://google.com/        &quot;Google&quot;
  [2]: http://search.yahoo.com/  &quot;Yahoo Search&quot;
  [3]: http://search.msn.com/    &quot;MSN Search&quot;
</code></pre>
<p>å¦‚æœæ”¹æˆç”¨é“¾æ¥åç§°çš„æ–¹å¼å†™ï¼š</p>
<pre><code>I get 10 times more traffic from [Google][] than from
[Yahoo][] or [MSN][].

  [google]: http://google.com/        &quot;Google&quot;
  [yahoo]:  http://search.yahoo.com/  &quot;Yahoo Search&quot;
  [msn]:    http://search.msn.com/    &quot;MSN Search&quot;
</code></pre>
<p>ä¸Šé¢ä¸¤ç§å†™æ³•éƒ½ä¼šäº§ç”Ÿä¸‹é¢çš„ HTMLã€‚</p>
<pre><code>&lt;p&gt;I get 10 times more traffic from &lt;a href=&quot;http://google.com/&quot;
title=&quot;Google&quot;&gt;Google&lt;/a&gt; than from
&lt;a href=&quot;http://search.yahoo.com/&quot; title=&quot;Yahoo Search&quot;&gt;Yahoo&lt;/a&gt;
or &lt;a href=&quot;http://search.msn.com/&quot; title=&quot;MSN Search&quot;&gt;MSN&lt;/a&gt;.&lt;/p&gt;
</code></pre>
<p>ä¸‹é¢æ˜¯ç”¨è¡Œå†…å¼å†™çš„åŒæ ·ä¸€æ®µå†…å®¹çš„ Markdown æ–‡ä»¶ï¼Œæä¾›ä½œä¸ºæ¯”è¾ƒä¹‹ç”¨ï¼š</p>
<pre><code>I get 10 times more traffic from [Google](http://google.com/ &quot;Google&quot;)
than from [Yahoo](http://search.yahoo.com/ &quot;Yahoo Search&quot;) or
[MSN](http://search.msn.com/ &quot;MSN Search&quot;).
</code></pre>
<p>å‚è€ƒå¼çš„é“¾æ¥å…¶å®é‡ç‚¹ä¸åœ¨äºå®ƒæ¯”è¾ƒå¥½å†™ï¼Œè€Œæ˜¯å®ƒæ¯”è¾ƒå¥½è¯»ï¼Œæ¯”è¾ƒä¸€ä¸‹ä¸Šé¢çš„èŒƒä¾‹ï¼Œä½¿ç”¨å‚è€ƒå¼çš„æ–‡ç« æœ¬èº«åªæœ‰ 81 ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯ç”¨è¡Œå†…å½¢å¼çš„å´ä¼šå¢åŠ åˆ° 176 ä¸ªå­—å…ƒï¼Œå¦‚æœæ˜¯ç”¨çº¯ HTML æ ¼å¼æ¥å†™ï¼Œä¼šæœ‰ 234 ä¸ªå­—å…ƒï¼Œåœ¨ HTML æ ¼å¼ä¸­ï¼Œæ ‡ç­¾æ¯”æ–‡æœ¬è¿˜è¦å¤šã€‚</p>
<p>ä½¿ç”¨ Markdown çš„å‚è€ƒå¼é“¾æ¥ï¼Œå¯ä»¥è®©æ–‡ä»¶æ›´åƒæ˜¯æµè§ˆå™¨æœ€åäº§ç”Ÿçš„ç»“æœï¼Œè®©ä½ å¯ä»¥æŠŠä¸€äº›æ ‡è®°ç›¸å…³çš„å…ƒæ•°æ®ç§»åˆ°æ®µè½æ–‡å­—ä¹‹å¤–ï¼Œä½ å°±å¯ä»¥å¢åŠ é“¾æ¥è€Œä¸è®©æ–‡ç« çš„é˜…è¯»æ„Ÿè§‰è¢«æ‰“æ–­ã€‚</p>
<h3 id="em">å¼ºè°ƒ</h3>
Markdown ä½¿ç”¨æ˜Ÿå·ï¼ˆ`*`ï¼‰å’Œåº•çº¿ï¼ˆ`_`ï¼‰ä½œä¸ºæ ‡è®°å¼ºè°ƒå­—è¯çš„ç¬¦å·ï¼Œè¢« `*` æˆ– `_` åŒ…å›´çš„å­—è¯ä¼šè¢«è½¬æˆç”¨ `<em>` æ ‡ç­¾åŒ…å›´ï¼Œç”¨ä¸¤ä¸ª `*` æˆ– `_` åŒ…èµ·æ¥çš„è¯ï¼Œåˆ™ä¼šè¢«è½¬æˆ `<strong>`ï¼Œä¾‹å¦‚ï¼š

<pre><code>*single asterisks*

_single underscores_

**double asterisks**

__double underscores__
</code></pre>
<p>ä¼šè½¬æˆï¼š</p>
<pre><code>&lt;em&gt;single asterisks&lt;/em&gt;

&lt;em&gt;single underscores&lt;/em&gt;

&lt;strong&gt;double asterisks&lt;/strong&gt;

&lt;strong&gt;double underscores&lt;/strong&gt;
</code></pre>
<p>ä½ å¯ä»¥éšä¾¿ç”¨ä½ å–œæ¬¢çš„æ ·å¼ï¼Œå”¯ä¸€çš„é™åˆ¶æ˜¯ï¼Œä½ ç”¨ä»€ä¹ˆç¬¦å·å¼€å¯æ ‡ç­¾ï¼Œå°±è¦ç”¨ä»€ä¹ˆç¬¦å·ç»“æŸã€‚</p>
<p>å¼ºè°ƒä¹Ÿå¯ä»¥ç›´æ¥æ’åœ¨æ–‡å­—ä¸­é—´ï¼š</p>
<pre><code>un*frigging*believable
</code></pre>
<p>ä½†æ˜¯<strong>å¦‚æœä½ çš„ <code>*</code> å’Œ <code>_</code> ä¸¤è¾¹éƒ½æœ‰ç©ºç™½çš„è¯ï¼Œå®ƒä»¬å°±åªä¼šè¢«å½“æˆæ™®é€šçš„ç¬¦å·</strong>ã€‚</p>
<p>å¦‚æœè¦åœ¨æ–‡å­—å‰åç›´æ¥æ’å…¥æ™®é€šçš„æ˜Ÿå·æˆ–åº•çº¿ï¼Œä½ å¯ä»¥ç”¨åæ–œçº¿ï¼š</p>
<pre><code>\*this text is surrounded by literal asterisks\*
</code></pre>
<h3 id="code">ä»£ç </h3>
å¦‚æœè¦æ ‡è®°ä¸€å°æ®µè¡Œå†…ä»£ç ï¼Œä½ å¯ä»¥ç”¨åå¼•å·æŠŠå®ƒåŒ…èµ·æ¥ï¼ˆ`` ` ``ï¼‰ï¼Œä¾‹å¦‚ï¼š

<pre><code>Use the `printf()` function.
</code></pre>
<p>ä¼šäº§ç”Ÿï¼š</p>
<pre><code>&lt;p&gt;Use the &lt;code&gt;printf()&lt;/code&gt; function.&lt;/p&gt;
</code></pre>
<p>å¦‚æœè¦åœ¨ä»£ç åŒºæ®µå†…æ’å…¥åå¼•å·ï¼Œä½ å¯ä»¥ç”¨å¤šä¸ªåå¼•å·æ¥å¼€å¯å’Œç»“æŸä»£ç åŒºæ®µï¼š</p>
<pre><code>``There is a literal backtick (`) here.``
</code></pre>
<p>è¿™æ®µè¯­æ³•ä¼šäº§ç”Ÿï¼š</p>
<pre><code>&lt;p&gt;&lt;code&gt;There is a literal backtick (`) here.&lt;/code&gt;&lt;/p&gt;
</code></pre>
<p>ä»£ç åŒºæ®µçš„èµ·å§‹å’Œç»“æŸç«¯éƒ½å¯ä»¥æ”¾å…¥ä¸€ä¸ªç©ºç™½ï¼Œèµ·å§‹ç«¯åé¢ä¸€ä¸ªï¼Œç»“æŸç«¯å‰é¢ä¸€ä¸ªï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨åŒºæ®µçš„ä¸€å¼€å§‹å°±æ’å…¥åå¼•å·ï¼š</p>
<pre><code>A single backtick in a code span: `` ` ``

A backtick-delimited string in a code span: `` `foo` ``
</code></pre>
<p>ä¼šäº§ç”Ÿï¼š</p>
<pre><code>&lt;p&gt;A single backtick in a code span: &lt;code&gt;`&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;A backtick-delimited string in a code span: &lt;code&gt;`foo`&lt;/code&gt;&lt;/p&gt;
</code></pre>
<p>åœ¨ä»£ç åŒºæ®µå†…ï¼Œ<code>&amp;</code> å’Œå°–æ‹¬å·<strong>éƒ½</strong>ä¼šè¢«è‡ªåŠ¨åœ°è½¬æˆ HTML å®ä½“ï¼Œè¿™ä½¿å¾—æ’å…¥ HTML åŸå§‹ç å˜å¾—å¾ˆå®¹æ˜“ï¼ŒMarkdown ä¼šæŠŠä¸‹é¢è¿™æ®µï¼š</p>
<pre><code>Please don&#39;t use any `&lt;blink&gt;` tags.
</code></pre>
<p>è½¬ä¸ºï¼š</p>
<pre><code>&lt;p&gt;Please don&#39;t use any &lt;code&gt;&amp;lt;blink&amp;gt;&lt;/code&gt; tags.&lt;/p&gt;
</code></pre>
<p>ä½ ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code>`&amp;#8212;` is the decimal-encoded equivalent of `&amp;mdash;`.
</code></pre>
<p>ä»¥äº§ç”Ÿï¼š</p>
<pre><code>&lt;p&gt;&lt;code&gt;&amp;amp;#8212;&lt;/code&gt; is the decimal-encoded
equivalent of &lt;code&gt;&amp;amp;mdash;&lt;/code&gt;.&lt;/p&gt;
</code></pre>
<h3 id="img">å›¾ç‰‡</h3>
å¾ˆæ˜æ˜¾åœ°ï¼Œè¦åœ¨çº¯æ–‡å­—åº”ç”¨ä¸­è®¾è®¡ä¸€ä¸ªã€Œè‡ªç„¶ã€çš„è¯­æ³•æ¥æ’å…¥å›¾ç‰‡æ˜¯æœ‰ä¸€å®šéš¾åº¦çš„ã€‚

<p>Markdown ä½¿ç”¨ä¸€ç§å’Œé“¾æ¥å¾ˆç›¸ä¼¼çš„è¯­æ³•æ¥æ ‡è®°å›¾ç‰‡ï¼ŒåŒæ ·ä¹Ÿå…è®¸ä¸¤ç§æ ·å¼ï¼š <em>è¡Œå†…å¼</em>å’Œ<em>å‚è€ƒå¼</em>ã€‚</p>
<p>è¡Œå†…å¼çš„å›¾ç‰‡è¯­æ³•çœ‹èµ·æ¥åƒæ˜¯ï¼š</p>
<pre><code>![Alt text](/path/to/img.jpg)

![Alt text](/path/to/img.jpg &quot;Optional title&quot;)
</code></pre>
<p>è¯¦ç»†å™è¿°å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä¸€ä¸ªæƒŠå¹å· <code>!</code></li>
<li>æ¥ç€ä¸€ä¸ªæ–¹æ‹¬å·ï¼Œé‡Œé¢æ”¾ä¸Šå›¾ç‰‡çš„æ›¿ä»£æ–‡å­—</li>
<li>æ¥ç€ä¸€ä¸ªæ™®é€šæ‹¬å·ï¼Œé‡Œé¢æ”¾ä¸Šå›¾ç‰‡çš„ç½‘å€ï¼Œæœ€åè¿˜å¯ä»¥ç”¨å¼•å·åŒ…ä½å¹¶åŠ ä¸Š<br>é€‰æ‹©æ€§çš„ â€˜titleâ€™ æ–‡å­—ã€‚</li>
</ul>
<p>å‚è€ƒå¼çš„å›¾ç‰‡è¯­æ³•åˆ™é•¿å¾—åƒè¿™æ ·ï¼š</p>
<pre><code>![Alt text][id]
</code></pre>
<p>ã€Œidã€æ˜¯å›¾ç‰‡å‚è€ƒçš„åç§°ï¼Œå›¾ç‰‡å‚è€ƒçš„å®šä¹‰æ–¹å¼åˆ™å’Œè¿ç»“å‚è€ƒä¸€æ ·ï¼š</p>
<pre><code>[id]: url/to/image  &quot;Optional title attribute&quot;
</code></pre>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œ Markdown è¿˜æ²¡æœ‰åŠæ³•æŒ‡å®šå›¾ç‰‡çš„å®½é«˜ï¼Œå¦‚æœä½ éœ€è¦çš„è¯ï¼Œä½ å¯ä»¥ä½¿ç”¨æ™®é€šçš„ <code>&lt;img&gt;</code> æ ‡ç­¾ã€‚</p>
<hr>
<h2 id="misc">å…¶å®ƒ</h2>
<h3 id="autolink">è‡ªåŠ¨é“¾æ¥</h3>
Markdown æ”¯æŒä»¥æ¯”è¾ƒç®€çŸ­çš„è‡ªåŠ¨é“¾æ¥å½¢å¼æ¥å¤„ç†ç½‘å€å’Œç”µå­é‚®ä»¶ä¿¡ç®±ï¼Œåªè¦æ˜¯ç”¨å°–æ‹¬å·åŒ…èµ·æ¥ï¼Œ Markdown å°±ä¼šè‡ªåŠ¨æŠŠå®ƒè½¬æˆé“¾æ¥ã€‚ä¸€èˆ¬ç½‘å€çš„é“¾æ¥æ–‡å­—å°±å’Œé“¾æ¥åœ°å€ä¸€æ ·ï¼Œä¾‹å¦‚ï¼š

<pre><code>&lt;http://example.com/&gt;
</code></pre>
<p>Markdown ä¼šè½¬ä¸ºï¼š</p>
<pre><code>&lt;a href=&quot;http://example.com/&quot;&gt;http://example.com/&lt;/a&gt;
</code></pre>
<p>é‚®å€çš„è‡ªåŠ¨é“¾æ¥ä¹Ÿå¾ˆç±»ä¼¼ï¼Œåªæ˜¯ Markdown ä¼šå…ˆåšä¸€ä¸ªç¼–ç è½¬æ¢çš„è¿‡ç¨‹ï¼ŒæŠŠæ–‡å­—å­—ç¬¦è½¬æˆ 16 è¿›ä½ç çš„ HTML å®ä½“ï¼Œè¿™æ ·çš„æ ¼å¼å¯ä»¥ç³Šå¼„ä¸€äº›ä¸å¥½çš„é‚®å€æ”¶é›†æœºå™¨äººï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>&lt;address@example.com&gt;
</code></pre>
<p>Markdown ä¼šè½¬æˆï¼š</p>
<pre><code>&lt;a href=&quot;&amp;#x6D;&amp;#x61;i&amp;#x6C;&amp;#x74;&amp;#x6F;:&amp;#x61;&amp;#x64;&amp;#x64;&amp;#x72;&amp;#x65;
&amp;#115;&amp;#115;&amp;#64;&amp;#101;&amp;#120;&amp;#x61;&amp;#109;&amp;#x70;&amp;#x6C;e&amp;#x2E;&amp;#99;&amp;#111;
&amp;#109;&quot;&gt;&amp;#x61;&amp;#x64;&amp;#x64;&amp;#x72;&amp;#x65;&amp;#115;&amp;#115;&amp;#64;&amp;#101;&amp;#120;&amp;#x61;
&amp;#109;&amp;#x70;&amp;#x6C;e&amp;#x2E;&amp;#99;&amp;#111;&amp;#109;&lt;/a&gt;
</code></pre>
<p>åœ¨æµè§ˆå™¨é‡Œé¢ï¼Œè¿™æ®µå­—ä¸²ï¼ˆå…¶å®æ˜¯ <code>&lt;a href=&quot;mailto:address@example.com&quot;&gt;address@example.com&lt;/a&gt;</code>ï¼‰ä¼šå˜æˆä¸€ä¸ªå¯ä»¥ç‚¹å‡»çš„ã€Œ<a href="mailto:&#97;&#x64;&#100;&#114;&#101;&#x73;&#x73;&#64;&#x65;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#99;&#x6f;&#x6d;">&#97;&#x64;&#100;&#114;&#101;&#x73;&#x73;&#64;&#x65;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#99;&#x6f;&#x6d;</a>ã€é“¾æ¥ã€‚</p>
<p>ï¼ˆè¿™ç§ä½œæ³•è™½ç„¶å¯ä»¥ç³Šå¼„ä¸å°‘çš„æœºå™¨äººï¼Œä½†å¹¶ä¸èƒ½å…¨éƒ¨æŒ¡ä¸‹æ¥ï¼Œä¸è¿‡æ€»æ¯”ä»€ä¹ˆéƒ½ä¸åšå¥½äº›ã€‚ä¸ç®¡æ€æ ·ï¼Œå…¬å¼€ä½ çš„ä¿¡ç®±ç»ˆç©¶ä¼šå¼•æ¥å¹¿å‘Šä¿¡ä»¶çš„ã€‚ï¼‰</p>
<h3 id="backslash">åæ–œæ </h3>
Markdown å¯ä»¥åˆ©ç”¨åæ–œæ æ¥æ’å…¥ä¸€äº›åœ¨è¯­æ³•ä¸­æœ‰å…¶å®ƒæ„ä¹‰çš„ç¬¦å·ï¼Œä¾‹å¦‚ï¼šå¦‚æœä½ æƒ³è¦ç”¨æ˜Ÿå·åŠ åœ¨æ–‡å­—æ—è¾¹çš„æ–¹å¼æ¥åšå‡ºå¼ºè°ƒæ•ˆæœï¼ˆä½†ä¸ç”¨ `<em>` æ ‡ç­¾ï¼‰ï¼Œä½ å¯ä»¥åœ¨æ˜Ÿå·çš„å‰é¢åŠ ä¸Šåæ–œæ ï¼š

<pre><code>\*literal asterisks\*
</code></pre>
<p>Markdown æ”¯æŒä»¥ä¸‹è¿™äº›ç¬¦å·å‰é¢åŠ ä¸Šåæ–œæ æ¥å¸®åŠ©æ’å…¥æ™®é€šçš„ç¬¦å·ï¼š</p>
<pre><code>\   åæ–œçº¿
`   åå¼•å·
*   æ˜Ÿå·
_   åº•çº¿
&#123;&#125;  èŠ±æ‹¬å·
[]  æ–¹æ‹¬å·
()  æ‹¬å¼§
#   äº•å­—å·
+   åŠ å·
-   å‡å·
.   è‹±æ–‡å¥ç‚¹
!   æƒŠå¹å·
</code></pre>
<h2 id="acknowledgement">æ„Ÿè°¢</h2>
æ„Ÿè°¢ [leafy7382][] ååŠ©ç¿»è¯‘ï¼Œ[hlb][]ã€[Randylien][] å¸®å¿™æ¶¦ç¨¿ï¼Œ[ethantw][] çš„[æ±‰å­—æ ‡å‡†æ ¼å¼ãƒ»CSS Reset][]ï¼Œ [WM][] å›æŠ¥æ–‡å­—é”™è¯¯ã€‚

<p>æ„Ÿè°¢ <a href="https://github.com/fenprace">fenprace</a>ï¼Œ<a href="https://github.com/addv">addv</a>ã€‚</p>
<hr>
<h2 id="editor">Markdown å…è´¹ç¼–è¾‘å™¨</h2>
Windows å¹³å°

<ul>
<li><a href="http://markdownpad.com/">MarkdownPad</a></li>
<li><a href="http://code52.org/DownmarkerWPF/">MarkPad</a></li>
</ul>
<p>Linux å¹³å°</p>
<ul>
<li><a href="http://sourceforge.net/p/retext/home/ReText/">ReText</a></li>
</ul>
<p>Mac å¹³å°</p>
<ul>
<li><a href="http://mouapp.com/">Mou</a></li>
</ul>
<p>åœ¨çº¿ç¼–è¾‘å™¨</p>
<ul>
<li><a href="http://markable.in/">Markable.in</a></li>
<li><a href="http://dillinger.io/">Dillinger.io</a></li>
</ul>
<p>æµè§ˆå™¨æ’ä»¶</p>
<ul>
<li><a href="https://chrome.google.com/webstore/detail/oknndfeeopgpibecfjljjfanledpbkog">MaDe</a> (Chrome)</li>
</ul>
<p>é«˜çº§åº”ç”¨</p>
<ul>
<li><a href="http://www.sublimetext.com/2">Sublime Text 2</a> + <a href="http://ttscoff.github.com/MarkdownEditing/">MarkdownEditing</a> &#x2F; <a href="http://lucifr.com/2012/07/12/markdownediting-for-sublime-text-2/">æ•™ç¨‹</a></li>
</ul>
<p>*** å¦‚æœ‰æ›´å¥½çš„ Markdown å…è´¹ç¼–è¾‘å™¨æ¨èï¼Œè¯·åˆ°<a href="https://gitcafe.com/riku/Markdown-Syntax-CN/tickets/1">è¿™é‡Œåé¦ˆ</a>ï¼Œè°¢è°¢ï¼</p>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>markdown</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Remote Access to Plex via IPv6</title>
    <url>/2022/06/03/remote-access-to-plex-via-ipv6.html</url>
    <content><![CDATA[<blockquote>
<p>Public IPv4 addresses become much rarer in recent years, at the same time IPv6 grows rapidly and most ISPs have started supported it. To remote access to plex media server via IPv6, some configurations need to be setup.</p>
</blockquote>
<span id="more"></span>

<h1 id="Prerequest"><a href="#Prerequest" class="headerlink" title="Prerequest"></a>Prerequest</h1><p>This article supposes you have a custom domain, and DDNS&#x2F;DNS has been properly configured. Thus the server can be accessed directly via domain.</p>
<h1 id="Install-Plex-Media-Server"><a href="#Install-Plex-Media-Server" class="headerlink" title="Install Plex Media Server"></a>Install Plex Media Server</h1><h2 id="DEB-based-distros-Ubuntu-etc"><a href="#DEB-based-distros-Ubuntu-etc" class="headerlink" title="DEB-based distros (Ubuntu, etc.)"></a>DEB-based distros (Ubuntu, etc.)</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Add source</span></span><br><span class="line"><span class="built_in">echo</span> deb https://downloads.plex.tv/repo/deb public main | sudo <span class="built_in">tee</span> /etc/apt/sources.list.d/plexmediaserver.list</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add key</span></span><br><span class="line">curl https://downloads.plex.tv/plex-keys/PlexSign.key | sudo apt-key add -</span><br><span class="line"></span><br><span class="line"><span class="comment"># Install</span></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install plexmediaserver</span><br></pre></td></tr></table></figure>

<h2 id="RPM-based-distros-Fedora-CentOS-etc"><a href="#RPM-based-distros-Fedora-CentOS-etc" class="headerlink" title="RPM-based distros (Fedora, CentOS, etc.)"></a>RPM-based distros (Fedora, CentOS, etc.)</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/yum.repos.d/plex.repo</span><br></pre></td></tr></table></figure>

<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[PlexRepo]</span></span><br><span class="line"><span class="attr">name</span>=PlexRepo</span><br><span class="line"><span class="attr">baseurl</span>=https://downloads.plex.tv/repo/rpm/<span class="variable">$basearch</span>/</span><br><span class="line"><span class="attr">enabled</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">gpgkey</span>=https://downloads.plex.tv/plex-keys/PlexSign.key</span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo yum update</span><br><span class="line">sudo yum install plexmediaserver</span><br></pre></td></tr></table></figure>

<h1 id="Configure-Network"><a href="#Configure-Network" class="headerlink" title="Configure Network"></a>Configure Network</h1><p>Goto <strong>Settings -&gt; Network</strong></p>
<h2 id="Enable-IPv6-support-in-plex-media-server"><a href="#Enable-IPv6-support-in-plex-media-server" class="headerlink" title="Enable IPv6 support in plex media server"></a>Enable IPv6 support in plex media server</h2><img src="/2022/06/03/remote-access-to-plex-via-ipv6/enable-ipv6.png" class="">

<h2 id="Set-custom-URL"><a href="#Set-custom-URL" class="headerlink" title="Set custom URL"></a>Set custom URL</h2><p>This step is to give you access to flex media server in android app.</p>
<img src="/2022/06/03/remote-access-to-plex-via-ipv6/custom-url.png" class="">

<h2 id="Allow-insecure-connection"><a href="#Allow-insecure-connection" class="headerlink" title="Allow insecure connection"></a>Allow insecure connection</h2><p>Open Android App, Goto <strong>Settings -&gt; Advantage -&gt; Allow insecure connection</strong></p>
<p>Set to <strong>Always</strong></p>
<h1 id="Just-Play"><a href="#Just-Play" class="headerlink" title="Just Play"></a>Just Play</h1><p>Now you can either access to your flex media server via</p>
<p><strong>http:&#x2F;&#x2F;&lt;your domain&gt;:32400</strong></p>
<p>Or through Android App.</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://support.plex.tv/articles/235974187-enable-repository-updating-for-supported-linux-server-distributions/">https://support.plex.tv/articles/235974187-enable-repository-updating-for-supported-linux-server-distributions/</a></p>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>Media</tag>
        <tag>Server</tag>
      </tags>
  </entry>
  <entry>
    <title>Setup Jellyfin as Your Home Media Server</title>
    <url>/2022/02/27/setup-jellyfin-as-home-media-server.html</url>
    <content><![CDATA[<blockquote>
<p>There are mainly two ways of storing multimedia: keeping them in client, or in server. For the later option, three softwares can be chose: Plex, Emby and Jellyfin. Today letâ€™s talk about the last one â€”â€” Jellyfin.</p>
</blockquote>
<span id="more"></span>

<h1 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h1><p>We choose Jellyfin because itâ€™s the only open source solution. Actually, Emby used to be open source as well, but after the company decided to close source, some developer were get annoyed and launched the opensource version of Emby, thatâ€™s Jellyfin.</p>
<p>The main page of Jellyfin is as bellow</p>
<img src="/2022/02/27/setup-jellyfin-as-home-media-server/jellyfin.png" class="">

<h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><p>I will try to install Jelyfin on Ubuntu, but it also supports a bunch of platforms, such as Windows, Mac and Android.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install apt-transport-https</span><br><span class="line">wget -O - https://repo.jellyfin.org/jellyfin_team.gpg.key | sudo apt-key add -</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [arch=<span class="subst">$( dpkg --print-architecture )</span>] https://repo.jellyfin.org/<span class="subst">$( awk -F&#x27;=&#x27; &#x27;/^ID=/&#123; print $NF &#125;&#x27; /etc/os-release )</span> <span class="subst">$( awk -F&#x27;=&#x27; &#x27;/^VERSION_CODENAME=/&#123; print $NF &#125;&#x27; /etc/os-release )</span> main&quot;</span> | sudo <span class="built_in">tee</span> /etc/apt/sources.list.d/jellyfin.list</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install jellyfin</span><br></pre></td></tr></table></figure>

<p>Now you can access the server through <code>http://your_local_IP_address:8096</code> to finish the initial setup.</p>
<h1 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h1><h2 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h2><p>If your server has public IP address, you may want to access Jellyfin through domain rather than IP:Port.</p>
<p>And normally a server will run multi service simultaneously, then you will need a reverse proxy to route different domain to the related service. Here I will take Nginx as example.</p>
<p>The default config will only use <code>http</code> as the lack of TLS cert. Your can uncomment the related line to enable <code>https</code> to increase security.</p>
<p><code>/etc/nginx/conf.d/jellyfin.conf</code></p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Uncomment the commented sections after you have acquired a SSL Certificate</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="comment"># server_name DOMAIN_NAME;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Uncomment to redirect HTTP to HTTPS</span></span><br><span class="line">    <span class="comment"># return 301 https://$host$request_uri;</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#server &#123;</span></span><br><span class="line">    <span class="comment"># listen 443 ssl http2;</span></span><br><span class="line">    <span class="comment"># listen [::]:443 ssl http2;</span></span><br><span class="line">    <span class="attribute">server_name</span> DOMAIN_NAME;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># use a variable to store the upstream proxy</span></span><br><span class="line">    <span class="comment"># in this example we are using a hostname which is resolved via DNS</span></span><br><span class="line">    <span class="comment"># (if you aren&#x27;t using DNS remove the resolver line and change the variable to point to an IP address e.g `set $jellyfin 127.0.0.1`)</span></span><br><span class="line">    <span class="attribute">set</span> <span class="variable">$jellyfin</span> jellyfin;</span><br><span class="line">    <span class="attribute">resolver</span> <span class="number">127.0.0.1</span> valid=<span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#ssl_certificate /etc/letsencrypt/live/DOMAIN_NAME/fullchain.pem;</span></span><br><span class="line">    <span class="comment">#ssl_certificate_key /etc/letsencrypt/live/DOMAIN_NAME/privkey.pem;</span></span><br><span class="line">    <span class="comment">#include /etc/letsencrypt/options-ssl-nginx.conf;</span></span><br><span class="line">    <span class="comment">#ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;</span></span><br><span class="line">    <span class="comment">#add_header Strict-Transport-Security &quot;max-age=31536000&quot; always;</span></span><br><span class="line">    <span class="comment">#ssl_trusted_certificate /etc/letsencrypt/live/DOMAIN_NAME/chain.pem;</span></span><br><span class="line">    <span class="comment">#ssl_stapling on;</span></span><br><span class="line">    <span class="comment">#ssl_stapling_verify on;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Security / XSS Mitigation Headers</span></span><br><span class="line">    <span class="attribute">add_header</span> X-Frame-Options <span class="string">&quot;SAMEORIGIN&quot;</span>;</span><br><span class="line">    <span class="attribute">add_header</span> X-XSS-Protection <span class="string">&quot;1; mode=block&quot;</span>;</span><br><span class="line">    <span class="attribute">add_header</span> X-Content-Type-Options <span class="string">&quot;nosniff&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Content Security Policy</span></span><br><span class="line">    <span class="comment"># See: https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP</span></span><br><span class="line">    <span class="comment"># Enforces https content and restricts JS/CSS to origin</span></span><br><span class="line">    <span class="comment"># External Javascript (such as cast_sender.js for Chromecast) must be whitelisted.</span></span><br><span class="line">    <span class="comment">#add_header Content-Security-Policy &quot;default-src https: data: blob: http://image.tmdb.org; style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27;; script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; https://www.gstatic.com/cv/js/sender/v1/cast_sender.js https://www.gstatic.com/eureka/clank/95/cast_sender.js https://www.gstatic.com/eureka/clank/96/cast_sender.js https://www.gstatic.com/eureka/clank/97/cast_sender.js https://www.youtube.com blob:; worker-src &#x27;self&#x27; blob:; connect-src &#x27;self&#x27;; object-src &#x27;none&#x27;; frame-ancestors &#x27;self&#x27;&quot;;</span></span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> = / &#123;</span><br><span class="line">        <span class="attribute">return</span> <span class="number">302</span> http://<span class="variable">$host</span>/web/;</span><br><span class="line">        <span class="comment">#return 302 https://$host/web/;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="comment"># Proxy main Jellyfin traffic</span></span><br><span class="line">        <span class="attribute">proxy_pass</span> http://<span class="variable">$jellyfin</span>:8096;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Protocol <span class="variable">$scheme</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Host <span class="variable">$http_host</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Disable buffering when the nginx proxy gets very resource heavy upon streaming</span></span><br><span class="line">        <span class="attribute">proxy_buffering</span> <span class="literal">off</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># location block for /web - This is purely for aesthetics so /web/#!/ works instead of having to go to /web/index.html/#!/</span></span><br><span class="line">    <span class="section">location</span> = /web/ &#123;</span><br><span class="line">        <span class="comment"># Proxy main Jellyfin traffic</span></span><br><span class="line">        <span class="attribute">proxy_pass</span> http://<span class="variable">$jellyfin</span>:8096/web/index.html;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Protocol <span class="variable">$scheme</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Host <span class="variable">$http_host</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> /socket &#123;</span><br><span class="line">        <span class="comment"># Proxy Jellyfin Websockets traffic</span></span><br><span class="line">        <span class="attribute">proxy_pass</span> http://<span class="variable">$jellyfin</span>:8096;</span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Protocol <span class="variable">$scheme</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Host <span class="variable">$http_host</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Hardware-Acceleration"><a href="#Hardware-Acceleration" class="headerlink" title="Hardware Acceleration"></a>Hardware Acceleration</h2><p>Media server is not exactly like the file sharing server, such as samba. As the media files will be decoded on server side rather than client side.</p>
<p>This patten can be usefule when the media file can not be decoded by client. For example, Chrome can not play HEVC video. And when it happens, the server will transcode the file to a format which can be decoded by client. This process includes two routines: Decoding and Encoding.</p>
<p>Of cource these two works can be done by CPU, but as we know, CPU is not the perfect role to play such tasks, they should belong to the GPU. Then we need to enable GPU acceleration.</p>
<p>I will take Intel Quick Sync Video (QSV) as example because nearly most of home-based NAS are equipped with Intel CPU.</p>
<ul>
<li><p><strong>Install VAAPI driver</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install gpg-agent wget</span><br><span class="line">wget -qO - https://repositories.intel.com/graphics/intel-graphics.key | sudo apt-key add -</span><br><span class="line">sudo bash -c <span class="string">&quot;echo &#x27;deb [arch=amd64] https://repositories.intel.com/graphics/ubuntu focal main&#x27; &gt;&gt; /etc/apt/sources.list&quot;</span></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install intel-media-va-driver-non-free</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Add group</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo usermod -aG render jellyfin</span><br><span class="line">sudo systemctl restart jellyfin</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Check VA info</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/usr/lib/jellyfin-ffmpeg/vainfo</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Configure QSV acceleration</strong></p>
<p>Go to <code>Dashboard -&gt; Playback -&gt; Transcoding</code>, select <code>Intel Quick Sync</code>, and click <code>Save</code>.</p>
</li>
<li><p><strong>Check GPU Usage</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install intel-gpu-tools</span><br><span class="line">sudo intel_gpu_top</span><br></pre></td></tr></table></figure>

<p>Play a HEVC video on Chrome, then check if thereâ€™s any GPU usage shown up.</p>
</li>
</ul>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://jellyfin.org/downloads/">Downloads - Jellyfin: The Free Software Media System</a></p>
<p><a href="https://jellyfin.org/docs/">Home | Documentation - Jellyfin Project</a></p>
<p><a href="https://github.com/Intel-Media-SDK/MediaSDK/wiki/Intel-media-stack-on-Ubuntu">Intel media stack on Ubuntu Â· Intel-Media-SDK&#x2F;MediaSDK Wiki Â· GitHub</a></p>
<p><a href="https://askubuntu.com/questions/387594/how-to-measure-gpu-usage">software recommendation - How to measure GPU usage? - Ask Ubuntu</a></p>
<p><a href="https://github.com/linuxserver/docker-jellyfin/issues/96#issuecomment-789768141">linuxserver&#x2F;jellyfin:10.6.4-1-ls96 broke Intel Quicksync (most likely due to jellyfin-ffmpeg4.3.1-4-focal) Â· Issue #96 Â· linuxserver&#x2F;docker-jellyfin Â· GitHub</a></p>
<p><a href="https://wiki.archlinux.org/title/Hardware_video_acceleration">Hardware video acceleration - ArchWiki</a></p>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>jellyfin</tag>
        <tag>media</tag>
        <tag>server</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»æºç æ„å»ºlinux 2.6.10ç³»ç»Ÿç¯å¢ƒ</title>
    <url>/2020/08/23/setup-linux-2-6-system-from-scratch.html</url>
    <content><![CDATA[<blockquote>
<p>æœ€è¿‘æƒ³è¦é‡æ–°çœ‹ä¸€éldd3ï¼Œä»¥å‰çœ‹çš„æ—¶å€™æ€»æ˜¯ç…§ç€æ–°ç‰ˆçš„å†…æ ¸å†™ä»£ç ï¼Œç»“æœå¾ˆå¤šæ¥å£éƒ½å‘ç”Ÿäº†å˜åŒ–ï¼Œåœ¨è¿™ä¸ªé—®é¢˜ä¸Šæµªè´¹äº†ä¸å°‘æ—¶é—´ï¼Œä»¥è‡³äºæœ€åçœ‹ä¸ä¸‹å»äº†ã€‚æ‰€ä»¥è¿™æ¬¡æ‰“ç®—ä½¿ç”¨upstreamçš„linux 2.6.10æ¥åšå®éªŒï¼Œä¸€æ–¹é¢upstreamçš„å†…æ ¸æ²¡æœ‰å—åˆ°ç¬¬ä¸‰æ–¹patchçš„æ±¡æŸ“ï¼Œå¦ä¸€æ–¹é¢å¯ä»¥æŠŠå…³æ³¨ç‚¹æ”¾åœ¨å†…æ ¸çš„æ¥å£è®¾è®¡ä»¥åŠé©±åŠ¨æ¡†æ¶æœ¬èº«ã€‚æ‰€ä»¥å°±èŠ±äº†ä¸€äº›æ—¶é—´æŠŠlinux 2.6.10çš„ç³»ç»Ÿç¯å¢ƒæ­å»ºäº†å‡ºæ¥ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹æ­å»ºè¿‡ç¨‹ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="Build-kernel"><a href="#Build-kernel" class="headerlink" title="Build kernel"></a>Build kernel</h1><p>ç”±äºlinux 2.6.10æ˜¯ä¸€ä¸ªç›¸å½“å¤è€çš„å†…æ ¸ç‰ˆæœ¬ï¼Œå¥¹æ˜¯2004å¹´releaseçš„ï¼Œæƒ³è¦åœ¨2020å¹´çš„ç³»ç»Ÿä¸­ç›´æ¥ç¼–è¯‘å¥¹æ˜¯å¾ˆéš¾çš„ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾ä¸€ä¸ªä¸å¥¹releaseæ—¶é—´æ¥è¿‘çš„å‘è¡Œç‰ˆï¼Œè¿™é‡Œæˆ‘é€‰æ‹©äº†ubuntu 5.04çš„Docker containerï¼Œå…³äºå¦‚ä½•åˆ¶ä½œè¿™æ ·çš„Docker imageï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="https://blog.colorfulshark.net/2020/08/23/transform-rootfs-to-docker-image.html">å°†rootfsè½¬æ¢æˆDcoker image</a>ã€‚</p>
<h2 id="å®‰è£…ä¾èµ–åŒ…"><a href="#å®‰è£…ä¾èµ–åŒ…" class="headerlink" title="å®‰è£…ä¾èµ–åŒ…"></a>å®‰è£…ä¾èµ–åŒ…</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install build-essential libncurses-dev gcc make libc6-dev</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®kernel"><a href="#é…ç½®kernel" class="headerlink" title="é…ç½®kernel"></a>é…ç½®kernel</h2><p>ç”±äºæˆ‘éœ€è¦ä½¿ç”¨nfsæŒ‚è½½rootfsï¼Œæ‰€ä»¥éœ€è¦éœ€è¦ä¿è¯kernelå¯åŠ¨æ—¶èƒ½å¤Ÿæ­£å¸¸é…ç½®ç½‘ç»œã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make defconfig</span><br><span class="line">make menuconfig</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®ç½‘å¡é©±åŠ¨ï¼Œqemuä½¿ç”¨çš„ç½‘å¡é€šå¸¸ä¸ºE1000</span></span><br><span class="line">Intel(R) PRO/1000 Gigabit Ethernet support (E1000)</span><br><span class="line">Location:</span><br><span class="line"><span class="meta prompt_"> -&gt; </span><span class="language-bash">Device Drivers</span></span><br><span class="line"><span class="meta prompt_">  -&gt; </span><span class="language-bash">Networking support</span></span><br><span class="line"><span class="meta prompt_">   -&gt; </span><span class="language-bash">Network device support (NETDEVICES)</span></span><br><span class="line">    -&gt; Ethernet (1000 Mbit)</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®IP PNPï¼ŒNFS ROOTä¾èµ–æ­¤é€‰é¡¹</span></span><br><span class="line">IP: kernel level autoconfiguration (IP_PNP)</span><br><span class="line">IP: DHCP support (IP_PNP_DHCP)</span><br><span class="line">IP: BOOTP support (IP_PNP_BOOTP)</span><br><span class="line">IP: RARP support (IP_PNP_RARP)</span><br><span class="line">Location:</span><br><span class="line"><span class="meta prompt_"> -&gt; </span><span class="language-bash">Device Drivers</span></span><br><span class="line"><span class="meta prompt_">  -&gt; </span><span class="language-bash">Networking support</span></span><br><span class="line"><span class="meta prompt_">   -&gt; </span><span class="language-bash">Networking support (NET)</span></span><br><span class="line">    -&gt; Networking options</span><br><span class="line">     -&gt; TCP/IP networking (INET)</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®NFS ROOT</span></span><br><span class="line">Root file system on NFS (ROOT_NFS)</span><br><span class="line">Location:</span><br><span class="line"><span class="meta prompt_"> -&gt; </span><span class="language-bash">File systems</span></span><br><span class="line"><span class="meta prompt_">  -&gt; </span><span class="language-bash">Network File Systems</span></span><br></pre></td></tr></table></figure>

<h2 id="ç¼–è¯‘kernel"><a href="#ç¼–è¯‘kernel" class="headerlink" title="ç¼–è¯‘kernel"></a>ç¼–è¯‘kernel</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make -j8</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">  SYSMAP  System.map</span><br><span class="line">  SYSMAP  .tmp_System.map</span><br><span class="line">  Building modules, stage 2.</span><br><span class="line">  MODPOST</span><br><span class="line">  AS      arch/x86_64/boot/setup.o</span><br><span class="line">  OBJCOPY arch/x86_64/boot/compressed/vmlinux.bin</span><br><span class="line">  LD      arch/x86_64/boot/setup</span><br><span class="line">  GZIP    arch/x86_64/boot/compressed/vmlinux.bin.gz</span><br><span class="line">  LD      arch/x86_64/boot/compressed/piggy.o</span><br><span class="line">  LD      arch/x86_64/boot/compressed/vmlinux</span><br><span class="line">  OBJCOPY arch/x86_64/boot/vmlinux.bin</span><br><span class="line">  BUILD   arch/x86_64/boot/bzImage</span><br><span class="line">Root device is (0, 60)</span><br><span class="line">Boot sector 512 bytes.</span><br><span class="line">Setup is 2444 bytes.</span><br><span class="line">System is 2141 kB</span><br><span class="line">Kernel: arch/x86_64/boot/bzImage is ready</span><br></pre></td></tr></table></figure>

<h1 id="Build-rootfs"><a href="#Build-rootfs" class="headerlink" title="Build rootfs"></a>Build rootfs</h1><p>æ„å»ºrootfsçš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚busyboxï¼Œbuildrootï¼Œyoctoç­‰ã€‚ç”±äºæœ¬æ¬¡çš„é‡ç‚¹åœ¨äºkernelï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©buildrootæ¥å¿«é€Ÿæ„å»ºä¸€ä¸ªrootfsã€‚</p>
<h2 id="ç‰ˆæœ¬é€‰æ‹©"><a href="#ç‰ˆæœ¬é€‰æ‹©" class="headerlink" title="ç‰ˆæœ¬é€‰æ‹©"></a>ç‰ˆæœ¬é€‰æ‹©</h2><p>è™½ç„¶kernelçš„ç³»ç»Ÿè°ƒç”¨æ¥å£æ˜¯éå¸¸ç¨³å®šçš„ï¼Œä½†ç”±äºlinux 2.6.10å¤ªè€äº†ï¼Œä½¿ç”¨æ–°ç‰ˆæœ¬çš„toolchainç¼–è¯‘å‡ºçš„binaryåœ¨å¥¹ä¸Šæ‰§è¡Œå¯èƒ½ä¼šæŠ¥â€œ<strong>kernel too old</strong>â€çš„é”™è¯¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨æœ€æ–°çš„buildrootï¼Œç»è¿‡å®éªŒï¼Œ<a href="https://buildroot.org/downloads/buildroot-2014.11.tar.gz">buildroot-2014.11</a>æ˜¯ä¸€ä¸ªèƒ½å¤Ÿä½¿ç”¨çš„ç‰ˆæœ¬ã€‚</p>
<h2 id="é…ç½®Buildroot"><a href="#é…ç½®Buildroot" class="headerlink" title="é…ç½®Buildroot"></a>é…ç½®Buildroot</h2><p>Buildrootè‡ªå¸¦ä¸€äº›configæ¨¡æ¿ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯qemu-x86-64çš„å¹³å°ï¼Œå› æ­¤åªè¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make qemu_x86_64_defconfig</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºæˆ‘ä»¬å¹¶ä¸éœ€è¦Buildrootæ¥ç¼–è¯‘å†…æ ¸ï¼Œä¹Ÿä¸éœ€è¦ç”Ÿæˆæ–‡ä»¶ç³»ç»Ÿé•œåƒï¼Œæ‰€ä»¥è¦åŸºäºæ­¤é…ç½®åšä¸€äº›ä¿®æ”¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make menuconfig</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–æ¶ˆkernelç¼–è¯‘</span></span><br><span class="line">Symbol: BR2_LINUX_KERNEL [=n]</span><br><span class="line">Type  : boolean</span><br><span class="line">Prompt: Linux Kernel</span><br><span class="line">  Location:</span><br><span class="line">    -&gt; Kernel</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åªæ‰“åŒ…taråŒ…</span></span><br><span class="line">Symbol: BR2_TARGET_ROOTFS_TAR [=y]</span><br><span class="line">Type  : boolean</span><br><span class="line">Prompt: tar the root filesystem</span><br><span class="line">  Location:</span><br><span class="line">    -&gt; Filesystem images</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®console</span></span><br><span class="line">Symbol: BR2_TARGET_GENERIC_GETTY_PORT [=console]</span><br><span class="line">Type  : string</span><br><span class="line">Prompt: TTY port</span><br><span class="line">  Location:</span><br><span class="line">    -&gt; System configuration</span><br><span class="line">      -&gt; Run a getty (login prompt) after boot (BR2_TARGET_GENERIC_GETTY [=y])</span><br><span class="line">        -&gt; getty options</span><br></pre></td></tr></table></figure>

<h2 id="ç¼–è¯‘Buildroot"><a href="#ç¼–è¯‘Buildroot" class="headerlink" title="ç¼–è¯‘Buildroot"></a>ç¼–è¯‘Buildroot</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make -j8</span><br></pre></td></tr></table></figure>

<p>æœ€åå³å¯ç”Ÿæˆrootfsçš„taråŒ…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">output/images/rootfs.tar</span><br></pre></td></tr></table></figure>

<h1 id="NFS-boot"><a href="#NFS-boot" class="headerlink" title="NFS boot"></a>NFS boot</h1><p>è¿™é‡Œå¹¶ä¸ä¼šç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œæ¥å¯åŠ¨qemuï¼Œè€Œæ˜¯ä½¿ç”¨virt-managerï¼Œubuntuä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install virt-manager</span><br></pre></td></tr></table></figure>

<p>NFS exportså‚æ•°</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/exports/rootfs *(rw,no_root_squash,no_all_squash)</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨çš„cmdlineå¦‚ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root=/dev/nfs nfsroot=192.168.1.1:/exports/rootfs,nfsvers=3 rw ip=dhcp console=ttyS0</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>buildroot</tag>
        <tag>ldd3</tag>
      </tags>
  </entry>
  <entry>
    <title>shellè„šæœ¬æŠ€å·§</title>
    <url>/2021/04/27/shell-script-tips.html</url>
    <content><![CDATA[<p>å®ç”¨shellè„šæœ¬æŠ€å·§ã€‚</p>
<span id="more"></span>

<ol>
<li><p><strong>bashä¸‹ä½¿ç”¨<code>echo</code>çš„æ—¶å€™<code>&#39;\n&#39;</code>ä¸èƒ½æ¢è¡Œï¼Ÿ</strong></p>
<p>åœ¨shellè„šæœ¬å¼€å¤´æ·»åŠ ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">shopt -s xpg_echo</span><br></pre></td></tr></table></figure>
</li>
<li><p>shell scriptå‡½æ•°è¿”å›å€¼</p>
<ul>
<li><p>ä½¿ç”¨å…¨å±€å˜é‡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">function myfunc()</span><br><span class="line">&#123;</span><br><span class="line">    myresult=&#x27;some value&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myfunc</span><br><span class="line">echo $myresult</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨echo</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">function myfunc()</span><br><span class="line">&#123;</span><br><span class="line">    local  myresult=&#x27;some value&#x27;</span><br><span class="line">    echo &quot;$myresult&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">result=$(myfunc)   # or result=`myfunc`</span><br><span class="line">echo $result</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨eval</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">function myfunc()</span><br><span class="line">&#123;</span><br><span class="line">    local  __resultvar=$1</span><br><span class="line">    local  myresult=&#x27;some value&#x27;</span><br><span class="line">    eval $__resultvar=&quot;&#x27;$myresult&#x27;&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myfunc result</span><br><span class="line">echo $result</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ†æ‰‹åè¯¥ä¸è¯¥åšæœ‹å‹</title>
    <url>/2021/04/02/should-we-keep-friendship-after-break-up.html</url>
    <content><![CDATA[<blockquote>
<p>Special meeting: Debates</p>
<p>æƒ…ä¾£åˆ†æ‰‹åèƒ½ä¸èƒ½åšæœ‹å‹â€”â€”ä¸èƒ½åšæœ‹å‹</p>
</blockquote>
<span id="more"></span>

<p>ä¼ ç»Ÿå¿ƒç†å­¦çš„è§‚ç‚¹è®¤ä¸ºçˆ±æƒ…æ˜¯ç”±å‹çˆ±ä¸çƒ­çˆ±ç»„æˆã€‚çƒ­çˆ±æ˜¯å¼ºçƒˆçš„æ¸´æœ›ï¼Œé€šå¸¸é™ªéšç€ç”Ÿç†æ¿€èµ·ï¼ˆå‘¼å¸æ€¥ä¿ƒã€å¿ƒè·³åŠ é€Ÿï¼Œå¦‚å •å…¥çˆ±æ²³ï¼‰ã€‚è€Œå‹çˆ±ï¼Œæˆ–è€…è¯´å‹æƒ…æ˜¯æŒ‡äººç±»æˆ–åŠ¨ç‰©é—´çš„æƒ…è°Šæˆ–æ˜¯æŒ‡äº²åˆ‡çš„äº¤è°Šã€äº¤æƒ…ã€‚å‹æƒ…æ˜¯åŸºäºç›¸äº’çš„äº†è§£ã€å°Šé‡å’Œå–œæ¬¢ã€‚å­˜åœ¨å‹æƒ…çš„ä¸¤äººï¼Œäº’ç§°æœ‹å‹ã€‚</p>
<p>å›åˆ°ä»Šå¤©çš„è¾©é¢˜ï¼Œåˆ†æ‰‹åèƒ½ä¸èƒ½åšæœ‹å‹ã€‚åˆ†æ‰‹æ„å‘³ç€ä¸¤äººéƒ½æ›¾ä»˜å‡ºè¿‡çœŸå¿ƒï¼Œå¦‚æœæœ‰ä¸€æ–¹æŠ±ç€æ¬ºéª—æˆ–è€…åˆ©ç”¨çš„å¿ƒæ€ï¼Œé‚£ä¸å«åˆ†æ‰‹ï¼›è€Œæœ‹å‹æ„å‘³ç€ä¸¤äººå¯ä»¥çœŸè¯šç›¸å¾…ï¼Œä»…ä»…å­˜åœ¨äºå¾®ä¿¡å¥½å‹åˆ—è¡¨é‚£ä¸å«æœ‹å‹ã€‚</p>
<p>åˆ†æ‰‹çš„åŸå› å¤§ä½“å¯ä»¥åˆ†ä¸ºï¼šç¼ºä¹ä¿¡ä»»ã€å†²çªå¤ªå¤šã€ä¸å®‰å…¨æ„Ÿç­‰ã€‚çºµè§‚ä»¥ä¸Šè¿™å‡ ä¸ªåŸå› ï¼Œæ— è®ºå“ªä¸€ä¸ªï¼Œéƒ½å°†å¯¼è‡´æˆ‘ä»¬ä¸å†ä¿¡ä»»å¯¹æ–¹ï¼Œç”šè‡³åŒæ¶å¯¹æ–¹ï¼Œè¿™ç›´æ¥æ‰“ç ´äº†å‹æƒ…çš„åŸºç¡€â€”â€”äº’ç›¸å–œæ¬¢ï¼Œäº’ç›¸ä¸å–œæ¬¢çš„ä¸¤ä¸ªäººï¼Œå³ä½¿å†äº†è§£ã€å†å°Šé‡ï¼Œä¹Ÿä¸å¯èƒ½æˆä¸ºæˆ‘ä»¬çš„æœ‹å‹ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘æ–¹è®¤ä¸ºï¼Œæƒ…ä¾£åˆ†æ‰‹ä¹‹åï¼Œä¸èƒ½åšæœ‹å‹ã€‚</p>
<p>æˆ‘å°†ä¸»è¦ä»ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢æ¥é˜è¿°ï¼š</p>
<p>ç¬¬ä¸€ï¼Œæ›¾ç»çš„è¯ºè¨€å˜æˆè°è¨€ã€‚è¯•æƒ³ï¼Œä¸¤ä¸ªæ›¾ç»äº’ç›¸å€¾å¿ƒï¼Œäº’ç›¸ä»°æ…•ï¼Œäº’ç›¸æµ·èª“å±±ç›Ÿè¦å…±åº¦æ­¤ç”Ÿçš„äººåˆ†å¼€ä¹‹åï¼Œä»–ä»¬è¦å¦‚ä½•é¢å¯¹è¿™äº›éš¾ä»¥æ‰¿å—çš„è¯ºè¨€ã€‚çœŸè¯šæ˜¯å‹æƒ…çš„åŸºçŸ³ï¼Œæˆ‘ä»¬æƒ³è¦äº¤æœ‹å‹ï¼Œæ˜¯å› ä¸ºåœ¨è¿™ä¸ªå¤æ‚å¤šå˜çš„ä¸–ç•Œï¼Œæˆ‘ä»¬æƒ³è¦æœ‰ä¸€ä¸ªäººï¼Œå¯ä»¥æ¯«æ— é¡¾å¿Œçš„å€¾è¯‰ã€‚è€Œé¢å¯¹ä¸€ä¸ªæ›¾ç»è¯´è¿‡è°çš„äººï¼Œä½ çœŸçš„èƒ½å¤Ÿæ”¾ä¸‹æ‰€æœ‰çš„é˜²å¤‡ï¼Œæ”¾ä¸‹æ‰€æœ‰çš„æˆ’å¿ƒï¼Œå»å±•éœ²ä½ æœ€è„†å¼±çš„ä¸€é¢å—ï¼Ÿè¿™æ˜¯å¾ˆéš¾åšåˆ°çš„ã€‚å½“æˆ‘ä»¬å‘è¿™æ ·çš„äººå»åˆ†äº«è‡ªå·±å¿ƒä¸­çš„ç§˜å¯†æ—¶ï¼Œæˆ‘ä»¬ä¼šä¸ä¼šæ‹…å¿ƒï¼šè¿™ä¸ªäººé è°±å—ï¼Œä»–ä¼šä¸ä¼šæŠŠæˆ‘çš„ç§˜å¯†è¯´å‡ºå»ï¼Œä»–è¯´çš„è¯çœŸçš„å¯ä¿¡å—ï¼Ÿè¿™äº›çŒœå¿Œï¼Œä¸ä»…ä¼šæ¯äº†å‹æƒ…ï¼Œä¹Ÿä¼šç»™è‡ªå·±å¢æ·»æ— æ„ä¹‰çš„ç²¾ç¥å‹åŠ›ã€‚æœ¬æ¥æˆ‘ä»¬è·Ÿæœ‹å‹äº¤æµæ˜¯ä¸ºäº†è·å¾—æ„‰æ‚¦ï¼Œç»“æœåè€Œæ›´åŠ çƒ¦æ¼ï¼Œè¿™å¥½å—ï¼Œè¿™ä¸å¥½ã€‚</p>
<p>ç¬¬äºŒï¼Œè®©è‡ªå·±å¤„äºè¿›é€€ä¸¤éš¾çš„å¢ƒåœ°ã€‚åˆ†æ‰‹ååšæœ‹å‹ï¼Œå¯ä»¥è¯´æå‡ºè¿™ä¸ªæƒ³æ³•çš„äººè‚¯å®šæ˜¯æœ‰ç§å¿ƒçš„ã€‚ä¸¤ä¸ªç›¸çˆ±è¿‡çš„äººåˆ†æ‰‹åï¼Œæ— è®ºæ˜¯å“ªä¸€æ–¹ï¼Œéƒ½ä¸ä¼šå¾ˆå¥½å—ï¼Œåœ¨è¿™ç§å¼ºçƒˆçš„è´Ÿé¢æƒ…ç»ªçš„åˆºæ¿€ä¸‹ï¼Œå°±ä¼šæƒ³å‡ºâ€œæˆ‘ä»¬ç»§ç»­åšæœ‹å‹â€è¿™ç§ä¸»æ„ï¼Œä½†è¿™æ˜¯éç†æ€§çš„å†³å®šã€‚ä¸¤ä¸ªäººä¼šèµ°åˆ°åˆ†æ‰‹è¿™ä¸€æ­¥ï¼Œè¯´æ˜äº’ç›¸æœ‰ä¸€äº›å®Œå…¨ä¸å¯æ¥å—å’Œå¿è®©çš„ç‚¹ï¼Œä½†æ˜¯å¤„äºåˆ†æ‰‹ç—›è‹¦ä¸­çš„äººé€šå¸¸ä¼šå¿˜è®°è¿™äº›ï¼Œè€Œåªæ˜¯æƒ³ç€å¿«ä¹çš„è®°å¿†ï¼Œé€ æˆä¸€ç§æˆ‘ä»¬è¿˜èƒ½ç»§ç»­çš„é”™è§‰ã€‚ä½†å®é™…ä¸ŠçœŸçš„é‡æ–°ç›¸å¤„åï¼Œåˆä¼šé‡æ–°é¢å¯¹è¿™äº›é—®é¢˜ï¼Œå†æ¬¡åˆ†æ‰‹ã€‚è¿™ç§æ­»å¾ªç¯æ—¢æµªè´¹æ—¶é—´ï¼Œä¹Ÿæµªè´¹ç²¾åŠ›ï¼Œæ›´æµªè´¹é‡‘é’±ã€‚</p>
<p>ç¬¬ä¸‰ï¼Œå¯èƒ½ä¼šç»™è‡ªå·±çš„çˆ±æƒ…å¸¦æ¥å±é™©ã€‚æˆ‘æƒ³ï¼Œæ²¡æœ‰å‡ ä¸ªäººä¼šå¸Œæœ›è‡ªå·±çš„å¦ä¸€åŠå¯¹å‰ä»»å¿µå¿µä¸å¿˜ï¼Œçˆ±æƒ…æ˜¯è‡ªç§çš„ï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›è‡ªå·±æ˜¯å¯¹æ–¹çš„å”¯ä¸€ã€‚ä½†æ˜¯å¦‚æœè‡ªå·±ç»å¸¸è·Ÿå‰ä»»å‡ºå»é€›è¡—ï¼Œåƒé¥­ï¼Œçœ‹ç”µå½±ï¼Œåšä¸€åˆ‡æœ‹å‹ä¹‹é—´éƒ½ä¼šåšçš„äº‹æƒ…ï¼Œä½ çš„å¦ä¸€åŠä¼šå¦‚ä½•æƒ³ï¼Ÿä½ ä»¬çœŸçš„åªæ˜¯å•çº¯çš„æœ‹å‹å…³ç³»å—ï¼Ÿä½ ä»¬ä¼šä¸ä¼šæ­»ç°å¤ç‡ƒï¼Ÿè¿™äº›æƒ³æ³•æŒ¥ä¹‹ä¸å»ï¼Œç›´åˆ°ä½ çš„å¦ä¸€åŠå´©æºƒï¼Œç„¶ååµæ¶ï¼Œæœ€åä½ çš„ç°ä»»ä¹Ÿå˜æˆäº†å‰ä»»ï¼Œä½ ä¼šæš—è‡ªåº†å¹¸è‡ªå·±åˆå¤šäº†ä¸€ä¸ªæœ‹å‹å—ï¼Ÿ</p>
<p>ç»¼ä¸Šï¼Œæˆ‘æ–¹è®¤ä¸ºï¼Œæƒ…ä¾£åˆ†æ‰‹åä¸èƒ½åšæœ‹å‹ï¼Œé‚£æ˜¯ä¸€ç§éå¸¸ä¸ç†æ€§ä¸”å±é™©çš„è¡Œä¸ºã€‚</p>
]]></content>
      <categories>
        <category>Life</category>
      </categories>
      <tags>
        <tag>toastmaster</tag>
        <tag>debates</tag>
      </tags>
  </entry>
  <entry>
    <title>é€šè¿‡trace-cmdå’Œkernelsharkç®€åŒ–Ftraceçš„ä½¿ç”¨</title>
    <url>/2019/12/21/simplify-ftrace-with-tracecmd-and-kernelshark.html</url>
    <content><![CDATA[<blockquote>
<p>è™½ç„¶Ftraceåœ¨debugfsä¸­çš„æ¥å£å¾ˆç®€å•ï¼Œä½†åœ¨å®é™…æ“ä½œæ—¶ï¼Œè¿˜æ˜¯æ˜¾å¾—ä¸å¤ªçµæ´»ã€‚å¦‚æœèƒ½è®©ä¸€ä¸ªåº”ç”¨ç¨‹åºä»£æ›¿æˆ‘ä»¬ä¸Ftraceçš„æ¥å£äº¤äº’ï¼Œå°†ä¼šå¤§å¤§ç®€åŒ–å…¶ä½¿ç”¨ï¼Œè€Œè¿™ä¸ªç¨‹åºå°±æ˜¯trace-cmdã€‚æ­¤å¤–ï¼Œä¸ºäº†èƒ½å¤Ÿæ›´åŠ ç›´è§‚çš„åˆ†æè¿‡æ»¤Ftraceçš„logï¼Œå°†ä¼šä»‹ç»ä¸€ä¸ªåŸºäºGUIçš„å·¥å…·kernelsharkã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><h2 id="ä»è½¯ä»¶æºå®‰è£…"><a href="#ä»è½¯ä»¶æºå®‰è£…" class="headerlink" title="ä»è½¯ä»¶æºå®‰è£…"></a>ä»è½¯ä»¶æºå®‰è£…</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install trace-cmd kernelshark</span><br></pre></td></tr></table></figure>

<h2 id="ä»æºç å®‰è£…"><a href="#ä»æºç å®‰è£…" class="headerlink" title="ä»æºç å®‰è£…"></a>ä»æºç å®‰è£…</h2><ol>
<li><p>å®‰è£…ä¾èµ–</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install build-essential git cmake libjson-c-dev -y</span><br><span class="line">sudo apt-get install freeglut3-dev libxmu-dev libxi-dev -y</span><br><span class="line">sudo apt-get install qtbase5-dev -y</span><br><span class="line">sudo apt-get install graphviz doxygen-gui -y</span><br></pre></td></tr></table></figure>
</li>
<li><p>å…‹éš†æºç </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://git.kernel.org/pub/scm/linux/kernel/git/rostedt/trace-cmd.git</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–è¯‘å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd trace-cmd</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">compile trace-cmd</span></span><br><span class="line">make</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">install trace-cmd</span></span><br><span class="line">make install</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">compile kernelshark</span></span><br><span class="line">make gui</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">install kernelshark</span></span><br><span class="line">make install_gui</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h1><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo trace-cmd record -e ext4 ls</span><br><span class="line">sudo trace-cmd report</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CPU 0 is empty</span><br><span class="line">CPU 1 is empty</span><br><span class="line">CPU 2 is empty</span><br><span class="line">CPU 3 is empty</span><br><span class="line">CPU 4 is empty</span><br><span class="line">CPU 6 is empty</span><br><span class="line">CPU 7 is empty</span><br><span class="line">cpus=8</span><br><span class="line">              ls-8018  [005] 1233847.755818: ext4_es_lookup_extent_enter: dev 252,1 ino 28442625 lblk 0</span><br><span class="line">              ls-8018  [005] 1233847.755834: ext4_es_lookup_extent_exit: dev 252,1 ino 28442625 found 1 [0/1) 113778720 W</span><br><span class="line">              ls-8018  [005] 1233847.755859: ext4_journal_start:   dev 252,1 blocks, 2 rsv_blocks, 0 caller ext4_dirty_inode</span><br><span class="line">              ls-8018  [005] 1233847.755861: ext4_mark_inode_dirty: dev 252,1 ino 28442625 caller ext4_dirty_inode</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€æ¡å‘½ä»¤è®°å½•äº†<code>ls</code>å‘½ä»¤åœ¨æ‰§è¡Œæ—¶ï¼Œ<code>ext4</code>å­ç³»ç»Ÿä¸­æ‰€æœ‰tracepointçš„è¾“å‡ºã€‚è¾“å‡ºç»“æœä¿å­˜åœ¨æ–‡ä»¶<code>trace.dat</code>ä¸­ï¼Œå¯ä»¥åˆ†åˆ«å¯¹<code>record</code>å’Œ<code>report</code>ä½¿ç”¨<code>-o</code>å’Œ<code>-i</code>æ¥è®¾ç½®è¾“å‡ºå’Œè¾“å…¥çš„æ–‡ä»¶åã€‚</p>
<p>ç¬¬äºŒæ¡å‘½ä»¤è§£æ<code>trace.dat</code>ä¸­çš„å†…å®¹å¹¶æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºã€‚å¯ä»¥çœ‹åˆ°CPUçš„æ•°é‡ä»¥åŠå“ªäº›CPUçš„bufferä¸ºç©ºï¼Œæœ€ä¸‹é¢åˆ™æ˜¯è®°å½•çš„logï¼Œå…¶æ ¼å¼ä¸function tracerç›¸åŒã€‚</p>
<p>å½“å¼€å§‹è®°å½•æ—¶ï¼Œ<code>trace-cmd</code>ä¼šä¸ºæ¯ä¸€ä¸ªCPUåˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹æ‰“å¼€å¯¹åº”CPUçš„bufferæ–‡ä»¶å¹¶è®°å½•åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚CPU0çš„bufferæ˜ å°„åˆ°<code>/sys/kernel/debug/tracing/per_cpu/cpu0/trace_pipe_raw</code>ï¼Œå…¶æ•°æ®ä¼šè¢«è®°å½•åˆ°<code>trace.dat.cpu0</code>ã€‚å½“ç»“æŸè®°å½•æ—¶ï¼Œè¿™äº›æ–‡ä»¶ä¼šè¢«åˆå¹¶åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚<code>trace.dat</code>ã€‚</p>
<p>ä½¿ç”¨<code>trace-cmd</code>ä¸éœ€è¦æ‰‹åŠ¨æŒ‚è½½debugfsï¼Œå®ƒä¼šè‡ªåŠ¨æŒ‚è½½debugfså¹¶å¯»æ‰¾å…¶æŒ‚è½½è·¯å¾„ã€‚</p>
<h1 id="Record"><a href="#Record" class="headerlink" title="Record"></a>Record</h1><h2 id="åŸºæœ¬å‚æ•°"><a href="#åŸºæœ¬å‚æ•°" class="headerlink" title="åŸºæœ¬å‚æ•°"></a>åŸºæœ¬å‚æ•°</h2><p><code>record</code>çš„å‚æ•°å®é™…ä¸Šå¯¹åº”äº†Ftraceåœ¨debugfsä¸­çš„æ¥å£ã€‚</p>
<ul>
<li><p><code>-e</code>è¡¨ç¤ºè·Ÿè¸ªä¸€ä¸ªeventï¼Œå¯ä»¥ä½¿ç”¨eventåï¼Œå­ç³»ç»Ÿåï¼Œå¦‚æœè¦è·Ÿè¸ªå¤šä¸ªeventï¼Œå¯ä»¥å¤šæ¬¡ä½¿ç”¨è¯¥é€‰é¡¹ï¼Œæˆ–è€…<code>all</code>ç”¨æ¥ç›‘æ§æ‰€æœ‰çš„eventã€‚å¯ä»¥ä½¿ç”¨<code>sudo trace-cmd list -e</code>æ¥æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­æœ‰å“ªäº›æ”¯æŒè·Ÿè¸ªçš„eventã€‚</p>
</li>
<li><p><code>-f</code>è¡¨ç¤ºå¯¹ä¸€ä¸ªeventä¸­çš„æŸäº›åŸŸï¼ˆfieldï¼‰è¿›è¡Œè¿‡æ»¤ï¼Œåªå¯¹å…¶ä¹‹å‰<code>-e</code>è®¾ç½®çš„eventç”Ÿæ•ˆï¼Œå› æ­¤ä¸€èˆ¬ç´§è·Ÿåœ¨<code>-e</code>ä¹‹åã€‚è¦æŸ¥çœ‹ä¸€ä¸ªeventæœ‰å“ªäº›åŸŸå¯ä»¥è¿›è¡Œè¿‡æ»¤ï¼Œå¯ä»¥æŸ¥çœ‹<code>/sys/kernel/debug/tracing/events/&lt;subsystem&gt;/&lt;event&gt;/format</code>ï¼Œå…¶ä¸­subsystemå’Œeventå¯ä»¥é€šè¿‡<code>sudo trace-cmd list -e</code>æ¥è·å¾—ã€‚</p>
</li>
<li><p><code>-p</code>è¡¨ç¤ºä½¿ç”¨ä¸€ä¸ªpluginï¼Œå®é™…ä¸Šå°±æ˜¯Ftraceä¸­çš„tracerï¼Œå¯ä»¥ä½¿ç”¨<code>sudo trace-cmd list -t</code>æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ”¯æŒå“ªäº›tracerã€‚åŒä¸€æ—¶åˆ»åªèƒ½ä½¿ç”¨ä¸€ç§pluginã€‚</p>
</li>
<li><p><code>-l</code>è¡¨ç¤ºåé¢è·Ÿä¸Šå‡½æ•°åï¼Œè¡¨ç¤ºåªè·Ÿè¸ªè¿™ä¸ªå‡½æ•°ï¼›<code>-n</code>åé¢è·Ÿä¸Šå‡½æ•°åï¼Œè¡¨ç¤ºä¸è·Ÿè¸ªè¿™ä¸ªå‡½æ•°ï¼Œè¿™ä¸¤ä¸ªé€‰é¡¹å‡å¯å¤šæ¬¡ä½¿ç”¨æ¥è®¾ç½®å¤šä¸ªå‡½æ•°ã€‚å¯ä»¥é€šè¿‡<code>sudo trace-cmd list -f</code>æŸ¥çœ‹å“ªäº›å‡½æ•°å¯ä»¥è¿›è¡Œè¿‡æ»¤ã€‚æ³¨æ„ï¼Œå‡½æ•°è¿‡æ»¤ä»…åœ¨ä½¿ç”¨<code>function</code>å’Œ<code>function_graph</code>è¿™ä¸¤ä¸ªpluginæ—¶æœ‰æ•ˆã€‚</p>
</li>
<li><p><code>-M</code>è¡¨ç¤ºCPUæ©ç ï¼Œä½¿ç”¨16è¿›åˆ¶è¡¨ç¤ºï¼Œæ¯ä¸€ä½è¡¨ç¤ºä¸€ä¸ªCPUï¼Œä¾‹å¦‚4(16) &#x3D; 100(2)ï¼Œå› æ­¤åªæœ‰CPU2çš„æ•°æ®ä¼šè¢«è®°å½•ã€‚</p>
</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š</p>
<ul>
<li><p>è·Ÿè¸ªå†…æ ¸ä¸­ä¸­æ–­çš„æ‰§è¡Œæ—¶é—´</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo trace-cmd record -p function_graph -l do_IRQ -e irq_handler_entry sleep 1</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CPU 1 is empty</span><br><span class="line">CPU 2 is empty</span><br><span class="line">CPU 3 is empty</span><br><span class="line">CPU 5 is empty</span><br><span class="line">CPU 6 is empty</span><br><span class="line">CPU 7 is empty</span><br><span class="line">cpus=8</span><br><span class="line">          &lt;idle&gt;-0     [000] 1251617.972283: funcgraph_entry:                   |  do_IRQ() &#123;</span><br><span class="line">          &lt;idle&gt;-0     [000] 1251617.972302: irq_handler_entry:    irq=10 name=virtio0</span><br><span class="line">          &lt;idle&gt;-0     [000] 1251617.972359: funcgraph_exit:       + 77.853 us  |  &#125;</span><br><span class="line">          &lt;idle&gt;-0     [004] 1251618.092777: funcgraph_entry:                   |  do_IRQ() &#123;</span><br><span class="line">          &lt;idle&gt;-0     [004] 1251618.092792: irq_handler_entry:    irq=15 name=ata_piix</span><br><span class="line">          &lt;idle&gt;-0     [004] 1251618.092892: funcgraph_exit:       ! 116.705 us |  &#125;</span><br><span class="line">          &lt;idle&gt;-0     [004] 1251618.092907: funcgraph_entry:                   |  do_IRQ() &#123;</span><br><span class="line">          &lt;idle&gt;-0     [004] 1251618.092908: irq_handler_entry:    irq=15 name=ata_piix</span><br><span class="line">          &lt;idle&gt;-0     [004] 1251618.092954: funcgraph_exit:       + 47.463 us  |  &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>é€šè¿‡bytes_reqåŸŸè¿‡æ»¤kmalloc_node event</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">trace-cmd record -e kmalloc_node -f &#x27;bytes_req &gt; 1000&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">name: kmalloc_node</span><br><span class="line">ID: 515</span><br><span class="line">format:</span><br><span class="line">        field:unsigned short common_type;       offset:0;       size:2; signed:0;</span><br><span class="line">        field:unsigned char common_flags;       offset:2;       size:1; signed:0;</span><br><span class="line">        field:unsigned char common_preempt_count;       offset:3;       size:1; signed:0;</span><br><span class="line">        field:int common_pid;   offset:4;       size:4; signed:1;</span><br><span class="line"></span><br><span class="line">        field:unsigned long call_site;  offset:8;       size:8; signed:0;</span><br><span class="line">        field:const void * ptr; offset:16;      size:8; signed:0;</span><br><span class="line">        field:size_t bytes_req; offset:24;      size:8; signed:0;</span><br><span class="line">        field:size_t bytes_alloc;       offset:32;      size:8; signed:0;</span><br><span class="line">        field:gfp_t gfp_flags;  offset:40;      size:4; signed:0;</span><br><span class="line">        field:int node; offset:44;      size:4; signed:1;</span><br><span class="line">    [...]</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="é€šè¿‡ç½‘ç»œä¼ è¾“"><a href="#é€šè¿‡ç½‘ç»œä¼ è¾“" class="headerlink" title="é€šè¿‡ç½‘ç»œä¼ è¾“"></a>é€šè¿‡ç½‘ç»œä¼ è¾“</h2><p>å¯¹äºä¸€äº›å­˜å‚¨ç©ºé—´éå¸¸æœ‰é™ï¼Œæˆ–è€…å­˜å‚¨å™¨é€Ÿåº¦è¾ƒæ…¢çš„è®¾å¤‡ï¼Œå¯ä»¥é€šè¿‡ç½‘ç»œå°†<code>trace.dat</code>ä¿å­˜åˆ°å…¶å®ƒè®¾å¤‡ä¸­ã€‚</p>
<ul>
<li><p>host</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">trace-cmd listen -p 12345 -D -d /images/tracing/ -l /images/tracing/logfile</span><br></pre></td></tr></table></figure>

<p><code>-p</code>ï¼šç«¯å£</p>
<p><code>-D</code>ï¼šdaemonæ¨¡å¼</p>
<p><code>-d</code>ï¼štraceæ–‡ä»¶ä¿å­˜çš„ä½ç½®</p>
<p><code>-l</code>ï¼šlogæ–‡ä»¶ä¿å­˜çš„ä½ç½®</p>
</li>
<li><p>client</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">trace-cmd record -N 192.168.1.100:12345 -e ext4 ls</span><br></pre></td></tr></table></figure>

<p><code>-N</code>ï¼šIPåœ°å€å’Œç«¯å£å·</p>
</li>
</ul>
<h1 id="Report"><a href="#Report" class="headerlink" title="Report"></a>Report</h1><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å·²ç»æ‹¿åˆ°äº†trace.datï¼Œç°åœ¨éœ€è¦å¯¹å…¶è¿›è¡Œåˆ†æã€‚å› ä¸ºå…¶ä¸­å¯èƒ½åŒ…å«æµ·é‡çš„æ•°æ®ï¼Œæ‰€ä»¥ä»ç„¶éœ€è¦è¿‡æ»¤ã€‚</p>
<h2 id="trace-cmd"><a href="#trace-cmd" class="headerlink" title="trace-cmd"></a>trace-cmd</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">trace-cmd report</span><br></pre></td></tr></table></figure>

<p><code>trace-cmd</code>æœ¬èº«æä¾›äº†éå¸¸çµæ´»ä¸”å¼ºå¤§çš„è¿‡æ»¤åŠŸèƒ½ï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥ä¹Ÿéå¸¸ç¹çï¼Œå°¤å…¶æ˜¯å½“å¤„ç†å¤§é‡æ•°æ®æ—¶ï¼Œå› æ­¤ï¼Œè¿™é‡Œä¸å¯¹å…¶è¿›è¡Œè¯¦ç»†ä»‹ç»ï¼Œæœ‰éœ€è¦å¯ä»¥é€šè¿‡<code>man trace-cmd-report</code>äº†è§£å…¶è¯¦ç»†ç”¨æ³•ã€‚</p>
<h2 id="kernelshark"><a href="#kernelshark" class="headerlink" title="kernelshark"></a>kernelshark</h2><p>kernelsharkæ˜¯ä¸€ä¸ªç”¨æ¥æŸ¥çœ‹<code>trace.dat</code>çš„GUIç¨‹åºï¼Œå®Œæ•´çš„æ–‡æ¡£è¯·è®¿é—®<a href="https://kernelshark.org/Documentation.html">KernelShark</a>ã€‚</p>
<img src="/2019/12/21/simplify-ftrace-with-tracecmd-and-kernelshark/kernelshark.jpg" class="">

<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä»¥ä¸Šæ˜¯å¯¹Ftraceçš„ä¸¤ä¸ªå‰ç«¯å·¥å…·â€”â€”trace-cmdå’Œkernelsharkçš„ç®€å•ä»‹ç»ï¼Œé€šè¿‡è¿™ä¸¤ä¸ªå·¥å…·ï¼Œå¯ä»¥æ›´åŠ å®¹æ˜“çš„ä½¿ç”¨Ftraceæ¥å£ï¼Œä»è€Œæ›´åŠ é«˜æ•ˆçš„è°ƒè¯•ã€ä¼˜åŒ–å†…æ ¸ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://lwn.net/Articles/410200/">trace-cmd: A front-end for Ftrace</a></p>
<p><a href="https://lwn.net/Articles/425583/">Using KernelShark to analyze the real-time scheduler</a></p>
<p><a href="https://kernelshark.org/">KernelShark</a></p>
]]></content>
      <categories>
        <category>Kernel</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>debug</tag>
        <tag>ftrace</tag>
        <tag>trace-cmd</tag>
        <tag>kernelshark</tag>
      </tags>
  </entry>
  <entry>
    <title>è½¯ä»¶æ”¶é›†</title>
    <url>/2021/07/03/software-collection.html</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡ç”¨æ¥è®°å½•æ›¾ç»ä½¿ç”¨è¿‡çš„è½¯ä»¶ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="è½¯ä»¶ç«™ç‚¹"><a href="#è½¯ä»¶ç«™ç‚¹" class="headerlink" title="è½¯ä»¶ç«™ç‚¹"></a>è½¯ä»¶ç«™ç‚¹</h1><p><a href="https://www.isharepc.com/">ä¹è½¯åšå®¢</a></p>
<h1 id="è½¯ä»¶èµ„æº"><a href="#è½¯ä»¶èµ„æº" class="headerlink" title="è½¯ä»¶èµ„æº"></a>è½¯ä»¶èµ„æº</h1><h2 id="Matlab"><a href="#Matlab" class="headerlink" title="Matlab"></a>Matlab</h2><p><a href="https://www.isharepc.com/14196.html">MathWorks MATLAB R2021aä¸­æ–‡ç ´è§£ç‰ˆ</a></p>
<h2 id="æ€ç»´å¯¼å›¾"><a href="#æ€ç»´å¯¼å›¾" class="headerlink" title="æ€ç»´å¯¼å›¾"></a>æ€ç»´å¯¼å›¾</h2><p><a href="https://www.diagrams.net/">Diagrams</a></p>
<h2 id="è§†é¢‘ç¼–è¾‘"><a href="#è§†é¢‘ç¼–è¾‘" class="headerlink" title="è§†é¢‘ç¼–è¾‘"></a>è§†é¢‘ç¼–è¾‘</h2><p><a href="http://fixounet.free.fr/avidemux/">Avidemux</a></p>
<h2 id="Xserver"><a href="#Xserver" class="headerlink" title="Xserver"></a>Xserver</h2><p><a href="https://sourceforge.net/projects/vcxsrv/files/vcxsrv/">Vcxsrv</a></p>
<h2 id="PXE"><a href="#PXE" class="headerlink" title="PXE"></a>PXE</h2><p><a href="https://ipxe.org/">iPXE</a></p>
<h2 id="ç¼–è¯‘å™¨"><a href="#ç¼–è¯‘å™¨" class="headerlink" title="ç¼–è¯‘å™¨"></a>ç¼–è¯‘å™¨</h2><p><a href="https://godbolt.org/">Compiler Explore</a></p>
]]></content>
      <categories>
        <category>Resources</category>
      </categories>
      <tags>
        <tag>è½¯ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>Survive in the Debate</title>
    <url>/2021/10/20/survive-in-the-debate.html</url>
    <content><![CDATA[<blockquote>
<p>Pathways: Dynamic Leadership</p>
<p>Level 2-2: Understanding Your Communication Style</p>
</blockquote>
<span id="more"></span>

<h1 id="Content"><a href="#Content" class="headerlink" title="Content"></a>Content</h1><p>Survive in the debate, after reading this title, you may guess I will introduce some magic debate skills to you, right? Well, please let me share a small story to you first, then you may understand what Iâ€™m going to talk about.</p>
<p>Itâ€™s a sunshiny morning at about one year ago. I was having a voice call with my girl friend. In the phone, she said: today I got up very early and wiped the floor. I responded: wow, it must be pretty tired to squat and wipe. â€œNo, I used a mopâ€, she said. â€œBut if you use a mop, it should be mopping rather than wiping the floorâ€, I queried her. Then she said:â€But all of us call that wiping, nobody says moppingâ€. I debated:â€It seems only you use wiping, in my family, we always use moppingâ€. â€œThen what, I just use wipingâ€, sheâ€™s a little angry. But I still wanted to persuade her, â€œitâ€™s wired using wiping, you should use moppingâ€. Then, she ended the call.</p>
<p>I didnâ€™t understand why she got angry, because at that time, I was a kind of debate elf in the real life. I always tried my best to stand for my point, during the lunch with my colleague, during the evening with my family, or even in the comments of a microblog. I debated with these people and I enjoined it, because on most of time I wo . Maybe these people just didnâ€™t want to argue with me.</p>
<p>At the end, my girl friend left me after a quarrel, I canâ€™t even remember what we were arguing for. Then I got into a heart broken period.</p>
<p>Occasionally, I found a interesting view in a book, It said: The only way to win in a debate is avoiding debate. Because our life is not a debate contest, most of us are just normal people, thus we may have some weakness in our mind. And one of them is that itâ€™s nearly impossible to change oneâ€™s mind unless he would like to. If we debate with a person, we are challenging his knowledge and dignity, then he will get into fight mode, and stands for his point from start to the end, even if you are right.</p>
<p>I was little curious if this theory would work for me, because it seemed I didnâ€™t have many friends and good relationship with my family, so I start trying to change my communication style, to be more gentle and approachable, to see what will happen. In the later days, when I had conversation with colleague, even if I knew someone was wrong, I would not point out directly if itâ€™s not that important. While talking with my parents, I just listened and answered their questions, without debating for small things. I suddenly realized, when I was a child, I must made lots of small mistakes, but my parents seemed never arguing with me. Now, they are getting old and some knowledge is out of date, I should do the same thing to them.</p>
<p>Now Iâ€™m perceived as patient, amiable and supportive by my friends. My parents like to share their story with me,  and even my girl friend said that I am changing a lot, to the good way.</p>
<p>Just like the book said: If you argue and debate, you may gain the victory for temporary, but that is short and useless, and you will never earn otherâ€™s favor. We are in a society and have connection with others. Sometimes, it may change everything if we let our customer, lover, husband or wife win us in a small debate.</p>
<h1 id="Evaluation"><a href="#Evaluation" class="headerlink" title="Evaluation"></a>Evaluation</h1><img src="/2021/10/20/survive-in-the-debate/evaluation.jpeg" class="">

<h1 id="Photos"><a href="#Photos" class="headerlink" title="Photos"></a>Photos</h1><img src="/2021/10/20/survive-in-the-debate/joy.jpeg" class="">

<img src="/2021/10/20/survive-in-the-debate/jun.jpeg" class="">

<img src="/2021/10/20/survive-in-the-debate/sherry.jpeg" class="">

<img src="/2021/10/20/survive-in-the-debate/ryan.jpeg" class="">

<img src="/2021/10/20/survive-in-the-debate/together.jpeg" class="">
]]></content>
      <categories>
        <category>Life</category>
      </categories>
      <tags>
        <tag>toastmaster</tag>
        <tag>speech</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¿®æ”¹Windowsæ³¨å†Œè¡¨äº¤æ¢Ctrlå’ŒCapsæŒ‰é”®</title>
    <url>/2019/11/09/swap-ctrl-and-caps-under-windows.html</url>
    <content><![CDATA[<blockquote>
<p>åœ¨ä½¿ç”¨é”®ç›˜çš„æ—¶å€™ï¼Œç»å¸¸ä¼šç”¨åˆ°Ctrlæ¥è§¦å‘å„ç§å¿«æ·é”®ï¼Œä½†æ¯æ¬¡ä½¿ç”¨Ctrlï¼Œæ‰‹éƒ½éœ€è¦å¤§å¹…åº¦æ‰­æ›²ï¼Œéå¸¸ä¸èˆ’æœï¼Œåè§‚Capsè¿™ä¸ªæŒ‰é”®ï¼Œä¸ä»…ä½ç½®èˆ’é€‚ï¼Œè€Œä¸”æŒ‰é”®æ›´å¤§ï¼Œä½†å´å¸¸å¹´å¾—ä¸åˆ°æœ‰æ•ˆåˆ©ç”¨ã€‚ç›®å‰å¸‚é¢ä¸Šå·²ç»æœ‰ä¸€äº›é”®ç›˜å¦è¾Ÿè¹Šå¾„ï¼ŒæŠŠCtrlå’ŒCapsè¿›è¡Œäº¤æ¢æ¥è·å¾—æ›´å¥½çš„æ‰“å­—ä½“éªŒï¼Œä½†è¿™é€šå¸¸éœ€è¦ç‰¹æ®Šçš„å›ºä»¶æˆ–è€…é©±åŠ¨æ‰èƒ½å®ç°ã€‚å®é™…ä¸Šï¼Œåœ¨Windowsä¸‹å¯ä»¥é€šè¿‡ä¿®æ”¹æ³¨å†Œè¡¨æ¥é‡æ–°æ˜ å°„æŒ‰é”®ï¼Œä»è€Œè®©æ™®é€šé”®ç›˜ä¹Ÿèƒ½åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="æ‰‹åŠ¨ä¿®æ”¹"><a href="#æ‰‹åŠ¨ä¿®æ”¹" class="headerlink" title="æ‰‹åŠ¨ä¿®æ”¹"></a>æ‰‹åŠ¨ä¿®æ”¹</h1><ol>
<li><p>Win+Rï¼Œè¾“å…¥regeditï¼Œæ‰“å¼€æ³¨å†Œè¡¨ç¼–è¾‘å™¨</p>
<img src="/2019/11/09/swap-ctrl-and-caps-under-windows/open-regedit.jpg" class="" title="open-regedit.jpg">
</li>
<li><p>æŒ‰ç…§ä»¥ä¸‹è·¯å¾„æ‰¾åˆ°<strong>Keyboard Layout</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Keyboard Layout</span><br></pre></td></tr></table></figure>
</li>
<li><p>å³é”®<strong>Keyboard Layout</strong>ï¼Œé€‰æ‹©æ–°å»º<strong>äºŒè¿›åˆ¶å€¼</strong>ï¼Œå¹¶å°†æ–°å»ºçš„å€¼é‡å‘½åä¸º<strong>Scancode Map</strong></p>
<img src="/2019/11/09/swap-ctrl-and-caps-under-windows/create-new-value.jpg" class="" title="create-new-value.jpg">
</li>
<li><p>å³é”®<strong>Scancode Map</strong>ï¼Œé€‰æ‹©ä¿®æ”¹ï¼Œç„¶åè¾“å…¥ä»¥ä¸‹æ•°å€¼ï¼Œ<strong>æ³¨æ„ï¼Œæ•°å€¼ä¸èƒ½å¤åˆ¶ï¼Œå¿…é¡»æ‰‹åŠ¨è¾“å…¥</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">00 00 00 00 00 00 00 00</span><br><span class="line">03 00 00 00 1D 00 3A 00</span><br><span class="line">3A 00 1D 00 00 00 00 00</span><br></pre></td></tr></table></figure>

<p>è¾“å…¥å®Œæˆåçš„æ•ˆæœå¦‚ä¸‹</p>
<img src="/2019/11/09/swap-ctrl-and-caps-under-windows/input-value.jpg" class="" title="input-value.jpg">
</li>
<li><p>é‡å¯ç”µè„‘å³å¯ç”Ÿæ•ˆ</p>
</li>
</ol>
<h1 id="è‡ªåŠ¨ä¿®æ”¹"><a href="#è‡ªåŠ¨ä¿®æ”¹" class="headerlink" title="è‡ªåŠ¨ä¿®æ”¹"></a>è‡ªåŠ¨ä¿®æ”¹</h1><p>å°†ä»¥ä¸‹ä»£ç ä¿å­˜ä¸º<strong>swap-ctrl-caps.reg</strong>ï¼ŒåŒå‡»è¿è¡Œå³å¯ç›´æ¥å¯¼å…¥æ•°å€¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Windows Registry Editor Version 5.00</span><br><span class="line"></span><br><span class="line">[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Keyboard Layout]</span><br><span class="line">&quot;Scancode Map&quot;=hex:00,00,00,00,00,00,00,00,03,00,00,00,3a,00,1d,00,1d,00,3a,00,\</span><br><span class="line">  00,00,00,00</span><br></pre></td></tr></table></figure>

<h1 id="å¦‚ä½•æ¢å¤"><a href="#å¦‚ä½•æ¢å¤" class="headerlink" title="å¦‚ä½•æ¢å¤"></a>å¦‚ä½•æ¢å¤</h1><p>å°†<strong>Scancode Map</strong>åˆ é™¤ï¼Œé‡å¯å³å¯æ¢å¤ã€‚</p>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>The Goose that Lays Golden Eggs</title>
    <url>/2021/03/14/the-goose-that-lays-golden-eggs.html</url>
    <content><![CDATA[<blockquote>
<p>Pathways: Dynamic Leadership</p>
<p>Level 1-2: Evaluation and Feedback</p>
</blockquote>
<span id="more"></span>

<p>You may be curious about this title, but please let me share a story with you first.</p>
<p>There was once a Countryman who possessed the most wonderful Goose you can imagine, for every day when he visited the nest, the Goose had laid a beautiful, glittering, golden egg. The Countryman took the eggs to market and soon began to get rich. But it was not long before he grew impatient with the Goose because she gave him only a single golden egg a day. He was not getting rich fast enough. Then one day, after he had finished counting his money, the idea came to him that he could get all the golden eggs at once by killing the Goose and cutting it open. But when the deed was done, not a single golden egg did he find, and his precious Goose was dead.</p>
<p>In the real life, the goose means our money, while the golden egg is the money made by our money, which means the interest.</p>
<p>The story revealed the most usual scenario in our daily life: We save money and we gain interest.</p>
<p>And this is the topic I would like to share: Saving money.</p>
<p>Why should we save money? (Ask audiences)</p>
<p>About this, my point is: Saving is for making. By saving money, the interest we get could even cover our daily cost, which sounds too good to be true and seems to decades of years, or does it?</p>
<p>The magic key is the compound interest. In one word, compound interest means that the interest can also make interest. There is a principle named â€œRule of 72â€, letâ€™s do the math about it. Suppose I have 100 yuan, and the annual interest rate is 8%, then we use 72 divide 8 and get 9, it means I will have 200 yuan after 9 years, the money becomes double. Under the effect of compound interest, the assets will grow in a much faster speed than we can imagine.</p>
<p>Now we know why we should save money, but do you know how to save money? In the past, after I got salary, I just left it in the bank account, and used it whenever I would like to buy something. You know I am a computer fans, thus I often upgraded my computer by buying some hardware, such as memory, hard drive and monitor. And in the end of year, I always found I didnâ€™t have much money saved, not even think about the interest. Where did my money go? Actually, My goose was killed by the wrong method of saving money. Is there existing a better way of saving money? Letâ€™s think about the following solution.</p>
<p>I separate my income into three parts:</p>
<ol>
<li>The first part is for daily life, such as food and traffic.</li>
<li>The second part is for my dreams, such as new phone or traveling. Once the account becomes ready, I will use it to achieve one of my dream.</li>
<li>The last part is for making interest, and that is my goose account. I will never take out the money from my goose account. As the goose grows up, the interest made by it will increase as well.</li>
</ol>
<p>By following this approach, my daily life is covered well, and my dream will come true one by one. The most important thing is that I have a goose that will lay golden eggs for me all the time, and I will never kill it.</p>
<p>I believe the financial intelligence will also be the crucial ability in 21 century. As there are too much things we want, if the desire is not handled properly, we may get trapped in financial problem.</p>
<p>Itâ€™s a good way to start leaning financial knowledge by saving money. Raise a goose of ourselves and watch it growing up, the interest will be the power we move on. And in the journey, the dreams in the list will also come true, with a healthy finance status and a better life.</p>
]]></content>
      <categories>
        <category>Wealth</category>
      </categories>
      <tags>
        <tag>toastmaster</tag>
        <tag>speech</tag>
      </tags>
  </entry>
  <entry>
    <title>The Person Upholding My Mind</title>
    <url>/2022/01/12/the-person-uphold-my-mind.html</url>
    <content><![CDATA[<blockquote>
<p>Pathways: Dynamic Leadership</p>
<p>Level 2-3: Introduction to Toastmasters Mentoring</p>
</blockquote>
<span id="more"></span>

<!-- more -->

<p>Why do you join Toastmaster? Maybe you have heard of this question for many times. But hereâ€™s another question: Why do you stay in the club? Maybe you want to make friends, or learn new speak skills, for me, I may have a kind different answer.</p>
<p>I still remember the first time when I joined the meeting. I had totally no idea about what you guys were doing. Suddenly someone asked me: Ryan, please introduce yourself. I had to say, this is the first time in my life I delivered a self introduction in English. Even though thatâ€™s a online meeting, I was just too nerverous to speak, countless Ahs just slid out of my mouth. But what amazed me is that no one laughed at me. This is the moment I decided to join. After I joined the club, Jun Ge contacted me soon and said: Hey Ryan, you can choose a person in club as your mentor.</p>
<p>Emmâ€¦ But what is mentor? I asked. Well, itâ€™s just an experienced club member, who can help you if you need help. Oh, I knew it, just like a new staff in company, someone would help him in work. But then another question came to my mind, who should I choose? At that moment, I totally didnâ€™t understand what is toastmaster, table topic master or evalutor. Suddenly, a word arose in my mind: President, Emmâ€¦ yes, as a president, she must be the most experienced person in club. And her name isâ€¦ Well, I forgot it, I browsed the agenda, then, Sherry became my mentor. Even though we havenâ€™t talked with each other, it seems I have already gained a lot confidence because I believe someone good will help me.</p>
<p>My first role play is Ah-counter, when I was worrying how to do that, Sherry contacted me and gave me some links about Ah-counter, itâ€™s just too good to be true, then I started to exploring those documents and prepared my role. After the meeting, she contacted me again and sent me 4 sections of wechat voice to congratulate my performance, itâ€™s so encourage and sincere, which made it the moment Iâ€™d like to stay.</p>
<p>Well you can see, todayâ€™s topic is mentor. In toastmasters, we all have mentors. Someone regard mentors as a coach, actually, itâ€™s not exactly the same. Compared to teaching stuff hand by hand, I think there is a much magical capability of a mentor, and thatâ€™s the title of my speech: Upholding your mind. Think about it, when we are in trouble, if someone just gives us a task list, like step1, step2, step3â€¦ Well, thatâ€™s good. But if someone helps us analyze the problem, leads our mind and let us figure out the solution by ourselves, that woud be fantantic. And if thereâ€™s any encourage after we finish the task, like â€œgood job Ryanâ€, I would call it the â€œperfectâ€ experience.</p>
<p>If friendly environment is the key point of attracting new member in toastmaster, then mentor must be an important key of keeping old guys. Maybe after the meeting, you can contact with your mentor for your problem as he will always be the guy who can upholds your mind.</p>
]]></content>
      <categories>
        <category>Life</category>
      </categories>
      <tags>
        <tag>Toastmaster</tag>
        <tag>Speech</tag>
      </tags>
  </entry>
  <entry>
    <title>Toastmasterå¸¸è§„ä¼šè®®(2021-05-07)</title>
    <url>/2021/05/06/toastmaster-regular-meeting-aatmc-20210507.html</url>
    <content><![CDATA[<blockquote>
<p>I am toastmaster and table topic master.</p>
</blockquote>
<span id="more"></span>

<h1 id="Toastmaster"><a href="#Toastmaster" class="headerlink" title="Toastmaster"></a>Toastmaster</h1><p>Dear toastmasters, Iâ€™m Ryan, toastmaster of todayâ€™s meeting. After 5 days holiday we get together again, you may be tired or still be excited about your journey, we will talk about that later, but donâ€™t forget an important thing, itâ€™s workday on Saturday.</p>
<p>Before we start the meeting, please keep your mobile phone in silent mode and there are 4 forbidden topics we should not talk about, they are religion, race, politics and sex.</p>
<p>Next please let me introduce the treasure part of our club: Evalution team. First is our timer Sherry, next is Grammarian Christina, the last is Ah-counter Lisa.</p>
<p>Today our theme is â€œJourney on Internal Labour Dayâ€. Itâ€™s the holiday for workers, you and me. </p>
<p>First I would like to know how many of you people went outside of home and visited somewhere, please raise your hand.</p>
<p>For me, I have gone through 27 Labour Days, but this one is special, because for the first time I decided to went out of home to have a trip, though itâ€™s a short trip. Do you know what changed my mind? Of course my girlfriend.</p>
<p>Now letâ€™s step into Table topic section.</p>
<p>About one month before the holiday, she asked me: I want to go to Mount Tai on holiday, you, make a plan. In less than 0.01 seconds, I have imagined a picture, we are pushed and squeezed in the flow of people, the hotel is pretty expensive and we can not even rent a clothes on the top of Mount Tai, shaking in the cold dark night. So I decided to respond her: OK, no problem.</p>
<p>Then I started making the plan, I searched otherâ€™s strategy on the internet, figured out when to buy train tickets, where to order the hotel, and the path we would take to climb the mountain. Final, I had everything done except the train ticket, and this is the most crazy part. I pressed the order button by counting the seconds, but I didnâ€™t even see 1 tickets. I could only buy the candidate ticket. Well, we waited for it until 28, April, then we gave up.</p>
<p>Then I proposed staying at Beijing, I quickly chose 3 places, Luohong Photography Exhibition, CCTV Tower and Hongluo Temple. And we went to study at last two days. Itâ€™s tired but fun, we enjoyed the amazing photo, the delicious food and the beautiful scenery.</p>
<h1 id="Table-topic-master"><a href="#Table-topic-master" class="headerlink" title="Table topic master"></a>Table topic master</h1><p>Topic: <strong>Journey on International Labour day</strong></p>
<p>For the people who took the journey:</p>
<ol>
<li>The most impressive thing in your journey?</li>
<li>Do you feel satisfied with your journey and why?</li>
<li>What do you think about the person who just stayed at home in such a long holiday?</li>
</ol>
<p>For the people who didnâ€™t take the journey:</p>
<ol>
<li>If there any reason that stops you from travelling?</li>
<li>If you can do time travelling and go back to the start of holiday, will you decide to go somewhere?</li>
<li>What do you think about the person who go travelling despite the crowded people and expensive hotel?</li>
</ol>
<p>Common problem:</p>
<ol>
<li>Travelling alone or travelling with someone, which one do you prefer?</li>
<li>Though we have continuous 5 days holiday, but actually 2 of them are exchanged from weekends, do you like this approach?</li>
</ol>
<img src="/2021/05/06/toastmaster-regular-meeting-aatmc-20210507/1.jpg" class="" title="1.jpg">

<img src="/2021/05/06/toastmaster-regular-meeting-aatmc-20210507/2.jpg" class="" title="2.jpg">

<img src="/2021/05/06/toastmaster-regular-meeting-aatmc-20210507/3.jpg" class="" title="3.jpg">

<img src="/2021/05/06/toastmaster-regular-meeting-aatmc-20210507/4.jpg" class="" title="4.jpg">

<img src="/2021/05/06/toastmaster-regular-meeting-aatmc-20210507/5.jpg" class="" title="5.jpg">

<img src="/2021/05/06/toastmaster-regular-meeting-aatmc-20210507/6.jpg" class="" title="6.jpg">]]></content>
      <categories>
        <category>Toastmaster</category>
      </categories>
      <tags>
        <tag>toastmaster</tag>
      </tags>
  </entry>
  <entry>
    <title>Toastmaster Regular Meeting</title>
    <url>/2021/07/03/toastmaster-regular-meeting-aatmc-20210702.html</url>
    <content><![CDATA[<blockquote>
<p>Date: 2021-07-02 12:00 - 13:30</p>
<p>Site: Novo Nordisk, Wangjing, Beijing</p>
<p>Role: Table Topic Evaluator</p>
</blockquote>
<span id="more"></span>

<p>æœ¬ä»¥ä¸ºåˆæ˜¯ä¸€æ¬¡æ²¡æœ‰å¤šå°‘äººçš„æ™®é€šä¼šè®®ï¼Œæ²¡æƒ³åˆ°æ¥äº†è¿™ä¹ˆå¤šæ–°è€ä¼šå‘˜ï¼Œè¿guestéƒ½æœ‰ä¸‰ä½ã€‚</p>
<p>Sherryï¼ŒJaneï¼ŒAlexä¸è¿œä¸‡é‡Œæ‰“è½¦ä»Sonyèµ¶åˆ°NNåˆ†éƒ¨ï¼ˆbushiï¼‰ï¼ŒJunå“¥ä¹ŸOrderäº†ä¸€ä¸ªå¤§ä¼šè®®å®¤ï¼Œç°åœºé…æœ‰å®Œå–„çš„è¿œç¨‹è¿çº¿è®¾å¤‡ï¼ŒNanå“¥ä¸guestå°ä½›åœ¨çº¿å‚åŠ ã€‚</p>
<img src="/2021/07/03/toastmaster-regular-meeting-aatmc-20210702/nan_in_tv.jpg" class="">

<p>ä¼šè®®çš„ä¸»é¢˜æ˜¯â€œPlastic Surrgeryâ€ï¼Œæ•´å®¹ã€‚ä¼¼ä¹åœ¨åœºçš„å¥³ç”Ÿéƒ½æœ‰å¾ˆå¤šæ•…äº‹å¯ä»¥åˆ†äº«ã€‚ä¸ºä»€ä¹ˆè¦æ•´å®¹ï¼Œå¦‚ä½•çœ‹å¾…æ•´å®¹ï¼Œå¤§å®¶å„æŠ’å·±è§ã€‚Janeè§‰å¾—â€œWe can use but not overuse itâ€ï¼ŒNicoleåˆ™ç›¸ä¿¡â€œIt can change destinyâ€ï¼Œæ›´å¤šçš„äººåˆ™è®¤ä¸ºâ€œWe should pay more attention to our inner buildingâ€ã€‚ä¸è¿‡ç¡®å®æœ‰å¾ˆå¤šäººï¼Œé€šè¿‡æ•´å®¹è·å¾—äº†æ›´å¤šè‡ªä¿¡ã€‚</p>
<p>ç”±äºåªæœ‰ä¸€ä¸ªSpeakerï¼ŒTable Topicå»¶é•¿äº†10åˆ†é’Ÿï¼Œç»™ä½œä¸ºEvalutorçš„æˆ‘é€ æˆäº†å¾ˆå¤§æŒ‘æˆ˜ã€‚ä¸è¿‡æ›´å¤§çš„å‹åŠ›ä¼¼ä¹ä¹Ÿä¿ƒä½¿è‡ªå·±æé«˜æ³¨æ„åŠ›ï¼Œåœ¨è®°å½•çš„åŒæ—¶è¿˜èƒ½å¬æ¸…Speakeræ‰€è®²çš„å†…å®¹ã€‚ç»“æœæœ€åå“é“ƒäº†ä¹Ÿæ²¡æœ‰reportå®Œï¼ˆè¿˜å·®ä¸€ä¸ªguestï¼‰ã€‚</p>
<img src="/2021/07/03/toastmaster-regular-meeting-aatmc-20210702/tte.jpg" class="">

<p>æ¥ä¸‹æ¥çš„Prepared Speechï¼ŒNicoleè¡¨ç°çš„éå¸¸å‡ºè‰²ï¼Œä¸ªäººè§‰å¾—ä¿±ä¹éƒ¨ä¸­çš„å¥³ç”Ÿçš„è‹±è¯­æ°´å¹³æ¯”ç”·ç”Ÿé«˜äº†ä¸æ­¢ä¸€å€ã€‚å¥¹ç»˜å£°ç»˜è‰²åœ°é€šè¿‡ä¸¤ä¸ªæ•…äº‹æè¿°ä¸ºä»€ä¹ˆè¦é‡æ–°å›åˆ°Toastermastersï¼Œæ•´ä¸ªæ¼”è®²é”™è½æœ‰è‡´ï¼ŒèŠ‚å¥æ°åˆ°å¥½å¤„ï¼Œæœ€åç”¨5ã€2ã€1ä¸‰ä¸ªæ•°å­—ç‚¹é¢˜ï¼ŒåŒæ—¶è¡¨è¾¾äº†å¯¹ä¿±ä¹éƒ¨çš„çƒ­çˆ±ï¼Œå¯è°“æ˜¯ç‚¹ç›ä¹‹ç¬”ã€‚</p>
<img src="/2021/07/03/toastmaster-regular-meeting-aatmc-20210702/nicole.jpg" class="">

<p>Roxanneçš„åˆ°åœºä¹Ÿæ˜¯ä¸€ä¸ªå°æƒŠå–œï¼Œä½œä¸ºä¿±ä¹éƒ¨ä¸­æœ€å¹´è½»çš„æˆå‘˜ï¼Œè‹±è¯­æ°´å¹³ä¸€æµï¼Œä½œä¸ºæœ¬æ¬¡ä¼šè®®çš„General Evalutorï¼Œå¥¹è¯¦å°½åœ°ç‚¹è¯„äº†æœ¬åœºä¼šè®®ï¼Œæ²¡æœ‰åœé¡¿ï¼Œæ²¡æœ‰é‡å¤ï¼Œå¹²è´§æ»¡æ»¡ã€‚</p>
<p>å¥¹ç»™æˆ‘çš„å»ºè®®åˆ™æ˜¯ï¼šä½œä¸ºTTEï¼Œåº”è¯¥æ›´å…³æ³¨Speakerçš„performanceï¼Œlogicalï¼Œè€Œä¸æ˜¯contentã€‚</p>
<img src="/2021/07/03/toastmaster-regular-meeting-aatmc-20210702/roxanne.jpg" class="">

<p>è¡¨æƒ…ç®¡ç†å¤§å¤±è´¥~~~</p>
<img src="/2021/07/03/toastmaster-regular-meeting-aatmc-20210702/ryan.jpg" class="">

<p>æœ¬åœºä¼šè®®æ— è®ºæ˜¯é˜µå®¹è¿˜æ˜¯å†…å®¹éƒ½å±äºé«˜æ°´å‡†ï¼Œæœ€åä½œä¸ºä¸‰æœˆç»­è´¹çš„ä¼šå‘˜ï¼Œè¿˜é€äº†ä¸€ä¸ªä¸»é¢˜èœç¯®ã€‚</p>
<img src="/2021/07/03/toastmaster-regular-meeting-aatmc-20210702/all.jpg" class="">

<img src="/2021/07/03/toastmaster-regular-meeting-aatmc-20210702/gift.jpg" class="">
]]></content>
      <categories>
        <category>Toastmaster</category>
      </categories>
      <tags>
        <tag>toastmaster</tag>
      </tags>
  </entry>
  <entry>
    <title>Toastmaster Regular Meeting</title>
    <url>/2021/07/08/toastmaster-regular-meeting-aatmc-20210709.html</url>
    <content><![CDATA[<blockquote>
<p>Date: 2021-07-09 12:00 - 13:30</p>
<p>Site: Novo Nordisk, Wangjing, Beijing</p>
<p>Role: Table Topic Master</p>
</blockquote>
<span id="more"></span>

<p>è¿™æ˜¯ä¸€åœºå°è€Œç²¾è‡´çš„ä¼šè®®ï¼Œæ‰€æœ‰çš„Function Roleï¼ŒPrepared Speechä¸€åº”ä¿±å…¨ï¼ŒAlexä½œä¸ºToastmasterï¼Œç¨³æ§å…¨åœºï¼Œæ¯ä¸€ä¸ªè½¬åœºéƒ½è‡ªç„¶æµç•…ï¼Œæ°å€’å¥½å¤„ã€‚å½“ç„¶è¿˜æœ‰Onlineçš„Janeã€‚</p>
<img src="/2021/07/08/toastmaster-regular-meeting-aatmc-20210709/jane.jpg" class="">

<img src="/2021/07/08/toastmaster-regular-meeting-aatmc-20210709/alex.jpg" class="">

<p>æˆ‘ä»¬è¿˜ä¸ºæ–°ä¼šå‘˜Annieå’ŒNicoleä¸¾åŠäº†å…¥ä¼šä»ªå¼ï¼Œæœ‰è¶£çš„æ˜¯ï¼Œå¥¹ä»¬éƒ½æ˜¯æ›¾ç»çš„Toastmastersä¼šå‘˜ï¼Œéƒ½ç”±äºä¸€äº›ç‰¹æ®ŠåŸå› ç¦»å¼€ï¼Œå¾…ç”Ÿæ´»ç¨³å®šä¹‹åï¼Œåˆå‡ºäºå¯¹æé«˜è‡ªå·±çš„æ¸´æ±‚ï¼Œé‡æ–°åŠ å…¥Toastmastersè¿™ä¸ªå¤§å®¶åº­ã€‚çœ‹æ¥ToastmastersçœŸçš„æ˜¯ä¼šè®©äººä¸Šç˜¾ã€‚</p>
<img src="/2021/07/08/toastmaster-regular-meeting-aatmc-20210709/new_member.jpg" class="">

<p>æ¥ä¸‹æ¥å°±æ˜¯æˆ‘çš„ä¸»åœºï¼ŒTable Topicç¯èŠ‚ï¼Œè™½ç„¶æˆ‘éå¸¸å–œæ¬¢è¿™ä¸ªRoleï¼Œä½†æ˜¯ç”±äºå‡†å¤‡çš„ç¡®å®ä¸å……åˆ†ï¼ˆå‰ä¸€å¤©æ™šä¸Šæ‰æƒ³å¥½å¼€åœºè¯ï¼‰ï¼Œæ•´ä¸ªå¼€åœºç£•ç£•ç»Šç»Šã€‚å¥½åœ¨ä¸»é¢˜æ¯”è¾ƒæœ‰è¶£ï¼Œâ€œOwe A Favorâ€ï¼Œæ¬ äººæƒ…ã€‚å¤§å®¶ä¹Ÿè®¨è®ºçš„é¢‡ä¸ºå°½å…´ã€‚Christinaçš„è®ºç‚¹æˆ‘å¾ˆèµåŒï¼šå¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ä¸éœ€è¦æ‹…å¿ƒâ€œOwe A Favorâ€ï¼Œå› ä¸ºå½“ä½ â€œReturn it backâ€çš„æ—¶å€™ï¼ŒThe relationship will be enhancedã€‚</p>
<img src="/2021/07/08/toastmaster-regular-meeting-aatmc-20210709/ttm.jpg" class="">

<p>Christinaçš„æ¼”è®²ç»å¯¹æ˜¯æœ¬æ¬¡ä¼šè®®çš„äº®ç‚¹ï¼Œå¥¹éå¸¸ä¸“ä¸šæµç•…åœ°å‘æˆ‘ä»¬èŒåœºäººä¼ æˆâ€œHow to manage your boosâ€ã€‚ç¬¬ä¸€ï¼Œå‡†ç¡®ç†è§£è€æ¿çš„æ„å›¾ï¼›ç¬¬äºŒï¼Œå‘è€æ¿ç”³è¯·èµ„æºï¼›ç¬¬ä¸‰ï¼Œå‘è€æ¿å¯»æ±‚åé¦ˆã€‚è¿™ä¸‰æ­¥æ˜¯ä¾æ¬¡é€’è¿›çš„ï¼Œæœ€ç»ˆèƒ½ä½¿ä½ å‡ºè‰²åœ°å®Œæˆå·¥ä½œã€‚</p>
<img src="/2021/07/08/toastmaster-regular-meeting-aatmc-20210709/christina.jpg" class="">

<p>æœ€åï¼Œæˆ‘å±…ç„¶è¿˜è·å¾—äº†æœ€ä½³Function Roleåœ°å¥–çŠ¶ï¼Œæœ‰ç‚¹ä¸å¥½æ„æ€ï¼Œä¸‹æ¬¡æˆ‘ä¸€å®šè®¤çœŸå‡†å¤‡ã€‚</p>
<img src="/2021/07/08/toastmaster-regular-meeting-aatmc-20210709/best_fun_role.jpg" class="">

<h1 id="Table-Topic-Master"><a href="#Table-Topic-Master" class="headerlink" title="Table Topic Master"></a>Table Topic Master</h1><p>Good afternoon, Iâ€™m Ryan, table topic master of todayâ€™s meeting. During this section, I will share my stories and thoughts related to todayâ€™s topic. And you will have the chance standing on the stage, sharing your mind. No further ado, letâ€™s start.</p>
<p>You may have noticed, today our topic is Owe A Favor (æ¬ äººæƒ…). I believe itâ€™s quite an usual phenomenon for Chinese because we used to put a high value on the relationship with other people.</p>
<p>We will owe a favor to someone under plenty of situation, the most common one could be that you obtain some help from people. And after that, you may start to think about how to return it back. By aSSffording for a meal, or giving a present, you will have your own way.</p>
<p>But what if you owe a favor to someone, and then he asks you for help as well, not at your convenience. giving the help may keep you far away from your important work, or if you just reject, things may get worse, you can imagine what he will think about: What an ungrateful person, I gave my help but he just reject my request, I will never help him again.</p>
<p>This is a tough condition and actually I just encountered it recently. Last month, my mother did a physical examination and the doctor recommended to take out something from her body by a small operation. But she has been not caught up with mobile phone. As we know, to register at hospital, you need mobile phone, to check your health status, you need mobile phone, and even when paying money, you are suggested to use mobile phone. She just canâ€™t figure these things out and then asked a doctor neighbour for help. Finally she finished the operation and everything went well. I am pretty grateful and want to thank her face to face. But when she heard that I am a software engineer, she believed I must be good at computer and want me to make a ppt for her. I just couldnâ€™t say no at that moment. And it takes me nearly two days to organize the data and design the diagram. After that, I will have to work over and over time to make up the progress of my job.</p>
<p>I still feel grateful for her. But I also realize itâ€™s hard to return the favor sometime. Have you ever owed favor to some one and how did you return it, now itâ€™s you turn.</p>
<p>I prepared 8 questions for you, you can choose the question or just share the story about what kind of favor you have ever owed and how did you return it back.</p>
<ol>
<li>If some one owe a favor to you but never return it back, will you help him again?</li>
<li>Will you return the favor by doing something you are not good at?</li>
<li>Do you agree this statement: we can owe anything but not a favor?</li>
<li>Will you feel pressure if you owe a favor to someone?</li>
<li>Will you spend a lot of money just to avoid owing a favor?</li>
</ol>
]]></content>
      <categories>
        <category>Toastmaster</category>
      </categories>
      <tags>
        <tag>toastmaster</tag>
      </tags>
  </entry>
  <entry>
    <title>Break the Lucky Silence</title>
    <url>/2021/02/23/toastmaster-speech-ice-breaker.html</url>
    <content><![CDATA[<blockquote>
<p>Pathways: Dynamic Leadership</p>
<p>Level 1-1: Ice Breaker</p>
</blockquote>
<span id="more"></span>

<p>I was born in a snowy midnight in a small village of Heilongjiang Province. My mother gave me the name Rui which means lucky in Chinese. That word comes from the saying: A snowy year, A harvest year.</p>
<p>As my motherâ€™s wish, I am truly a lucky boy, not means winning the lottery, to be more precise, I am a quiet boy. </p>
<p>Not like my cousins, I never cried for any toy or candy. My mother told me to study, I just began studying. I didnâ€™t understand why I should learn Chinese and math, actually I didnâ€™t even heard of collage until junior high school. But what I did know is that my parents would feel happy if I said nothing and follow their instruction.</p>
<p>I followed my parents to Zhejiang Province and went through the whole primary school period. The dialect in that place is quite hard to understand. Luckily both teachers and students spoke mandarin in the class. In the school I was a kind of transparent person as I didnâ€™t talk much. My favorite habit was reading books about computer and electronic, those books were put in the corner of the shelf at library, I really enjoyed the content in those books even though I couldnâ€™t understand it.</p>
<p>Talking less let me have more time to read and think, gradually I became a good listener. My friends preferred to share their happiness and sadness with me, of course, they wouldnâ€™t expect much voice response. Also Being quiet prevented me from many troubles, such as fighting with other people.</p>
<p>Things got change at middle high school after I came to Shandong Province with my family. The knowledge became harder and harder to learn, but I was not good at asking others for help. Whatâ€™s worse, nobody had time talking with me, I could only solve the problem by myself, which would not turn to good result at that period. Eventually I went to an ordinary university at Yantai city to learn computer science.</p>
<p>The shortcoming of being not good at talking became even more obvious in collage. I saw many people make friends, make money, and even make girl friends by communicating with others. I had no idea how to make change because I got nervous and afraid while taking with strangers. At last I joined in a lab and made use of my entire spare time to study. Yes I got a great performance on my subject, but in my deep heart, I knew I didnâ€™t make any progress at some aspect.</p>
<p>After graduated, I came to Beijing with one of my collage classmates and rented a room together. I guess we are the most strange roommates in the world: At weekends, we laid on our beds, played mobile phone or computer, without saying a word among whole day. Even at meal time, we ordered our food silently.</p>
<p>This weakness also started affecting my life, while interviewing for a job, I never had courage to argue for a better salary. While getting along with my girl friend, the failure of expressing my feelings made me lost her.</p>
<p>But just like someone had said: Love has a magic power. I never had made such a great determination to make change after breakup. The sadness forced myself to experience different kind groups of people. Some people got exercise at night, I tried it; Some people were discussing a news, I joined it. Someone joined a club, I am here.</p>
<p>The past is the past, now I am seeking for a rebirth. There is a saying: Silence is gold. but I hope I have the ability to express my thought, to influence people, to break the silence. I need to talk, I want to talk, I will be good at talk.</p>
]]></content>
      <categories>
        <category>Toastmaster</category>
      </categories>
      <tags>
        <tag>toastmaster</tag>
        <tag>speech</tag>
      </tags>
  </entry>
  <entry>
    <title>å°†rootfsè½¬æ¢æˆDcoker image</title>
    <url>/2020/08/23/transform-rootfs-to-docker-image.html</url>
    <content><![CDATA[<blockquote>
<p>æˆ‘ä»¬åœ¨ç¼–è¯‘ä¸€äº›è€ç‰ˆæœ¬çš„è½¯ä»¶æ—¶ï¼Œé€šå¸¸å¿…é¡»é€‰æ‹©ä¸€ä¸ªè¾ƒè€ç‰ˆæœ¬çš„hostç¯å¢ƒï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¼šé€‰æ‹©vmï¼Œä½†æ˜¯vmæœ‰å‡ ä¸ªæ¯”è¾ƒæ˜æ˜¾çš„ç¼ºé™·ï¼šä¸€æ˜¯èµ„æºçš„æ¶ˆè€—è¾ƒå¤§ï¼Œå› ä¸ºvmæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç³»ç»Ÿï¼Œå†…æ ¸ä»¥åŠå¤§é‡çš„æœåŠ¡åœ¨hostè¿è¡Œäº†ä¸€ä»½ï¼Œåœ¨vmé‡Œè¿˜è¦å†è¿è¡Œä¸€ä»½ï¼Œæ¶ˆè€—äº†å¤§é‡å†…å­˜ï¼›äºŒæ˜¯åœ¨hostå’Œvmä¹‹é—´å…±äº«å­˜å‚¨ä¸æ–¹ä¾¿ï¼Œè™½ç„¶å¯ä»¥ä½¿ç”¨nfsï¼Œsambaä¹‹ç±»çš„æ–¹å¼ï¼Œä½†æ˜¯ä»–ä»¬éƒ½æ˜¯åŸºäºç½‘ç»œçš„ï¼Œå½“ç¼–è¯‘æ—¶ä¼šæœ‰å¤§é‡å°æ–‡ä»¶è¯»å†™ï¼Œè¿™æ—¶å¯èƒ½ä¼šé‡åˆ°æ€§èƒ½ç“¶é¢ˆã€‚é€šè¿‡ä½¿ç”¨Dockerï¼Œåˆ™å¯ä»¥è¾ƒå¥½çš„è§£å†³è¿™ç±»é—®é¢˜ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="Dockerçš„ä¼˜åŠ¿"><a href="#Dockerçš„ä¼˜åŠ¿" class="headerlink" title="Dockerçš„ä¼˜åŠ¿"></a>Dockerçš„ä¼˜åŠ¿</h1><p>Dockerå¹¶ä¸ä¼šé‡æ–°è¿è¡Œä¸€ä¸ªæ–°çš„å†…æ ¸ï¼Œå®ƒåªæ˜¯é€šè¿‡å†…æ ¸çš„cgroupå’Œnamespaceæœºåˆ¶ï¼Œå¯¹è¿›ç¨‹çš„æƒé™å’Œèµ„æºè¿›è¡Œæ§åˆ¶ï¼Œä»è€Œå®ç°ä¸€ç§è½»é‡çº§çš„éš”ç¦»ã€‚</p>
<p>ä¸åŒcontainerä¸­çš„è¿›ç¨‹è™½ç„¶ä½¿ç”¨è‡ªå·±çš„libä»¥åŠbinaryï¼Œä½†æ˜¯ä»–ä»¬éƒ½æ˜¯ä¾é hostçš„kernelçš„ç³»ç»Ÿè°ƒç”¨æ¥å·¥ä½œï¼Œå› æ­¤ï¼Œç†è®ºä¸Šä¼šæœ‰æ›´å°çš„æ€§èƒ½æŸå¤±ã€‚</p>
<p>containerä¸­ä¹Ÿä¸éœ€è¦è¿è¡Œé‚£äº›ä¸ç¼–è¯‘æ— å…³çš„æœåŠ¡ï¼Œå› ä¸ºç¼–è¯‘è¿‡ç¨‹åªä¼šç”¨åˆ°rootfsä¸­çš„libå’Œbinaryï¼Œè¿™ä¼šèŠ‚çœå¤§é‡çš„å†…å­˜ã€‚</p>
<p>è¿˜æœ‰å¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œhostçš„ç›®å½•å¯ä»¥ç›´æ¥æ˜ å°„åˆ°containerå†…ï¼Œè€Œä¸æ˜¯é€šè¿‡ç½‘ç»œï¼Œè¿™æ ·åœ¨containerå†…éƒ¨å¯¹äºå­˜å‚¨çš„è¯»å†™æ€§èƒ½å‡ ä¹è·Ÿhostæ˜¯ä¸€æ ·çš„ã€‚</p>
<h1 id="åˆ›å»ºDocker-image"><a href="#åˆ›å»ºDocker-image" class="headerlink" title="åˆ›å»ºDocker image"></a>åˆ›å»ºDocker image</h1><p>é€šå¸¸æ¥è¯´ï¼Œæœ‰ä¸‰ç§æ–¹æ³•æ¥åˆ›å»ºDocker imageï¼š</p>
<ul>
<li>Dockerfile</li>
<li>Dockerhub</li>
<li>rootfs</li>
</ul>
<p>æˆ‘ä»¬é‡ç‚¹è¯´Dockerhubå’Œrootfsè¿™ä¸¤ç§æ–¹å¼ï¼Œå› ä¸ºç¬¬ä¸€ç§æˆ‘è¿˜ä¸ä¼šã€‚ã€‚ã€‚</p>
<h2 id="Docker-hub"><a href="#Docker-hub" class="headerlink" title="Docker hub"></a>Docker hub</h2><p>è·å¾—Docker imageæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ç›´æ¥ä»Docker hubä¸Špullä¸‹æ¥ï¼Œä¾‹å¦‚æˆ‘éœ€è¦ä¸€ä¸ªUbuntu 18.04çš„Docker imageï¼Œåªéœ€è¦æ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull ubuntu:18.04</span><br></pre></td></tr></table></figure>

<p>è¿™ç§æ–¹æ³•æœ‰ä¸ªå±€é™ï¼Œå°±æ˜¯æœ‰äº›éå¸¸è€çš„å‘è¡Œç‰ˆå¹¶æ²¡æœ‰å¯¹åº”çš„å®˜æ–¹Dcoker imageï¼Œä½ å¯èƒ½ä¼šæ‰¾åˆ°ä¸€äº›ä¸ªäººä¸Šä¼ çš„ï¼Œä½†å¦‚æœä½ å¯¹äºç¯å¢ƒçš„å®‰å…¨æ€§å’Œç¨³å®šæ€§æœ‰è¾ƒé«˜çš„è¦æ±‚ï¼Œé‚£å°±éœ€è¦è‡ªå·±åˆ¶ä½œä¸€ä¸ªã€‚</p>
<h2 id="rootfs"><a href="#rootfs" class="headerlink" title="rootfs"></a>rootfs</h2><p>å¦‚æœä½ ç°åœ¨æœ‰ä¸€ä¸ªè¿è¡Œçš„linuxç³»ç»Ÿï¼Œå¯èƒ½æ˜¯ç‰©ç†æœºï¼Œå¯èƒ½æ˜¯è™šæ‹Ÿæœºï¼Œä½ åªæ˜¯ç”¨å®ƒæ¥åšç¼–è¯‘ï¼Œé‚£ä¹ˆä½ ç°åœ¨æœ‰ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ï¼Œé‚£å°±æ˜¯å°†å®ƒè½¬æ¢æˆä¸€ä¸ªDocker imageã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo tar --numeric-owner --exclude=/boot/* --exclude=/dev/* --exclude=/lost+found --exclude=/proc/* --exclude=/selinux --exclude=/sys/* --exclude=/tmp/* --exclude=/var/run/* --exclude=/var/log/* -cf ubuntu-5.04.tar /</span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œæˆ‘ä»¬åªéœ€è¦å°†ubuntu-5.04.tarå¯¼å…¥Dockerçš„æœ¬åœ°Repositoryï¼Œå³å¯å¯åŠ¨è¿™ä¸ªcontainerã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker import ubuntu-5.04.tar ubuntu:5.04</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run -it --rm ubuntu:5.04 bash</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>docker</tag>
        <tag>rootfs</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨kcptunæ¥åŠ é€Ÿshadowsocks</title>
    <url>/2019/03/30/use-kcptun-to-accelecate-proxy-md.html</url>
    <content><![CDATA[<blockquote>
<p>æœ€è¿‘gfwå‡çº§ä¹‹åï¼Œä¼¼ä¹å¸¦æ¥ä¸€ä¸ªå…¨æ–°çš„ç‰¹æ€§â€”â€”TCPé˜»æ–­ã€‚å—å½±å“çš„vpså¯ä»¥pingï¼Œä½†æ˜¯æ‰€æœ‰ä½¿ç”¨tcpåè®®çš„åº”ç”¨éƒ½ä¼šå¤±æ•ˆï¼Œå¦‚sshå’Œshadowsocksï¼Œä¸è¿‡udpå¹¶æœªå—åˆ°å½±å“ï¼Œä¸ªäººåˆ†æå¯èƒ½tcpçš„é•¿è¿æ¥æ›´å®¹æ˜“è¯†åˆ«ã€‚ç”±äºshadowsockså¹¶ä¸æ”¯æŒudpé€šè®¯ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨kcptunä½œä¸ºä¸­é—´å±‚ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="åŸºæœ¬åŸç†"><a href="#åŸºæœ¬åŸç†" class="headerlink" title="åŸºæœ¬åŸç†"></a>åŸºæœ¬åŸç†</h1><p>è¿™æ˜¯kcptuné¡¹ç›®ç½‘ç«™çš„åŸç†å›¾ç‰‡ã€‚</p>
<img src="/2019/03/30/use-kcptun-to-accelecate-proxy-md/kcptun.png" class="" title="kcptun workflow">

<p>å¯ä»¥çœ‹åˆ°kcptunçš„å®¢æˆ·ç«¯ä¼šåœ¨æœ¬åœ°ç›‘å¬æ¥è‡ªåº”ç”¨ç¨‹åºçš„æµé‡ï¼ŒåŒæ—¶å°†æ•°æ®å‘å¾€æœåŠ¡ç«¯ï¼ŒkcptunæœåŠ¡ç«¯ç¨‹åºä¼šå°†æ•°æ®å‘å¾€ç›®æ ‡ç«¯å£ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´ä½¿ç”¨kcpåè®®ï¼Œå®ƒåŸºäºudpã€‚</p>
<h1 id="å®‰è£…kcptun"><a href="#å®‰è£…kcptun" class="headerlink" title="å®‰è£…kcptun"></a>å®‰è£…kcptun</h1><p>æ ¹æ®ä½ çš„è®¾å¤‡çš„å¤„ç†å™¨æ¶æ„ä»¥åŠç³»ç»Ÿç±»å‹ï¼Œä»<a href="https://github.com/shadowsocks/kcptun/releases/latest">https://github.com/shadowsocks/kcptun/releases/latest</a>ä¸‹è½½ç›¸åº”çš„ç¨‹åºã€‚</p>
<h2 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h2><ol>
<li><p>å°†ä¸‹è½½å¥½çš„æœåŠ¡ç«¯ç¨‹åºæ”¹åä¸º<strong>kcp-server</strong>ï¼Œå¹¶ä¸”å¤åˆ¶åˆ°<code>/usr/bin</code></p>
</li>
<li><p>ç”±äºkcptunç›®å‰ä¸æ”¯æŒç›´æ¥ç”Ÿæˆå®ˆæŠ¤è¿›ç¨‹ï¼ŒåŒæ—¶ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œæˆ‘ç¼–å†™äº†åŸºäºsystemdçš„æœåŠ¡è„šæœ¬</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/colorfulshark/kcptun-daemon.git</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£…æœåŠ¡è„šæœ¬åŠé…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd kcptun-daemon</span><br><span class="line">chmod +x install.sh</span><br><span class="line">sudo ./install.sh</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h2><p>Windowsï¼š<a href="https://github.com/shadowsocks/kcptun/releases/latest">https://github.com/shadowsocks/kcptun/releases/latest</a></p>
<p>ä¸‹è½½è§£å‹ä¹‹åï¼Œå°†å®¢æˆ·ç«¯ç¨‹åºå¤åˆ¶åˆ°shadowsocksæ‰€åœ¨ç›®å½•ï¼Œå¹¶æ”¹åä¸ºkcp-client.exe</p>
<p>Androidï¼š<a href="https://github.com/shadowsocks/kcptun-android/releases/latest"><a href="https://github.com/shadowsocks/kcptun-android/releases/latest">https://github.com/shadowsocks/kcptun-android/releases/latest</a></a></p>
<p>ç›´æ¥å®‰è£…å³å¯</p>
<h1 id="é…ç½®kcptun"><a href="#é…ç½®kcptun" class="headerlink" title="é…ç½®kcptun"></a>é…ç½®kcptun</h1><p>è¿™é‡Œå¹¶ä¸æ¢è®¨æœ€ä½³é…ç½®ï¼Œå› ä¸ºæ¯ä¸ªäººçš„ç½‘ç»œæƒ…å†µéƒ½ä¸åŒï¼Œæ‰€ä»¥è¿™é‡Œåªä»‹ç»ä¸€ä¸ªæœ€å°çš„å¯å·¥ä½œé…ç½®ã€‚</p>
<h2 id="æœåŠ¡ç«¯-1"><a href="#æœåŠ¡ç«¯-1" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h2><p>æœåŠ¡ç«¯çš„é…ç½®æ–‡ä»¶åœ¨<code>/etc/kcptun/config.json</code></p>
<ol>
<li>listenï¼škcptunçš„æœ¬åœ°ç›‘å¬ç«¯å£ï¼Œç”¨äºä¸å®¢æˆ·ç«¯é€šè®¯</li>
<li>targetï¼šæœåŠ¡ç«¯æ¥æ”¶åˆ°æ•°æ®åè½¬å‘çš„åœ°å€ï¼Œè¿™é‡Œå°±æ˜¯ä½ çš„shadowsocksæ‰€ç›‘å¬çš„IPåœ°å€å’Œç«¯å£å·</li>
<li>keyï¼šå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯è®¤è¯çš„å¯†é’¥</li>
<li>cryptï¼šåŠ å¯†æ–¹å¼ï¼Œç”±äºshadowsocksæœ¬èº«å·²ç»åŠ å¯†ï¼Œæ‰€ä»¥ä¸éœ€è¦è®¾ç½®éå¸¸å¤æ‚çš„åŠ å¯†æ–¹å¼</li>
<li>modeï¼šå“åº”æ¨¡å¼ï¼Œæ›´å¿«çš„å“åº”å¯èƒ½é€ æˆæ›´é«˜çš„ä¸¢åŒ…ç‡</li>
</ol>
<p>æ³¨æ„ï¼Œshadowsocksçš„ç›‘å¬ç«¯å£ä¸kcptunçš„targetç«¯å£è¦ä¸€è‡´ã€‚</p>
<h2 id="å®¢æˆ·ç«¯-1"><a href="#å®¢æˆ·ç«¯-1" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><ol>
<li>æ‰“å¼€shadowsocks<strong>ç¼–è¾‘æœåŠ¡å™¨</strong>çš„ç•Œé¢</li>
<li>å°†<strong>æœåŠ¡å™¨ç«¯å£</strong>æ”¹ä¸ºkcptunæ‰€ç›‘å¬çš„ç«¯å£ï¼Œé»˜è®¤æ˜¯29900</li>
<li>åœ¨<strong>æ’ä»¶ç¨‹åº</strong>ä¸­ï¼Œå¡«å…¥<strong>kcp-server.exe</strong></li>
<li>åœ¨<strong>æ’ä»¶é€‰é¡¹</strong>ä¸­ï¼Œå¡«å…¥<code>mode=fast;key=&quot;it&#39;s a secrect&quot;</code></li>
<li>ç¡®è®¤å³å¯</li>
</ol>
<h3 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h3><ol>
<li>å®‰è£…kcptunåï¼Œåœ¨shadowsocksçš„æœåŠ¡å™¨ç¼–è¾‘ç•Œé¢çš„Pluginä¸­é€‰æ‹©kcptun</li>
<li>åœ¨Configureä¸­å¡«å…¥<code>mode=fast;key=&quot;it&#39;s a secrect&quot;</code></li>
<li>ç¡®è®¤åé‡æ–°è¿æ¥æœåŠ¡å™¨</li>
</ol>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shadowsocks</tag>
        <tag>kcptun</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨Debianä¸‹ä½¿ç”¨Gnome3</title>
    <url>/2018/12/31/using-gnome3-under-debian.html</url>
    <content><![CDATA[<blockquote>
<p>æ¥è§¦Gnomeæœ€æ—©æ˜¯åœ¨Ubuntuä¸Šï¼Œä½†æ˜¯åæ¥Ubuntuæ¢æˆäº†Unityï¼Œä¸è¿‡æœ€ååˆæ¢å›äº†Gnomeï¼Œå¯è°“ä¸€æ³¢ä¸‰æŠ˜ã€‚ç›®å‰Gnome3æ— è®ºæ˜¯åœ¨æ€§èƒ½ã€ç¨³å®šæ€§è¿˜æ˜¯å¯ç©æ€§éƒ½å·²ç»æœ‰äº†é•¿è¶³çš„è¿›æ­¥ï¼Œæ‰€ä»¥æ‰“ç®—å°†Debianä¸Šçš„Ubuntu-Mateåˆ‡æ¢ä¸ºGnome3ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="å®‰è£…Gnome3"><a href="#å®‰è£…Gnome3" class="headerlink" title="å®‰è£…Gnome3"></a>å®‰è£…Gnome3</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install task-gnome-desktop</span><br></pre></td></tr></table></figure>

<p>åœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå®‰è£…GDM3ä½œä¸ºæ¡Œé¢ç®¡ç†å™¨ï¼Œå¦‚æœä½ å½“å‰çš„æ¡Œé¢ç®¡ç†å™¨ä¸æ˜¯å®ƒï¼Œä¼šè®©ä½ é€‰æ‹©ä¸€ä¸ªé»˜è®¤çš„æ¡Œé¢ç®¡ç†å™¨ã€‚</p>
<h1 id="é…ç½®Gnome3"><a href="#é…ç½®Gnome3" class="headerlink" title="é…ç½®Gnome3"></a>é…ç½®Gnome3</h1><h2 id="å®Œå–„æ’ä»¶ç¯å¢ƒ"><a href="#å®Œå–„æ’ä»¶ç¯å¢ƒ" class="headerlink" title="å®Œå–„æ’ä»¶ç¯å¢ƒ"></a>å®Œå–„æ’ä»¶ç¯å¢ƒ</h2><p>Gnome3çš„ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜åŠ¿å°±æ˜¯æœ‰ä¸€ä¸ªæ´»è·ƒçš„ç¤¾åŒºï¼Œä»¥åŠå¤§é‡çš„æ¡Œé¢æ‰©å±•æ”¯æŒã€‚å¦‚æœæƒ³è¦æ–¹ä¾¿çš„å®‰è£…æ‰©å±•ç¨‹åºï¼Œéœ€è¦ä¸€äº›é¢å¤–çš„æ­¥éª¤ã€‚</p>
<ol>
<li><p>åœ¨Chromeå®‰è£…â€œ<strong>GNOME Shell integration</strong>â€æ’ä»¶</p>
</li>
<li><p>å®‰è£…â€œ<strong>chrome-gnome-shell</strong>â€</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install chrome-gnome-shell</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¤åˆ¶é…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo mkdir -p /etc/opt/chrome</span><br><span class="line">sudo cp -r /etc/chromium/* /etc/opt/chrome/</span><br></pre></td></tr></table></figure></li>
</ol>
<p>ä»¥ä¸Šæ­¥éª¤çš„ç›®çš„æ˜¯å¼€å¯Chromeç­‰æµè§ˆå™¨ä¸­æ£€æµ‹Gnomeä¿¡æ¯çš„åŠŸèƒ½ï¼Œè¯¦è§<a href="https://wiki.gnome.org/Projects/GnomeShellIntegrationForChrome/Installation">GNOME Shell integration for Chrome Installation Guide</a></p>
<h2 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h2><p><a href="https://extensions.gnome.org/">Gnome Extensions</a></p>
<p>Gnome3ä¸­ä¸€ä¸ªäº‰è®®å¾ˆå¤§çš„åœ°æ–¹å°±æ˜¯Gnome-Shellï¼Œå®ƒæœ‰ç‚¹ç±»ä¼¼äºMacOSçš„LaunchPadï¼Œä½†ç”±äºLinuxä¸‹çš„GPUåŠ é€Ÿæ”¯æŒå¹¶ä¸å®Œå–„ï¼Œå› æ­¤å…¶è¿‡å¤šçš„åŠ¨ç”»åè€Œæˆäº†å‡åˆ†é¡¹ï¼Œä¸ºäº†æ›´é«˜æ•ˆçš„æ‰“å¼€ç¨‹åºï¼Œéœ€è¦é¢å¤–çš„æ’ä»¶æ”¯æŒã€‚</p>
<ol>
<li><p><a href="https://extensions.gnome.org/extension/1228/arc-menu/">Arc Menu</a></p>
<p>è¿™æ—¶ä¸€ä¸ªç±»ä¼¼äºWIndowså¼€å§‹èœå•çš„æ’ä»¶ï¼Œé‡Œé¢å¯¹äºç³»ç»Ÿä¸­çš„è½¯ä»¶è¿›è¡Œäº†åˆ†ç±»ï¼Œä¹Ÿæ”¯æŒå¿«é€Ÿæœç´¢</p>
</li>
<li><p><a href="https://extensions.gnome.org/extension/307/dash-to-dock/">Dash to Dock</a></p>
<p>è¿™æ˜¯ä¸€ä¸ªç±»ä¼¼äºMacOSä¸­çš„Dockæ çš„æ’ä»¶ï¼Œé€šè¿‡ç®€å•çš„é…ç½®å¯ä»¥å˜å¾—ç±»ä¼¼äºGnome2ä¸­çš„ä¾§æ ï¼Œå¯ä»¥å¿«é€Ÿæ‰“å¼€æˆ–è€…åˆ‡æ¢åº”ç”¨</p>
</li>
<li><p><a href="https://extensions.gnome.org/extension/358/activities-configurator">Activities Configurator</a></p>
<p>è¿™æ˜¯ä¸€ä¸ªç”¨æ¥è°ƒèŠ‚é¡¶æ æ•ˆæœçš„æ’ä»¶ï¼Œç›®çš„æ˜¯è®©é¡¶æ ä¸ä¾§æ åœ¨æ•ˆæœä¸Šä¸€è‡´ï¼Œä¸ä¼šæœ‰å‰²è£‚æ„Ÿã€‚</p>
</li>
<li><p><a href="https://extensions.gnome.org/extension/1276/night-light-slider">Night Light Slider</a></p>
<p>è¿™æ˜¯ä¸€ä¸ªç”¨æ¥è°ƒæ•´æŠ¤çœ¼æ¨¡å¼çº§åˆ«çš„æ’ä»¶ï¼Œé»˜è®¤çš„æŠ¤çœ¼æ¨¡å¼åªèƒ½æ‰“å¼€æˆ–å…³é—­ï¼Œä¸èƒ½è°ƒæ•´è‰²æ¸©ã€‚</p>
</li>
</ol>
<h2 id="å®‰è£…ä¸»é¢˜"><a href="#å®‰è£…ä¸»é¢˜" class="headerlink" title="å®‰è£…ä¸»é¢˜"></a>å®‰è£…ä¸»é¢˜</h2><p><a href="https://www.gnome-look.org/">Gnome Look</a></p>
<p>ä¸ºäº†èƒ½å¤Ÿåœ¨ç½‘é¡µä¸Šæ–¹ä¾¿çš„å®‰è£…ä¸»é¢˜ï¼Œéœ€è¦å®‰è£…<a href="https://www.opendesktop.org/p/1136805/">ocs-url</a>ã€‚</p>
<p>é¦–å…ˆæ‰“å¼€ocs-urlçš„ä¸»é¡µï¼Œç„¶ååœ¨â€œFilesâ€é€‰é¡¹å¡ä¸­ä¸‹è½½debå®‰è£…åŒ…ï¼Œä¸‹è½½åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo dpkg -i ocs-url*</span><br><span class="line">sudo apt install -f</span><br></pre></td></tr></table></figure>

<p>æœ€åï¼Œåœ¨Gnome Lookä¸Šç›´æ¥åœ¨å“åº”ä¸»é¢˜ç‚¹å‡»Installå³å¯ã€‚</p>
<h2 id="å°æŠ€å·§"><a href="#å°æŠ€å·§" class="headerlink" title="å°æŠ€å·§"></a>å°æŠ€å·§</h2><ul>
<li><p>å¦‚ä½•ä½¿dockæ çš„æ´»è·ƒå›¾æ ‡åœ¨ä¸åŒå·¥ä½œåŒºå†…å®Œå…¨éš”ç¦»ï¼Ÿ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gsettings set org.gnome.shell.app-switcher current-workspace-only true</span><br><span class="line">gsettings set org.gnome.shell.extensions.dash-to-dock isolate-workspaces true</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸­ç§‘å¤§è½¯ä»¶æºç”Ÿæˆå™¨</p>
<p><a href="https://mirrors.ustc.edu.cn/repogen/">repository file generator</a></p>
</li>
<li><p>è€ç‰ˆæœ¬Ubuntuçš„è½¯ä»¶æºå¤±æ•ˆå¦‚ä½•è§£å†³ï¼Ÿ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo sed -i &#x27;s/archive.ubuntu/old-releases.ubuntu/&#x27; /etc/apt/sources.list</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨Ubuntu Serverå®‰è£…Gnome3åæ— æ³•ä½¿ç”¨Network Managerï¼Ÿ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/netplan</span><br><span class="line"></span><br><span class="line">network:</span><br><span class="line">  version: 2</span><br><span class="line">  renderer: NetworkManager</span><br><span class="line"></span><br><span class="line">netplan generate</span><br><span class="line">netplan apply</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¦‚ä½•æŸ¥çœ‹å½“å‰çš„ç³»ç»Ÿç‰ˆæœ¬ï¼Ÿ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">lsb_release -a</span><br><span class="line">cat /etc/issue</span><br><span class="line">cat /etc/os-release</span><br><span class="line">hostnamectl</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>debian</tag>
        <tag>gnome3</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨Windowsä¸­ä½¿ç”¨Xserver</title>
    <url>/2021/01/16/using-xserver-in-windows.html</url>
    <content><![CDATA[<blockquote>
<p>éšç€å…¬å¸å…¨é¢è½¬å‘å¾®è½¯äº‘æœåŠ¡ï¼Œå°¤å…¶æ˜¯outlookã€calendarã€onedriveå’Œofficeè¿™å‡ ä¸ªå¥—ä»¶çš„åŠ å…¥ï¼Œä½¿ç”¨Windowsç”µè„‘ç¡®å®èƒ½å¸¦æ¥æ›´é«˜æ•ˆä¾¿æ·çš„åŠå…¬ä½“éªŒï¼Œä½œä¸ºLinuxç¨‹åºå‘˜æœ€åçš„æ‰§ç€ï¼Œæˆ‘çš„Linuxç³»ç»Ÿæœ€ç»ˆä¹Ÿæ´»åœ¨äº†è™šæ‹Ÿæœºé‡Œï¼Œå˜æˆäº†Windowsçš„ä¸€ä¸ªâ€œæœåŠ¡â€ã€‚ç„¶è€Œæœ‰æ—¶å€™å½“æˆ‘ä»¬å¿…é¡»ä½¿ç”¨Linuxä¸‹çš„å›¾å½¢ç¨‹åºæ—¶è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
</blockquote>
<span id="more"></span>

<p>å®é™…ä¸ŠX Window Systemæœ€åˆè®¾è®¡ä¸Šå°±å……åˆ†è€ƒè™‘äº†é€šè¿‡ç½‘ç»œä¼ è¾“GUIè¿™ä¸ªç‰¹æ€§ï¼ŒXclientåœ¨ä¸€å°Linuxæœºå™¨ä¸Šè¿è¡Œï¼Œè€Œå…¶GUIå¯ä»¥é€šè¿‡ç½‘ç»œåœ¨ä»»ä½•è¿è¡ŒXserverçš„æœºå™¨ä¸Šæ˜¾ç¤ºã€‚åŸºäºè¿™ä¸ªåŸç†ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨Windowsä¸­å®‰è£…Xserverï¼Œå³å¯â€œè¿è¡Œâ€Linuxä¸­çš„GUIç¨‹åºã€‚</p>
<h1 id="é€‰æ‹©ä¸€æ¬¾Xserver"><a href="#é€‰æ‹©ä¸€æ¬¾Xserver" class="headerlink" title="é€‰æ‹©ä¸€æ¬¾Xserver"></a>é€‰æ‹©ä¸€æ¬¾Xserver</h1><p>ç›®å‰ä¸»æµçš„æœ‰ä»¥ä¸‹å‡ æ¬¾ï¼š</p>
<ul>
<li><a href="https://sourceforge.net/projects/xming/">Xming</a>ï¼šå·²ç»ä¸å†æ›´æ–°</li>
<li><a href="https://sourceforge.net/projects/vcxsrv/">VcXsrv</a></li>
<li><a href="https://www.cygwin.com/">Cygwin</a></li>
<li><a href="https://mobaxterm.mobatek.net/">MobaXterm</a></li>
<li><a href="https://x410.dev/">X410</a></li>
</ul>
<p>è¿™é‡ŒåŸºäºç®€å•ã€æ˜“ç”¨ã€å¼€æºã€å…è´¹çš„åŸåˆ™ï¼Œé€‰æ‹©äº†VcXsrvã€‚åªéœ€è¦ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„exeå®‰è£…å³å¯ã€‚</p>
<h1 id="é…ç½®Windowsç«¯"><a href="#é…ç½®Windowsç«¯" class="headerlink" title="é…ç½®Windowsç«¯"></a>é…ç½®Windowsç«¯</h1><p>æ‰“å¼€VcXsrvåï¼Œç¨‹åºä¼šè¦æ±‚è¿›è¡Œé…ç½®ï¼Œé™¤äº†åœ¨<strong>Extra settings</strong>ä¸­é€‰æ‹©<strong>Disable access control</strong>ä¹‹å¤–ï¼Œå…¶å®ƒä¿æŒé»˜è®¤å³å¯ï¼Œå¦‚å›¾ã€‚</p>
<img src="/2021/01/16/using-xserver-in-windows/display-settings.png" class="" title="display-settings.png">

<img src="/2021/01/16/using-xserver-in-windows/client-startup.png" class="" title="client-startup.png">

<img src="/2021/01/16/using-xserver-in-windows/extra-settings.png" class="" title="extra-settings.png">

<h1 id="é…ç½®Linuxç«¯"><a href="#é…ç½®Linuxç«¯" class="headerlink" title="é…ç½®Linuxç«¯"></a>é…ç½®Linuxç«¯</h1><p>é€šå¸¸æƒ…å†µä¸‹ï¼ŒXserveréƒ½æ˜¯é…åˆX11 Forwardæ¥ä½¿ç”¨çš„ï¼Œä½†æ˜¯å› ä¸ºåœ¨æˆ‘ä»¬çš„åœºæ™¯å½“ä¸­ï¼ŒLinuxä¸Windowsåœ¨åŒä¸€ä¸ªç½‘ç»œä¸­ï¼Œä»–ä»¬æ˜¯èƒ½å¤Ÿç›´æ¥äº’ç›¸è®¿é—®çš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ä¸€ç§æ›´åŠ ç®€å•çš„æ–¹å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export DISPLAY=192.168.50.1:0.0</span><br></pre></td></tr></table></figure>

<p><code>192.168.50.1</code>æ˜¯Windowsçš„IPåœ°å€ï¼Œ<code>0.0</code>æ˜¯X serverçš„Displayç¼–å·ï¼Œä¸€èˆ¬ä¿æŒé»˜è®¤å³å¯ã€‚</p>
<p>è¿™æ ·è®¾ç½®å®Œæˆä¹‹åï¼Œåœ¨Windowsä¸­ä½¿ç”¨ä»»æ„ç»ˆç«¯è¿æ¥åˆ°Linuxï¼Œå¯åŠ¨GUIç¨‹åºåï¼Œéƒ½èƒ½åœ¨Windowsä¸Šæ˜¾ç¤ºï¼Œè€Œæ— éœ€å…³æ³¨SSHçš„X11 Forwardæ˜¯å¦å¼€å¯ã€‚</p>
<h1 id="ä½¿ç”¨X11-Forward"><a href="#ä½¿ç”¨X11-Forward" class="headerlink" title="ä½¿ç”¨X11 Forward"></a>ä½¿ç”¨X11 Forward</h1><p>å¦‚æœä½ çš„Linuxæœºå™¨ä¸èƒ½ç›´æ¥è®¿é—®Windowsï¼Œé‚£ä¹ˆæ­¤æ—¶ä½ å¿…é¡»ä½¿ç”¨SSHçš„X11 Forwardï¼Œä½¿ç”¨è¿™ä¸ªåŠŸèƒ½éœ€è¦SSH serverå¼€å¯X11 Forwardï¼Œå¹¶ä¸”SSH clientåœ¨è¿æ¥æ—¶ä¹Ÿå¯ç”¨è¯¥åŠŸèƒ½ï¼Œä¸€èˆ¬æ˜¯æ·»åŠ <code>-X</code>å‚æ•°ã€‚</p>
<p>æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œä½ éœ€è¦åœ¨SSH clientçš„ç¯å¢ƒä¸­è®¾ç½®<code>DISPLAY</code>å˜é‡ï¼Œè¿™æ—¶å€™ä¸åŒSSH clientçš„è®¾ç½®æ–¹æ³•å¹¶ä¸ç›¸åŒï¼Œå¯ä»¥æŸ¥é˜…ç›¸å…³æ–‡æ¡£ã€‚</p>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>windows</tag>
        <tag>xserver</tag>
      </tags>
  </entry>
  <entry>
    <title>éƒ¨ç½²ç½‘å¿ƒäº‘â€”â€”åˆ©ç”¨é—²ç½®å®½å¸¦èµšé’±</title>
    <url>/2022/08/30/make-money-with-wxedge.html</url>
    <content><![CDATA[<blockquote>
<p>æˆ‘å¤§çº¦æ˜¯ä»2020å¹´å¼€å§‹æ¥è§¦PCDNï¼Œå½“æ—¶åœ¨æˆ‘çš„å°å‡ºç§Ÿå±‹é‡Œé¢ï¼Œé€šè¿‡Windows Hyper Véƒ¨ç½²äº†ä¸€ä¸ªç½‘å¿ƒäº‘ï¼Œæœ¬å°±æŠ±ç€è¯•è¯•çœ‹çš„æ€åº¦ï¼Œæ²¡æƒ³åˆ°æ”¶ç›Šç«Ÿæ„å¤–çš„ä¸é”™ï¼Œä»æ­¤å°±è¸ä¸Šäº†PCDNèµšé’±ä¹‹è·¯ã€‚åœ¨æ­¤ä¹Ÿæ€»ç»“ä¸€ä¸‹ä»¥å¾€çš„ç»éªŒã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="å¤§å‰æ"><a href="#å¤§å‰æ" class="headerlink" title="å¤§å‰æ"></a>å¤§å‰æ</h1><p>PCDNçš„æœ¬è´¨å°±æ˜¯åˆ©ç”¨é—²ç½®çš„å¸¦å®½ä»¥åŠç¡¬ç›˜èµ„æºï¼Œå¸®å¤§å…¬å¸ç¼“å­˜å†…å®¹ï¼Œä»è€ŒåŠ é€Ÿå…¶ç”¨æˆ·åŠ è½½èµ„æºçš„é€Ÿåº¦ã€‚æ¯”å¦‚å“”å“©å“”å“©ï¼Œå½“ç”¨æˆ·æ’­æ”¾è§†é¢‘çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½å¹¶ä¸ä»å“”å“©å“”å“©çš„æœåŠ¡å™¨åŠ è½½ï¼Œè€Œæ˜¯ä»æˆ‘ä»¬çš„PCDNè®¾å¤‡ç›´æ¥åŠ è½½ï¼Œä¸€æ–¹é¢èŠ‚çœäº†å…¬å¸çš„å¸¦å®½ï¼Œå¦ä¸€æ–¹é¢ï¼Œç”±äºæˆ‘ä»¬çš„è®¾å¤‡å¯èƒ½è·ç¦»ç”¨æˆ·æ›´è¿‘ï¼Œä»è€Œä¹Ÿæé«˜äº†åŠ è½½é€Ÿåº¦ã€‚</p>
<p>è‹¥è¦ç©è½¬PCDNä¸šåŠ¡ï¼Œæˆ‘ä»¬éœ€è¦æœ‰3ä¸ªå¤§å‰æï¼š</p>
<h2 id="é—²ç½®çš„è®¡ç®—æœº"><a href="#é—²ç½®çš„è®¡ç®—æœº" class="headerlink" title="é—²ç½®çš„è®¡ç®—æœº"></a>é—²ç½®çš„è®¡ç®—æœº</h2><p>å¯ä»¥æ˜¯ç¬”è®°æœ¬ï¼Œå°å¼æœºï¼Œç”šè‡³æ˜¯æ ‘è“æ´¾ï¼Œç”µè§†ç›’å­ã€‚</p>
<h2 id="é—²ç½®çš„ç¡¬ç›˜"><a href="#é—²ç½®çš„ç¡¬ç›˜" class="headerlink" title="é—²ç½®çš„ç¡¬ç›˜"></a>é—²ç½®çš„ç¡¬ç›˜</h2><p>ç”±äºéœ€è¦ç¼“å­˜å†…å®¹ï¼Œå› æ­¤éœ€è¦è¾ƒå¤§å®¹é‡çš„ç¡¬ç›˜ã€‚</p>
<h2 id="åˆé€‚çš„å®½å¸¦"><a href="#åˆé€‚çš„å®½å¸¦" class="headerlink" title="åˆé€‚çš„å®½å¸¦"></a>åˆé€‚çš„å®½å¸¦</h2><p>PCDNå¯¹äºå®½å¸¦çš„è¦æ±‚è¾ƒé«˜ï¼Œä¸€æ–¹é¢ï¼Œä¸Šä¼ é€Ÿåº¦è¦å°½å¯èƒ½å¿«ï¼Œå¦ä¸€æ–¹é¢ï¼Œè¦å°½å¯èƒ½æä¾›ä»å¤–ç½‘è®¿é—®å†…ç½‘çš„é€”å¾„ã€‚</p>
<p>å¯¹äºç¬¬ä¸€ç‚¹ï¼Œç”±äºå›½å†…çš„æ°‘ç”¨å®½å¸¦å¤§å¤šä¸ºéå¯¹ç­‰å®½å¸¦ï¼Œä¸Šä¼ é€Ÿåº¦éå¸¸å—é™ï¼Œä¸€èˆ¬ä»10Mbpsåˆ°100Mbpså·¦å³ï¼Œå¯ä»¥ä½¿ç”¨speedtestè¿›è¡Œæµ‹é€Ÿï¼Œå¦‚æœé€Ÿåº¦ä½äº10Mbpsï¼Œéƒ¨ç½²PCDNçš„æ„ä¹‰å°±ä¸å¤§äº†ã€‚</p>
<p>å¯¹äºç¬¬äºŒç‚¹ï¼Œå¦‚æœè¦åšåˆ°å¤–ç½‘è®¾å¤‡è®¿é—®å†…ç½‘è®¾å¤‡ï¼Œä¸€èˆ¬æœ‰3ç§é€”å¾„æ¥å®ç°ï¼š</p>
<ol>
<li>å…¬ç½‘IPï¼šPCDNè®¾å¤‡æ‹¨å·åç›´æ¥è·å–å…¬ç½‘IPã€‚</li>
<li>æ˜ å°„å…¬ç½‘IPï¼šå…‰çŒ«ã€è·¯ç”±å™¨ç­‰æ‹¨å·ï¼Œä¸”PCDNè®¾å¤‡æ¥åœ¨å¼€å¯äº†è·å–äº†å…¬ç½‘IPä¸”å¼€å¯äº†UPnPçš„è®¾å¤‡ä¸‹ã€‚</li>
<li>å…¨é”¥å‹NATï¼šéœ€è¦PCDNè®¾å¤‡ä¸»åŠ¨è®¿é—®å…¬ç½‘è®¾å¤‡ï¼Œç”±å…¬ç½‘æœåŠ¡å™¨è®°å½•æˆ‘ä»¬çš„çœŸå®IPåŠç«¯å£ï¼Œå¹¶å°†æ­¤ä¿¡æ¯åŒæ­¥ç»™å®¢æˆ·ç«¯ï¼Œå®ç°å¤–ç½‘IP+ç«¯å£åˆ°å†…ç½‘è®¾å¤‡çš„è®¿é—®ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„UDPæ‰“æ´ã€‚</li>
</ol>
<p>å¦‚æœæˆ‘ä»¬çš„ç½‘ç»œæ— æ³•æ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼Œä¹Ÿæ²¡æœ‰å¿…è¦éƒ¨ç½²PCDNè®¾å¤‡ã€‚</p>
<h1 id="éƒ¨ç½²æ¨¡å¼"><a href="#éƒ¨ç½²æ¨¡å¼" class="headerlink" title="éƒ¨ç½²æ¨¡å¼"></a>éƒ¨ç½²æ¨¡å¼</h1><p>ç½‘å¿ƒäº‘ä¸»è¦æä¾›äº†3ç§æ¨¡å¼ï¼šåµŒå…¥å¼è®¾å¤‡ã€X86ã€dockerã€‚</p>
<p><a href="https://www.onethingcloud.com/download-center">å®˜ç½‘ä¸‹è½½åœ°å€</a></p>
<h2 id="åµŒå…¥å¼è®¾å¤‡"><a href="#åµŒå…¥å¼è®¾å¤‡" class="headerlink" title="åµŒå…¥å¼è®¾å¤‡"></a>åµŒå…¥å¼è®¾å¤‡</h2><p>ç½‘å¿ƒäº‘ç§°ä¸ºä¸‰æ–¹ç›’å­ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p>
<ol>
<li><a href="https://help.onethingcloud.com/7cb4/3ed5/77f6">æ–è®¯N1ç›’å­</a></li>
<li><a href="https://help.onethingcloud.com/7cb4/3ed5/67eb">WJYç›’å­</a></li>
<li><a href="https://help.onethingcloud.com/7cb4/3ed5/39ae">æ ‘è“æ´¾3B</a></li>
<li><a href="https://help.onethingcloud.com/7cb4/3ed5/39ae">æ ‘è“æ´¾4B</a></li>
</ol>
<p>å…¶å®‰è£…æ–¹å¼æ ¹æ®è®¾å¤‡ä¸åŒè€Œä¸åŒï¼Œä½†åŸºæœ¬ä¸Šéƒ½æ˜¯ç›´æ¥å°†å¸¦åˆ†åŒºçš„ç³»ç»Ÿé•œåƒå†™å…¥Flashå½“ä¸­ã€‚</p>
<h2 id="X86"><a href="#X86" class="headerlink" title="X86"></a>X86</h2><p>åŸºäºX86å¹³å°çš„ç³»ç»ŸåŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p>
<ol>
<li><a href="https://help.onethingcloud.com/7cb4/35e9/1a4d">åŸºäºHyper-Vçš„è™šæ‹ŸåŒ–é•œåƒ</a></li>
<li><a href="https://help.onethingcloud.com/7cb4/35e9/279e">åŸºäºKVMçš„è™šæ‹ŸåŒ–é•œåƒ</a></li>
<li><a href="https://help.onethingcloud.com/7cb4/35e9/4b1f">åŸºäºVMWareçš„è™šæ‹ŸåŒ–é•œåƒ</a></li>
<li><a href="https://help.onethingcloud.com/7cb4/35e9/9af0">åŸºäºç¾¤æ™–ç³»ç»Ÿçš„è™šæ‹ŸåŒ–é•œåƒï¼ˆKVMï¼‰</a></li>
<li><a href="https://help.onethingcloud.com/7cb4/35e9/1196">ISOå®‰è£…åŒ…ï¼ˆåŸºäºCentOS7ï¼‰</a></li>
</ol>
<p>X86å¹³å°ä¸æˆ‘ä»¬å¹³æ—¶æ¥è§¦çš„Windowså’ŒLinuxç³»ç»Ÿç›¸ä¼¼ï¼Œå®‰è£…è¿‡ç¨‹ä¹Ÿæä¸ºç±»ä¼¼ã€‚ç›¸å¯¹äºåµŒå…¥å¼è®¾å¤‡ï¼ŒX86å¹³å°çš„ä¸Šé™æ›´é«˜ï¼Œé€‚åˆå¤§å¸¦å®½çš„ç©å®¶ï¼Œå½“ç„¶ï¼Œå…¶å ç”¨çš„ç³»ç»Ÿèµ„æºä¹Ÿæ˜¯æœ€å¤§çš„ã€‚æ™®é€šçš„å®¶ç”¨å¸¦å®½å¾ˆå¯èƒ½æ˜¯å›ä¸äº†æœ¬çš„ã€‚</p>
<h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><p>è¿™æ˜¯æˆ‘ç›®å‰æœ€å–œæ¬¢çš„ä¸€ç§éƒ¨ç½²æ¨¡å¼ï¼Œå› ä¸ºPCDNæœ¬è´¨ä¸Šå°±æ˜¯ä¸€å¥—ç”¨æˆ·æ€çš„åº”ç”¨ç¨‹åºï¼Œä¸ºäº†å‡ ä¸ªåº”ç”¨ç¨‹åºè€Œå®‰è£…æ•´ä¸ªç³»ç»Ÿï¼Œä¼šé€ æˆå¤§é‡èµ„æºæµªè´¹ã€‚è€Œä½¿ç”¨Dockerå°±å¯ä»¥å…¼å…·åŠŸèƒ½å’Œèµ„æºæ¶ˆè€—ã€‚</p>
<p>è™½ç„¶è¿™ç§æ¨¡å¼éå¸¸é€‚åˆå°å¸¦å®½ç©å®¶ï¼Œä½†æ˜¯å®˜æ–¹ä¼¼ä¹å¹¶æ²¡æœ‰ç‰¹åˆ«å®£ä¼ æ­¤ç§æ–¹å¼ï¼Œç”šè‡³åœ¨å®˜ç½‘éƒ½æ‰¾ä¸åˆ°ç‰¹åˆ«è¯¦å°½å®Œæ•´çš„æ•™ç¨‹ï¼Œå› æ­¤æœ¬æ–‡ç€é‡å¯¹æ­¤ç§æ–¹å¼è¿›è¡Œæè¿°ã€‚</p>
<h3 id="å®‰è£…Docker"><a href="#å®‰è£…Docker" class="headerlink" title="å®‰è£…Docker"></a>å®‰è£…Docker</h3><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥æŒ‰ç…§Dockerå®˜æ–¹æ–‡æ¡£æ¥å®‰è£…ï¼š</p>
<ul>
<li><a href="https://docs.docker.com/engine/install/centos/">CentOS</a></li>
<li><a href="https://docs.docker.com/engine/install/debian/">Debian</a></li>
<li><a href="https://docs.docker.com/engine/install/fedora/">Fedora</a></li>
<li><a href="https://docs.docker.com/engine/install/rhel/">RHEL</a></li>
<li><a href="https://docs.docker.com/engine/install/sles/">SLES</a></li>
<li><a href="https://docs.docker.com/engine/install/ubuntu/">Ubuntu</a></li>
</ul>
<h3 id="ä¸‹è½½ç½‘å¿ƒäº‘dockeré•œåƒ"><a href="#ä¸‹è½½ç½‘å¿ƒäº‘dockeré•œåƒ" class="headerlink" title="ä¸‹è½½ç½‘å¿ƒäº‘dockeré•œåƒ"></a>ä¸‹è½½ç½‘å¿ƒäº‘dockeré•œåƒ</h3><p><a href="https://hub.docker.com/r/onething1/wxedge">ç½‘å¿ƒäº‘Docker Hubåœ°å€</a></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull onething1/wxedge</span><br></pre></td></tr></table></figure>

<h3 id="å¯åŠ¨é•œåƒ"><a href="#å¯åŠ¨é•œåƒ" class="headerlink" title="å¯åŠ¨é•œåƒ"></a>å¯åŠ¨é•œåƒ</h3><p>è¿™é‡Œåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š</p>
<ol>
<li><p>ä½¿ç”¨hostç½‘ç»œã€‚é…ç½®ç®€å•ï¼Œä½†æ˜¯åªèƒ½éƒ¨ç½²ä¸€ä¸ªcontainerï¼Œä¸”ä¼šå½±å“hostç½‘ç»œï¼Œå»¶è¿Ÿè¾ƒå¤§ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">           --name=wxedge \</span><br><span class="line">           --restart=always \</span><br><span class="line">           --privileged \</span><br><span class="line">           --net=host  \</span><br><span class="line">           --tmpfs /run \</span><br><span class="line">           --tmpfs /tmp \</span><br><span class="line">           -v ç£ç›˜è·¯å¾„:/storage:rw \</span><br><span class="line">           onething1/wxedge</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨macvlanç½‘ç»œï¼Œé…ç½®å¤æ‚ï¼Œä½†ä¸ä¼šå½±å“hostç½‘ç»œï¼Œéš”ç¦»æ€§æ›´å¥½ï¼Œå»¶è¿Ÿä¹Ÿä½ä¸€äº›ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºmacvlanï¼Œå‡è®¾ç½‘å…³æ˜¯10.0.0.1</span></span><br><span class="line">docker network create -d macvlan \</span><br><span class="line">                      --subnet=10.0.0.0/24 \</span><br><span class="line">                      --gateway=10.0.0.1 \</span><br><span class="line">                      -o parent=enp3s0 \</span><br><span class="line">                      macvlan0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºresolv.confæ–‡ä»¶ï¼Œå¦åˆ™ä¼šä½¿ç”¨dockeré»˜è®¤çš„DNSæœåŠ¡å™¨ï¼Œé€ æˆç½‘ç»œè¯†åˆ«é”™è¯¯</span></span><br><span class="line">sudo bash -c &quot;echo nameserver 10.0.0.1 &gt; ç£ç›˜è·¯å¾„/resolv.conf&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">           --name=wxedge \</span><br><span class="line">           --restart=always \</span><br><span class="line">           --privileged \</span><br><span class="line">           --net=macvlan0 \</span><br><span class="line">           --ip=10.0.0.100  \</span><br><span class="line">           --tmpfs /run \</span><br><span class="line">           --tmpfs /tmp \</span><br><span class="line">           -v ç£ç›˜è·¯å¾„:/storage:rw \</span><br><span class="line">           -v ç£ç›˜è·¯å¾„/resolv.conf:/etc/resolv.conf \</span><br><span class="line">           onething1/wxedge</span><br></pre></td></tr></table></figure></li>
</ol>
<p>éƒ¨ç½²å®Œæˆåï¼Œå°±å¯ä»¥é€šè¿‡<a href="http://10.0.0.100:18888/">http://10.0.0.100:18888</a>è®¿é—®äº†ã€‚</p>
<p>ä½¿ç”¨æ­¤ç§æ–¹å¼è¿˜æœ‰ä¸€ä¸ªéšå½¢å¤§å‘ï¼Œcontainerä¼šå‘overlayfså†™å…¥å¤§é‡æ•°æ®ï¼Œé€ æˆæ ¹ç›®å½•æ‰€åœ¨çš„åˆ†åŒºå¿«é€Ÿå‡å°‘ï¼Œå¦‚æœä½ çš„ç³»ç»Ÿåˆ†åŒºä¸å¤§ï¼Œå»ºè®®å°†dockerç›®å½•è¿ç§»åˆ°å…¶ä»–åˆ†åŒºã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœæ­¢æœåŠ¡</span></span><br><span class="line">sudo systemctl stop docker.service</span><br><span class="line">sudo systemctl stop docker.socket</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹systemdæœåŠ¡</span></span><br><span class="line">sudo vim /lib/systemd/system/docker.service</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">ExecStart=/usr/bin/dockerd -g /new/path/docker -H fd://</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿ç§»dockerç›®å½•</span></span><br><span class="line">sudo mkdir -p /new/path/docker</span><br><span class="line">sudo rsync -aqxP /var/lib/docker/ /new/path/docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯docker</span></span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl start docker</span><br></pre></td></tr></table></figure>

<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://linuxconfig.org/how-to-move-docker-s-default-var-lib-docker-to-another-directory-on-ubuntu-debian-linux">Change Docker root directory &#x2F;var&#x2F;lib&#x2F;docker to another location</a></p>
<p><a href="https://tieba.baidu.com/p/7380333203">ç½‘ç»œç±»å‹ã€UPnPã€DMZçš„ç²—æµ…è§£é‡Š</a></p>
]]></content>
      <categories>
        <category>Geek</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>ç½‘å¿ƒäº‘</tag>
        <tag>è™šæ‹ŸåŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>All-in-Oneï¼Œä½†æ˜¯å°ç±³ç¬”è®°æœ¬ï¼</title>
    <url>/2022/11/10/all-in-one-but-xiaomi-laptop.html</url>
    <content><![CDATA[<blockquote>
<p>ä¸€ç›´æƒ³å°è¯•ä¸€ä¸‹All-in-Oneçš„æ–¹æ¡ˆï¼Œä½†æ˜¯æ— å¥ˆæ‰‹è¾¹å¹¶æ²¡æœ‰æ”¯æŒiommuçš„è®¾å¤‡ï¼Œæ­£å€¼åŒåä¸€ä¹‹é™…ï¼Œå°±åœ¨æˆ‘å†³å®šæŒ‘é€‰ç¡¬ä»¶ç»„è£…ä¸€å°All-in-One PCæ—¶ï¼Œæˆ‘çªç„¶æƒ³åˆ°ï¼Œè‡ªå·±çš„å°ç±³æ¸¸æˆæœ¬æœ‰æ²¡æœ‰å¯èƒ½æ”¯æŒiommuå‘¢ï¼Ÿä¸€å¿µä¹‹é—´ï¼Œæˆ‘å·²ç»åšå¥½äº†Debian liveçš„Uç›˜ï¼Œæ­¤æ—¶ï¼Œç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿäº†ã€‚ã€‚ã€‚</p>
</blockquote>
<span id="more"></span>

<p>æ²¡é”™ï¼Œä½ å¯èƒ½å·²ç»çŒœåˆ°äº†ï¼Œåœ¨è®¾ç½®äº†å†…æ ¸cmdlineåï¼ŒIOMMUç«Ÿç„¶å¯ç”¨äº†ï¼Œä¸ä»…å¦‚æ­¤ï¼ŒPCI Passthroughæ‰€éœ€çš„ç‰¹æ€§å…¨éƒ¨éƒ½å¯ç”¨äº†ï¼æœ€ç»ˆæˆ‘æˆåŠŸçš„åœ¨PVEä¸Šå®‰è£…äº†Windows11å¹¶é€ä¼ äº†ç‹¬ç«‹æ˜¾å¡GTX1060mã€‚æ­¤æ–‡å°†è®°å½•è¿™ä¸€åˆ‡æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚</p>
<h1 id="0x0-å‡†å¤‡å·¥ä½œ"><a href="#0x0-å‡†å¤‡å·¥ä½œ" class="headerlink" title="0x0 å‡†å¤‡å·¥ä½œ"></a>0x0 å‡†å¤‡å·¥ä½œ</h1><ul>
<li>å°ç±³æ¸¸æˆæœ¬ä¸€ä»£ï¼Œå¤„ç†å™¨i5-7300hqï¼Œæ˜¾å¡GTX1060mï¼Œå†…å­˜16GB</li>
<li>Uç›˜</li>
<li>PVEé•œåƒï¼ŒWindows11é•œåƒ</li>
<li>USBé”®ç›˜ï¼ŒUSBé¼ æ ‡</li>
</ul>
<h1 id="0x1-å®‰è£…PVE"><a href="#0x1-å®‰è£…PVE" class="headerlink" title="0x1 å®‰è£…PVE"></a>0x1 å®‰è£…PVE</h1><p>å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« <a href="https://blog.colorfulshark.net/2019/11/03/install-openwrt-in-proxmox-ve.html">åœ¨Proxmox VEä¸­å®‰è£…Openwrtä½œä¸ºè½¯è·¯ç”±</a></p>
<h1 id="0x2-é…ç½®PCI-Passthroughæ‰€éœ€ç‰¹æ€§"><a href="#0x2-é…ç½®PCI-Passthroughæ‰€éœ€ç‰¹æ€§" class="headerlink" title="0x2 é…ç½®PCI Passthroughæ‰€éœ€ç‰¹æ€§"></a>0x2 é…ç½®PCI Passthroughæ‰€éœ€ç‰¹æ€§</h1><h2 id="0x2-1-å¯ç”¨IOMMU"><a href="#0x2-1-å¯ç”¨IOMMU" class="headerlink" title="0x2.1 å¯ç”¨IOMMU"></a>0x2.1 å¯ç”¨IOMMU</h2><p>æ‰“å¼€grubé…ç½®æ–‡ä»¶ï¼Œåœ¨å†…æ ¸cmdlineä¸­è¿½åŠ <code>intel_iommu=on</code>ï¼Œå¹¶æ›´æ–°grubé…ç½®ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/default/grub</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt; GRUB_CMDLINE_LINUX_DEFAULT=<span class="string">&quot;quiet intel_iommu=on&quot;</span></span></span><br><span class="line"></span><br><span class="line">update-grub</span><br></pre></td></tr></table></figure>

<h2 id="0x2-2-åŠ è½½vfioé©±åŠ¨æ¨¡å—"><a href="#0x2-2-åŠ è½½vfioé©±åŠ¨æ¨¡å—" class="headerlink" title="0x2.2 åŠ è½½vfioé©±åŠ¨æ¨¡å—"></a>0x2.2 åŠ è½½vfioé©±åŠ¨æ¨¡å—</h2><p>å°†vfioç›¸å…³æ¨¡å—è¿½åŠ åˆ°<code>/etc/modules</code>ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/modules</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;</span></span><br><span class="line">vfio</span><br><span class="line">vfio_iommu_type1</span><br><span class="line">vfio_pci</span><br><span class="line">vfio_virqfd</span><br></pre></td></tr></table></figure>

<h2 id="0x2-3-æ£€æŸ¥é…ç½®æ˜¯å¦ç”Ÿæ•ˆ"><a href="#0x2-3-æ£€æŸ¥é…ç½®æ˜¯å¦ç”Ÿæ•ˆ" class="headerlink" title="0x2.3 æ£€æŸ¥é…ç½®æ˜¯å¦ç”Ÿæ•ˆ"></a>0x2.3 æ£€æŸ¥é…ç½®æ˜¯å¦ç”Ÿæ•ˆ</h2><ul>
<li><p>æŸ¥çœ‹IOMMUæ˜¯å¦å¯åŠ¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">dmesg | grep -e DMAR -e IOMMU</span><br></pre></td></tr></table></figure>

<p>å¦‚æœç”Ÿæ•ˆï¼Œå°†ä¼šæœ‰ç±»ä¼¼äº<code>DMAR: IOMMU enabled</code>çš„logè¾“å‡ºï¼Œå¦‚å›¾</p>
<img src="/2022/11/10/all-in-one-but-xiaomi-laptop/iommu1.png" class="">
</li>
<li><p>æŸ¥çœ‹IOMMU Interrupt Remappingæ˜¯å¦å¯åŠ¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">dmesg | grep &#x27;remapping&#x27;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœç”Ÿæ•ˆï¼Œå°†ä¼šæœ‰ç±»ä¼¼äº<code>DMAR-IR: Enabled IRQ remapping in x2apic mode</code>çš„logè¾“å‡ºï¼Œå¦‚å›¾</p>
<img src="/2022/11/10/all-in-one-but-xiaomi-laptop/iommu2.png" class="">
</li>
<li><p>æŸ¥çœ‹IOMMU Isolationæ˜¯å¦å¯åŠ¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">find /sys/kernel/iommu_groups/ -type l</span><br></pre></td></tr></table></figure>

<p>æ£€æŸ¥IOMMUåˆ†ç»„æ˜¯å¦æ­£ç¡®ï¼Œè¿™éœ€è¦ACS (Access Control Services)çš„æ”¯æŒï¼Œå¦‚å›¾</p>
<img src="/2022/11/10/all-in-one-but-xiaomi-laptop/iommu3.png" class=""></li>
</ul>
<h1 id="0x3-å®‰è£…Windows11è™šæ‹Ÿæœº"><a href="#0x3-å®‰è£…Windows11è™šæ‹Ÿæœº" class="headerlink" title="0x3 å®‰è£…Windows11è™šæ‹Ÿæœº"></a>0x3 å®‰è£…Windows11è™šæ‹Ÿæœº</h1><p>åˆ›å»ºè™šæ‹Ÿæœºçš„è¿‡ç¨‹ä¸­æœ‰å‡ ä¸ªæ­¥éª¤éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li><p>Guest OSé€‰æ‹©Microsoft Windows</p>
<img src="/2022/11/10/all-in-one-but-xiaomi-laptop/win1.png" class="">
</li>
<li><p>Machineé€‰æ‹©q35ï¼ŒBIOSé€‰æ‹©OVMF(UEFI)ï¼Œæ·»åŠ EFI Diskå’ŒTPM</p>
<img src="/2022/11/10/all-in-one-but-xiaomi-laptop/win2.png" class="">
</li>
<li><p>CPU Typeé€‰æ‹©host</p>
<img src="/2022/11/10/all-in-one-but-xiaomi-laptop/win3.png" class="">
</li>
<li><p>æ·»åŠ Windowsçš„virtioé©±åŠ¨é•œåƒï¼Œä»<a href="https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/archive-virtio/?C=M;O=D">è¿™é‡Œ</a>ä¸‹è½½</p>
<img src="/2022/11/10/all-in-one-but-xiaomi-laptop/win4.png" class=""></li>
</ul>
<p>å½“å®‰è£…åˆ°é€‰æ‹©ç£ç›˜è¿™ä¸€æ­¥æ—¶ï¼Œéœ€è¦é€‰æ‹©<strong>åŠ è½½é©±åŠ¨ç¨‹åº</strong>ï¼Œå¦åˆ™ä¼šæ‰¾ä¸åˆ°è™šæ‹Ÿç¡¬ç›˜ã€‚åç»­çš„å®‰è£…è¿‡ç¨‹ä¸æ ‡å‡†æµç¨‹æ²¡æœ‰åŒºåˆ«ã€‚</p>
<h1 id="0x4-è®¾ç½®GPU-Passthrough"><a href="#0x4-è®¾ç½®GPU-Passthrough" class="headerlink" title="0x4 è®¾ç½®GPU Passthrough"></a>0x4 è®¾ç½®GPU Passthrough</h1><p>è¿™æ˜¯All-in-Oneæ–¹æ¡ˆä¸­æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œæ¯•ç«Ÿä»£ç è¦å†™ï¼Œæ¸¸æˆä¹Ÿè¿˜æ˜¯è¦ç©çš„ğŸ˜ã€‚</p>
<p>è¿™ä¸ªæ­¥éª¤æœ¬èº«æ²¡ä»€ä¹ˆéš¾çš„ï¼Œç›´æ¥æ·»åŠ å¯¹åº”çš„PCIè®¾å¤‡å³å¯ã€‚</p>
<img src="/2022/11/10/all-in-one-but-xiaomi-laptop/pci1.png" class="">

<p>ä½†å¯¹äºå°ç±³æ¸¸æˆæœ¬ï¼Œè¿™ä¸€æ­¥æœ‰ä¸¤ä¸ªå¤§å‘ï¼</p>
<ul>
<li><p>å› ä¸ºå®ƒçš„ç‹¬æ˜¾çš„VBIOSä¸æ”¯æŒUEFIå¯åŠ¨ï¼Œæ‰€ä»¥å¦‚æœè™šæ‹Ÿæœºåªæœ‰ä¸€ä¸ªç‹¬æ˜¾ï¼ŒWIndowsç³»ç»Ÿæ˜¯æ²¡æœ‰åŠæ³•å®Œæˆåˆå§‹åŒ–çš„ï¼Œè¡¨ç°ä¸ºç³»ç»Ÿå§‹ç»ˆæ— æ³•å¯åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè™šæ‹Ÿæ˜¾ç¤ºè®¾å¤‡è¾…åŠ©WIndowså¯åŠ¨ã€‚</p>
<img src="/2022/11/10/all-in-one-but-xiaomi-laptop/pci2.png" class="">
</li>
<li><p>å¥½çš„ï¼Œç°åœ¨æˆ‘ä»¬è¿›å…¥ç³»ç»Ÿäº†ï¼Œç»“æœå‘ç°æ˜¾å¡é©±åŠ¨ç«Ÿç„¶å®‰è£…ä¸ä¸Šï¼Œæ˜¾ç¤ºä¸º<strong>æ‰¾ä¸åˆ°å…¼å®¹çš„æ˜¾ç¤ºè®¾å¤‡</strong>ã€‚ç»è¿‡å‡ å¤©çš„è°ƒæŸ¥ï¼Œå‘ç°è®¾å¤‡ç®¡ç†å™¨é‡Œé¢ï¼Œæ˜¾å¡çš„Sub_Vendor IDå’ŒSub_Product IDæ˜¯å…¨0ï¼Œæœ‰å¯èƒ½æ˜¯è¿™ä¸ªä¿¡æ¯æ˜¯å­˜å‚¨åœ¨ä¸»æ¿BIOSä¸­ï¼Œè€Œä¸æ˜¯VBIOSä¸­ï¼Œè§£å†³æ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œåœ¨PVEçš„PCI Passthroughç•Œé¢å¯ä»¥ç›´æ¥é…ç½®è¯¥ä¿¡æ¯ã€‚å¦å¤–è¿˜éœ€è¦é€‰ä¸­<strong>All Functions</strong>å’Œ<strong>PCI-Express</strong>ã€‚</p>
<img src="/2022/11/10/all-in-one-but-xiaomi-laptop/pci3.png" class="">
</li>
<li><p>è®¾ç½®KVMé€‰é¡¹<code>ignore_msrs</code>ï¼Œå¦åˆ™è™šæ‹Ÿæœºåœ¨ä½¿ç”¨ç‹¬æ˜¾çš„è¿‡ç¨‹ä¸­ä¼šå´©æºƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo &quot;options kvm ignore_msrs=1 report_ignored_msrs=0&quot; &gt; /etc/modprobe.d/kvm.conf</span><br></pre></td></tr></table></figure></li>
</ul>
<p>æœ€åï¼Œé™„ä¸Šå®Œæ•´çš„ç¡¬ä»¶é…ç½®</p>
<img src="/2022/11/10/all-in-one-but-xiaomi-laptop/win5.png" class="">

<h1 id="0x5-è½¯è·¯ç”±"><a href="#0x5-è½¯è·¯ç”±" class="headerlink" title="0x5 è½¯è·¯ç”±"></a>0x5 è½¯è·¯ç”±</h1><p>æ—¢ç„¶æ˜¯All-in-Oneï¼ŒOpenWRTï¼Œçˆ±å¿«ï¼Œç½‘å¿ƒäº‘è¿™äº›è‚¯å®šæ˜¯å°‘ä¸äº†å•¦ï¼Œä¸è¿‡è¿™äº›éƒ½æ˜¯å¸¸è§„çš„æ“ä½œï¼Œä¸ä½œè¯¦ç»†ä»‹ç»äº†ã€‚</p>
<h1 id="0x6-ä¸€å‘¨ä¹‹å"><a href="#0x6-ä¸€å‘¨ä¹‹å" class="headerlink" title="0x6 ä¸€å‘¨ä¹‹å"></a>0x6 ä¸€å‘¨ä¹‹å</h1><p>è™½ç„¶æ•´å¥—All-in-Oneæ–¹æ¡ˆåœ¨åŠŸèƒ½ä¸Šæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†å´æ‹œå€’åœ¨è¿™é¢—i5-7300hqä¸Šï¼Œå®ƒå¤ªå¼±å•¦ğŸ˜‚ã€‚</p>
<p>ç›´æ¥è¡¨ç°å°±æ˜¯åœ¨Windowsä¸­ç©æ¸¸æˆä¸€å¡ä¸€å¡ï¼ŒCPUå ç”¨ç›´æ¥100%ğŸ˜«ã€‚</p>
<p>æ‰€ä»¥ä¸€å‘¨ä¹‹åï¼Œæˆ‘æ‰“ç®—é‡æ–°è£…å›WIndows11ï¼Œä¸è¿‡åœ¨ä¹‹å‰ï¼Œæˆ‘å†™ä¸‹æ­¤æ–‡ï¼Œç‰¹æ­¤çºªå¿µè‡ªå·±çš„æŠ˜è…¾ä¹‹è·¯ğŸ˜Šã€‚</p>
<h1 id="0x7-å‚è€ƒ"><a href="#0x7-å‚è€ƒ" class="headerlink" title="0x7 å‚è€ƒ"></a>0x7 å‚è€ƒ</h1><p><a href="https://pve.proxmox.com/wiki/Pci_passthrough">https://pve.proxmox.com/wiki/Pci_passthrough</a></p>
<p><a href="https://pve.proxmox.com/wiki/PCI(e)_Passthrough">https://pve.proxmox.com/wiki/PCI(e)_Passthrough</a></p>
<p><a href="https://pve.proxmox.com/wiki/Windows_VirtIO_Drivers">https://pve.proxmox.com/wiki/Windows_VirtIO_Drivers</a></p>
<p><a href="https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF">https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF</a></p>
<p><a href="https://lantian.pub/article/modify-computer/laptop-muxed-nvidia-passthrough.lantian/">https://lantian.pub/article/modify-computer/laptop-muxed-nvidia-passthrough.lantian/</a></p>
<p><a href="https://lantian.pub/article/modify-computer/laptop-intel-nvidia-optimus-passthrough.lantian/">https://lantian.pub/article/modify-computer/laptop-intel-nvidia-optimus-passthrough.lantian/</a></p>
<p><a href="https://post.smzdm.com/p/avx8pn3n/">https://post.smzdm.com/p/avx8pn3n/</a></p>
<p><a href="https://xylog.cn/2020/03/03/proxmox-vga-nvidia.html">https://xylog.cn/2020/03/03/proxmox-vga-nvidia.html</a></p>
<p><a href="https://iamroot.cn/pvean-zhuang-win/">https://iamroot.cn/pvean-zhuang-win/</a></p>
<p><a href="https://www.syfly007.com/post/CS/linux/pve%E6%98%BE%E5%8D%A1%E7%9B%B4%E9%80%9A.html">https://www.syfly007.com/post/CS/linux/pve%E6%98%BE%E5%8D%A1%E7%9B%B4%E9%80%9A.html</a></p>
]]></content>
      <categories>
        <category>Geek</category>
      </categories>
      <tags>
        <tag>è™šæ‹ŸåŒ–</tag>
        <tag>è½¯è·¯ç”±</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨acmeç”³è¯·httpsè¯ä¹¦</title>
    <url>/2023/01/08/issue-https-cert-with-acme.html</url>
    <content><![CDATA[<blockquote>
<p>éšç€äº’è”ç½‘çš„é£é€Ÿå‘å±•ï¼Œhttpè¿™ç§æ˜æ–‡ä¼ è¾“åè®®å·²ç»è¶Šæ¥è¶Šæ— æ³•æ»¡è¶³å»ºç«™çš„éœ€æ±‚ï¼Œå› æ­¤å½“ä»Šç»å¤§å¤šæ•°ç½‘ç«™éƒ½å·²ç»åˆ‡æ¢åˆ°äº†httpsã€‚è™½ç„¶httpsåè®®ä½¿ç”¨TLSåŠ å¯†æå¤§åœ°æé«˜äº†ä¼ è¾“å®‰å…¨æ€§ï¼Œä½†ä¹Ÿå¸¦æ¥äº†æ›´å¤§çš„éƒ¨ç½²éš¾åº¦ï¼Œé¦–å½“å…¶å†²çš„å°±æ˜¯TLSè¯ä¹¦ç”³è¯·ï¼Œæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨acmeå…è´¹ç”³è¯·ä¸€ä¸ªä¾›ä¸ªäººä½¿ç”¨çš„è¯ä¹¦ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h1><p>è™½ç„¶è¯´æ˜¯å…è´¹ç”³è¯·ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯éœ€è¦ä¸€äº›å‰ç½®æ¡ä»¶ï¼Œå…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯</p>
<ol>
<li>ä¸€ä¸ªåŸŸåã€‚</li>
<li>ä¸€ä¸ªå…¬ç½‘IPï¼ˆv4æˆ–è€…v6éƒ½å¯ä»¥ï¼‰ã€‚</li>
</ol>
<p>æ­¤å¤–ï¼Œè¿˜éœ€è¦ä¸€ä¸ªLinuxç¯å¢ƒæ¥æ‰§è¡Œacmeç¨‹åºã€‚</p>
<h1 id="å®‰è£…acme"><a href="#å®‰è£…acme" class="headerlink" title="å®‰è£…acme"></a>å®‰è£…<a href="https://github.com/acmesh-official/acme.sh">acme</a></h1><p>è¯ä¹¦ç”³è¯·çš„åŸç†å°±æ˜¯å‘ä¸€äº›è¯ä¹¦å‘è¡Œç»„ç»‡ï¼Œå¦‚<a href="https://letsencrypt.org/">letsencrypt</a>ã€<a href="https://zerossl.com/">zerossl</a>ç­‰ï¼Œå‘é€åŸŸåå’ŒæœåŠ¡å™¨ç­‰ä¿¡æ¯ï¼Œå¦‚æœä¿¡æ¯æ ¡éªŒæˆåŠŸï¼Œè¿™äº›ç»„ç»‡å°±ä¼šç»™æˆ‘ä»¬é¢å‘TLSè¯ä¹¦ã€‚</p>
<p>ç”±äºä¸è¯ä¹¦é¢å‘æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡åè®®è¾ƒä¸ºç¹çï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ç¨‹åºæ¥å®Œæˆè¿™ä¸€ç³»åˆ—æ“ä½œï¼Œè€Œacmeå°±æ˜¯ç”¨æ¥å®Œæˆè¿™é¡¹å·¥ä½œçš„è„šæœ¬ç¨‹åºã€‚</p>
<p>æ ¹æ®ä½¿ç”¨ç³»ç»Ÿç¯å¢ƒçš„ä¸åŒï¼Œacmeçš„å®‰è£…æ–¹å¼ä¹Ÿä¸å°½ç›¸åŒã€‚</p>
<h2 id="æ ‡å‡†å‘è¡Œç‰ˆ"><a href="#æ ‡å‡†å‘è¡Œç‰ˆ" class="headerlink" title="æ ‡å‡†å‘è¡Œç‰ˆ"></a>æ ‡å‡†å‘è¡Œç‰ˆ</h2><p>å¦‚Ubuntuã€Debianã€CentOSç­‰ã€‚</p>
<p><strong>åœ¨çº¿å®‰è£…</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl https://get.acme.sh | sh -s email=my@example.com</span><br><span class="line">wget -O -  https://get.acme.sh | sh -s email=my@example.com</span><br></pre></td></tr></table></figure>

<p><strong>ç¦»çº¿å®‰è£…</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/acmesh-official/acme.sh.git</span><br><span class="line">cd ./acme.sh</span><br><span class="line">./acme.sh --install -m my@example.com</span><br></pre></td></tr></table></figure>

<p>ç”³è¯·çš„è¯ä¹¦ä¿å­˜åœ¨<code>~/.acme.sh/$domain</code>ä¸­ã€‚</p>
<h2 id="OpenWRT"><a href="#OpenWRT" class="headerlink" title="OpenWRT"></a>OpenWRT</h2><p>å®‰è£…ä»¥ä¸‹åŒ…</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">luci-app-acme</span><br><span class="line">acme</span><br><span class="line">acme-deploy</span><br><span class="line">acme-dnsapi</span><br><span class="line">acme-notify</span><br></pre></td></tr></table></figure>

<p>ç”³è¯·çš„è¯ä¹¦ä¿å­˜åœ¨<code>/etc/acme/$domain</code>ä¸­ã€‚</p>
<h1 id="è¯ä¹¦ç”³è¯·"><a href="#è¯ä¹¦ç”³è¯·" class="headerlink" title="è¯ä¹¦ç”³è¯·"></a>è¯ä¹¦ç”³è¯·</h1><p>æ ¹æ®ç½‘ç«™éƒ¨ç½²æ–¹å¼çš„ä¸åŒï¼Œä½¿ç”¨acmeç”³è¯·è¯ä¹¦çš„æ–¹å¼ä¹Ÿä¸ç›¸åŒã€‚</p>
<h2 id="ä½¿ç”¨DNS-APIç”³è¯·è¯ä¹¦"><a href="#ä½¿ç”¨DNS-APIç”³è¯·è¯ä¹¦" class="headerlink" title="ä½¿ç”¨DNS APIç”³è¯·è¯ä¹¦"></a>ä½¿ç”¨DNS APIç”³è¯·è¯ä¹¦</h2><p>è¦ä½¿ç”¨DNS APIï¼Œé€šå¸¸éƒ½éœ€è¦è·å–ä¸€ä¸ªAPI Keyã€‚acmeè¦æ±‚æˆ‘ä»¬åœ¨ä½¿ç”¨DNS APIä¹‹å‰è®¾ç½®ç›¸å…³ç¯å¢ƒå˜é‡ã€‚</p>
<h3 id="è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="è®¾ç½®ç¯å¢ƒå˜é‡"></a>è®¾ç½®ç¯å¢ƒå˜é‡</h3><h4 id="Cloudflare"><a href="#Cloudflare" class="headerlink" title="Cloudflare"></a>Cloudflare</h4><p>æ‰“å¼€<a href="https://dash.cloudflare.com/profile/api-tokens">https://dash.cloudflare.com/profile/api-tokens</a>ï¼ŒæŸ¥çœ‹<code>Global API Key</code>ï¼Œå¹¶è®¾ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export CF_Key=&quot;&quot;</span><br><span class="line">export CF_Email=&quot;&quot;</span><br><span class="line">export DNS_API=&#x27;dns_cf&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="Dynv6"><a href="#Dynv6" class="headerlink" title="Dynv6"></a>Dynv6</h4><p>æ‰“å¼€<a href="https://dynv6.com/keys/token/new">https://dynv6.com/keys/token/new</a>ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„HTTP Tokenã€‚</p>
<p>åˆ›å»ºæœ¬åœ°sshå…¬ç§é’¥ï¼Œå¹¶å°†å…¬é’¥<code>~/.ssh/id_ed25519.pub</code>ä¸Šä¼ åˆ°<a href="https://dynv6.com/keys">https://dynv6.com/keys</a>ä¸­çš„<code>SSH Public Keys</code>ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t ed25519</span><br></pre></td></tr></table></figure>

<p>è®¾ç½®ç¯å¢ƒå˜é‡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export KEY=&quot;~/.ssh/id_ed25519.pub&quot;</span><br><span class="line">export DYNV6_TOKEN=&quot;&quot;</span><br><span class="line">export DNS_API=&#x27;dns_dynv6&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="ç”³è¯·è¯ä¹¦"><a href="#ç”³è¯·è¯ä¹¦" class="headerlink" title="ç”³è¯·è¯ä¹¦"></a>ç”³è¯·è¯ä¹¦</h3><h4 id="æ ‡å‡†å‘è¡Œç‰ˆ-1"><a href="#æ ‡å‡†å‘è¡Œç‰ˆ-1" class="headerlink" title="æ ‡å‡†å‘è¡Œç‰ˆ"></a>æ ‡å‡†å‘è¡Œç‰ˆ</h4><p>æ‰§è¡Œä»¥ä¸‹è„šæœ¬ä¹‹å‰ï¼Œç›¸å…³çš„ç¯å¢ƒå˜é‡å¿…é¡»å·²ç»è®¾ç½®å¥½ã€‚</p>
<p>åŸŸåå¯ä»¥å¡«å…¥å¤šä¸ªï¼Œç”¨ç©ºæ ¼åˆ†éš”ï¼Œè¿™æ ·å¤šä¸ªåŸŸåå¯ä»¥å…±äº«åŒä¸€ä¸ªè¯ä¹¦ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Related environment variables must have been exported before</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">the first is the main domain</span></span><br><span class="line">domain_list=&#x27;example.org sub.example.org *.sub.example.org&#x27;</span><br><span class="line">for domain in $domain_list</span><br><span class="line">do</span><br><span class="line">        domain_opt=&quot;$domain_opt -d $domain&quot;</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">~/.acme.sh/acme.sh --issue --dns $DNS_API $domain_opt --server letsencrypt</span><br></pre></td></tr></table></figure>

<h4 id="OpenWRT-1"><a href="#OpenWRT-1" class="headerlink" title="OpenWRT"></a>OpenWRT</h4><p>æ‰“å¼€<code>æœåŠ¡ &gt; ACMEè¯ä¹¦</code>ã€‚</p>
<p>åœ¨<code>åŸŸå</code>è¿™ä¸€é¡¹é‡Œé¢æ·»åŠ æ‰€éœ€çš„åŸŸåï¼Œåœ¨<code>DNS API</code>è¿™ä¸€é¡¹é‡Œé¢å¡«å…¥ç¯å¢ƒå˜é‡<code>$DNS_API</code>çš„å€¼ï¼Œæœ€ååˆ†åˆ«å°†å…¶å®ƒç¯å¢ƒå˜é‡å¡«å…¥<code>DNS API å‡­è¯</code>ä¸­ã€‚</p>
<img src="/2023/01/08/issue-https-cert-with-acme/openwrt_acme_cf.png" class="">

<h1 id="è¯ä¹¦ä½¿ç”¨"><a href="#è¯ä¹¦ä½¿ç”¨" class="headerlink" title="è¯ä¹¦ä½¿ç”¨"></a>è¯ä¹¦ä½¿ç”¨</h1><p>ä¸ºäº†ç¡®ä¿è¯ä¹¦çš„æœ€ä½³å…¼å®¹æ€§ï¼Œè¯ä¹¦æ–‡ä»¶ä½¿ç”¨<code>fullchain.cer</code>ï¼Œè€Œå¯†é’¥æ–‡ä»¶ä½¿ç”¨<code>$domain.key</code></p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://blog.20200202.best/dynv6acmednsapihowto/">åŠ¨æ€åŸŸåå•†Dynv6ä¹‹acmeä½¿ç”¨dnsapiç”³è¯·è¯ä¹¦</a></p>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>acme</tag>
        <tag>https</tag>
        <tag>è¯ä¹¦</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Yuzuæ¸¸ç©Switchæ¸¸æˆ</title>
    <url>/2023/01/27/play-ns-games-on-yuzu.html</url>
    <content><![CDATA[<blockquote>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œä»»å¤©å ‚çš„æ¸¸æˆæå…·è¶£å‘³æ€§ï¼Œä½†ç¡¬ä»¶æœºèƒ½å´éå¸¸å·®ï¼Œåˆ†è¾¨ç‡ä½ä¸è¯´ï¼Œåœ¨æœ‰äº›æ¸¸æˆä¸­è¿30å¸§çš„å¸§ç‡éƒ½æ— æ³•ä¿éšœï¼Œå¹¶ä¸”æ®è¯´2024å¹´å°†å‘å¸ƒä¸‹ä¸€ä»£ä¸»æœºï¼Œç°åœ¨è´­ä¹°Switchå¾ˆå¯èƒ½49å¹´å…¥å›½å†›ã€‚å¯¹äºé‚£äº›åªæƒ³ç©å‡ ä¸ªç‰¹å®šçš„å•æœºæ¸¸æˆçš„äººæ¥è¯´ï¼Œä½¿ç”¨æ¨¡æ‹Ÿå™¨ä¹Ÿæ˜¯ä¸€ä¸ªå¯è¡Œçš„æ–¹æ¡ˆã€‚æœ¬æ–‡å°†å®Œæ•´ä»‹ç»å¦‚ä½•åœ¨Windows PCä¸Šç•…ç©Switchæ¸¸æˆã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h1><p>ç”±äºæ¨¡æ‹Ÿå™¨é€šå¸¸å…·æœ‰è¾ƒé«˜çš„æ€§èƒ½æŸè€—ï¼Œæ‰€ä»¥é¦–å…ˆæˆ‘ä»¬è¦æœ‰ä¸€å°æ€§èƒ½å¼ºåŠ²çš„ç”µè„‘ï¼Œè¿™é‡Œç»™å‡ºä¸€ä¸ªç¡¬ä»¶éœ€æ±‚ï¼š</p>
<ul>
<li>CPUï¼šè‡³å°‘4æ ¸å¿ƒï¼Œä¸”å•æ ¸æ€§èƒ½åœ¨è‹±ç‰¹å°”8ä»£i5åŠä»¥ä¸Š</li>
<li>å†…å­˜ï¼š8GiBä»¥ä¸Š</li>
<li>æ˜¾å¡ï¼šGTX1050åŠä»¥ä¸Šï¼Œæ˜¾å­˜è‡³å°‘4GiB</li>
</ul>
<p>å¦å¤–ï¼ŒSwitchæ¸¸æˆå…¨éƒ¨éƒ½æ˜¯é’ˆå¯¹æ‰‹æŸ„åšé€‚é…ï¼Œæ‰€ä»¥ä½¿ç”¨é”®é¼ æ¸¸ç©ä¼šéå¸¸éš¾ä»¥é€‚åº”ï¼Œå¤§å¤§é™ä½æ¸¸æˆä¹è¶£ï¼Œä¸ºäº†ä¿è¯æœ€ä½³æ¸¸æˆä½“éªŒï¼Œå»ºè®®è´­ä¹°ä¸€å¯¹Joyconsæ‰‹æŸ„ï¼Œç›®å‰Yuzuå·²ç»å‡ ä¹å®Œç¾é€‚é…è¯¥æ‰‹æŸ„ï¼Œæ— éœ€ä½¿ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶å³å¯å®ç°HDéœ‡åŠ¨å’Œä½“æ„Ÿã€‚</p>
<h1 id="å¼€å§‹å®‰è£…"><a href="#å¼€å§‹å®‰è£…" class="headerlink" title="å¼€å§‹å®‰è£…"></a>å¼€å§‹å®‰è£…</h1><p>Yuzuæœ¬èº«å¹¶ä¸æ˜¯å®Œæ•´çš„Switchæ¨¡æ‹Ÿå™¨ï¼Œå®ƒéœ€è¦Switchçš„<strong>å›ºä»¶</strong>ä»¥åŠ<strong>å¯†é’¥</strong>ï¼Œè€Œç”±äºæ³•å¾‹åŸå› ï¼Œè¿™ä¸¤éƒ¨åˆ†æ˜¯ä¸èƒ½ä¸Yuzuä¸€èµ·å‘è¡Œçš„ï¼Œæ‰€ä»¥å®Œæ•´çš„å®‰è£…è¿‡ç¨‹åŒ…æ‹¬ï¼š</p>
<div class="tabs" id="å®‰è£…è¿‡ç¨‹"><ul class="nav-tabs"><li class="tab active"><a href="#å®‰è£…è¿‡ç¨‹-1">å®‰è£…Yuzu</a></li><li class="tab"><a href="#å®‰è£…è¿‡ç¨‹-2">å®‰è£…å¯†é’¥</a></li><li class="tab"><a href="#å®‰è£…è¿‡ç¨‹-3">å®‰è£…å›ºä»¶</a></li></ul><div class="tab-content"><div class="tab-pane active" id="å®‰è£…è¿‡ç¨‹-1"><p>ä»<a href="https://yuzu-emu.org/downloads/">https://yuzu-emu.org/downloads/</a>ä¸‹è½½å¹¶å®‰è£…Yuzuã€‚</p>
<p>æ¯æ¬¡è¿è¡ŒYuzuçš„æ—¶å€™ï¼Œå®ƒéƒ½ä¼šæ£€æŸ¥æ˜¯å¦æœ‰æ›´æ–°ï¼Œå»ºè®®å§‹ç»ˆä½¿ç”¨æœ€æ–°ç‰ˆã€‚</p></div><div class="tab-pane" id="å®‰è£…è¿‡ç¨‹-2"><p>ä»<a href="http://www.mediafire.com/file/ldsbcskbt0z10kv/prod.keys/file">http://www.mediafire.com/file/ldsbcskbt0z10kv/prod.keys/file</a>ä¸‹è½½prod.keysã€‚</p>
<p>å¯åŠ¨Yuzuï¼Œé€‰æ‹©<code>æ–‡ä»¶</code>-&gt;<code>æ‰“å¼€yuzuæ–‡ä»¶å¤¹</code>ï¼Œå°†prod.keysæ”¾å…¥æ–‡ä»¶å¤¹ä¸­çš„<code>keys</code>ç›®å½•ã€‚</p>
<img src="/2023/01/27/play-ns-games-on-yuzu/keys.png" class=""></div><div class="tab-pane" id="å®‰è£…è¿‡ç¨‹-3"><p>ä»<a href="https://darthsternie.net/switch-firmwares/">https://darthsternie.net/switch-firmwares/</a>ä¸‹è½½å›ºä»¶ã€‚</p>
<p>å¯åŠ¨Yuzuï¼Œé€‰æ‹©<code>æ–‡ä»¶</code>-&gt;<code>æ‰“å¼€yuzuæ–‡ä»¶å¤¹</code>ï¼Œå°†å›ºä»¶è§£å‹åˆ°æ–‡ä»¶å¤¹ä¸­çš„<code>nand\system\Contents\registered</code>ç›®å½•ã€‚</p>
<img src="/2023/01/27/play-ns-games-on-yuzu/firmware.png" class=""></div></div></div>

<p>å®Œæˆæ‰€æœ‰æ­¥éª¤åï¼Œé‡å¯Yuzuã€‚</p>
<h1 id="å®‰è£…æ¸¸æˆ"><a href="#å®‰è£…æ¸¸æˆ" class="headerlink" title="å®‰è£…æ¸¸æˆ"></a>å®‰è£…æ¸¸æˆ</h1><p>Yuzuæ”¯æŒSwitchä¸Šçš„NSPå’ŒXCIæ ¼å¼çš„æ¸¸æˆï¼Œè€Œæ¸¸æˆæœ¬èº«åˆåˆ†ä¸ºæœ¬ä½“ã€æ›´æ–°å’ŒDLCã€‚</p>
<div class="tabs" id="å®‰è£…æ¸¸æˆ"><ul class="nav-tabs"><li class="tab active"><a href="#å®‰è£…æ¸¸æˆ-1">è®¾ç½®æ¸¸æˆç›®å½•</a></li><li class="tab"><a href="#å®‰è£…æ¸¸æˆ-2">ä¸‹è½½æ¸¸æˆ</a></li><li class="tab"><a href="#å®‰è£…æ¸¸æˆ-3">å®‰è£…æ¸¸æˆ</a></li></ul><div class="tab-content"><div class="tab-pane active" id="å®‰è£…æ¸¸æˆ-1"><p>å¯åŠ¨Yuzuï¼Œç‚¹å‡»ä¸»é¡µçš„<code>æ·»åŠ æ¸¸æˆç›®å½•</code>ï¼Œé€‰æ‹©ä¸€ä¸ªç›®å½•æ¥å­˜å‚¨æ¸¸æˆã€‚</p>
<img src="/2023/01/27/play-ns-games-on-yuzu/game-dir.png" class=""></div><div class="tab-pane" id="å®‰è£…æ¸¸æˆ-2"><p>å¯ä»¥ä¸‹è½½Switchæ¸¸æˆçš„ç½‘ç«™æœ‰å¾ˆå¤šï¼Œè¿™é‡Œä¸»è¦æ¨èä»¥ä¸‹4ä¸ªï¼š</p>
<ul>
<li><a href="https://nxbrew.com/">https://nxbrew.com/</a></li>
<li><a href="https://nsw2u.xyz/">https://nsw2u.xyz/</a></li>
<li><a href="https://nswgame.com/category/switch/">https://nswgame.com/category/switch/</a></li>
<li><a href="https://www.ziperto.com/nintendo-switch-nsp/">https://www.ziperto.com/nintendo-switch-nsp/</a></li>
</ul></div><div class="tab-pane" id="å®‰è£…æ¸¸æˆ-3"><p>å°†ä¸‹è½½çš„<strong>æ¸¸æˆæœ¬ä½“</strong>ç›´æ¥æ”¾å…¥ç¬¬ä¸€æ­¥è®¾ç½®çš„æ¸¸æˆç›®å½•å³å¯ã€‚</p>
<p>å¯¹äº<strong>æ¸¸æˆæ›´æ–°</strong>å’Œ<strong>DLC</strong>ï¼Œå¯ä»¥é€‰æ‹©<code>æ–‡ä»¶</code>-&gt;<code>å®‰è£…æ–‡ä»¶åˆ°NAND</code>ï¼Œå¹¶é€‰æ‹©å¯¹åº”çš„æ–‡ä»¶å®‰è£…å³å¯ã€‚</p>
<img src="/2023/01/27/play-ns-games-on-yuzu/games.png" class=""></div></div></div>

<h1 id="è®¾ç½®æ‰‹æŸ„"><a href="#è®¾ç½®æ‰‹æŸ„" class="headerlink" title="è®¾ç½®æ‰‹æŸ„"></a>è®¾ç½®æ‰‹æŸ„</h1><p>è™½ç„¶Yuzuå·²ç»å†…ç½®äº†Joyconsé©±åŠ¨ï¼Œä½†ç”±äºJoyconsæ˜¯é€šè¿‡è“ç‰™è¿æ¥åˆ°ç”µè„‘ï¼Œä¸ºäº†é¿å…å„ç§å„æ ·çš„å…¼å®¹æ€§é—®é¢˜ï¼Œæ¨èä½¿ç”¨USBè“ç‰™é€‚é…å™¨ï¼Œå¹¶ä¸”æœ€å¥½æ˜¯è“ç‰™4.0åè®®ã€‚</p>
<div class="tabs" id="è®¾ç½®æ‰‹æŸ„"><ul class="nav-tabs"><li class="tab active"><a href="#è®¾ç½®æ‰‹æŸ„-1">è“ç‰™è¿æ¥</a></li><li class="tab"><a href="#è®¾ç½®æ‰‹æŸ„-2">å•äººæ¨¡å¼</a></li><li class="tab"><a href="#è®¾ç½®æ‰‹æŸ„-3">å¤šäººæ¨¡å¼</a></li></ul><div class="tab-content"><div class="tab-pane active" id="è®¾ç½®æ‰‹æŸ„-1"><p>é•¿æŒ‰Joyconsçš„è“ç‰™é…å¯¹é”®ï¼Œç›´åˆ°4ä¸ªæµæ°´ç¯é—ªçƒï¼Œä½¿ç”¨ç”µè„‘æœç´¢è“ç‰™è®¾å¤‡ï¼Œå¹¶ä¾æ¬¡è¿æ¥ä¸¤ä¸ªæ‰‹æŸ„ã€‚</p>
<img src="/2023/01/27/play-ns-games-on-yuzu/connect.png" class=""></div><div class="tab-pane" id="è®¾ç½®æ‰‹æŸ„-2"><p>æ‰“å¼€<code>æ¨¡æ‹Ÿ</code>-&gt;<code>è®¾ç½®</code>-&gt;<code>æ§åˆ¶</code>ï¼Œ<code>è¿æ¥æ§åˆ¶å™¨</code>é€‰æ‹©<code>åŒJoyconsæ‰‹æŸ„</code>ï¼Œ<code>è¾“å…¥è®¾å¤‡</code>é€‰æ‹©<code>Dual Joycon 1</code>ï¼Œæ­¤æ—¶æ‘‡åŠ¨æ‘‡æ†æˆ–è€…æŒ‰åŠ¨æŒ‰é”®å¯ä»¥çœ‹åˆ°ç›¸åº”çš„åŠ¨ç”»ã€‚</p>
<img src="/2023/01/27/play-ns-games-on-yuzu/single.png" class=""></div><div class="tab-pane" id="è®¾ç½®æ‰‹æŸ„-3"><p>æ‰“å¼€<code>æ¨¡æ‹Ÿ</code>-&gt;<code>è®¾ç½®</code>-&gt;<code>æ§åˆ¶</code>ã€‚</p>
<p><code>ç©å®¶ 1</code>çš„<code>è¿æ¥æ§åˆ¶å™¨</code>é€‰æ‹©<code>å³Joyconsæ‰‹æŸ„</code>ï¼Œ<code>è¾“å…¥è®¾å¤‡</code>é€‰æ‹©<code>Right Joycon 1</code>ï¼Œæ­¤æ—¶æ‘‡åŠ¨æ‘‡æ†æˆ–è€…æŒ‰åŠ¨æŒ‰é”®å¯ä»¥çœ‹åˆ°ç›¸åº”çš„åŠ¨ç”»ã€‚</p>
<p><code>ç©å®¶ 2</code>çš„<code>è¿æ¥æ§åˆ¶å™¨</code>é€‰æ‹©<code>å·¦Joyconsæ‰‹æŸ„</code>ï¼Œ<code>è¾“å…¥è®¾å¤‡</code>é€‰æ‹©<code>Left Joycon 1</code>ï¼Œæ­¤æ—¶æ‘‡åŠ¨æ‘‡æ†æˆ–è€…æŒ‰åŠ¨æŒ‰é”®å¯ä»¥çœ‹åˆ°ç›¸åº”çš„åŠ¨ç”»ã€‚</p>
<img src="/2023/01/27/play-ns-games-on-yuzu/player1.png" class="">

<img src="/2023/01/27/play-ns-games-on-yuzu/player2.png" class=""></div></div></div>

<h1 id="å¼€å§‹æ¸¸æˆ"><a href="#å¼€å§‹æ¸¸æˆ" class="headerlink" title="å¼€å§‹æ¸¸æˆ"></a>å¼€å§‹æ¸¸æˆ</h1><p>æœ€åï¼ŒåŒå‡»æ¸¸æˆå³å¯å¼€å§‹ç•…ç©ã€‚</p>
<img src="/2023/01/27/play-ns-games-on-yuzu/play.png" class="">

<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://ethanwrenn.com/complete-guide-for-maximum-performance-on-yuzu-download-links-for-keys-firmware-switch-games-and-shaders/#:~:text=Open%20Yuzu%20and%20go%20to,the%20firmware%20files%20in%20there.">Complete guide for maximum performance on Yuzu + Download links for Keys, Firmware, Switch Games and Shaders</a></p>
<p><a href="https://cemuhook.sshnuke.net/padudpserver.html">How to setup your input software to provide motion sensor data</a></p>
<p><a href="https://tieba.baidu.com/p/7835182553">å…³äºè“ç‰™é€‚é…å™¨è¿æ¥åŸè£…joycon</a></p>
]]></content>
      <categories>
        <category>Games</category>
      </categories>
      <tags>
        <tag>switch</tag>
        <tag>yuzu</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨QEMU GDBè°ƒè¯•Linuxå†…æ ¸</title>
    <url>/2023/01/28/debug-kernel-with-qemu-gdb.html</url>
    <content><![CDATA[<blockquote>
<p>è°ƒè¯•Linuxå†…æ ¸ä»æ¥éƒ½ä¸æ˜¯ä¸€ä»¶å®¹æ˜“äº‹ã€‚å¦‚æœåœ¨å¼€å‘è¿‡ç¨‹ä¸­å‘ç°å†…æ ¸æ— æ³•å¯åŠ¨ï¼Œç”šè‡³è¿æ—¥å¿—è¾“å‡ºéƒ½æ²¡æœ‰ï¼Œé—®é¢˜å°±ä¼šå˜å¾—å¾ˆæ£˜æ‰‹ã€‚å¦‚æœæ˜¯å¼€å‘æ¿ï¼Œå¯èƒ½è¿˜å¯ä»¥å€ŸåŠ©JTAGï¼Œä½†å¦‚æœæ²¡æœ‰JTAGï¼Œè¦å¦‚ä½•è¿›è¡Œè°ƒè¯•å‘¢ï¼Ÿæœ¬æ–‡ç»™å‡ºå¦å¤–ä¸€ç§å¯èƒ½ï¼šä½¿ç”¨QEMUæ¥è¿›è¡Œå†…æ ¸è°ƒè¯•ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h1><p>è¦ä½¿ç”¨QEMU GDBè°ƒè¯•Linuxå†…æ ¸ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦è®©å†…æ ¸èƒ½å¤Ÿåœ¨QEMUä¸­å¯åŠ¨ã€‚å¯¹äºX86æ¶æ„ï¼Œè¿™é€šå¸¸ä¸å›°éš¾ï¼Œä½†æ˜¯å¯¹äºARMæ¶æ„ï¼Œå°¤å…¶æ˜¯ARM32æ¶æ„ï¼Œå¯èƒ½éœ€è¦å€ŸåŠ©ubootæ‰èƒ½å¯åŠ¨å†…æ ¸ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ<a href="https://blog.colorfulshark.net/2021/01/30/boot-kernel-in-uboot-from-qemu.html">åœ¨QEMUä¸­å¯åŠ¨U-Bootå’Œå†…æ ¸</a>ã€‚</p>
<p>å…¶æ¬¡æˆ‘ä»¬è¿˜éœ€è¦GDBè¿è¡Œç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨GDBå‘½ä»¤ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<a href="https://www.gdbgui.com/">gdbgui</a>è¿™æ ·çš„å›¾å½¢åŒ–å·¥å…·ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬è¿˜éœ€è¦è®©å†…æ ¸ä¿ç•™è°ƒè¯•ä¿¡æ¯ï¼Œå¯ä»¥åœ¨<code>menuconfig</code>åšå¦‚ä¸‹é…ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Symbol: DEBUG_KERNEL [=y]</span><br><span class="line">Type  : bool</span><br><span class="line">Defined at lib/Kconfig.debug:211</span><br><span class="line">  Prompt: Kernel debugging</span><br><span class="line">  Location:</span><br><span class="line">    -&gt; Kernel hacking</span><br><span class="line">      -&gt; Kernel debugging (DEBUG_KERNEL [=y])</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Symbol: DEBUG_INFO_DWARF_TOOLCHAIN_DEFAULT [=y]</span><br><span class="line">Type  : bool</span><br><span class="line">Defined at lib/Kconfig.debug:258</span><br><span class="line">  Prompt: Rely on the toolchain&#x27;s implicit default DWARF version</span><br><span class="line">  Depends on: &lt;choice&gt; &amp;&amp; (!CC_IS_CLANG [=n] || AS_IS_LLVM [=n] || CLANG_VERSION [=0]&lt;140000 || AS_IS_GNU [=y] &amp;&amp; \</span><br><span class="line">AS_VERSION [=23502]&gt;=23502 &amp;&amp; AS_HAS_NON_CONST_LEB128 [=y])</span><br><span class="line">  Location:</span><br><span class="line">   -&gt; Kernel hacking</span><br><span class="line">     -&gt; Compile-time checks and compiler options</span><br><span class="line">       -&gt; Debug information (&lt;choice&gt; [=y])</span><br><span class="line">         -&gt; Rely on the toolchain&#x27;s implicit default DWARF version (DEBUG_INFO_DWARF_TOOLCHAIN_DEFAULT [=y])</span><br></pre></td></tr></table></figure>

<h1 id="å¯åŠ¨GDB-Server"><a href="#å¯åŠ¨GDB-Server" class="headerlink" title="å¯åŠ¨GDB Server"></a>å¯åŠ¨GDB Server</h1><p>å‡è®¾æˆ‘ä»¬åŸºäºX86æ¶æ„è°ƒè¯•ï¼Œé‚£ä¹ˆç¼–è¯‘å‡ºçš„å†…æ ¸é•œåƒé€šå¸¸æ˜¯<strong>bzImage</strong>ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯åŠ¨å†…æ ¸ï¼Œå› ä¸ºå¹¶æ²¡æœ‰æŒ‡å®šæ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œæ‰€ä»¥å†…æ ¸ä¼šåœ¨æŒ‚è½½rootç›®å½•æ—¶panicã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">qemu-system-x86_64 -nographic -kernel <span class="built_in">arch</span>/x86_64/boot/bzImage -append <span class="string">&#x27;console=ttyS0&#x27;</span></span><br></pre></td></tr></table></figure>

<p>è¦å¯åŠ¨QEMUå†…ç½®çš„GDB Serverï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨2ä¸ªé¢å¤–çš„å‚æ•°</p>
<ul>
<li><code>-s</code>: Do not start CPU at startup</li>
<li><code>-S</code>: Open a gdbserver on TCP port 1234</li>
</ul>
<p>ç¬¬ä¸€ä¸ªå‚æ•°çš„ç›®çš„æ˜¯è®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨CPUå¯åŠ¨ä¹‹å‰è¿æ¥GDB Serverï¼Œè€Œç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯å¯åŠ¨GDB Serverã€‚</p>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ·»åŠ ä¸€ä¸ªå†…æ ¸cmdlineå‚æ•°<code>nokaslr</code>æ¥å…³é—­å†…æ ¸åœ°å€éšæœºåŒ–ï¼Œå¦åˆ™æˆ‘ä»¬æ‰“æ–­ç‚¹çš„åœ°å€ä¸å®é™…æ‰§è¡Œçš„åœ°å€å°†ä¸ä¸€è‡´ï¼Œä»è€Œå¯¼è‡´æ–­ç‚¹å¤±æ•ˆã€‚</p>
<p>äºæ˜¯ï¼Œæœ€ç»ˆçš„å‘½ä»¤ä¸º</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">qemu-system-x86_64 -nographic -s -S -kernel <span class="built_in">arch</span>/x86_64/boot/bzImage -append <span class="string">&#x27;console=ttyS0 nokaslr&#x27;</span></span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œå‘½ä»¤åï¼Œæˆ‘ä»¬ä¼šå‘ç°QEMUæ²¡æœ‰ä»»ä½•è¾“å‡ºï¼Œå› ä¸ºæ­¤æ—¶è™šæ‹Ÿæœºçš„CPUè¿˜æœªå¯åŠ¨ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åœ¨GDBä¸­å®Œæˆåç»­å·¥ä½œã€‚</p>
<h1 id="GDBè°ƒè¯•"><a href="#GDBè°ƒè¯•" class="headerlink" title="GDBè°ƒè¯•"></a>GDBè°ƒè¯•</h1><p>åœ¨å†…æ ¸æºç æ ¹ç›®å½•æ‰§è¡Œ<code>gdb</code>å‘½ä»¤è¿›å…¥GDB shellã€‚</p>
<p>é¦–å…ˆè¿æ¥åˆ°QEMUçš„GDB Serverï¼Œé»˜è®¤ç«¯å£æ˜¯<code>1234</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(gdb) file vmlinux</span><br><span class="line">(gdb) add-auto-load-safe-path $(pwd)</span><br><span class="line">(gdb) target remote localhost:1234</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬è®¾ç½®æ–­ç‚¹ï¼Œä»¥<code>start_kernel</code>å‡½æ•°ä¸ºä¾‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(gdb) break start_kernel</span><br></pre></td></tr></table></figure>

<p>æœ€åï¼Œæˆ‘ä»¬é€šè¿‡GDBæ§åˆ¶QEMUç»§ç»­æ‰§è¡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(gdb) continue</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å°†çœ‹åˆ°QEMUç»§ç»­æ‰§è¡Œï¼Œå¹¶åœ¨<code>start_kernel</code>å¤„åœä¸‹æ¥ï¼Œç­‰å¾…GDBçš„å‘½ä»¤ã€‚ä¹‹åçš„è°ƒè¯•æ–¹å¼ä¸å¸¸è§„ç”¨æˆ·æ€çš„è°ƒè¯•å¤§åŒå°å¼‚ã€‚</p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://stackoverflow.com/questions/11408041/how-to-debug-the-linux-kernel-with-gdb-and-qemu?_gl=1*1x1uq6h*_ga*MjA1NzM2MTc3LjE2NTUzNjY3NTA.*_ga_S812YQPLT2*MTY2NDE4MzI0NS40LjEuMTY2NDE4MzMxMS4wLjAuMA">How to debug the Linux kernel with GDB and QEMU?</a></p>
]]></content>
      <categories>
        <category>Kernel</category>
      </categories>
      <tags>
        <tag>qemu</tag>
        <tag>kernel</tag>
        <tag>debug</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨Qemuä¸­è™šæ‹ŸåŒ–å›ºæ€ç¡¬ç›˜</title>
    <url>/2023/01/30/emulate-ssd-in-qemu.html</url>
    <content><![CDATA[<blockquote>
<p>Qemuè™šæ‹Ÿæœºä¸­çš„ç£ç›˜é€šå¸¸éƒ½æ˜¯ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨åœ¨å®¿ä¸»æœºä¸Šï¼Œå¦‚<code>qcow2</code>ï¼Œç†è®ºä¸Šè™šæ‹Ÿç£ç›˜çš„ç±»å‹å¹¶ä¸é‡è¦ã€‚ä½†æœ‰æ—¶ï¼Œè™šæ‹Ÿæœºä¸­çš„ç¨‹åºä¼šä¸»åŠ¨æ£€æµ‹å½“å‰ä½¿ç”¨çš„ç£ç›˜ç±»å‹ï¼Œå¦‚<code>trim</code>ï¼Œäºæ˜¯å°±éœ€è¦æˆ‘ä»¬æ˜ç¡®æŒ‡å®šè™šæ‹Ÿç£ç›˜æ˜¯æœºæ¢°ç¡¬ç›˜ï¼Œè¿˜æ˜¯å›ºæ€ç¡¬ç›˜ï¼Œæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨Qemuä¸­å®Œæˆé…ç½®ã€‚</p>
</blockquote>
<span id="more"></span>

<p>ç›®å‰ä¸»æµçš„å›ºæ€ç¡¬ç›˜æœ‰ä¸¤ç§ï¼Œä½¿ç”¨<code>PCIe</code>æ€»çº¿çš„<code>NVMe</code>å›ºæ€ï¼Œå’Œä½¿ç”¨<code>SATA/SCSI</code>æ€»çº¿çš„å›ºæ€ï¼Œä¸‹é¢å°†åˆ†åˆ«é’ˆå¯¹ä¸åŒåœºæ™¯å¯¹ä¸¤ç§æ¨¡æ‹Ÿå›ºæ€çš„é…ç½®æ–¹æ³•è¿›è¡Œä»‹ç»ã€‚</p>
<h1 id="æ¨¡æ‹ŸNVMeå›ºæ€"><a href="#æ¨¡æ‹ŸNVMeå›ºæ€" class="headerlink" title="æ¨¡æ‹ŸNVMeå›ºæ€"></a>æ¨¡æ‹ŸNVMeå›ºæ€</h1><p>åœ¨Qemuä¸­ï¼ŒNVMeæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è®¾å¤‡ç±»å‹ï¼Œæ‰€ä»¥åªéœ€è¦å°†ç¡¬ç›˜çš„è®¾å¤‡ç±»å‹æŒ‡å®šä¸ºNVMeå³å¯ã€‚</p>
<div class="tabs" id="qemu_nvme"><ul class="nav-tabs"><li class="tab active"><a href="#qemu_nvme-1">Qemu command line</a></li><li class="tab"><a href="#qemu_nvme-2">Libvirt XML</a></li><li class="tab"><a href="#qemu_nvme-3">virt-install</a></li></ul><div class="tab-content"><div class="tab-pane active" id="qemu_nvme-1"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-drive file=/path/to/nvme1.img,<span class="keyword">if</span>=none,<span class="built_in">id</span>=NVME1 \</span><br><span class="line">-device nvme,drive=NVME1,serial=nvme-1</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="qemu_nvme-2"><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">qemu:commandline</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">qemu:arg</span> <span class="attr">value</span>=<span class="string">&#x27;-drive&#x27;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">qemu:arg</span> <span class="attr">value</span>=<span class="string">&#x27;file=/path/to/nvme1.img,format=raw,if=none,id=NVME1&#x27;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">qemu:arg</span> <span class="attr">value</span>=<span class="string">&#x27;-device&#x27;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">qemu:arg</span> <span class="attr">value</span>=<span class="string">&#x27;nvme,drive=NVME1,serial=nvme-1&#x27;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">qemu:commandline</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="qemu_nvme-3"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">--qemu-commandline=<span class="string">&#x27;-drive file=/path/to/nvme1.img,format=raw,if=none,id=NVME1&#x27;</span></span><br><span class="line">--qemu-commandline=<span class="string">&#x27;-device nvme,drive=NVME1,serial=nvme-1&#x27;</span></span><br></pre></td></tr></table></figure></div></div></div>

<h1 id="æ¨¡æ‹ŸSATAå›ºæ€"><a href="#æ¨¡æ‹ŸSATAå›ºæ€" class="headerlink" title="æ¨¡æ‹ŸSATAå›ºæ€"></a>æ¨¡æ‹ŸSATAå›ºæ€</h1><p>ç”±äºSATA&#x2F;SCSIæ€»çº¿æ—¢å¯ä»¥è¿æ¥æœºæ¢°ç¡¬ç›˜ï¼Œä¹Ÿå¯ä»¥è¿æ¥å›ºæ€ç¡¬ç›˜ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è®¾ç½®æ€»çº¿ä¸Šè®¾å¤‡çš„å±æ€§<code>rotation speed</code>æ¥è¿›è¡ŒåŒºåˆ†ã€‚å½“è®¾ç½®å…¶ä¸º<code>1</code>æ—¶ï¼Œè¡¨ç¤ºè¯¥è®¾å¤‡ä¸ºå›ºæ€ç¡¬ç›˜ã€‚</p>
<p>è¦è®¾ç½®SATA&#x2F;SCSIæ€»çº¿ä¸Šçš„è®¾å¤‡å±æ€§ï¼Œæˆ‘ä»¬å¿…é¡»è¦æ‰¾åˆ°å…¶IDï¼Œæ¯”å¦‚<code>sata0-0-0</code>æˆ–è€…<code>scsi0-0-0-0</code>ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥è¯¢ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">virsh qemu-monitor-command --hmp 1 <span class="string">&quot;info qtree&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dev: scsi-hd, id &quot;scsi0-0-0-0&quot;</span><br><span class="line">  drive = &quot;drive-scsi0-0-0-0&quot;</span><br><span class="line">  logical_block_size = 512 (0x200)</span><br><span class="line">  physical_block_size = 512 (0x200)</span><br><span class="line">  min_io_size = 0 (0x0)</span><br><span class="line">  opt_io_size = 0 (0x0)</span><br><span class="line">  discard_granularity = 4096 (0x1000)</span><br><span class="line">  write-cache = &quot;on&quot;</span><br><span class="line">  share-rw = false</span><br><span class="line">  rerror = &quot;auto&quot;</span><br><span class="line">  werror = &quot;auto&quot;</span><br><span class="line">  ver = &quot;2.5+&quot;</span><br><span class="line">  serial = &quot;&quot;</span><br><span class="line">  vendor = &quot;QEMU&quot;</span><br><span class="line">  product = &quot;QEMU HARDDISK&quot;</span><br><span class="line">  device_id = &quot;drive-scsi0-0-0-0&quot;</span><br><span class="line">  removable = false</span><br><span class="line">  dpofua = false</span><br><span class="line">  wwn = 0 (0x0)</span><br><span class="line">  port_wwn = 0 (0x0)</span><br><span class="line">  port_index = 0 (0x0)</span><br><span class="line">  max_unmap_size = 1073741824 (0x40000000)</span><br><span class="line">  max_io_size = 2147483647 (0x7fffffff)</span><br><span class="line">  rotation_rate = 1 (0x1)</span><br><span class="line">  scsi_version = 5 (0x5)</span><br><span class="line">  cyls = 16383 (0x3fff)</span><br><span class="line">  heads = 16 (0x10)</span><br><span class="line">  secs = 63 (0x3f)</span><br><span class="line">  channel = 0 (0x0)</span><br><span class="line">  scsi-id = 0 (0x0)</span><br><span class="line">  lun = 0 (0x0)</span><br></pre></td></tr></table></figure>

<p>å¾—åˆ°IDä¹‹åå°±å¯ä»¥è¿›è¡Œè®¾ç½®äº†ã€‚</p>
<div class="tabs" id="qemu_sata"><ul class="nav-tabs"><li class="tab active"><a href="#qemu_sata-1">Qemu command line</a></li><li class="tab"><a href="#qemu_sata-2">Libvirt XML</a></li><li class="tab"><a href="#qemu_sata-3">virt-install</a></li></ul><div class="tab-content"><div class="tab-pane active" id="qemu_sata-1"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-<span class="built_in">set</span> device.scsi0-0-0-0.rotation_rate=1</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="qemu_sata-2"><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">qemu:commandline</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">qemu:arg</span> <span class="attr">value</span>=<span class="string">&#x27;-set&#x27;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">qemu:arg</span> <span class="attr">value</span>=<span class="string">&#x27;device.scsi0-0-0-0.rotation_rate=1&#x27;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">qemu:commandline</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="qemu_sata-3"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">--qemu-commandline=<span class="string">&#x27;-set device.scsi0-0-0-0.rotation_rate=1&#x27;</span></span><br></pre></td></tr></table></figure></div></div></div>

<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://blog.christophersmart.com/2019/12/18/kvm-guests-with-emulated-ssd-and-nvme-drives/">KVM guests with emulated SSD and NVMe drives</a><br><a href="https://libvirt.org/kbase/qemu-passthrough-security.html">QEMU command-line passthrough</a></p>
]]></content>
      <categories>
        <category>How-To</category>
        <category>Qemu</category>
      </categories>
      <tags>
        <tag>qemu</tag>
        <tag>ssd</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Syncthingå’ŒFileRunæ­å»ºç§äººäº‘ç›˜</title>
    <url>/2023/03/07/setup-personal-cloud-drive-with-syncthing-and-filerun.html</url>
    <content><![CDATA[<blockquote>
<p>å…¥æ‰‹NASä¹‹åï¼Œæˆ‘ä¸€ç›´ä½¿ç”¨NextCloud + IPv6è¿œç¨‹ç®¡ç†å…¶ä¸­çš„æ–‡ä»¶ï¼Œä»¥åŠåŒæ­¥å¤‡ä»½æ‰‹æœºå’Œç”µè„‘çš„æ•°æ®ã€‚ç”±äºåœ¨åŒ—äº¬ç§Ÿæˆ¿ï¼Œæ‰€ä»¥NASè¢«æ”¾åœ¨äº†çˆ¶æ¯å®¶ï¼Œè¿™å°±å¯¼è‡´å½“æƒ³è¦ä¸‹è½½ä¸€äº›å¤§æ–‡ä»¶æ—¶ï¼Œå³ä½¿æ˜¯ç›´è¿ï¼Œä¹Ÿéœ€è¦ç­‰å¾ˆä¹…ã€‚å› è€Œæ‰“ç®—è®¾è®¡ä¸€ä¸ªæ–°çš„æ¶æ„ï¼Œç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="é—®é¢˜å’Œè¯‰æ±‚"><a href="#é—®é¢˜å’Œè¯‰æ±‚" class="headerlink" title="é—®é¢˜å’Œè¯‰æ±‚"></a>é—®é¢˜å’Œè¯‰æ±‚</h1><p>ç›®å‰çš„é—®é¢˜ä¸»è¦æœ‰3ä¸ªï¼š</p>
<ol>
<li>ä½¿ç”¨IPv6 + DDNSè¿œç¨‹è®¿é—®NASå¹¶ä¸ç¨³å®šï¼Œæœ‰æ—¶é‡åˆ°IPå˜æ¢ï¼Œæˆ–è€…æ‰€åœ¨ç½‘ç»œä¸æ”¯æŒIPv6ï¼Œæ•°æ®ä¾¿æ— æ³•è®¿é—®ã€‚</li>
<li>è™½ç„¶NASä¸Šä½¿ç”¨ZFSç»„äº†è½¯RAID1ï¼Œä½†æ¯•ç«Ÿä¸¤å—ç¡¬ç›˜æ˜¯åœ¨åŒä¸€å°æœºå™¨ä¸Šï¼Œä¸€æ—¦æœºå™¨æŸåï¼Œå¯èƒ½ä¸¢å¤±æ‰€æœ‰æ•°æ®ã€‚</li>
<li>æœ‰æ—¶ï¼Œæˆ‘ä¼šé€šè¿‡ç»ˆç«¯ç›´æ¥ä¸‹è½½æˆ–å¤åˆ¶ä¸€äº›æ–‡ä»¶åˆ°NASä¸­ï¼Œä½†NextCloudå¹¶ä¸èƒ½ç«‹å³è¯†åˆ«é‚£äº›æ–‡ä»¶ï¼Œå¿…é¡»æ‰‹åŠ¨æ›´æ–°æ•°æ®åº“ã€‚</li>
</ol>
<p>åŸºäºä»¥ä¸Šé—®é¢˜ï¼Œæˆ‘æ˜ç¡®äº†ä¸‹é¢3ä¸ªè¯‰æ±‚ï¼š</p>
<ol>
<li>æˆ‘éœ€è¦åœ¨æœ¬åœ°ä¹Ÿä¿ç•™ä¸€ä»½å®Œæ•´çš„æ•°æ®ã€‚</li>
<li>æ–‡ä»¶ç®¡ç†ç¨‹åºå¿…é¡»èƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«æ–°æ–‡ä»¶ã€‚</li>
<li>æœ¬åœ°æ•°æ®å’ŒNASä¸­çš„æ•°æ®å¿…é¡»ä¿æŒä¸€è‡´.</li>
</ol>
<h1 id="æ–°æ–¹æ¡ˆ"><a href="#æ–°æ–¹æ¡ˆ" class="headerlink" title="æ–°æ–¹æ¡ˆ"></a>æ–°æ–¹æ¡ˆ</h1><p>ç»è¿‡æœç´¢ï¼Œæˆ‘å‘ç°æœ‰ä¸¤æ¬¾è½¯ä»¶å¯ä»¥æ»¡è¶³æˆ‘çš„éœ€æ±‚ï¼š</p>
<ul>
<li><a href="https://filerun.com/">FileRun</a>ï¼šåŸºäºLAMPæ¶æ„çš„Webæ–‡ä»¶ç®¡ç†å™¨ï¼Œå¯å®æ—¶æ˜¾ç¤ºæ–‡ä»¶å˜åŒ–</li>
<li><a href="https://syncthing.net/">Syncthing</a>ï¼šé›†ç¾¤æ–‡ä»¶å­˜å‚¨å·¥å…·ï¼Œå¯åœ¨å¤šå°æœºå™¨ä¸ŠåŒæ­¥æ–‡ä»¶</li>
</ul>
<h1 id="å®‰è£…éƒ¨ç½²"><a href="#å®‰è£…éƒ¨ç½²" class="headerlink" title="å®‰è£…éƒ¨ç½²"></a>å®‰è£…éƒ¨ç½²</h1><h2 id="FileRun"><a href="#FileRun" class="headerlink" title="FileRun"></a>FileRun</h2><p>ä¸NextCloudä¸€æ ·ï¼ŒFileRunä¹Ÿæ˜¯ä¸€ä¸ªåŸºäºLAMPæ¶æ„çš„é¡¹ç›®ï¼Œå› æ­¤å®‰è£…éƒ¨ç½²çš„æ­¥éª¤ç›¸ä¼¼ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä¸éœ€è¦é‡æ–°æ‰«æï¼Œå°±å¯ä»¥ç«‹å³è¯†åˆ«æ–°æ–‡ä»¶ï¼Œè¿™å¤§å¤§æé«˜äº†æ–‡ä»¶ç®¡ç†çš„çµæ´»æ€§ã€‚</p>
<ol>
<li><p>å®‰è£…Apacheã€MySQLå’ŒPHP</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install apache2 mariadb-server php libapache2-mod-php php-mysql php-mbstring php-zip php-curl php-gd php-ldap php-xml php-imagick</span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®æ•°æ®åº“ï¼Œæ³¨æ„ä¿®æ”¹ç”¨æˆ·å¯†ç </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo mysql</span><br><span class="line">CREATE DATABASE filerun;</span><br><span class="line">CREATE USER &#x27;filerun&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;YOUR-DB-PASSWORD&#x27;;</span><br><span class="line">GRANT ALL ON filerun.* TO &#x27;filerun&#x27;@&#x27;localhost&#x27;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®PHP</p>
<ul>
<li>å®‰è£…ionCube  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget https://downloads.ioncube.com/loader_downloads/ioncube_loaders_lin_x86-64.tar.gz</span><br><span class="line">sudo tar -xzf ioncube_loaders_lin_x86-64.tar.gz -C /usr/lib/php</span><br><span class="line">sudo vim /etc/php/7.4/apache2/conf.d/00-ioncube.ini</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">zend_extension = /usr/lib/php/ioncube/ioncube_loader_lin_7.4.so</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></li>
<li>åˆ›å»ºåŸºç¡€é…ç½®  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/php/7.4/apache2/conf.d/filerun.ini</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">expose_php              = Off  </span><br><span class="line">error_reporting         = E_ALL &amp; ~E_NOTICE  </span><br><span class="line">display_errors          = Off  </span><br><span class="line">display_startup_errors  = Off  </span><br><span class="line">log_errors              = On  </span><br><span class="line">ignore_repeated_errors  = Off  </span><br><span class="line">allow_url_fopen         = On  </span><br><span class="line">allow_url_include       = Off  </span><br><span class="line">variables_order         = &quot;GPCS&quot;  </span><br><span class="line">allow_webdav_methods    = On  </span><br><span class="line">memory_limit            = 128M  </span><br><span class="line">max_execution_time      = 300  </span><br><span class="line">output_buffering        = Off  </span><br><span class="line">output_handler          = &quot;&quot;  </span><br><span class="line">zlib.output_compression = Off  </span><br><span class="line">zlib.output_handler     = &quot;&quot;  </span><br><span class="line">safe_mode               = Off  </span><br><span class="line">register_globals        = Off  </span><br><span class="line">magic_quotes_gpc        = Off  </span><br><span class="line">upload_max_filesize     = 20M  </span><br><span class="line">post_max_size           = 20M  </span><br><span class="line">enable_dl               = Off  </span><br><span class="line">disable_functions       = &quot;&quot;  </span><br><span class="line">disable_classes         = &quot;&quot;  </span><br><span class="line">session.save_handler     = files  </span><br><span class="line">session.use_cookies      = 1  </span><br><span class="line">session.use_only_cookies = 1  </span><br><span class="line">session.auto_start       = 0  </span><br><span class="line">session.cookie_lifetime  = 0  </span><br><span class="line">session.cookie_httponly  = 1  </span><br><span class="line">date.timezone            = &quot;UTC&quot; </span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line">sudo systemctl restart apache2</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>é…ç½®Apache</p>
 <div class="tabs" id="apache_config"><ul class="nav-tabs"><li class="tab active"><a href="#apache_config-1">http</a></li><li class="tab"><a href="#apache_config-2">https</a></li></ul><div class="tab-content"><div class="tab-pane active" id="apache_config-1"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/apache2/sites-available/filerun.conf</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">        ServerAdmin webmaster@localhost</span><br><span class="line">        DocumentRoot /var/www/filerun</span><br><span class="line"></span><br><span class="line">        ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log</span><br><span class="line">        CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line">sudo a2ensite filerun.conf</span><br><span class="line">sudo systemctl restart apache2</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="apache_config-2"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">openssl req -newkey rsa:4096 -x509 -sha256 -days 365 -nodes -out filerun.crt -keyout filerun.key</span><br><span class="line">sudo mv filerun.crt /etc/ssl/certs/</span><br><span class="line">sudo mv filerun.key /etc/ssl/private/</span><br><span class="line"></span><br><span class="line">sudo a2enmod rewrite headers env dir mime ssl</span><br><span class="line">sudo vim /etc/apache2/sites-available/filerun.conf</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">&lt;IfModule mod_ssl.c&gt;</span><br><span class="line">        &lt;VirtualHost _default_:443&gt;</span><br><span class="line">                ServerName nas.colorfulshark.net</span><br><span class="line"></span><br><span class="line">                &lt;IfModule mod_headers.c&gt;</span><br><span class="line">                        Header always set Strict-Transport-Security &quot;max-age=15552000; includeSubDomains&quot;</span><br><span class="line">                &lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">                DocumentRoot /var/www/filerun</span><br><span class="line"></span><br><span class="line">                ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log</span><br><span class="line">                CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined</span><br><span class="line"></span><br><span class="line">                SSLEngine on</span><br><span class="line"></span><br><span class="line">                SSLCertificateFile      /etc/ssl/certs/filerun.crt</span><br><span class="line">                SSLCertificateKeyFile /etc/ssl/private/filerun.key</span><br><span class="line"></span><br><span class="line">                &lt;FilesMatch &quot;\.(cgi|shtml|phtml|php)$&quot;&gt;</span><br><span class="line">                                SSLOptions +StdEnvVars</span><br><span class="line">                &lt;/FilesMatch&gt;</span><br><span class="line">                &lt;Directory /usr/lib/cgi-bin&gt;</span><br><span class="line">                                SSLOptions +StdEnvVars</span><br><span class="line">                &lt;/Directory&gt;</span><br><span class="line">        &lt;/VirtualHost&gt;</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line">sudo a2ensite filerun.conf</span><br><span class="line">sudo systemctl restart apache2</span><br></pre></td></tr></table></figure></div></div></div>
</li>
<li><p>å®‰è£…FileRun</p>
 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd /var/www</span><br><span class="line">sudo mkdir filerun &amp;&amp; cd filerun</span><br><span class="line">sudo wget -O FileRun.zip https://filerun.com/download-latest-ubuntu-20</span><br><span class="line">sudo unzip FileRun.zip</span><br><span class="line">sudo chown -R www-data:www-data /var/www/filerun</span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®FileRun</p>
<p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€<a href="http://ip/">http://IP</a>ï¼ˆhttpï¼‰æˆ–è€…<a href="https://ip/">https://IP</a>ï¼ˆhttpsï¼‰ï¼Œå³å¯æ‰“å¼€FileRunçš„é…ç½®å‘å¯¼ï¼Œåœ¨é¡µé¢ä¸­å®Œæˆé…ç½®å³å¯ã€‚</p>
</li>
</ol>
<h2 id="Syncthing"><a href="#Syncthing" class="headerlink" title="Syncthing"></a>Syncthing</h2><p>Syncthingçš„åŠŸèƒ½éå¸¸ç®€å•ï¼šåœ¨ä¸¤å°æœºå™¨ä¹‹é—´åŒæ­¥ç›®å½•ã€‚ä½†åŒæ—¶ï¼Œå®ƒåˆæ˜¯ç›®å‰æˆ‘æ‰€çŸ¥é“çš„æœ€å¼ºå¤§çš„åŒæ­¥å·¥å…·ã€‚</p>
<p>å½“æˆ‘ä»¬æƒ³è¦åœ¨ä¸¤å°æœºå™¨ä¸ŠåŒæ­¥æ•°æ®æ—¶ï¼Œå¾€å¾€æœ€éº»çƒ¦çš„åœ°æ–¹ä¸æ˜¯å¦‚ä½•é…ç½®åŒæ­¥ç­–ç•¥ï¼Œå‡å°‘å†²çªï¼Œè€Œæ˜¯å¦‚ä½•è®©ä¸¤å°æœºå™¨è¿é€šã€‚å¦‚æœæ˜¯å±€åŸŸç½‘ï¼Œæˆ‘ä»¬å¯èƒ½åªéœ€è¦æ‰‹åŠ¨è®¾ç½®IPï¼›ä½†åˆ°äº†å¹¿åŸŸç½‘ï¼Œæƒ³è¦è¿é€šä¸¤å°æœºå™¨é€šå¸¸æ˜¯éå¸¸å›°éš¾çš„ï¼Œå¾€å¾€éœ€è¦ä¸€å°å…·å¤‡å…¬ç½‘IPçš„ä¸­è½¬æœåŠ¡å™¨ä½œä¸ºæ¡¥æ¢ã€‚è€ŒSyncthingåˆ™å¦‚é­”æ³•èˆ¬ï¼ŒæŠŠä¸Šé¢æ‰€è¯´çš„æ­¥éª¤å…¨éƒ¨æŠ¹é™¤äº†ï¼Œä¸¤å°æœºå™¨åœ¨å¼¹æŒ‡ä¸€æŒ¥é—´ï¼Œå°±è‡ªåŠ¨å®Œæˆäº†è¿æ¥ï¼Œæ— è®ºå®ƒä»¬èº«å¤„ä½•æ–¹ã€‚</p>
<p>é‚£ä¹ˆSyncthingæ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Ÿè¿™å…¶å®å¾—ç›Šäºå®ƒå¼ºå¤§çš„ç½‘ç»œæ¢æµ‹åŠŸèƒ½ã€‚æ ¹æ®ä¸¤å°è®¾å¤‡ä¹‹é—´è¿æ¥æ–¹å¼çš„ä¸åŒï¼ŒSyncthingä¼šåšå¦‚ä¸‹å¤„ç†ï¼š</p>
<ul>
<li>å±€åŸŸç½‘ï¼šè‡ªåŠ¨æ¢æµ‹å¯¹æ–¹è®¾å¤‡ï¼ŒIPäº’æ¢ï¼Œå®Œæˆè¿æ¥ï¼Œæ­¤æ—¶ä¸éœ€è¦è®¾å¤‡è¿æ¥äº’è”ç½‘ã€‚</li>
<li>äº’è”ç½‘ï¼š<ul>
<li>å…·å¤‡å…¬ç½‘IPï¼šåªè¦ä»»æ„ä¸€å°æœºå™¨å…·å¤‡ä¸”22000ç«¯å£å¼€æ”¾ï¼Œä¸¤å°æœºå™¨å°†ä½¿ç”¨å…¬ç½‘IPç›´è¿ã€‚</li>
<li>NATç½‘ç»œï¼šå°è¯•ä½¿ç”¨UDPè¿›è¡Œæ‰“æ´ï¼Œå®ç°å†…ç½‘ç©¿é€ï¼Œä»»æ„ä¸€å°æœºå™¨ç©¿é€æˆåŠŸï¼Œå³å¯ç›´è¿ã€‚</li>
<li>ä»¥ä¸Šæ–¹æ¡ˆå‡å¤±è´¥ï¼šä½¿ç”¨Relayæ¡¥æ¥æœåŠ¡å™¨ï¼Œè¿™äº›æœåŠ¡å™¨é€šå¸¸æ˜¯å…¬ç”¨çš„ï¼Œå› æ­¤é€Ÿåº¦è¾ƒæ…¢ã€‚</li>
</ul>
</li>
</ul>
<p>ç›®å‰å›½å†…çš„è¿è¥å•†å¤§å¤šä¸å†æä¾›å…¬ç½‘IPv4åœ°å€ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯å…¬ç½‘IPv6åœ°å€ã€‚ç»è¿‡æµ‹è¯•ï¼Œä½¿ç”¨IPv6å¹¶ä¸”å¼€æ”¾22000ç«¯å£åï¼Œæ˜¯å¯ä»¥é¡ºåˆ©è¿æ¥çš„ã€‚</p>
<p>å³ä½¿æ²¡æœ‰IPv6ï¼ŒSyncthingä¹Ÿä¼šå°è¯•UDPæ‰“æ´ï¼Œç»è¿‡æµ‹è¯•ï¼ŒæˆåŠŸç‡è¿˜æ˜¯éå¸¸é«˜çš„ï¼Œå³ä½¿æ˜¯å…¬å¸çš„WiFiç½‘ç»œï¼Œä¹Ÿèƒ½æˆåŠŸå®ç°å…¬ç½‘ç›´è¿ã€‚</p>
<ol>
<li><p>é…ç½®Syncthingæº</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo curl -o /usr/share/keyrings/syncthing-archive-keyring.gpg https://syncthing.net/release-key.gpg</span><br><span class="line">echo &quot;deb [signed-by=/usr/share/keyrings/syncthing-archive-keyring.gpg] https://apt.syncthing.net/ syncthing stable&quot; | sudo tee /etc/apt/sources.list.d/syncthing.list</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£…Syncthing</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install syncthing</span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®Syncthing</p>
<p>ç”±äºFileRunæ˜¯ä½¿ç”¨<code>www-data</code>è´¦æˆ·è¿è¡Œçš„ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿä½¿ç”¨è¯¥è´¦æˆ·è¿è¡ŒSynchingï¼Œä»è€Œé¿å…æ–‡ä»¶æƒé™çš„é—®é¢˜ã€‚åŒæ—¶ï¼Œå°†å…¶ç›‘å¬IPæ”¹ä¸º0.0.0.0ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡å±€åŸŸç½‘IPè®¿é—®ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo mkdir /var/www/.config</span><br><span class="line">sudo chown www-data:www-data /var/www/.config</span><br><span class="line">sudo systemctl enable syncthing@www-data</span><br><span class="line">sudo systemctl start syncthing@www-data</span><br><span class="line"></span><br><span class="line">vim /var/www/.config/syncthing/config.xml</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">&lt;address&gt;127.0.0.1:8384&lt;/address&gt; =&gt; &lt;address&gt;0.0.0.0:8384&lt;/address&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±å¯ä»¥é€šè¿‡<a href="http://ip:8384/">http://IP:8384</a>è®¿é—®Syncthingçš„ç®¡ç†é¡µé¢äº†ã€‚</p>
</li>
</ol>
<p>è¦ç”¨å¥½Syncthingï¼Œéœ€è¦æ·±å…¥ç†è§£å®ƒçš„åŒæ­¥é€»è¾‘ã€‚åœ¨Syncthingä¸­ï¼Œæ¯ä¸€å°æœºå™¨å¯¹åº”ä¸€ä¸ª<strong>Device ID</strong>ï¼ŒåŒæ­¥çš„æœ€å°å•ä½æ˜¯<strong>Folder</strong>ï¼Œä½¿ç”¨<strong>Folder ID</strong>æ ‡è¯†ï¼Œå› æ­¤ä¸€ä¸ªå…·ä½“çš„<strong>Folder</strong>å¯ä»¥æ ‡å®šä¸º<code>[Device ID]:[Folder ID]</code>ã€‚</p>
<p>Syncthingä¼šä¿è¯ä½ çš„è®¾å¤‡IDæ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œè¦è¿æ¥ä¸¤å°æœºå™¨ï¼Œéœ€è¦å„è‡ªæ·»åŠ å¯¹æ–¹çš„IDï¼Œåªæœ‰ä¸€æ–¹æ·»åŠ IDæ˜¯ä¸ä¼šå»ºç«‹è¿æ¥çš„ï¼Œæ‰€ä»¥IDå¹¶ä¸éœ€è¦ä¿å¯†ã€‚</p>
<p>è‹¥è¦åœ¨2å°è®¾å¤‡ä¹‹é—´åŒæ­¥ç›®å½•ï¼Œé¦–å…ˆè¦å»ºç«‹è®¾å¤‡é—´çš„è¿æ¥ï¼Œç„¶ååœ¨ä¸¤å°è®¾å¤‡ä¸Šå„è‡ªåˆ›å»ºå…±äº«ç›®å½•ï¼Œå¹¶å…±äº«ç»™å¯¹æ–¹ã€‚</p>
<p>åˆ›å»ºå…±äº«ç›®å½•æ—¶ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹å»ºè®®ï¼Œä»¥è¾¾åˆ°æ¯”è¾ƒå¥½çš„æ•ˆæœï¼š</p>
<ol>
<li>å¯ç”¨Trash Can File Versioningï¼šè¿™å¯ä»¥é˜²æ­¢æ–‡ä»¶åœ¨ä¸€å°æœºå™¨ä¸Šè¢«è¯¯åˆ é™¤åï¼Œå…¶å®ƒæœºå™¨ä¹Ÿè·Ÿç€åˆ é™¤ã€‚è‡ªåŠ¨æ¸…ç†æ—¶é—´å¯ä»¥è®¾ç½®ä¸º30å¤©ã€‚</li>
<li>Ignore Patternsè®¾ç½®ä¸º<code>.*</code>ï¼šè¿™å¯ä»¥å¿½ç•¥éšè—æ–‡ä»¶ï¼Œå› ä¸ºè¿™äº›æ–‡ä»¶é€šå¸¸æ˜¯ä¸´æ—¶æ–‡ä»¶ã€‚</li>
<li>Full Rescan Intervalè®¾ç½®ä¸º0ï¼šè¿™åœ¨å®‰å“æ‰‹æœºä¸Šéå¸¸å®ç”¨ï¼Œå¯ä»¥èŠ‚çº¦ç”µé‡ï¼Œå› ä¸ºæ‰‹æœºåœ¨åˆ‡æ¢ç½‘ç»œæ—¶ï¼ŒSyncthingä¼šé‡å¯ï¼Œè€Œè¿™ä¼šå¼ºåˆ¶é‡æ–°æ‰«æã€‚</li>
<li>å¯ç”¨Ignore Permissionsï¼šæˆ‘ä»¬é€šå¸¸ä¸å¤ªå…³å¿ƒæ–‡ä»¶æƒé™çš„å˜åŒ–ï¼Œå¿½ç•¥å®ƒä¹Ÿå¯ä»¥é™ä½åŒæ­¥é¢‘ç‡ã€‚</li>
</ol>
<h1 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h1><p>ä¸¤å°ä¸»åŒæ­¥è®¾å¤‡æ‹¥æœ‰å…¨éƒ¨çš„æ–‡ä»¶ï¼Œäº’ä¸ºå¤‡ä»½ï¼Œè€Œæ‰‹æœºåˆ™é€‰æ‹©æ€§åœ°ä¸ä¹‹åŒæ­¥ï¼Œæœ€ç»ˆå®ç°æ•°æ®çš„å¼‚åœ°é˜²ç¾ã€‚</p>
<img src="/2023/03/07/setup-personal-cloud-drive-with-syncthing-and-filerun/syncthing.png" class="">

<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://docs.filerun.com/filerun_install_guide">FileRun Server Install Guides</a></p>
<p><a href="http://blog.filerun.com/how-to-install-filerun-on-ubuntu-20/">How to install FileRun on Ubuntu 20</a></p>
<p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-on-ubuntu-20-04">How To Install Linux, Apache, MySQL, PHP (LAMP) stack on Ubuntu 20.04</a></p>
<p><a href="https://docs.filerun.com/webdav">Accessing via WebDAV</a></p>
<p><a href="https://apt.syncthing.net/">https://apt.syncthing.net/</a></p>
<p><a href="https://docs.syncthing.net/intro/getting-started.html#getting-started">Syncthing Getting Started</a></p>
]]></content>
      <categories>
        <category>Geek</category>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>nas</tag>
        <tag>syncthing</tag>
        <tag>filerun</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨PVEä¸­å®‰è£…ç¾¤æ™–DSMç³»ç»Ÿ</title>
    <url>/2023/03/10/install-dsm-on-pve.html</url>
    <content><![CDATA[<blockquote>
<p>å…¶å®æˆ‘ä¸€ç›´å¯¹ç¾¤æ™–çš„ç³»ç»Ÿä¸å¤ªæ„Ÿå†’ï¼Œä¸€æ–¹é¢å®ƒæ˜¯é—­æºçš„ï¼Œæˆ‘æ— æ³•å¾—çŸ¥å®ƒé‡Œé¢æœ‰å¤šå°‘æœªä¿®å¤çš„æ¼æ´ä»¥åŠåé—¨ï¼›å¦ä¸€æ–¹é¢ï¼Œå³ä½¿ç¡¬ä»¶å·²ç»æœ‰äº†è¶…é«˜çš„æº¢ä»·ï¼Œç¾¤æ™–çš„å¥—ä»¶ä¹Ÿæ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆå¥½ç”¨ï¼ŒAppæ€»æ„Ÿè§‰å°±æ˜¯åŠæˆå“ï¼Œç³»ç»Ÿä¸æ•°æ®æ··åœ¨ä¸€èµ·ï¼Œè¿™äº›å› ç´ å†³å®šäº†æˆ‘æ³¨å®šä¸ä¼šæ˜¯ç¾¤æ™–çš„å—ä¼—ã€‚ä½†æœ‰é’±èƒ½ä½¿é¬¼æ¨ç£¨ï¼Œç½‘å¿ƒäº‘å‘å¸ƒäº†åŸºäºç¾¤æ™–çš„PCDNä¸šåŠ¡ï¼Œå¹¶ä¸”çœ‹èµ·æ¥æ”¶ç›Šè¦ä¼˜äºDockerä¸šåŠ¡ï¼Œäºæ˜¯ï¼Œæˆ‘ä¹Ÿå¼€å§‹æŠ˜è…¾èµ·é»‘ç¾¤æ™–äº†ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="åˆ›å»ºè™šæ‹Ÿæœº"><a href="#åˆ›å»ºè™šæ‹Ÿæœº" class="headerlink" title="åˆ›å»ºè™šæ‹Ÿæœº"></a>åˆ›å»ºè™šæ‹Ÿæœº</h1><p>åœ¨PVEä¸­åˆ›å»ºä¸€ä¸ªæ ‡å‡†çš„è™šæ‹Ÿæœºï¼Œæ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>åœ¨ç¬¬äºŒæ­¥<strong>OS</strong>ä¸­ï¼Œé€‰æ‹©<code>Do not use any media</code>ã€‚</li>
<li>åœ¨ç¬¬4æ­¥<strong>Disks</strong>ä¸­ï¼Œåˆ é™¤æ‰€æœ‰ç¡¬ç›˜ã€‚</li>
<li>ç¬¬5æ­¥<strong>CPU</strong>ä¸­ï¼ŒTypeé€‰æ‹©<code>host</code>ã€‚</li>
<li>ç¬¬6æ­¥<strong>Memory</strong>ä¸­ï¼Œè‡³å°‘è®¾ç½®4GBå†…å­˜ã€‚</li>
</ol>
<h1 id="å®‰è£…å¼•å¯¼"><a href="#å®‰è£…å¼•å¯¼" class="headerlink" title="å®‰è£…å¼•å¯¼"></a>å®‰è£…å¼•å¯¼</h1><p>ç›®å‰é»‘ç¾¤æ™–ä¸»è¦æ˜¯ä½¿ç”¨RedPillé¡¹ç›®ç»„å¼€å‘çš„<a href="https://github.com/RedPill-TTG/redpill-load">RPL(RedPill Loader)</a>ï¼Œæ”¾åœ¨ä»¥å‰ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æ‰‹åŠ¨ç¼–è¯‘ï¼Œè¿˜å¾—è®¾ç½®æ­£ç¡®çš„VIDã€PIDã€MACç­‰ã€‚ä½†å¾—ç›Šäº<a href="https://github.com/fbelavenuto/arpl">ARPL(Automated Redpill Loader)</a>é¡¹ç›®ï¼Œç°åœ¨åªè¦åœ¨menuconfigä¸­ç®€å•è®¾ç½®å‡ ä¸ªé€‰é¡¹ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸“ç”¨çš„Loaderï¼Œå¹¶ä¸”èƒ½å¤Ÿå…¼å®¹æœ€æ–°çš„DSMç³»ç»Ÿã€‚</p>
<p>ARPLæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªä½¿ç”¨Ramfsçš„Linuxç³»ç»Ÿï¼Œå®ƒé‡Œé¢é…ç½®äº†ç¼–è¯‘RPLæ‰€éœ€çš„æœ€å°è½¯ä»¶é›†ã€‚å½“æˆ‘ä»¬å¯åŠ¨ARPLçš„é•œåƒåï¼Œå°±å¯ä»¥é€šè¿‡ç»ˆç«¯æˆ–è€…Webé…ç½®ç¼–è¯‘RPLï¼Œå¹¶ä¸”å®ƒä¼šè‡ªåŠ¨å°†RPLå†™å…¥åˆ†åŒºï¼Œå¹¶æ”¯æŒåç»­å¯åŠ¨å·¥ä½œã€‚</p>
<p>å› æ­¤ï¼Œå®‰è£…å¼•å¯¼ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li><p>ä¸‹è½½<a href="https://github.com/fbelavenuto/arpl/releases">ARPLé•œåƒ</a>å¹¶è§£å‹ï¼Œä¾‹å¦‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget https://github.com/fbelavenuto/arpl/releases/download/v1.1-beta2a/arpl-1.1-beta2a.img.zip</span><br><span class="line"></span><br><span class="line">unzip arpl-1.1-beta2a.img.zip</span><br></pre></td></tr></table></figure>
</li>
<li><p>å°†ARPLä»¥USBå­˜å‚¨è®¾å¤‡çš„æ–¹å¼æŒ‚è½½åˆ°è™šæ‹Ÿæœº</p>
<p>å‡è®¾ä½ çš„è™šæ‹Ÿæœºç¼–å·æ˜¯<code>200</code>ï¼Œåœ¨ç¬¬ä¸€è¡Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œæ³¨æ„<code>file=</code>åé¢éœ€è¦ä½¿ç”¨ARPLé•œåƒçš„ç»å¯¹è·¯å¾„ã€‚</p>
<div class="tabs" id="é…ç½®arplå¼•å¯¼æ–‡ä»¶"><ul class="nav-tabs"><li class="tab active"><a href="#é…ç½®arplå¼•å¯¼æ–‡ä»¶-1">ä½¿ç”¨é•œåƒæ–‡ä»¶</a></li><li class="tab"><a href="#é…ç½®arplå¼•å¯¼æ–‡ä»¶-2">ä½¿ç”¨LVMåˆ†åŒº</a></li></ul><div class="tab-content"><div class="tab-pane active" id="é…ç½®arplå¼•å¯¼æ–‡ä»¶-1"><p>å‡è®¾æˆ‘ä»¬å°†è§£å‹å‡ºçš„<code>arpl.img</code>æ”¾åœ¨<code>/root/arpl.img</code>ï¼Œé‚£ä¹ˆéœ€è¦åšå¦‚ä¸‹é…ç½®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mv arpl.img /root/</span><br><span class="line"></span><br><span class="line">vim /etc/pve/qemu-server/200.conf</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">args: -device &#x27;qemu-xhci,addr=0x18&#x27; -drive &#x27;id=synoboot,file=/root/arpl.img,if=none,format=raw&#x27; -device &#x27;usb-storage,id=synoboot,drive=synoboot,bootindex=1&#x27;</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="é…ç½®arplå¼•å¯¼æ–‡ä»¶-2"><p>å‡è®¾æˆ‘ä»¬è¦ä½¿ç”¨LVMåˆ†åŒºï¼Œé‚£ä¹ˆéœ€è¦åšå¦‚ä¸‹é…ç½®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºä¸€ä¸ªæ–°çš„LVMåˆ†åŒºï¼Œå‡è®¾ä½ çš„VGæ˜¯ssdï¼Œæ–°çš„åˆ†åŒºåä¸ºsynobootï¼Œæ–°åˆ†åŒºå¤§å°ä¸º1GiB</span></span><br><span class="line">lvcreate -L 1GB -n synoboot ssd</span><br><span class="line">dd if=./arpl.img of=/dev/ssd/synoboot</span><br><span class="line"></span><br><span class="line">vim /etc/pve/qemu-server/200.conf</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">args: -device &#x27;qemu-xhci,addr=0x18&#x27; -drive &#x27;id=synoboot,file=/dev/ssd/synoboot,if=none,format=raw&#x27; -device &#x27;usb-storage,id=synoboot,drive=synoboot,bootindex=1&#x27;</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt;</span></span><br></pre></td></tr></table></figure></div></div></div>
</li>
<li><p>å¯åŠ¨ARPLï¼Œé…ç½®ç›¸å…³é€‰é¡¹ï¼Œå¹¶å¯åŠ¨ç³»ç»Ÿ</p>
<div class="tabs" id="å®‰è£…arplæµç¨‹"><ul class="nav-tabs"><li class="tab active"><a href="#å®‰è£…arplæµç¨‹-1">1. å¯åŠ¨é…ç½®ç•Œé¢</a></li><li class="tab"><a href="#å®‰è£…arplæµç¨‹-2">2. é€‰æ‹©æœºå‹</a></li><li class="tab"><a href="#å®‰è£…arplæµç¨‹-3">3. é€‰æ‹©ç‰ˆæœ¬</a></li><li class="tab"><a href="#å®‰è£…arplæµç¨‹-4">4. ç¼–è¯‘</a></li><li class="tab"><a href="#å®‰è£…arplæµç¨‹-5">5. å¯åŠ¨</a></li></ul><div class="tab-content"><div class="tab-pane active" id="å®‰è£…arplæµç¨‹-1"><p>åœ¨ç»ˆç«¯è¾“å…¥<code>menu.sh</code>å¯åŠ¨é…ç½®ç•Œé¢ã€‚</p>
<img src="/2023/03/10/install-dsm-on-pve/first-screen.png" class=""></div><div class="tab-pane" id="å®‰è£…arplæµç¨‹-2"><p>è¿›å…¥<code>Choose a model</code>é€‰é¡¹ï¼Œé€‰æ‹©æ‰€éœ€æœºå‹ï¼Œé€šå¸¸é€‰æ‹©<code>DS918+</code>ã€‚</p>
<img src="/2023/03/10/install-dsm-on-pve/ttyd.png" class="">

<img src="/2023/03/10/install-dsm-on-pve/model.png" class=""></div><div class="tab-pane" id="å®‰è£…arplæµç¨‹-3"><p>ç›´æ¥é€‰æ‹©æœ€æ–°ç‰ˆå³å¯ã€‚</p>
<img src="/2023/03/10/install-dsm-on-pve/buildnumber.png" class=""></div><div class="tab-pane" id="å®‰è£…arplæµç¨‹-4"><p>é€‰æ‹©<code>Build</code>ï¼Œå¼€å§‹ç¼–è¯‘ARPLã€‚</p>
<img src="/2023/03/10/install-dsm-on-pve/making.png" class=""></div><div class="tab-pane" id="å®‰è£…arplæµç¨‹-5"><p>é€‰æ‹©<code>Boot</code>ï¼Œå¯åŠ¨å¼•å¯¼ç¨‹åºã€‚</p>
<img src="/2023/03/10/install-dsm-on-pve/DSMboot.png" class=""></div></div></div></li>
</ol>
<h1 id="å®‰è£…ç³»ç»Ÿ"><a href="#å®‰è£…ç³»ç»Ÿ" class="headerlink" title="å®‰è£…ç³»ç»Ÿ"></a>å®‰è£…ç³»ç»Ÿ</h1><p>è®°å½•ä¸‹ç»ˆç«¯ä¸Šæ˜¾ç¤ºçš„IPï¼Œå¦‚<a href="192.168.0.2">192.168.0.2</a>ï¼Œæ¥ç€åœ¨æµè§ˆå™¨ä¸­è¾“å…¥</p>
<p><a href="http://192.168.0.2:5000/">http://192.168.0.2:5000</a></p>
<p>å³å¯è¿›å…¥DSMçš„å®‰è£…ç•Œé¢ã€‚</p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://github.com/fbelavenuto/arpl/">ARPL Github</a></p>
<p><a href="https://help.onethingcloud.com/caa9/a0fe/nasxx">çº³æ€å°æ˜Ÿäº§å“ä»‹ç»ï¼ˆç½‘å¿ƒäº‘NASç‰ˆï¼‰</a></p>
<p><a href="https://docs.qq.com/doc/DQVJpbEVGZXV0anNa">NASè¿…é›·-ç¾¤æ™–å†…æµ‹ç‰ˆä¸‹è½½åœ°å€å’Œå®‰è£…æ•™ç¨‹</a></p>
]]></content>
      <categories>
        <category>Geek</category>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>pve</tag>
        <tag>synology</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨ç¾¤æ™–ä¸­æŒ‚è½½NFSæ–‡ä»¶ç³»ç»Ÿ</title>
    <url>/2024/01/21/mount-nfs-in-synology.html</url>
    <content><![CDATA[<blockquote>
<p>ç©ç½‘å¿ƒäº‘çš„æ—¶å€™ï¼Œåœ¨PVEä¸­å®‰è£…äº†ä¸€ä¸ªé»‘ç¾¤æ™–ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä½¿ç”¨å®ƒç®¡ç†ä»»ä½•æ•°æ®ï¼Œä¸€æ–¹é¢ç›—ç‰ˆçš„ä¸œè¥¿å¯èƒ½ä¸ç¨³å®šï¼Œå¦ä¸€æ–¹é¢ä¸æƒ³è¢«æŸä¸ªç”Ÿæ€æ†ç»‘ã€‚æœ€é‡è¦çš„ä¸€ç‚¹ï¼šæˆ‘å§‹ç»ˆéƒ½æ˜¯ä½¿ç”¨ZFSï¼Œè€Œç¾¤æ™–å¹¶ä¸æ”¯æŒZFSã€‚ç¢°å·§æœ€è¿‘ä½¿ç”¨sambaæœåŠ¡æ—¶é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œå› æ­¤æ‰“ç®—ç ”ç©¶ä¸€ä¸‹èƒ½å¦æŠŠè¿™ä¸ªé»‘ç¾¤æ™–åˆ©ç”¨èµ·æ¥ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h1><p>ç”±äºæˆ‘æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯å­˜å‚¨åœ¨PVEçš„ZFSä¸­ï¼Œå› æ­¤æˆ‘ä¸èƒ½æŠŠç¡¬ç›˜ç›´æ¥é€ä¼ ç»™ç¾¤æ™–ï¼Œè¦æƒ³è®©ç¾¤æ™–è®¿é—®æˆ‘ç°æœ‰çš„æ•°æ®ï¼Œä¸»è¦æœ‰3ä¸ªæ€è·¯ï¼š</p>
<ul>
<li><strong>VirtFS</strong>: è¿™æ˜¯ä¸€ç§åŸºäºvirtioçš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥å°†hostä¸­çš„ç›®å½•æ˜ å°„ä¸ºguestä¸­çš„å—è®¾å¤‡ï¼Œç”¨äºæŒ‚è½½ã€‚</li>
<li><strong>NFS</strong>: Linuxä¸Šçš„ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼Œé€šè¿‡ç½‘ç»œä¼ è¾“æ•°æ®ã€‚</li>
<li><strong>SMB</strong>: Windowsä¸Šç”¨äºç½‘ç»œå…±äº«çš„ä¼ è¾“åè®®ï¼Œé€šè¿‡ç½‘ç»œä¼ è¾“æ•°æ®ã€‚</li>
</ul>
<p>ç†è®ºä¸ŠVirtFSæ‹¥æœ‰æœ€å¥½çš„æ€§èƒ½ï¼Œä½†æ˜¯ç¾¤æ™–ä¸­å¹¶æ²¡æœ‰å®˜æ–¹æ”¯æŒï¼Œéœ€è¦åŠ è½½ç¬¬ä¸‰æ–¹é©±åŠ¨ï¼Œå¹¶ä¸”éœ€è¦åœ¨å‘½ä»¤è¡Œä¸­é…ç½®ï¼Œç¨³å®šæ€§æ˜¯ä¸ªæœªçŸ¥æ•°ã€‚</p>
<p>SMBåœ¨Linuxä¸Šè™½ç„¶å·²ç»æœ‰å¾ˆå¥½çš„æ”¯æŒï¼Œä½†é…ç½®ç›¸å¯¹ç¹çï¼Œå°¤å…¶æ˜¯é‚£å¥—ç‹¬ç«‹çš„ç”¨æˆ·ç®¡ç†ã€‚</p>
<p>è€ŒNFSç›¸å¯¹æ¥è¯´é…ç½®è¾ƒä¸ºç®€å•ï¼Œåœ¨ç¾¤æ™–ç³»ç»Ÿä¸­ä¹Ÿæœ‰è‰¯å¥½çš„æ”¯æŒï¼Œå› æ­¤æˆ‘æœ€ç»ˆé€‰æ‹©å®ƒä½œä¸ºç¾¤æ™–å’ŒPVEä¹‹é—´çš„æ¡¥æ¢ã€‚</p>
<h1 id="NFSæœåŠ¡ç«¯é…ç½®"><a href="#NFSæœåŠ¡ç«¯é…ç½®" class="headerlink" title="NFSæœåŠ¡ç«¯é…ç½®"></a>NFSæœåŠ¡ç«¯é…ç½®</h1><p>NFSæœåŠ¡ç«¯ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªé€‰é¡¹ï¼š</p>
<ul>
<li><strong>rw</strong>: å…è®¸è¯»å†™æ“ä½œï¼Œå¦åˆ™æ–‡ä»¶ç³»ç»Ÿå°†å˜ä¸ºåªè¯»ã€‚</li>
<li><strong>async</strong>: åœ¨å†™å…¥å®Œæˆä¹‹å‰å°±è¿”å›ï¼Œå¯ä»¥æé«˜æ€§èƒ½ï¼Œä½†æ˜¯å¯èƒ½å¯¼è‡´æ–‡ä»¶æŸåã€‚</li>
<li><strong>sync</strong>: åœ¨å†™å…¥å®Œæˆä¹‹åæ‰è¿”å›ï¼Œå¯ä»¥ä¿éšœå†™å…¥æŒ‰é¡ºåºæ‰§è¡Œï¼Œä½†ä¼šé™ä½æ€§èƒ½ã€‚</li>
<li><strong>no_subtree_check</strong>: åªæ£€æŸ¥è¢«è®¿é—®æ–‡ä»¶çš„æƒé™ï¼Œå¿½ç•¥å­æ–‡ä»¶çš„æƒé™æ£€æŸ¥ã€‚</li>
<li><strong>root_squash</strong>: å°†clientçš„rootç”¨æˆ·å’Œrootç»„æ˜ å°„ä¸ºserverçš„åŒ¿åç”¨æˆ·å’ŒåŒ¿åç»„ï¼Œä»è€Œé™åˆ¶clientçš„æ–‡ä»¶è®¿é—®æƒé™ã€‚</li>
<li><strong>no_root_squash</strong>: clientçš„rootç”¨æˆ·å’Œrootç»„å°†æ˜ å°„ä¸ºserverçš„rootç”¨æˆ·å’Œrootç»„ã€‚</li>
<li><strong>all_squash</strong>: å°†clientæ‰€æœ‰çš„ç”¨æˆ·å’Œç»„éƒ½æ˜ å°„ä¸ºserverçš„åŒ¿åæ˜ å°„å’ŒåŒ¿åç»„ã€‚è¿™æ ·clientä¸Šä¸åŒç”¨æˆ·çš„è®¿é—®å¯ä»¥è¢«æ˜ å°„ä¸ºåŒä¸€ä¸ªç”¨æˆ·ã€‚</li>
<li><strong>anonuid&#x2F;anongid</strong>: è®¾ç½®åŒ¿åç”¨æˆ·æ‰€å¯¹åº”çš„uidå’Œgidã€‚éœ€è¦ä¸<strong>root_squash</strong>æˆ–<strong>all_squash</strong>ç»„åˆä½¿ç”¨ã€‚</li>
</ul>
<p>ä¸ºäº†ä¸ç ´åZFSä¸­åŸæœ‰çš„æ–‡ä»¶ownerä¿¡æ¯ï¼Œæˆ‘éœ€è¦ä½¿ç”¨<strong>all_squash</strong>é…åˆ<strong>anonuid&#x2F;anongid</strong>ï¼Œå°†ç¾¤æ™–ä¸­çš„ç”¨æˆ·æ˜ å°„ä¸ºPVEä¸­çš„www-dataç”¨æˆ·ã€‚å› æ­¤é…ç½®ä¸º</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># /etc/exports</span></span><br><span class="line">/mnt  *(rw,<span class="built_in">sync</span>,all_squash,anonuid=33,anongid=33)</span><br></pre></td></tr></table></figure>

<h1 id="ç¾¤æ™–é…ç½®"><a href="#ç¾¤æ™–é…ç½®" class="headerlink" title="ç¾¤æ™–é…ç½®"></a>ç¾¤æ™–é…ç½®</h1><h2 id="åˆ›å»ºä¸€ä¸ªæ–°çš„å…±äº«æ–‡ä»¶å¤¹"><a href="#åˆ›å»ºä¸€ä¸ªæ–°çš„å…±äº«æ–‡ä»¶å¤¹" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ–°çš„å…±äº«æ–‡ä»¶å¤¹"></a>åˆ›å»ºä¸€ä¸ªæ–°çš„å…±äº«æ–‡ä»¶å¤¹</h2><p>ç”±äºæˆ‘ä»¬å°†è¦æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿä¸ä¸€å®šå…¼å®¹ç¾¤æ™–å†…ç½®çš„æƒé™æ¨¡å‹ï¼Œå› æ­¤éœ€è¦åœ¨ç¾¤æ™–ä¸­åˆ›å»ºä¸€ä¸ªåŸç”Ÿçš„ç›®å½•ï¼Œä½œä¸ºåŒ…å«æŒ‚è½½ç‚¹å®¹å™¨ï¼Œåç»­æ‰€æœ‰çš„æ“ä½œå’Œå…±äº«éƒ½åŸºäºæ­¤ç›®å½•ã€‚</p>
<p><strong>æ§åˆ¶é¢æ¿-&gt;å…±äº«æ–‡ä»¶å¤¹-&gt;æ–°å¢-&gt;åˆ›å»ºå…±äº«æ–‡ä»¶å¤¹</strong></p>
<img src="/2024/01/21/mount-nfs-in-synology/create_shared_folder.jpg" class="">

<h2 id="æŒ‚è½½NFS"><a href="#æŒ‚è½½NFS" class="headerlink" title="æŒ‚è½½NFS"></a>æŒ‚è½½NFS</h2><p><strong>File Station-&gt;å·¥å…·-&gt;è£…è½½è¿œç¨‹æ–‡ä»¶å¤¹-&gt;NFSå…±äº«æ–‡ä»¶å¤¹</strong></p>
<img src="/2024/01/21/mount-nfs-in-synology/mount_nfs_1.jpg" class="">
<img src="/2024/01/21/mount-nfs-in-synology/mount_nfs_2.jpg" class="">

<h2 id="è®¾ç½®Appæƒé™"><a href="#è®¾ç½®Appæƒé™" class="headerlink" title="è®¾ç½®Appæƒé™"></a>è®¾ç½®Appæƒé™</h2><p>åœ¨ç¾¤æ™–ä¸­ï¼Œéœ€è¦ä¸ºAppé…ç½®ç›®å½•çš„æƒé™åï¼ŒAppæ‰èƒ½è®¿é—®ã€‚è¿™é‡Œä»¥Syncthingä¸ºä¾‹ã€‚</p>
<p><strong>File Station-&gt;å³é”®å…±äº«ç›®å½•-&gt;å±æ€§-&gt;æƒé™-&gt;æ–°å¢</strong></p>
<p>å°†Appæ‰€å¯¹åº”çš„ç”¨æˆ·æ·»åŠ è¿›å»ï¼Œå¹¶æˆäºˆè¯»å†™æƒé™ã€‚</p>
<img src="/2024/01/21/mount-nfs-in-synology/app_permission.jpg" class="">

<h1 id="æ€§èƒ½æµ‹è¯•"><a href="#æ€§èƒ½æµ‹è¯•" class="headerlink" title="æ€§èƒ½æµ‹è¯•"></a>æ€§èƒ½æµ‹è¯•</h1><p>ç”±äºNFSçš„æ€§èƒ½ä¸»è¦å—é™äºç½‘ç»œæ€§èƒ½ï¼Œå› æ­¤è¿™é‡Œä¸»è¦æµ‹è¯•PVEå’Œç¾¤æ™–é—´çš„ç½‘ç»œååï¼Œæµ‹è¯•å·¥å…·ä¸ºiperf3ï¼Œç½‘å¡é©±åŠ¨ä¸ºvirtioã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server: iperf3 -s</span><br><span class="line">client: iperf3 -c &lt;SERVER_IP&gt;</span><br></pre></td></tr></table></figure>

<p>ä»ç»“æœä¸Šæ¥çœ‹ï¼ŒTCPååæ¥è¿‘20 Gbits&#x2F;secï¼Œå·²ç»è¿œè¿œè¶…è¿‡å¤§å¤šæ•°ç¡¬ç›˜çš„è¯»å†™æ€§èƒ½ã€‚</p>
<img src="/2024/01/21/mount-nfs-in-synology/iperf_test.jpg" class="">

<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åˆ©ç”¨è¿™å¥—æ–¹æ¡ˆï¼Œæˆ‘æ—¢å¯ä»¥äº«å—ç¾¤æ™–å¥—ä»¶æ‰€å¸¦æ¥çš„ä¾¿åˆ©ï¼Œä¹Ÿå¯ä»¥å°†æ•°æ®ç®¡ç†æƒæŒæ¡åœ¨è‡ªå·±æ‰‹ä¸­ï¼Œæ— éœ€æ‹…å¿ƒé»‘ç¾¤æ™–ç³»ç»Ÿå´©æºƒåå¯¼è‡´çš„æ•°æ®ä¸¢å¤±é—®é¢˜ã€‚</p>
]]></content>
      <categories>
        <category>Geek</category>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>pve</tag>
        <tag>synology</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨systemdè¿è¡ŒhexoæœåŠ¡</title>
    <url>/2024/01/29/run-hexo-server-as-systemd-service.html</url>
    <content><![CDATA[<blockquote>
<p>é€šå¸¸hexoè¢«ç”¨äºåˆ›å»ºé™æ€ç«™ç‚¹ï¼Œç„¶åéƒ¨ç½²åœ¨GitHubç­‰æ”¯æŒé™æ€ç½‘ç«™æ‰˜ç®¡çš„å¹³å°ã€‚ä½†hexoæœ¬èº«ä¹Ÿæ”¯æŒå¯åŠ¨ä¸€ä¸ªç®€å•çš„http serverï¼Œç”¨äºåœ¨æµè§ˆå™¨ä¸­å®æ—¶æ˜¾ç¤ºç¼–è¾‘çš„å†…å®¹ã€‚å¦‚æœæˆ‘ä»¬èƒ½è®©è¿™ä¸ªæœåŠ¡è¿è¡Œåœ¨åå°ï¼Œä¸€æ–¹é¢æ— éœ€æ¯æ¬¡æ‰‹åŠ¨æ‹‰èµ·ï¼Œå¦ä¸€æ–¹é¢å¯ä»¥å½“ä½œä¸€ä¸ªå°ç«™ç‚¹ä½¿ç”¨ï¼Œå¹¶ä¸”æ”¯æŒå®æ—¶æ›´æ–°ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="å®‰è£…Node-js"><a href="#å®‰è£…Node-js" class="headerlink" title="å®‰è£…Node.js"></a>å®‰è£…Node.js</h1><p>å¦‚æœè¦è®©Node.jsåº”ç”¨åœ¨å¼€æœºåä»¥rootç”¨æˆ·å¯åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦æŠŠNode.jså®‰è£…åˆ°æ ¹ç›®å½•ï¼Œè€Œä¸æ˜¯å®¶ç›®å½•ã€‚è¿™é‡Œä»¥Debianä¸ºä¾‹ï¼Œå…¶å®ƒç³»ç»Ÿå‚å¯ä»¥å‚è€ƒ<a href="https://nodejs.org/en/download/package-manager#debian-and-ubuntu-based-linux-distributions">Installing Node.js via package manager</a>ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -fsSL https://deb.nodesource.com/setup_current.x | sudo bash -</span><br><span class="line">sudo apt install -y nodejs</span><br></pre></td></tr></table></figure>

<h1 id="å®‰è£…hexo"><a href="#å®‰è£…hexo" class="headerlink" title="å®‰è£…hexo"></a>å®‰è£…hexo</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<h1 id="åˆ›å»ºsystemdæœåŠ¡"><a href="#åˆ›å»ºsystemdæœåŠ¡" class="headerlink" title="åˆ›å»ºsystemdæœåŠ¡"></a>åˆ›å»ºsystemdæœåŠ¡</h1><p>åˆ›å»º<code>/lib/systemd/system/hexo.service</code>æ–‡ä»¶ï¼Œå°†<code>/home/[yourdirectory]/blog</code>æ›¿æ¢æˆhexoçš„æ ¹ç›®å½•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[Service]</span><br><span class="line">WorkingDirectory=/home/[yourdirectory]/blog</span><br><span class="line">ExecStart=/bin/hexo server -p80</span><br><span class="line">Restart=always</span><br><span class="line">StandardOutput=syslog</span><br><span class="line">StandardError=syslog</span><br><span class="line">SyslogIdentifier=hexo</span><br><span class="line">User=root</span><br><span class="line">Group=root</span><br><span class="line">Environment=NODE_ENV=production</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<h1 id="å¯åŠ¨hexoæœåŠ¡"><a href="#å¯åŠ¨hexoæœåŠ¡" class="headerlink" title="å¯åŠ¨hexoæœåŠ¡"></a>å¯åŠ¨hexoæœåŠ¡</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> hexo.service</span><br><span class="line">sudo systemctl start hexo.service</span><br><span class="line">sudo systemctl status hexo.service</span><br></pre></td></tr></table></figure>

<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://chrisbergeron.com/2017/10/07/hexo_systemd_unit_file/">A systemD unit file for Hexo</a></p>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>hexo</tag>
        <tag>systemd</tag>
      </tags>
  </entry>
  <entry>
    <title>æ„å»ºEDK2é•œåƒå¹¶åœ¨QEMUå¯åŠ¨</title>
    <url>/2023/08/29/build-and-boot-edk2-in-qemu.html</url>
    <content><![CDATA[<blockquote>
<p>ä»ä»Šå¤©èµ·ï¼Œæˆ‘å°†æ¶‰è¶³ä¸€ä¸ªæ–°çš„é¢†åŸŸï¼šUEFIã€‚ç›®å‰UEFIå·²ç»é€æ¸ä»ä»¥X86ä¸ºä¸»çš„æœåŠ¡å™¨PCé¢†åŸŸï¼Œæ¸—é€åˆ°ä»¥ARMä¸ºä¸»çš„ç»ˆç«¯é¢†åŸŸã€‚å¾—ç›Šäºå…¶çµæ´»çš„æ‰©å±•æ€§ä»¥åŠè¾ƒä½çš„å¼€å‘é—¨æ§›ï¼Œä»¥åè¶Šæ¥è¶Šå¤šçš„è®¾å¤‡å°†ä½¿ç”¨å®ƒä½œä¸ºè‡ªèº«å¯åŠ¨é“¾çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ã€‚ç”±äºUEFIåªæ˜¯ä¸€å¥—æ ‡å‡†ï¼Œå‚ç…§è¯¥æ ‡å‡†æœ‰è®¸å¤šå®ç°ï¼Œå…¶ä¸­æœ€æœ‰åä¹‹ä¸€å°±æ˜¯Intelä¸»å¯¼å¼€å‘çš„EDK2ã€‚å› æ­¤æˆ‘çš„å­¦ä¹ ä¹‹æ—…ä¹Ÿä¼šä»å®ƒå¼€å§‹ï¼Œä»Šå¤©ä¸»è¦ä»‹ç»å¦‚ä½•æ„å»ºEDK2ä»¥åŠåœ¨QEMUä¸Šå¯åŠ¨å®ƒã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h1><p>æˆ‘ä»¬å°†ä»¥Debian12ä½œä¸ºä¾‹å­ï¼Œå…¶ä»–Linuxå‘è¡Œç‰ˆè¯·è‡ªè¡Œä¿®æ”¹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install build-essential git python3 uuid-dev nasm acpica-tools cscope clangd</span><br></pre></td></tr></table></figure>

<h1 id="ä¸‹è½½æºç "><a href="#ä¸‹è½½æºç " class="headerlink" title="ä¸‹è½½æºç "></a>ä¸‹è½½æºç </h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/tianocore/edk2.git</span><br><span class="line"><span class="built_in">cd</span> edk2</span><br><span class="line">git submodule update --init</span><br></pre></td></tr></table></figure>

<h1 id="æ„å»ºEDK2"><a href="#æ„å»ºEDK2" class="headerlink" title="æ„å»ºEDK2"></a>æ„å»ºEDK2</h1><p>EDK2æ”¯æŒå¤šç§å¹³å°å’Œå·¥å…·é“¾ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦ä»‹ç»QEMUå¹³å°ä¸ŠAARCH64å’ŒX86ä¸¤ä¸ªæ¶æ„ï¼Œå¹¶ä¸”ä½¿ç”¨CLANGå’ŒGCCä¸¤ç§å·¥å…·é“¾è¿›è¡Œç¼–è¯‘ã€‚</p>
<h2 id="æ„å»ºEDK2å·¥å…·é›†"><a href="#æ„å»ºEDK2å·¥å…·é›†" class="headerlink" title="æ„å»ºEDK2å·¥å…·é›†"></a>æ„å»ºEDK2å·¥å…·é›†</h2><p>EDK2æºç ä¸­åŒ…å«äº†ä¸€ç³»åˆ—å·¥å…·ï¼Œç”¨äºåœ¨æ„å»ºè¿‡ç¨‹ä¸­è¿›è¡Œé“¾æ¥æ‰“åŒ…ç­‰å·¥ä½œï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å…ˆå°†è¿™äº›å·¥å…·æ„å»ºå‡ºæ¥ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> EDK_TOOLS_PATH=<span class="variable">$PWD</span>/BaseTools</span><br><span class="line"><span class="built_in">source</span> edksetup.sh</span><br><span class="line">make -C BaseTools</span><br></pre></td></tr></table></figure>

<h2 id="X86æ¶æ„"><a href="#X86æ¶æ„" class="headerlink" title="X86æ¶æ„"></a>X86æ¶æ„</h2><p>X86æ¶æ„çš„QEMUå›ºä»¶æ‰€å¯¹åº”çš„Packageæ˜¯<code>OvmfPkg/OvmfPkgX64.dsc</code>ã€‚</p>
<ol>
<li><p><strong>ä½¿ç”¨GCCå·¥å…·é“¾</strong></p>
<p> æ ¹æ®éœ€è¦å®‰è£…GCCå·¥å…·é“¾ï¼Œæ¯”å¦‚æˆ‘ä»¬ç°åœ¨éœ€è¦å®‰è£…X86ç‰ˆæœ¬çš„GCCï¼Œå¹¶è®¾ç½®prefixï¼š</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install gcc</span><br><span class="line"><span class="built_in">export</span> GCC5_AARCH64_PREFIX=</span><br></pre></td></tr></table></figure>

<p> æ„å»ºEDK2</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> edksetup.sh</span><br><span class="line">build -a X64 -t GCC5 -p OvmfPkg/OvmfPkgX64.dsc -Y COMPILE_INFO -y BuildReport.<span class="built_in">log</span></span><br></pre></td></tr></table></figure>

<p> ç¼–è¯‘å‡ºçš„å›ºä»¶åœ¨<code>Build/OvmfX64/DEBUG_GCC5</code>ã€‚</p>
</li>
<li><p><strong>ä½¿ç”¨CLANGå·¥å…·é“¾</strong></p>
<p> ç”±äºclangåŸç”Ÿæ”¯æŒäº¤å‰ç¼–è¯‘ï¼Œå› æ­¤å¯ä»¥ç›´æ¥å®‰è£…ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install clang</span><br></pre></td></tr></table></figure>

<p> æ„å»ºEDK2</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> edksetup.sh</span><br><span class="line">build -a X64 -t CLANGDWARF -p OvmfPkg/OvmfPkgX64.dsc -Y COMPILE_INFO -y BuildReport.<span class="built_in">log</span></span><br></pre></td></tr></table></figure>

<p> ç¼–è¯‘å‡ºçš„å›ºä»¶åœ¨<code>Build/OvmfX64/DEBUG_CLANGDWARF</code>ã€‚</p>
</li>
</ol>
<h2 id="AARCH64æ¶æ„"><a href="#AARCH64æ¶æ„" class="headerlink" title="AARCH64æ¶æ„"></a>AARCH64æ¶æ„</h2><p>AARCH64æ¶æ„çš„QEMUå›ºä»¶æ‰€å¯¹åº”çš„Packageæ˜¯<code>ArmVirtPkg/ArmVirtQemu.dsc</code>ã€‚</p>
<ol>
<li><p><strong>ä½¿ç”¨GCCå·¥å…·é“¾</strong></p>
<p> æ ¹æ®éœ€è¦å®‰è£…GCCå·¥å…·é“¾ï¼Œæ¯”å¦‚æˆ‘ä»¬ç°åœ¨éœ€è¦å®‰è£…AARCH64ç‰ˆæœ¬çš„GCCï¼Œå¹¶è®¾ç½®prefixï¼š</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install gcc-aarch64-linux-gnu</span><br><span class="line"><span class="built_in">export</span> GCC5_AARCH64_PREFIX=aarch64-linux-gnu-</span><br></pre></td></tr></table></figure>

<p> æ„å»ºEDK2</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> edksetup.sh</span><br><span class="line">build -a AARCH64 -t GCC5 -p ArmVirtPkg/ArmVirtQemu.dsc -Y COMPILE_INFO -y BuildReport.<span class="built_in">log</span></span><br></pre></td></tr></table></figure>

<p> ç¼–è¯‘å‡ºçš„å›ºä»¶åœ¨<code>Build/ArmVirtQemu-AARCH64/DEBUG_GCC5</code>ã€‚</p>
</li>
<li><p><strong>ä½¿ç”¨CLANGå·¥å…·é“¾</strong></p>
<p> ç”±äºclangåŸç”Ÿæ”¯æŒäº¤å‰ç¼–è¯‘ï¼Œå› æ­¤å¯ä»¥ç›´æ¥å®‰è£…ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install clang llvm lld</span><br></pre></td></tr></table></figure>

<p> æ„å»ºEDK2</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> edksetup.sh</span><br><span class="line">build -a AARCH64 -t CLANGDWARF -p ArmVirtPkg/ArmVirtQemu.dsc -Y COMPILE_INFO -y BuildReport.<span class="built_in">log</span></span><br></pre></td></tr></table></figure>

<p> ç¼–è¯‘å‡ºçš„å›ºä»¶åœ¨<code>Build/ArmVirtQemu-AARCH64/DEBUG_CLANGDWARF</code>ã€‚</p>
</li>
</ol>
<h1 id="åœ¨QEMUä¸­å¯åŠ¨"><a href="#åœ¨QEMUä¸­å¯åŠ¨" class="headerlink" title="åœ¨QEMUä¸­å¯åŠ¨"></a>åœ¨QEMUä¸­å¯åŠ¨</h1><p>å¯åŠ¨æ‰€éœ€çš„å›ºä»¶<code>OVMF_CODE.fd</code>å’Œ<code>OVMF_VARS.fd</code>åœ¨<code>&lt;å›ºä»¶ç›®å½•&gt;/FVä¸­</code>ï¼Œè¿™é‡Œä»¥<code>Build/OvmfX64/DEBUG_GCC5/FV</code>å’Œ<code>Build/ArmVirtQemu-AARCH64/DEBUG_GCC5/FV</code>ä¸ºä¾‹ã€‚</p>
<h2 id="X86æ¶æ„-1"><a href="#X86æ¶æ„-1" class="headerlink" title="X86æ¶æ„"></a>X86æ¶æ„</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> Build/OvmfX64/DEBUG_GCC5/FV</span><br><span class="line"></span><br><span class="line">qemu-system-x86_64 -machine q35 -cpu qemu64 \</span><br><span class="line">  -drive <span class="keyword">if</span>=pflash,format=raw,unit=0,file=OVMF_CODE.fd,<span class="built_in">readonly</span>=on \</span><br><span class="line">  -drive <span class="keyword">if</span>=pflash,format=raw,unit=1,file=OVMF_VARS.fd \</span><br><span class="line">  -net none \</span><br><span class="line">  -nographic</span><br></pre></td></tr></table></figure>

<h2 id="AARCH64æ¶æ„-1"><a href="#AARCH64æ¶æ„-1" class="headerlink" title="AARCH64æ¶æ„"></a>AARCH64æ¶æ„</h2><p>AARCH64è¦æ±‚pflashçš„å¤§å°ä¸º64Mï¼Œå› æ­¤æˆ‘ä»¬é¦–å…ˆéœ€è¦è°ƒæ•´å›ºä»¶å¤§å°åˆ°64Mï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> Build/ArmVirtQemu-AARCH64/DEBUG_GCC5/FV</span><br><span class="line"></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=QEMU_EFI_64.fd bs=1M count=64</span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=QEMU_VARS_64.fd bs=1M count=64</span><br><span class="line"></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=QEMU_EFI.fd of=QEMU_EFI_64.fd conv=notrunc</span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=QEMU_VARS.fd of=QEMU_VARS_64.fd conv=notrunc</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">qemu-system-aarch64 -machine virt -cpu cortex-a57 \</span><br><span class="line">  -drive <span class="keyword">if</span>=pflash,format=raw,unit=0,file=QEMU_EFI_64.fd,<span class="built_in">readonly</span>=on \</span><br><span class="line">  -drive <span class="keyword">if</span>=pflash,format=raw,unit=1,file=QEMU_VARS_64.fd \</span><br><span class="line">  -net none \</span><br><span class="line">  -nographic</span><br></pre></td></tr></table></figure>

<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul>
<li><p><a href="https://www.kraxel.org/blog/2022/05/edk2-virt-quickstart/">edk2 quickstart for virtualization</a></p>
</li>
<li><p><a href="https://wiki.osdev.org/EDK2">https://wiki.osdev.org/EDK2</a></p>
</li>
<li><p><a href="https://wiki.osdev.org/UEFI">https://wiki.osdev.org/UEFI</a></p>
</li>
<li><p><a href="https://github.com/tianocore/tianocore.github.io/wiki/How-to-run-OVMF">How to run OVMF</a></p>
</li>
<li><p><a href="https://lists.katacontainers.io/pipermail/kata-dev/2021-January/001647.html">Booting OVMF with -bios</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>Bootloader</category>
      </categories>
      <tags>
        <tag>UEFI</tag>
        <tag>EDK2</tag>
      </tags>
  </entry>
  <entry>
    <title>iTop-4412é…ç½®å†…æ ¸å¼€å‘ç¯å¢ƒ</title>
    <url>/2024/08/15/itop-4412-setup-kernel-dev-env.html</url>
    <content><![CDATA[<blockquote>
<p>è™½ç„¶ç†è®ºä¸Šå¼€å‘æ¿æ‹¿è¿‡æ¥å°±å¯ä»¥ä½¿ç”¨ï¼Œä½†å¦‚æœæ­£ç¡®é…ç½®ç¯å¢ƒï¼Œå¯ä»¥å¤§å¤§æé«˜å¼€å‘æ•ˆç‡ï¼Œäº‹åŠåŠŸå€ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="æ­å»ºå†…æ ¸ç¼–è¯‘ç¯å¢ƒ"><a href="#æ­å»ºå†…æ ¸ç¼–è¯‘ç¯å¢ƒ" class="headerlink" title="æ­å»ºå†…æ ¸ç¼–è¯‘ç¯å¢ƒ"></a>æ­å»ºå†…æ ¸ç¼–è¯‘ç¯å¢ƒ</h1><ol>
<li><p>ä½¿èƒ½32ä½ç¨‹åºæ”¯æŒ</p>
<p> å› ä¸ºäº¤å‰ç¼–è¯‘å™¨ä¸º32ä½ç¨‹åºï¼Œå› æ­¤éœ€è¦å®‰è£…32ä½åŠ¨æ€åº“ã€‚</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo dpkg --add-architecture i386</span><br><span class="line">sudo apt install lib32z1 lib32ncurses6 lib32stdc++6</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£…äº¤å‰ç¼–è¯‘å™¨</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Download prebuilt toolchain</span></span><br><span class="line">wget https://github.com/colorfulshark/arm-2009q3/archive/refs/heads/master.zip</span><br><span class="line">unzip master.zip</span><br><span class="line"><span class="built_in">mv</span> arm-2009q3-master arm-2009q3</span><br><span class="line"></span><br><span class="line"><span class="comment"># install to target directory</span></span><br><span class="line">sudo <span class="built_in">mkdir</span> /usr/local/arm</span><br><span class="line">sudo <span class="built_in">mv</span> arm-2009q3 /usr/local/arm/</span><br></pre></td></tr></table></figure></li>
<li><p>å…‹éš†å†…æ ¸æºç </p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/colorfulshark/iTop4412_Kernel_3.0.git</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–è¯‘å†…æ ¸</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># setup default config</span></span><br><span class="line"><span class="built_in">cp</span> config_for_linux_9.7 .config</span><br><span class="line">make</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ·å†™å†…æ ¸</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># execute in uboot</span></span><br><span class="line">fastboot</span><br><span class="line"></span><br><span class="line"><span class="comment"># execute in host</span></span><br><span class="line">sudo fastboot flash kernel <span class="built_in">arch</span>/arm/boot/zImage</span><br><span class="line">sudo fastboot reboot</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="æ­å»ºæ–‡ä»¶ç³»ç»Ÿç¼–è¯‘ç¯å¢ƒ"><a href="#æ­å»ºæ–‡ä»¶ç³»ç»Ÿç¼–è¯‘ç¯å¢ƒ" class="headerlink" title="æ­å»ºæ–‡ä»¶ç³»ç»Ÿç¼–è¯‘ç¯å¢ƒ"></a>æ­å»ºæ–‡ä»¶ç³»ç»Ÿç¼–è¯‘ç¯å¢ƒ</h1><p>è¿™é‡Œä½¿ç”¨Buildrootæ„å»ºæ–‡ä»¶ç³»ç»Ÿï¼Œå› ä¸ºå…¶å¯¹è€å†…æ ¸çš„æ”¯æŒè¾ƒå¥½ã€‚</p>
<ol>
<li><p>å…‹éš†ä»£ç </p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://gitlab.com/buildroot.org/buildroot.git</span><br><span class="line"><span class="built_in">cd</span> buildroot</span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®Buildroot</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make menuconfig</span><br><span class="line"></span><br><span class="line">Target options:</span><br><span class="line">    Target Architecture: ARM (little endian)</span><br><span class="line">    Target Architecture Variant: cortex-A9</span><br><span class="line"></span><br><span class="line">Toolchain:</span><br><span class="line">    C library: musl</span><br><span class="line">    Kernel Headers: Manually specified Linux version</span><br><span class="line">    linux version: 3.0.15</span><br><span class="line">    Custom kernel headers series: 3.0.x</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ„å»ºBuildroot</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure>
</li>
<li><p>è§£å‹rootfs</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo tar -xf output/images/rootfs.tar -C /rootfs</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="è®¾ç½®NFS-Bootç½‘ç»œå¯åŠ¨"><a href="#è®¾ç½®NFS-Bootç½‘ç»œå¯åŠ¨" class="headerlink" title="è®¾ç½®NFS Bootç½‘ç»œå¯åŠ¨"></a>è®¾ç½®NFS Bootç½‘ç»œå¯åŠ¨</h1><p>ä½¿ç”¨NFSæŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿå¯ä»¥å‡å°‘æ–‡ä»¶ä¼ è¾“æ“ä½œï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œè¿™é‡Œä½¿ç”¨Buildrootä½œä¸ºæ ¹æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<ol>
<li><p>é…ç½®NFSæœåŠ¡å™¨</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install nfs-kernel-server</span><br><span class="line"></span><br><span class="line">sudo vim /etc/exports</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">/rootfs *(rw,<span class="built_in">sync</span>,no_root_squash)</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line"></span><br><span class="line"><span class="string">sudo systemctl restart nfs-kernel-server</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®å†…æ ¸é€‰é¡¹</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Networking support:</span><br><span class="line">    Networking options:</span><br><span class="line">        IP: kernel level autoconfiguration:</span><br><span class="line">            IP: DHCP support: Y</span><br><span class="line">            IP: BOOTP support: Y</span><br><span class="line">            IP: RARP support: Y</span><br><span class="line"></span><br><span class="line">File systems:</span><br><span class="line">    Network File Systems:</span><br><span class="line">        NFS client support:</span><br><span class="line">            NFS client support <span class="keyword">for</span> NFS version 3: Y</span><br><span class="line">        Root file system on NFS: Y</span><br><span class="line"></span><br><span class="line">Boot options:</span><br><span class="line">    Default kernel <span class="built_in">command</span> string: <span class="string">&quot;root=/dev/nfs nfsroot=192.168.0.1:/rootfs,proto=tcp,vers=3 rw ip=192.168.0.2:192.168.0.1:192.168.0.1:255.255.255.0:itop4412:eth0:off init=/linuxrc console=ttySAC2,115200 lcd=9.7&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>è°ƒè¯•NFSå¯åŠ¨é—®é¢˜</p>
<p> å¦‚æœå†…æ ¸æ— æ³•æŒ‚è½½NFSæ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å†…æ ¸cmdlineè¿›è¡Œè°ƒè¯•</p>
<ul>
<li>nfsrootdebug: å¯ç”¨NFS Rootè°ƒè¯•æ—¥å¿—</li>
<li>rootdelay&#x3D;N: ç­‰å¾…Nç§’åå†æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿ</li>
<li>rootwait: ç­‰å¾…rootå‡ºç°åå†æŒ‚è½½</li>
</ul>
</li>
</ol>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://blog.csdn.net/ComputerInBook/article/details/107575590">https://blog.csdn.net/ComputerInBook/article/details/107575590</a></p>
<p><a href="https://blog.colorfulshark.net/2020/08/23/setup-linux-2-6-system-from-scratch.html">https://blog.colorfulshark.net/2020/08/23/setup-linux-2-6-system-from-scratch.html</a></p>
]]></content>
      <categories>
        <category>Embedded</category>
      </categories>
  </entry>
  <entry>
    <title>ä½¿ç”¨VSCodeè¿›è¡Œå†…æ ¸å¼€å‘</title>
    <url>/2024/12/22/kernel-development-with-vscode.html</url>
    <content><![CDATA[<blockquote>
<p>Linuxå†…æ ¸å¹¶æ²¡æœ‰ä»»ä½•å®˜æ–¹IDEï¼Œæ‰€ä»¥å¤§å®¶éƒ½æ˜¯å„æ˜¾ç¥é€šï¼Œæ¯”è¾ƒå¸¸è§çš„å°±æ˜¯ä½¿ç”¨Vim&#x2F;Emacsç»“åˆå„ç§æ’ä»¶ï¼Œä½†è¿™ç§æ–¹å¼æ™®éå­˜åœ¨é…ç½®å¤æ‚å’Œä¸Šæ‰‹éš¾åº¦é«˜çš„é—®é¢˜ï¼Œæˆ‘ä¸ªäººæ˜¯ä¸æ„¿æ„æµªè´¹å¤ªå¤šæ—¶é—´åœ¨IDEä¸Šçš„ã€‚ç¢°å·§æœ‰ä¸€æ¬¾IDEï¼ŒåŒæ ·æ”¯æŒå¤§é‡æ’ä»¶ï¼Œå¹¶ä¸”ç¤¾åŒºæ´»è·ƒï¼Œå®ƒå°±æ˜¯VSCodeï¼Œæ‰€ä»¥ä»Šå¤©å°±æ¥çœ‹çœ‹å¦‚ä½•é€šè¿‡å„ç§æ’ä»¶å°†å®ƒæ‰“é€ ä¸ºé«˜æ•ˆçš„å†…æ ¸å¼€å‘IDEã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="è¿œç¨‹è¿æ¥LinuxæœåŠ¡å™¨"><a href="#è¿œç¨‹è¿æ¥LinuxæœåŠ¡å™¨" class="headerlink" title="è¿œç¨‹è¿æ¥LinuxæœåŠ¡å™¨"></a>è¿œç¨‹è¿æ¥LinuxæœåŠ¡å™¨</h1><p>æˆ‘ä»¬è¦å¼€å‘Linuxå†…æ ¸ï¼Œå½“ç„¶æœ€å¥½è¿˜æ˜¯åœ¨Linuxä¸Šè¿›è¡Œï¼Œé™¤éä½ çš„ç¬”è®°æœ¬&#x2F;å°å¼æœºå°±æ˜¯Linuxç³»ç»Ÿï¼Œæˆ‘ä»¬æ›´å¤šçš„è¿˜æ˜¯ä½¿ç”¨Windows&#x2F;Macè¿æ¥æœåŠ¡å™¨æ¥å®Œæˆå¼€å‘å·¥ä½œã€‚</p>
<p>é€šè¿‡ä½¿ç”¨<a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-ssh">Remote - SSH</a>æ’ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åƒåœ¨æœ¬åœ°ä¸€æ ·ï¼Œåœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šè¿›è¡Œå¼€å‘ã€‚</p>
<p><strong>é…ç½®SSHè¿æ¥</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &lt;HOME&gt;/.ssh/config</span></span><br><span class="line"></span><br><span class="line">Host &lt;IP or hostname&gt;</span><br><span class="line">    HostName kernel-dev</span><br><span class="line">    User &lt;username&gt;</span><br></pre></td></tr></table></figure>

<h1 id="è®¾ç½®ä»£ç ç´¢å¼•å’Œä»£ç è¡¥å…¨"><a href="#è®¾ç½®ä»£ç ç´¢å¼•å’Œä»£ç è¡¥å…¨" class="headerlink" title="è®¾ç½®ä»£ç ç´¢å¼•å’Œä»£ç è¡¥å…¨"></a>è®¾ç½®ä»£ç ç´¢å¼•å’Œä»£ç è¡¥å…¨</h1><p>è¿™ä¸€ç›´æ˜¯å†…æ ¸å¼€å‘çš„è€å¤§éš¾é—®é¢˜ï¼Œå› ä¸ºå†…æ ¸æºç è¿‡äºåºå¤§ï¼Œä»¥å¾€çš„è¡¥å…¨æ–¹æ¡ˆï¼Œè¦ä¹ˆé€Ÿåº¦å¿«ï¼Œä½†ä¸ç²¾å‡†ï¼Œå¦‚ctags&#x2F;cscopeï¼›è¦ä¹ˆç²¾å‡†ï¼Œä½†é€Ÿåº¦æ…¢ï¼Œå¦‚C&#x2F;C++ IntelliSenseã€‚</p>
<p>ç„¶è€Œ<a href="https://marketplace.visualstudio.com/items?itemName=llvm-vs-code-extensions.vscode-clangd">clangd</a>æ’ä»¶çš„å‡ºç°ï¼Œéå¸¸å¥½çš„è§£å†³äº†é€Ÿåº¦å’Œç²¾ç¡®æ€§çš„é—®é¢˜ï¼Œä½†å®ƒæœ‰ä¸€ä¸ªå¼ºä¾èµ–ï¼šéœ€è¦ä½¿ç”¨<code>compile_commands.json</code>æ¥ç”Ÿæˆç´¢å¼•æ•°æ®ã€‚å¥½åœ¨å†…æ ¸æºç æ ‘ä¸­å·²ç»æœ‰å·¥å…·å¯ä»¥ä¸ºæˆ‘ä»¬ç”Ÿæˆ<code>compile_commands.json</code>ã€‚</p>
<ol>
<li><p>å®‰è£…clangd</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install clangd</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç”Ÿæˆ<code>compile_commands.json</code></p>
<p> é¦–å…ˆæˆ‘ä»¬éœ€è¦å¯¹å†…æ ¸æˆ–æ¨¡å—è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘æˆåŠŸåï¼Œåœ¨ç¼–è¯‘ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./scripts/clang-tools/gen_compile_commands.py</span><br></pre></td></tr></table></figure>

<p> æ‰“å¼€<code>compile_commands.json</code>ï¼Œç¡®è®¤ä¸ä¸ºç©ºã€‚</p>
</li>
<li><p>é…ç½®clangdæ’ä»¶</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Settings &gt; Remote &gt; Extensions &gt; clangd &gt; Arguments</span></span><br><span class="line"></span><br><span class="line">--compile-commands-dir=<span class="variable">$&#123;workspaceFolder&#125;</span></span><br><span class="line">--background-index</span><br><span class="line">--completion-style=detailed</span><br><span class="line">--header-insertion=never</span><br><span class="line">-<span class="built_in">log</span>=info</span><br><span class="line">-pretty</span><br><span class="line">-j=8</span><br></pre></td></tr></table></figure>

<p> æ³¨æ„æœ€åçš„<code>-j=8</code>æ˜¯clangdåœ¨ç”Ÿæˆç´¢å¼•æ‰€åˆ›å»ºçš„è¿›ç¨‹æ•°ï¼Œé€šå¸¸è®¾ç½®ä¸ºCPUæ•°é‡ã€‚</p>
</li>
<li><p>é…ç½®å·¥ç¨‹</p>
<p> å› ä¸ºclangdä½¿ç”¨clangæ¥ç¼–è¯‘æ¯ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæˆ‘ä»¬çš„å†…æ ¸æ˜¯ä½¿ç”¨GCCç¼–è¯‘çš„ï¼Œå°±ä¼šå­˜åœ¨ä¸€äº›clangæ— æ³•è¯†åˆ«çš„ç¼–è¯‘é€‰é¡¹ï¼Œè¿™äº›ç¼–è¯‘é€‰é¡¹é€šå¸¸æ˜¯ç”¨æ¥è¿›è¡Œä»£ç ä¼˜åŒ–çš„ï¼Œæ‰€ä»¥å»æ‰ä¹Ÿä¸ä¼šå½±å“ä»£ç ç´¢å¼•ã€‚</p>
<p> åœ¨VSCodeä¸­æ‰§è¡Œå‘½ä»¤<code>&gt;clangd: Open project configuration file</code>ï¼Œæ‰“å¼€<code>.clangd</code>æ–‡ä»¶ï¼ŒåŠ å…¥ä»¥ä¸‹å†…å®¹</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">CompileFlags:</span><br><span class="line">    Remove:</span><br><span class="line">        - -m*</span><br><span class="line">        - -f*</span><br></pre></td></tr></table></figure>
</li>
<li><p>é‡å¯clangd</p>
<p> åœ¨VSCodeä¸­æ‰§è¡Œå‘½ä»¤<code>&gt;clangd: Restart language server</code>ã€‚</p>
</li>
</ol>
<h1 id="é…ç½®æ±‡ç¼–ä»£ç é«˜äº®"><a href="#é…ç½®æ±‡ç¼–ä»£ç é«˜äº®" class="headerlink" title="é…ç½®æ±‡ç¼–ä»£ç é«˜äº®"></a>é…ç½®æ±‡ç¼–ä»£ç é«˜äº®</h1><p>åšå†…æ ¸å¼€å‘æ—¶ï¼Œéš¾å…ä¼šæ¶‰åŠåˆ°ä¸€äº›æ±‡ç¼–æ–‡ä»¶ï¼Œä½†æ˜¯VSCodeé»˜è®¤å¹¶ä¸å¯¹æ±‡ç¼–æ–‡ä»¶è¿›è¡Œé«˜äº®ï¼Œå› æ­¤éœ€è¦å®‰è£…æ’ä»¶æ¥è§£å†³ã€‚</p>
<ul>
<li><p>ARMæ±‡ç¼–: <a href="https://marketplace.visualstudio.com/items?itemName=dan-c-underwood.arm">Arm Assembly</a></p>
</li>
<li><p>X86æ±‡ç¼–: <a href="https://marketplace.visualstudio.com/items?itemName=13xforever.language-x86-64-assembly">x86 and x86_64 Assembly</a></p>
</li>
<li><p>MIPSæ±‡ç¼–: <a href="https://marketplace.visualstudio.com/items?itemName=AngaBlue.asm-formatter">MIPS Assembly Formatter</a></p>
</li>
<li><p>LoongArchæ±‡ç¼–: <a href="https://marketplace.visualstudio.com/items?itemName=FreeFlyingSheep.loongarch-assembly">LoongArch Assembly</a></p>
</li>
</ul>
<h1 id="æ˜¾ç¤ºä»£ç å†å²git-commit"><a href="#æ˜¾ç¤ºä»£ç å†å²git-commit" class="headerlink" title="æ˜¾ç¤ºä»£ç å†å²git commit"></a>æ˜¾ç¤ºä»£ç å†å²git commit</h1><p>ä½¿ç”¨<code>git blame</code>æ˜¯ç»å¸¸ä½¿ç”¨çš„â€œç”©é”…â€æ‰‹æ®µï¼Œé€šè¿‡<a href="https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens">GitLens</a>æ’ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å®æ—¶çœ‹åˆ°æ¯ä¸€è¡Œä»£ç æ¥è‡ªå“ªä¸ªcommitã€‚</p>
<h1 id="é…ç½®Vimå¿«æ·é”®"><a href="#é…ç½®Vimå¿«æ·é”®" class="headerlink" title="é…ç½®Vimå¿«æ·é”®"></a>é…ç½®Vimå¿«æ·é”®</h1><p>æˆ‘ä¸ªäººå¹¶ä¸æ˜¯Vimçš„ç‹‚çƒ­ç²‰ä¸ï¼Œä½†æ˜¯Vimçš„å¿«æ·é”®è®¾å®šï¼Œç¡®å®å¯ä»¥è®©æˆ‘åœ¨å¤§éƒ¨åˆ†æ—¶é—´è„±ç¦»é¼ æ ‡å’Œè§¦æ§æ¿ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚é€šè¿‡å®‰è£…<a href="https://marketplace.visualstudio.com/items?itemName=vscodevim.vim">Vim</a>æ’ä»¶ï¼Œå³å¯ç«‹å³äº«å—å¤§éƒ¨åˆ†Vimçš„å¿«æ·é”®æ“ä½œã€‚</p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://github.com/clangd/clangd/issues/662">https://github.com/clangd/clangd/issues/662</a></p>
<p><a href="https://stackoverflow.com/questions/49198816/how-to-use-the-visual-studio-code-to-navigate-linux-kernel-source">https://stackoverflow.com/questions/49198816/how-to-use-the-visual-studio-code-to-navigate-linux-kernel-source</a></p>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>kernel</tag>
        <tag>vscode</tag>
      </tags>
  </entry>
  <entry>
    <title>éƒ¨ç½²ç§æœ‰IPTVæµåª’ä½“æœåŠ¡</title>
    <url>/2025/01/25/setup-self-hosted-iptv-service.html</url>
    <content><![CDATA[<blockquote>
<p>æœ€è¿‘æœ‰ä¸€å¤§æ‰¹IPv6çš„ç›´æ’­æºè¢«å°ï¼Œæ— å¥ˆéœ€è¦å¯»æ‰¾å…¶ä»–æ›´æµç•…ã€æ›´ç¨³å®šçš„æºï¼Œç»“æœå‘ç°äº†ä¸€ä¸ªå…¨æ–°çš„é¢†åŸŸï¼šéƒ¨ç½²ç§æœ‰IPTVæµåª’ä½“æœåŠ¡ï¼Œæ¯”å¦‚pixmanï¼Œallinoneç­‰ï¼Œæœ¬æ–‡ä¼šä»‹ç»å¸‚é¢ä¸»æµçš„æœåŠ¡éƒ¨ç½²æ–¹å¼ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="Pixman"><a href="#Pixman" class="headerlink" title="Pixman"></a>Pixman</h1><p>å®˜ç½‘ï¼š<a href="https://pixman.io/">https://pixman.io/</a></p>
<p>TGï¼š<a href="https://t.me/livednowgroup">https://t.me/livednowgroup</a></p>
<p>ç”±äºè¯¥é¡¹ç›®çŸ­æœŸå†…ä¸ä¼šç»´æŠ¤ï¼Œå·²ç»æ— æ³•æ­£å¸¸æ’­æ”¾ã€‚</p>
<h1 id="Allinone"><a href="#Allinone" class="headerlink" title="Allinone"></a>Allinone</h1><p>å®˜ç½‘ï¼š<a href="https://pan.v1.mk/">https://pan.v1.mk/</a></p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pan.v1.mk/%E6%AF%8F%E6%9C%9F%E8%A7%86%E9%A2%91%E4%B8%AD%E7%94%A8%E5%88%B0%E7%9A%84%E6%96%87%E4%BB%B6%E5%88%86%E4%BA%AB/allinone%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6/%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E.md">https://pan.v1.mk/æ¯æœŸè§†é¢‘ä¸­ç”¨åˆ°çš„æ–‡ä»¶åˆ†äº«/allinoneäºŒè¿›åˆ¶æ–‡ä»¶/ä½¿ç”¨è¯´æ˜.md</a></p>
<p>TGï¼š<a href="https://t.me/feiyangdigital">https://t.me/feiyangdigital</a></p>
<ol>
<li><p>ç”Ÿæˆéƒ¨ç½²å‘½ä»¤</p>
<p> <a href="https://imgtool.v1.mk/allinone.html">https://imgtool.v1.mk/allinone.html</a></p>
</li>
<li><p>ä½¿ç”¨watchtowerè‡ªåŠ¨æ›´æ–°å®¹å™¨</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d --name watchtower --restart=always -v /var/run/docker.sock:/var/run/docker.sock containrrr/watchtower --cleanup --interval 3600</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸‹è½½m3uåˆ—è¡¨</p>
<p> http:&#x2F;&#x2F;ä½ çš„IP:35455&#x2F;tv.m3u</p>
</li>
<li><p>ä½¿ç”¨æ ¼å¼åŒ–å·¥å…·æ•´ç†é¢‘é“åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰</p>
<p> <a href="https://github.com/FanchangWang/allinone_format">https://github.com/FanchangWang/allinone_format</a></p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d --restart=unless-stopped --pull=always -v /etc/allinone_format:/app/config -p 35456:35456 --name allinone_format yuexuangu/allinone_format:latest</span><br></pre></td></tr></table></figure>

<p> http:&#x2F;&#x2F;ä½ çš„IP:35456&#x2F;</p>
</li>
</ol>
<h1 id="Doube"><a href="#Doube" class="headerlink" title="Doube"></a>Doube</h1><p>TG: <a href="https://t.me/doubebly003">https://t.me/doubebly003</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d --name=doube-itv  --restart=always -p 50001:5000 doubebly/doube-itv:latest</span><br></pre></td></tr></table></figure>

<p>http:&#x2F;&#x2F;ä½ çš„IP:50001&#x2F;help</p>
<h1 id="PG"><a href="#PG" class="headerlink" title="PG"></a>PG</h1><p>TG: <a href="https://t.me/PandaGroovePG">https://t.me/PandaGroovePG</a></p>
<p>PGéœ€è¦è¿›å…¥TGå‘å¸ƒç¾¤ç»„åï¼Œæ‰‹åŠ¨ä¸‹è½½è½¯ä»¶åŒ…éƒ¨ç½²ã€‚</p>
]]></content>
      <categories>
        <category>Geek</category>
        <category>How-To</category>
      </categories>
      <tags>
        <tag>media</tag>
        <tag>nas</tag>
        <tag>iptv</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨Linuxä¸Šéƒ¨ç½²Webæ–‡ä»¶ç®¡ç†å™¨</title>
    <url>/2025/05/12/deploy-web-file-manager-on-linux.html</url>
    <content><![CDATA[<blockquote>
<p>LinuxæœåŠ¡å™¨çš„æ–‡ä»¶ç®¡ç†é€šå¸¸ä¾èµ–sftpæˆ–sambaï¼Œå½“ç½‘ç»œç¯å¢ƒè¾ƒå·®æ—¶ï¼Œæ“ä½œå»¶è¿Ÿä¼šå˜å¾—éå¸¸å¤§ï¼Œç”šè‡³å¯¼è‡´æ–‡ä»¶æŸåï¼Œé€šè¿‡éƒ¨ç½²åŸºäºæµè§ˆå™¨çš„æ–‡ä»¶ç®¡ç†æœåŠ¡ï¼Œå¯ä»¥å¤§å¤§ä¼˜åŒ–è¿œç¨‹æ–‡ä»¶ç®¡ç†çš„ä½“éªŒã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="å®‰è£…FileBrowser"><a href="#å®‰è£…FileBrowser" class="headerlink" title="å®‰è£…FileBrowser"></a>å®‰è£…FileBrowser</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -fsSL https://raw.githubusercontent.com/filebrowser/get/master/get.sh | bash</span><br></pre></td></tr></table></figure>

<h1 id="é…ç½®Systemd"><a href="#é…ç½®Systemd" class="headerlink" title="é…ç½®Systemd"></a>é…ç½®Systemd</h1><p>åªéœ€ä¿®æ”¹<code>WorkingDirectory</code>ä¸ºéœ€è¦ç®¡ç†çš„ç›®å½•å³å¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[Service]</span><br><span class="line">WorkingDirectory=/mnt</span><br><span class="line">ExecStart=/usr/local/bin/filebrowser -a 0.0.0.0</span><br><span class="line">Restart=always</span><br><span class="line">StandardOutput=syslog</span><br><span class="line">StandardError=syslog</span><br><span class="line">SyslogIdentifier=filebrowser</span><br><span class="line">User=root</span><br><span class="line">Group=root</span><br><span class="line">Environment=</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a href="https://filebrowser.org/installation">https://filebrowser.org/installation</a></p>
]]></content>
      <categories>
        <category>How-To</category>
      </categories>
  </entry>
</search>
